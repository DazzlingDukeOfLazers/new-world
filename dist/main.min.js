/*
 *	jQuery elevateZoom 3.0.8
 *	Demo's and documentation:
 *	www.elevateweb.co.uk/image-zoom
 *
 *	Copyright (c) 2012 Andrew Eades
 *	www.elevateweb.co.uk
 *
 *	Dual licensed under the GPL and MIT licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 *

/*
 *	jQuery elevateZoom 3.0.3
 *	Demo's and documentation:
 *	www.elevateweb.co.uk/image-zoom
 *
 *	Copyright (c) 2012 Andrew Eades
 *	www.elevateweb.co.uk
 *
 *	Dual licensed under the GPL and MIT licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */


if ( typeof Object.create !== 'function' ) {
	Object.create = function( obj ) {
		function F() {};
		F.prototype = obj;
		return new F();
	};
}

(function( $, window, document, undefined ) {
	var ElevateZoom = {
			init: function( options, elem ) {
				var self = this;

				self.elem = elem;
				self.$elem = $( elem );

				self.imageSrc = self.$elem.data("zoom-image") ? self.$elem.data("zoom-image") : self.$elem.attr("src");

				self.options = $.extend( {}, $.fn.elevateZoom.options, options );

				//TINT OVERRIDE SETTINGS
				if(self.options.tint) {
					self.options.lensColour = "none", //colour of the lens background
					self.options.lensOpacity =  "1" //opacity of the lens
				}
				//INNER OVERRIDE SETTINGS
				if(self.options.zoomType == "inner") {self.options.showLens = false;}


				//Remove alt on hover

				self.$elem.parent().removeAttr('title').removeAttr('alt');

				self.zoomImage = self.imageSrc;

				self.refresh( 1 );



				//Create the image swap from the gallery 
				$('#'+self.options.gallery + ' a').click( function(e) { 

					//Set a class on the currently active gallery image
					if(self.options.galleryActiveClass){
						$('#'+self.options.gallery + ' a').removeClass(self.options.galleryActiveClass);
						$(this).addClass(self.options.galleryActiveClass);
					}
					//stop any link on the a tag from working
					e.preventDefault();

					//call the swap image function            
					if($(this).data("zoom-image")){self.zoomImagePre = $(this).data("zoom-image")}
					else{self.zoomImagePre = $(this).data("image");}
					self.swaptheimage($(this).data("image"), self.zoomImagePre);
					return false;
				});

			},

			refresh: function( length ) {
				var self = this;

				setTimeout(function() {
					self.fetch(self.imageSrc);

				}, length || self.options.refresh );
			},

			fetch: function(imgsrc) {
				//get the image
				var self = this;
				var newImg = new Image();
				newImg.onload = function() {
					//set the large image dimensions - used to calculte ratio's
					self.largeWidth = newImg.width;
					self.largeHeight = newImg.height;
					//once image is loaded start the calls
					self.startZoom();
					self.currentImage = self.imageSrc;
					//let caller know image has been loaded
					self.options.onZoomedImageLoaded(self.$elem);
				}
				newImg.src = imgsrc; // this must be done AFTER setting onload

				return;

			},

			startZoom: function( ) {
				var self = this;
				//get dimensions of the non zoomed image
				self.nzWidth = self.$elem.width();
				self.nzHeight = self.$elem.height();

				//activated elements
				self.isWindowActive = false;
				self.isLensActive = false;
				self.isTintActive = false;
				self.overWindow = false;    

				//CrossFade Wrappe
				if(self.options.imageCrossfade){
					self.zoomWrap = self.$elem.wrap('<div style="height:'+self.nzHeight+'px;width:'+self.nzWidth+'px;" class="zoomWrapper" />');        
					self.$elem.css('position', 'absolute'); 
				}

				self.zoomLock = 1;
				self.scrollingLock = false;
				self.changeBgSize = false;
				self.currentZoomLevel = self.options.zoomLevel;


				//get offset of the non zoomed image
				self.nzOffset = self.$elem.offset();
				//calculate the width ratio of the large/small image
				self.widthRatio = (self.largeWidth/self.currentZoomLevel) / self.nzWidth;
				self.heightRatio = (self.largeHeight/self.currentZoomLevel) / self.nzHeight; 


				//if window zoom        
				if(self.options.zoomType == "window") {
					self.zoomWindowStyle = "overflow: hidden;"
						+ "background-position: 0px 0px;text-align:center;"  
						+ "background-color: " + String(self.options.zoomWindowBgColour)            
						+ ";width: " + String(self.options.zoomWindowWidth) + "px;"
						+ "height: " + String(self.options.zoomWindowHeight)
						+ "px;float: left;"
						+ "background-size: "+ self.largeWidth/self.currentZoomLevel+ "px " +self.largeHeight/self.currentZoomLevel + "px;"
						+ "display: none;z-index:100;"
						+ "border: " + String(self.options.borderSize) 
						+ "px solid " + self.options.borderColour 
						+ ";background-repeat: no-repeat;"
						+ "position: absolute;";
				}    


				//if inner  zoom    
				if(self.options.zoomType == "inner") {
					//has a border been put on the image? Lets cater for this

					var borderWidth = self.$elem.css("border-left-width");

					self.zoomWindowStyle = "overflow: hidden;"
						+ "margin-left: " + String(borderWidth) + ";" 
						+ "margin-top: " + String(borderWidth) + ";"         
						+ "background-position: 0px 0px;"
						+ "width: " + String(self.nzWidth) + "px;"
						+ "height: " + String(self.nzHeight) + "px;"
						+ "px;float: left;"
						+ "display: none;"
						+ "cursor:"+(self.options.cursor)+";"
						+ "px solid " + self.options.borderColour 
						+ ";background-repeat: no-repeat;"
						+ "position: absolute;";
				}    



				//lens style for window zoom
				if(self.options.zoomType == "window") {


					// adjust images less than the window height

					if(self.nzHeight < self.options.zoomWindowWidth/self.widthRatio){
						lensHeight = self.nzHeight;              
					}
					else{
						lensHeight = String((self.options.zoomWindowHeight/self.heightRatio))
					}
					if(self.largeWidth < self.options.zoomWindowWidth){
						lensWidth = self.nzWidth;
					}       
					else{
						lensWidth =  (self.options.zoomWindowWidth/self.widthRatio);
					}


					self.lensStyle = "background-position: 0px 0px;width: " + String((self.options.zoomWindowWidth)/self.widthRatio) + "px;height: " + String((self.options.zoomWindowHeight)/self.heightRatio)
					+ "px;float: right;display: none;"
					+ "overflow: hidden;"
					+ "z-index: 999;"   
					+ "-webkit-transform: translateZ(0);"               
					+ "opacity:"+(self.options.lensOpacity)+";filter: alpha(opacity = "+(self.options.lensOpacity*100)+"); zoom:1;"
					+ "width:"+lensWidth+"px;"
					+ "height:"+lensHeight+"px;"
					+ "background-color:"+(self.options.lensColour)+";"					
					+ "cursor:"+(self.options.cursor)+";"
					+ "border: "+(self.options.lensBorderSize)+"px" +
					" solid "+(self.options.lensBorderColour)+";background-repeat: no-repeat;position: absolute;";
				} 


				//tint style
				self.tintStyle = "display: block;"
					+ "position: absolute;"
					+ "background-color: "+self.options.tintColour+";"	
					+ "filter:alpha(opacity=0);"		
					+ "opacity: 0;"	
					+ "width: " + self.nzWidth + "px;"
					+ "height: " + self.nzHeight + "px;"

					;

				//lens style for lens zoom with optional round for modern browsers
				self.lensRound = '';

				if(self.options.zoomType == "lens") {

					self.lensStyle = "background-position: 0px 0px;"
						+ "float: left;display: none;"
						+ "border: " + String(self.options.borderSize) + "px solid " + self.options.borderColour+";"
						+ "width:"+ String(self.options.lensSize) +"px;"
						+ "height:"+ String(self.options.lensSize)+"px;"
						+ "background-repeat: no-repeat;position: absolute;";


				}


				//does not round in all browsers
				if(self.options.lensShape == "round") {
					self.lensRound = "border-top-left-radius: " + String(self.options.lensSize / 2 + self.options.borderSize) + "px;"
					+ "border-top-right-radius: " + String(self.options.lensSize / 2 + self.options.borderSize) + "px;"
					+ "border-bottom-left-radius: " + String(self.options.lensSize / 2 + self.options.borderSize) + "px;"
					+ "border-bottom-right-radius: " + String(self.options.lensSize / 2 + self.options.borderSize) + "px;";

				}

				//create the div's                                                + ""
				//self.zoomContainer = $('<div/>').addClass('zoomContainer').css({"position":"relative", "height":self.nzHeight, "width":self.nzWidth});

				self.zoomContainer = $('<div class="zoomContainer" style="-webkit-transform: translateZ(0);position:absolute;left:'+self.nzOffset.left+'px;top:'+self.nzOffset.top+'px;height:'+self.nzHeight+'px;width:'+self.nzWidth+'px;"></div>');
				$('body').append(self.zoomContainer);	


				//this will add overflow hidden and contrain the lens on lens mode       
				if(self.options.containLensZoom && self.options.zoomType == "lens"){
					self.zoomContainer.css("overflow", "hidden");
				}
				if(self.options.zoomType != "inner") {
					self.zoomLens = $("<div class='zoomLens' style='" + self.lensStyle + self.lensRound +"'>&nbsp;</div>")
					.appendTo(self.zoomContainer)
					.click(function () {
						self.$elem.trigger('click');
					});


					if(self.options.tint) {
						self.tintContainer = $('<div/>').addClass('tintContainer');	
						self.zoomTint = $("<div class='zoomTint' style='"+self.tintStyle+"'></div>");


						self.zoomLens.wrap(self.tintContainer);


						self.zoomTintcss = self.zoomLens.after(self.zoomTint);	

						//if tint enabled - set an image to show over the tint

						self.zoomTintImage = $('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: '+self.nzWidth+'px; height: '+self.nzHeight+'px;" src="'+self.imageSrc+'">')
						.appendTo(self.zoomLens)
						.click(function () {

							self.$elem.trigger('click');
						});

					}          

				}







				//create zoom window 
				if(isNaN(self.options.zoomWindowPosition)){
					self.zoomWindow = $("<div style='z-index:999;left:"+(self.windowOffsetLeft)+"px;top:"+(self.windowOffsetTop)+"px;" + self.zoomWindowStyle + "' class='zoomWindow'>&nbsp;</div>")
					.appendTo('body')
					.click(function () {
						self.$elem.trigger('click');
					});
				}else{
					self.zoomWindow = $("<div style='z-index:999;left:"+(self.windowOffsetLeft)+"px;top:"+(self.windowOffsetTop)+"px;" + self.zoomWindowStyle + "' class='zoomWindow'>&nbsp;</div>")
					.appendTo(self.zoomContainer)
					.click(function () {
						self.$elem.trigger('click');
					});
				}              
				self.zoomWindowContainer = $('<div/>').addClass('zoomWindowContainer').css("width",self.options.zoomWindowWidth);
				self.zoomWindow.wrap(self.zoomWindowContainer);


				//  self.captionStyle = "text-align: left;background-color: black;color: white;font-weight: bold;padding: 10px;font-family: sans-serif;font-size: 11px";                                                                                                                                                                                                                                          
				// self.zoomCaption = $('<div class="elevatezoom-caption" style="'+self.captionStyle+'display: block; width: 280px;">INSERT ALT TAG</div>').appendTo(self.zoomWindow.parent());

				if(self.options.zoomType == "lens") {
					self.zoomLens.css({ backgroundImage: "url('" + self.imageSrc + "')" }); 
				}
				if(self.options.zoomType == "window") {
					self.zoomWindow.css({ backgroundImage: "url('" + self.imageSrc + "')" }); 
				}
				if(self.options.zoomType == "inner") {
					self.zoomWindow.css({ backgroundImage: "url('" + self.imageSrc + "')" }); 
				}
				/*-------------------END THE ZOOM WINDOW AND LENS----------------------------------*/
				//touch events
				self.$elem.bind('touchmove', function(e){    
					e.preventDefault();
					var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];  
					self.setPosition(touch);

				});  
				self.zoomContainer.bind('touchmove', function(e){ 
					if(self.options.zoomType == "inner") {
						self.showHideWindow("show");

					}
					e.preventDefault();
					var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];  
					self.setPosition(touch); 

				});  	
				self.zoomContainer.bind('touchend', function(e){ 
					self.showHideWindow("hide");
					if(self.options.showLens) {self.showHideLens("hide");}
					if(self.options.tint && self.options.zoomType != "inner") {self.showHideTint("hide");}
				});  	

				self.$elem.bind('touchend', function(e){ 
					self.showHideWindow("hide");
					if(self.options.showLens) {self.showHideLens("hide");}
					if(self.options.tint && self.options.zoomType != "inner") {self.showHideTint("hide");}
				});  	
				if(self.options.showLens) {
					self.zoomLens.bind('touchmove', function(e){ 

						e.preventDefault();
						var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];  
						self.setPosition(touch); 
					});    


					self.zoomLens.bind('touchend', function(e){ 
						self.showHideWindow("hide");
						if(self.options.showLens) {self.showHideLens("hide");}
						if(self.options.tint && self.options.zoomType != "inner") {self.showHideTint("hide");}
					});  
				}
				//Needed to work in IE
				self.$elem.bind('mousemove', function(e){   
					if(self.overWindow == false){self.setElements("show");}
					//make sure on orientation change the setposition is not fired
					if(self.lastX !== e.clientX || self.lastY !== e.clientY){
						self.setPosition(e);
						self.currentLoc = e;
					}   
					self.lastX = e.clientX;
					self.lastY = e.clientY;    

				});  	

				self.zoomContainer.bind('mousemove', function(e){ 

					if(self.overWindow == false){self.setElements("show");} 

					//make sure on orientation change the setposition is not fired 
					if(self.lastX !== e.clientX || self.lastY !== e.clientY){
						self.setPosition(e);
						self.currentLoc = e;
					}   
					self.lastX = e.clientX;
					self.lastY = e.clientY;    
				});  	
				if(self.options.zoomType != "inner") {
					self.zoomLens.bind('mousemove', function(e){      
						//make sure on orientation change the setposition is not fired
						if(self.lastX !== e.clientX || self.lastY !== e.clientY){
							self.setPosition(e);
							self.currentLoc = e;
						}   
						self.lastX = e.clientX;
						self.lastY = e.clientY;    
					});
				}
				if(self.options.tint && self.options.zoomType != "inner") {
					self.zoomTint.bind('mousemove', function(e){ 
						//make sure on orientation change the setposition is not fired
						if(self.lastX !== e.clientX || self.lastY !== e.clientY){
							self.setPosition(e);
							self.currentLoc = e;
						}   
						self.lastX = e.clientX;
						self.lastY = e.clientY;    
					});

				}
				if(self.options.zoomType == "inner") {
					self.zoomWindow.bind('mousemove', function(e) {
						//self.overWindow = true;
						//make sure on orientation change the setposition is not fired
						if(self.lastX !== e.clientX || self.lastY !== e.clientY){
							self.setPosition(e);
							self.currentLoc = e;
						}   
						self.lastX = e.clientX;
						self.lastY = e.clientY;    
					});

				}


				//  lensFadeOut: 500,  zoomTintFadeIn
				self.zoomContainer.add(self.$elem).mouseenter(function(){

					if(self.overWindow == false){self.setElements("show");} 


				}).mouseleave(function(){
					if(!self.scrollLock){
						self.setElements("hide");
            self.options.onDestroy(self.$elem);
					}
				});
				//end ove image





				if(self.options.zoomType != "inner") {
					self.zoomWindow.mouseenter(function(){
						self.overWindow = true;   
						self.setElements("hide");                  
					}).mouseleave(function(){

						self.overWindow = false;
					});
				}
				//end ove image



//				var delta = parseInt(e.originalEvent.wheelDelta || -e.originalEvent.detail);

				//      $(this).empty();    
				//    return false;

				//fix for initial zoom setting
				if (self.options.zoomLevel != 1){
					//	self.changeZoomLevel(self.currentZoomLevel);
				}
				//set the min zoomlevel
				if(self.options.minZoomLevel){
					self.minZoomLevel = self.options.minZoomLevel;
				}
				else{
					self.minZoomLevel = self.options.scrollZoomIncrement * 2;
				}


				if(self.options.scrollZoom){


					self.zoomContainer.add(self.$elem).bind('mousewheel DOMMouseScroll MozMousePixelScroll', function(e){


//						in IE there is issue with firing of mouseleave - So check whether still scrolling
//						and on mouseleave check if scrolllock          
						self.scrollLock = true;
						clearTimeout($.data(this, 'timer'));
						$.data(this, 'timer', setTimeout(function() {
							self.scrollLock = false;
							//do something
						}, 250));

						var theEvent = e.originalEvent.wheelDelta || e.originalEvent.detail*-1


						//this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
						//   e.preventDefault();


						e.stopImmediatePropagation();
						e.stopPropagation();
						e.preventDefault();


						if(theEvent /120 > 0) {
							//scrolling up
							if(self.currentZoomLevel >= self.minZoomLevel){ 
								self.changeZoomLevel(self.currentZoomLevel-self.options.scrollZoomIncrement);        
							}

						}
						else{
							//scrolling down


							if(self.options.maxZoomLevel){
								if(self.currentZoomLevel <= self.options.maxZoomLevel){           
									self.changeZoomLevel(parseFloat(self.currentZoomLevel)+self.options.scrollZoomIncrement);
								}
							}
							else{
								//andy 

								self.changeZoomLevel(parseFloat(self.currentZoomLevel)+self.options.scrollZoomIncrement);
							}

						}
						return false;
					});
				}


			},
			setElements: function(type) {
				var self = this;
        if(!self.options.zoomEnabled){return false;}
				if(type=="show"){
					if(self.isWindowSet){
						if(self.options.zoomType == "inner") {self.showHideWindow("show");}
						if(self.options.zoomType == "window") {self.showHideWindow("show");}
						if(self.options.showLens) {self.showHideLens("show");}
						if(self.options.tint && self.options.zoomType != "inner") {self.showHideTint("show");
						}
					}
				}

				if(type=="hide"){
					if(self.options.zoomType == "window") {self.showHideWindow("hide");}
					if(!self.options.tint) {self.showHideWindow("hide");}
					if(self.options.showLens) {self.showHideLens("hide");}
					if(self.options.tint) {	self.showHideTint("hide");}
				}   
			},
			setPosition: function(e) {
      
				var self = this;
        
        if(!self.options.zoomEnabled){return false;}

				//recaclc offset each time in case the image moves
				//this can be caused by other on page elements
				self.nzHeight = self.$elem.height();
				self.nzWidth = self.$elem.width();
				self.nzOffset = self.$elem.offset();

				if(self.options.tint && self.options.zoomType != "inner") {
					self.zoomTint.css({ top: 0});
					self.zoomTint.css({ left: 0});
				}
				//set responsive       
				//will checking if the image needs changing before running this code work faster?
				if(self.options.responsive && !self.options.scrollZoom){
					if(self.options.showLens){ 
						if(self.nzHeight < self.options.zoomWindowWidth/self.widthRatio){
							lensHeight = self.nzHeight;              
						}
						else{
							lensHeight = String((self.options.zoomWindowHeight/self.heightRatio))
						}
						if(self.largeWidth < self.options.zoomWindowWidth){
							lensWidth = self.nzWidth;
						}       
						else{
							lensWidth =  (self.options.zoomWindowWidth/self.widthRatio);
						}
						self.widthRatio = self.largeWidth / self.nzWidth;
						self.heightRatio = self.largeHeight / self.nzHeight;        
						if(self.options.zoomType != "lens") {


							//possibly dont need to keep recalcalculating
							//if the lens is heigher than the image, then set lens size to image size
							if(self.nzHeight < self.options.zoomWindowWidth/self.widthRatio){
								lensHeight = self.nzHeight;  

							}
							else{
								lensHeight = String((self.options.zoomWindowHeight/self.heightRatio))
							}

							if(self.nzWidth < self.options.zoomWindowHeight/self.heightRatio){
								lensWidth = self.nzWidth;
							}       
							else{
								lensWidth =  String((self.options.zoomWindowWidth/self.widthRatio));
							}            

							self.zoomLens.css('width', lensWidth);    
							self.zoomLens.css('height', lensHeight); 

							if(self.options.tint){    
								self.zoomTintImage.css('width', self.nzWidth);    
								self.zoomTintImage.css('height', self.nzHeight); 
							}

						}                     
						if(self.options.zoomType == "lens") {  

							self.zoomLens.css({ width: String(self.options.lensSize) + 'px', height: String(self.options.lensSize) + 'px' })      


						}        
						//end responsive image change
					}
				}

				//container fix
				self.zoomContainer.css({ top: self.nzOffset.top});
				self.zoomContainer.css({ left: self.nzOffset.left});
				self.mouseLeft = parseInt(e.pageX - self.nzOffset.left);
				self.mouseTop = parseInt(e.pageY - self.nzOffset.top);
				//calculate the Location of the Lens

				//calculate the bound regions - but only if zoom window
				if(self.options.zoomType == "window") {
					self.Etoppos = (self.mouseTop < (self.zoomLens.height()/2));
					self.Eboppos = (self.mouseTop > self.nzHeight - (self.zoomLens.height()/2)-(self.options.lensBorderSize*2));
					self.Eloppos = (self.mouseLeft < 0+((self.zoomLens.width()/2))); 
					self.Eroppos = (self.mouseLeft > (self.nzWidth - (self.zoomLens.width()/2)-(self.options.lensBorderSize*2)));  
				}
				//calculate the bound regions - but only for inner zoom
				if(self.options.zoomType == "inner"){ 
					self.Etoppos = (self.mouseTop < ((self.nzHeight/2)/self.heightRatio) );
					self.Eboppos = (self.mouseTop > (self.nzHeight - ((self.nzHeight/2)/self.heightRatio)));
					self.Eloppos = (self.mouseLeft < 0+(((self.nzWidth/2)/self.widthRatio)));
					self.Eroppos = (self.mouseLeft > (self.nzWidth - (self.nzWidth/2)/self.widthRatio-(self.options.lensBorderSize*2)));  
				}

				// if the mouse position of the slider is one of the outerbounds, then hide  window and lens
				if (self.mouseLeft < 0 || self.mouseTop < 0 || self.mouseLeft > self.nzWidth || self.mouseTop > self.nzHeight ) {				          
					self.setElements("hide");
					return;
				}
				//else continue with operations
				else {


					//lens options
					if(self.options.showLens) {
						//		self.showHideLens("show");
						//set background position of lens
						self.lensLeftPos = String(Math.floor(self.mouseLeft - self.zoomLens.width() / 2));
						self.lensTopPos = String(Math.floor(self.mouseTop - self.zoomLens.height() / 2));


					}
					//adjust the background position if the mouse is in one of the outer regions 

					//Top region
					if(self.Etoppos){
						self.lensTopPos = 0;
					}
					//Left Region
					if(self.Eloppos){
						self.windowLeftPos = 0;
						self.lensLeftPos = 0;
						self.tintpos=0;
					}     
					//Set bottom and right region for window mode
					if(self.options.zoomType == "window") {
						if(self.Eboppos){
							self.lensTopPos = Math.max( (self.nzHeight)-self.zoomLens.height()-(self.options.lensBorderSize*2), 0 );
						} 
						if(self.Eroppos){
							self.lensLeftPos = (self.nzWidth-(self.zoomLens.width())-(self.options.lensBorderSize*2));
						}  
					}  
					//Set bottom and right region for inner mode
					if(self.options.zoomType == "inner") {
						if(self.Eboppos){
							self.lensTopPos = Math.max( ((self.nzHeight)-(self.options.lensBorderSize*2)), 0 );
						} 
						if(self.Eroppos){
							self.lensLeftPos = (self.nzWidth-(self.nzWidth)-(self.options.lensBorderSize*2));
						}  

					}
					//if lens zoom
					if(self.options.zoomType == "lens") {  
						self.windowLeftPos = String(((e.pageX - self.nzOffset.left) * self.widthRatio - self.zoomLens.width() / 2) * (-1));   
						self.windowTopPos = String(((e.pageY - self.nzOffset.top) * self.heightRatio - self.zoomLens.height() / 2) * (-1));

						self.zoomLens.css({ backgroundPosition: self.windowLeftPos + 'px ' + self.windowTopPos + 'px' });

						if(self.changeBgSize){  

							if(self.nzHeight>self.nzWidth){  
								if(self.options.zoomType == "lens"){       
									self.zoomLens.css({ "background-size": self.largeWidth/self.newvalueheight + 'px ' + self.largeHeight/self.newvalueheight + 'px' });
								}   

								self.zoomWindow.css({ "background-size": self.largeWidth/self.newvalueheight + 'px ' + self.largeHeight/self.newvalueheight + 'px' });
							}
							else{     
								if(self.options.zoomType == "lens"){       
									self.zoomLens.css({ "background-size": self.largeWidth/self.newvaluewidth + 'px ' + self.largeHeight/self.newvaluewidth + 'px' });
								}   
								self.zoomWindow.css({ "background-size": self.largeWidth/self.newvaluewidth + 'px ' + self.largeHeight/self.newvaluewidth + 'px' });            
							}
							self.changeBgSize = false;
						}    

						self.setWindowPostition(e);  
					}
					//if tint zoom   
					if(self.options.tint && self.options.zoomType != "inner") {
						self.setTintPosition(e);

					}
					//set the css background position 
					if(self.options.zoomType == "window") {
						self.setWindowPostition(e);   
					}
					if(self.options.zoomType == "inner") {
						self.setWindowPostition(e);   
					}
					if(self.options.showLens) {

						if(self.fullwidth && self.options.zoomType != "lens"){
							self.lensLeftPos = 0;

						}
						self.zoomLens.css({ left: self.lensLeftPos + 'px', top: self.lensTopPos + 'px' })  
					}

				} //end else



			},
			showHideWindow: function(change) {
				var self = this;              
				if(change == "show"){      
					if(!self.isWindowActive){
						if(self.options.zoomWindowFadeIn){
							self.zoomWindow.stop(true, true, false).fadeIn(self.options.zoomWindowFadeIn);
						}
						else{self.zoomWindow.show();}
						self.isWindowActive = true;
					}            
				}
				if(change == "hide"){
					if(self.isWindowActive){
						if(self.options.zoomWindowFadeOut){
							self.zoomWindow.stop(true, true).fadeOut(self.options.zoomWindowFadeOut, function () {
								if (self.loop) {
									//stop moving the zoom window when zoom window is faded out
									clearInterval(self.loop);
									self.loop = false;
								}
							});
						}
						else{self.zoomWindow.hide();}
						self.isWindowActive = false;        
					}      
				}
			},
			showHideLens: function(change) {
				var self = this;              
				if(change == "show"){      
					if(!self.isLensActive){
						if(self.options.lensFadeIn){
							self.zoomLens.stop(true, true, false).fadeIn(self.options.lensFadeIn);
						}
						else{self.zoomLens.show();}
						self.isLensActive = true;
					}            
				}
				if(change == "hide"){
					if(self.isLensActive){
						if(self.options.lensFadeOut){
							self.zoomLens.stop(true, true).fadeOut(self.options.lensFadeOut);
						}
						else{self.zoomLens.hide();}
						self.isLensActive = false;        
					}      
				}
			},
			showHideTint: function(change) {
				var self = this;              
				if(change == "show"){      
					if(!self.isTintActive){

						if(self.options.zoomTintFadeIn){
							self.zoomTint.css({opacity:self.options.tintOpacity}).animate().stop(true, true).fadeIn("slow");
						}
						else{
							self.zoomTint.css({opacity:self.options.tintOpacity}).animate();
							self.zoomTint.show();


						}
						self.isTintActive = true;
					}            
				}
				if(change == "hide"){      
					if(self.isTintActive){ 

						if(self.options.zoomTintFadeOut){
							self.zoomTint.stop(true, true).fadeOut(self.options.zoomTintFadeOut);
						}
						else{self.zoomTint.hide();}
						self.isTintActive = false;        
					}      
				}
			},
			setLensPostition: function( e ) {


			},
			setWindowPostition: function( e ) {
				//return obj.slice( 0, count );
				var self = this;

				if(!isNaN(self.options.zoomWindowPosition)){

					switch (self.options.zoomWindowPosition) { 
					case 1: //done         
						self.windowOffsetTop = (self.options.zoomWindowOffety);//DONE - 1
						self.windowOffsetLeft =(+self.nzWidth); //DONE 1, 2, 3, 4, 16
						break;
					case 2:
						if(self.options.zoomWindowHeight > self.nzHeight){ //positive margin

							self.windowOffsetTop = ((self.options.zoomWindowHeight/2)-(self.nzHeight/2))*(-1);
							self.windowOffsetLeft =(self.nzWidth); //DONE 1, 2, 3, 4, 16
						}
						else{ //negative margin

						}
						break;
					case 3: //done        
						self.windowOffsetTop = (self.nzHeight - self.zoomWindow.height() - (self.options.borderSize*2)); //DONE 3,9
						self.windowOffsetLeft =(self.nzWidth); //DONE 1, 2, 3, 4, 16
						break;      
					case 4: //done  
						self.windowOffsetTop = (self.nzHeight); //DONE - 4,5,6,7,8
						self.windowOffsetLeft =(self.nzWidth); //DONE 1, 2, 3, 4, 16
						break;
					case 5: //done  
						self.windowOffsetTop = (self.nzHeight); //DONE - 4,5,6,7,8
						self.windowOffsetLeft =(self.nzWidth-self.zoomWindow.width()-(self.options.borderSize*2)); //DONE - 5,15
						break;
					case 6: 
						if(self.options.zoomWindowHeight > self.nzHeight){ //positive margin
							self.windowOffsetTop = (self.nzHeight);  //DONE - 4,5,6,7,8

							self.windowOffsetLeft =((self.options.zoomWindowWidth/2)-(self.nzWidth/2)+(self.options.borderSize*2))*(-1);  
						}
						else{ //negative margin

						}


						break;
					case 7: //done  
						self.windowOffsetTop = (self.nzHeight);  //DONE - 4,5,6,7,8
						self.windowOffsetLeft = 0; //DONE 7, 13
						break;
					case 8: //done  
						self.windowOffsetTop = (self.nzHeight); //DONE - 4,5,6,7,8
						self.windowOffsetLeft =(self.zoomWindow.width()+(self.options.borderSize*2) )* (-1);  //DONE 8,9,10,11,12
						break;
					case 9:  //done  
						self.windowOffsetTop = (self.nzHeight - self.zoomWindow.height() - (self.options.borderSize*2)); //DONE 3,9
						self.windowOffsetLeft =(self.zoomWindow.width()+(self.options.borderSize*2) )* (-1);  //DONE 8,9,10,11,12
						break;
					case 10: 
						if(self.options.zoomWindowHeight > self.nzHeight){ //positive margin

							self.windowOffsetTop = ((self.options.zoomWindowHeight/2)-(self.nzHeight/2))*(-1);
							self.windowOffsetLeft =(self.zoomWindow.width()+(self.options.borderSize*2) )* (-1);  //DONE 8,9,10,11,12
						}
						else{ //negative margin

						}
						break;
					case 11: 
						self.windowOffsetTop = (self.options.zoomWindowOffety);
						self.windowOffsetLeft =(self.zoomWindow.width()+(self.options.borderSize*2) )* (-1);  //DONE 8,9,10,11,12
						break;
					case 12: //done  
						self.windowOffsetTop = (self.zoomWindow.height()+(self.options.borderSize*2))*(-1); //DONE 12,13,14,15,16
						self.windowOffsetLeft =(self.zoomWindow.width()+(self.options.borderSize*2) )* (-1);  //DONE 8,9,10,11,12
						break;
					case 13: //done  
						self.windowOffsetTop = (self.zoomWindow.height()+(self.options.borderSize*2))*(-1); //DONE 12,13,14,15,16
						self.windowOffsetLeft =(0); //DONE 7, 13
						break;
					case 14: 
						if(self.options.zoomWindowHeight > self.nzHeight){ //positive margin
							self.windowOffsetTop = (self.zoomWindow.height()+(self.options.borderSize*2))*(-1); //DONE 12,13,14,15,16

							self.windowOffsetLeft =((self.options.zoomWindowWidth/2)-(self.nzWidth/2)+(self.options.borderSize*2))*(-1);  
						}
						else{ //negative margin

						}

						break;
					case 15://done   
						self.windowOffsetTop = (self.zoomWindow.height()+(self.options.borderSize*2))*(-1); //DONE 12,13,14,15,16
						self.windowOffsetLeft =(self.nzWidth-self.zoomWindow.width()-(self.options.borderSize*2)); //DONE - 5,15
						break;
					case 16:  //done  
						self.windowOffsetTop = (self.zoomWindow.height()+(self.options.borderSize*2))*(-1); //DONE 12,13,14,15,16
						self.windowOffsetLeft =(self.nzWidth); //DONE 1, 2, 3, 4, 16
						break;            
					default: //done  
						self.windowOffsetTop = (self.options.zoomWindowOffety);//DONE - 1
					self.windowOffsetLeft =(self.nzWidth); //DONE 1, 2, 3, 4, 16
					} 
				} //end isNAN
				else{
					//WE CAN POSITION IN A CLASS - ASSUME THAT ANY STRING PASSED IS
					self.externalContainer = $('#'+self.options.zoomWindowPosition);
					self.externalContainerWidth = self.externalContainer.width();
					self.externalContainerHeight = self.externalContainer.height();
					self.externalContainerOffset = self.externalContainer.offset();

					self.windowOffsetTop = self.externalContainerOffset.top;//DONE - 1
					self.windowOffsetLeft =self.externalContainerOffset.left; //DONE 1, 2, 3, 4, 16

				}
				self.isWindowSet = true;
				self.windowOffsetTop = self.windowOffsetTop + self.options.zoomWindowOffety;
				self.windowOffsetLeft = self.windowOffsetLeft + self.options.zoomWindowOffetx;

				self.zoomWindow.css({ top: self.windowOffsetTop});
				self.zoomWindow.css({ left: self.windowOffsetLeft});

				if(self.options.zoomType == "inner") {
					self.zoomWindow.css({ top: 0});
					self.zoomWindow.css({ left: 0});

				}   


				self.windowLeftPos = String(((e.pageX - self.nzOffset.left) * self.widthRatio - self.zoomWindow.width() / 2) * (-1));   
				self.windowTopPos = String(((e.pageY - self.nzOffset.top) * self.heightRatio - self.zoomWindow.height() / 2) * (-1));
				if(self.Etoppos){self.windowTopPos = 0;}
				if(self.Eloppos){self.windowLeftPos = 0;}     
				if(self.Eboppos){self.windowTopPos = (self.largeHeight/self.currentZoomLevel-self.zoomWindow.height())*(-1);  } 
				if(self.Eroppos){self.windowLeftPos = ((self.largeWidth/self.currentZoomLevel-self.zoomWindow.width())*(-1));}    

				//stops micro movements
				if(self.fullheight){
					self.windowTopPos = 0;

				}
				if(self.fullwidth){
					self.windowLeftPos = 0;

				}
				//set the css background position 


				if(self.options.zoomType == "window" || self.options.zoomType == "inner") {

					if(self.zoomLock == 1){
						//overrides for images not zoomable
						if(self.widthRatio <= 1){

							self.windowLeftPos = 0;
						}
						if(self.heightRatio <= 1){ 
							self.windowTopPos = 0;
						}
					}
					// adjust images less than the window height

					if (self.options.zoomType == "window") {
						if (self.largeHeight < self.options.zoomWindowHeight) {

							self.windowTopPos = 0;
						}
						if (self.largeWidth < self.options.zoomWindowWidth) {
							self.windowLeftPos = 0;
						}
					}

					//set the zoomwindow background position
					if (self.options.easing){

						//     if(self.changeZoom){
						//           clearInterval(self.loop);
						//           self.changeZoom = false;
						//           self.loop = false;

						//            }
						//set the pos to 0 if not set
						if(!self.xp){self.xp = 0;}
						if(!self.yp){self.yp = 0;}  
						//if loop not already started, then run it 
						if (!self.loop){           
							self.loop = setInterval(function(){                
								//using zeno's paradox    

								self.xp += (self.windowLeftPos  - self.xp) / self.options.easingAmount; 
								self.yp += (self.windowTopPos  - self.yp) / self.options.easingAmount;
								if(self.scrollingLock){


									clearInterval(self.loop);
									self.xp = self.windowLeftPos;
									self.yp = self.windowTopPos            

									self.xp = ((e.pageX - self.nzOffset.left) * self.widthRatio - self.zoomWindow.width() / 2) * (-1);
									self.yp = (((e.pageY - self.nzOffset.top) * self.heightRatio - self.zoomWindow.height() / 2) * (-1));                         

									if(self.changeBgSize){    
										if(self.nzHeight>self.nzWidth){  
											if(self.options.zoomType == "lens"){      
												self.zoomLens.css({ "background-size": self.largeWidth/self.newvalueheight + 'px ' + self.largeHeight/self.newvalueheight + 'px' });
											}   
											self.zoomWindow.css({ "background-size": self.largeWidth/self.newvalueheight + 'px ' + self.largeHeight/self.newvalueheight + 'px' });
										}
										else{   
											if(self.options.zoomType != "lens"){      
												self.zoomLens.css({ "background-size": self.largeWidth/self.newvaluewidth + 'px ' + self.largeHeight/self.newvalueheight + 'px' });
											}            
											self.zoomWindow.css({ "background-size": self.largeWidth/self.newvaluewidth + 'px ' + self.largeHeight/self.newvaluewidth + 'px' });            

										}

										/*
             if(!self.bgxp){self.bgxp = self.largeWidth/self.newvalue;}
						if(!self.bgyp){self.bgyp = self.largeHeight/self.newvalue ;}  
                 if (!self.bgloop){   
                 	self.bgloop = setInterval(function(){   

                 self.bgxp += (self.largeWidth/self.newvalue  - self.bgxp) / self.options.easingAmount; 
								self.bgyp += (self.largeHeight/self.newvalue  - self.bgyp) / self.options.easingAmount;

           self.zoomWindow.css({ "background-size": self.bgxp + 'px ' + self.bgyp + 'px' });


                  }, 16);

                 }
										 */
										self.changeBgSize = false;
									}

									self.zoomWindow.css({ backgroundPosition: self.windowLeftPos + 'px ' + self.windowTopPos + 'px' });
									self.scrollingLock = false;
									self.loop = false;

								}
								else if (Math.round(Math.abs(self.xp - self.windowLeftPos) + Math.abs(self.yp - self.windowTopPos)) < 1) {
									//stops micro movements
									clearInterval(self.loop);
									self.zoomWindow.css({ backgroundPosition: self.windowLeftPos + 'px ' + self.windowTopPos + 'px' });
									self.loop = false;
								}
								else{
									if(self.changeBgSize){    
										if(self.nzHeight>self.nzWidth){ 
											if(self.options.zoomType == "lens"){      
												self.zoomLens.css({ "background-size": self.largeWidth/self.newvalueheight + 'px ' + self.largeHeight/self.newvalueheight + 'px' });
											}         
											self.zoomWindow.css({ "background-size": self.largeWidth/self.newvalueheight + 'px ' + self.largeHeight/self.newvalueheight + 'px' });
										}
										else{                 
											if(self.options.zoomType != "lens"){     
												self.zoomLens.css({ "background-size": self.largeWidth/self.newvaluewidth + 'px ' + self.largeHeight/self.newvaluewidth + 'px' });
											}      
											self.zoomWindow.css({ "background-size": self.largeWidth/self.newvaluewidth + 'px ' + self.largeHeight/self.newvaluewidth + 'px' });            
										}
										self.changeBgSize = false;
									}                   

									self.zoomWindow.css({ backgroundPosition: self.xp + 'px ' + self.yp + 'px' });
								}       
							}, 16);
						}
					}   
					else{    
						if(self.changeBgSize){  
							if(self.nzHeight>self.nzWidth){  
								if(self.options.zoomType == "lens"){      
									self.zoomLens.css({ "background-size": self.largeWidth/self.newvalueheight + 'px ' + self.largeHeight/self.newvalueheight + 'px' });
								} 

								self.zoomWindow.css({ "background-size": self.largeWidth/self.newvalueheight + 'px ' + self.largeHeight/self.newvalueheight + 'px' });
							}
							else{     
								if(self.options.zoomType == "lens"){      
									self.zoomLens.css({ "background-size": self.largeWidth/self.newvaluewidth + 'px ' + self.largeHeight/self.newvaluewidth + 'px' });
								} 
								if((self.largeHeight/self.newvaluewidth) < self.options.zoomWindowHeight){ 

									self.zoomWindow.css({ "background-size": self.largeWidth/self.newvaluewidth + 'px ' + self.largeHeight/self.newvaluewidth + 'px' });            
								}
								else{

									self.zoomWindow.css({ "background-size": self.largeWidth/self.newvalueheight + 'px ' + self.largeHeight/self.newvalueheight + 'px' });   
								}

							}
							self.changeBgSize = false;
						}     

						self.zoomWindow.css({ backgroundPosition: self.windowLeftPos + 'px ' + self.windowTopPos + 'px' });       
					}
				} 
			},
			setTintPosition: function(e){
				var self = this;
				self.nzOffset = self.$elem.offset();
				self.tintpos = String(((e.pageX - self.nzOffset.left)-(self.zoomLens.width() / 2)) * (-1)); 
				self.tintposy = String(((e.pageY - self.nzOffset.top) - self.zoomLens.height() / 2) * (-1));	
				if(self.Etoppos){
					self.tintposy = 0;
				}
				if(self.Eloppos){
					self.tintpos=0;
				}     
				if(self.Eboppos){
					self.tintposy = (self.nzHeight-self.zoomLens.height()-(self.options.lensBorderSize*2))*(-1);
				} 
				if(self.Eroppos){
					self.tintpos = ((self.nzWidth-self.zoomLens.width()-(self.options.lensBorderSize*2))*(-1));
				}    
				if(self.options.tint) {
					//stops micro movements
					if(self.fullheight){
						self.tintposy = 0;

					}
					if(self.fullwidth){ 
						self.tintpos = 0;

					}   
					self.zoomTintImage.css({'left': self.tintpos+'px'});
					self.zoomTintImage.css({'top': self.tintposy+'px'});
				}
			},

			swaptheimage: function(smallimage, largeimage){
				var self = this;
				var newImg = new Image(); 

				if(self.options.loadingIcon){
					self.spinner = $('<div style="background: url(\''+self.options.loadingIcon+'\') no-repeat center;height:'+self.nzHeight+'px;width:'+self.nzWidth+'px;z-index: 2000;position: absolute; background-position: center center;"></div>');
					self.$elem.after(self.spinner);
				}

				self.options.onImageSwap(self.$elem);

				newImg.onload = function() {
					self.largeWidth = newImg.width;
					self.largeHeight = newImg.height;
					self.zoomImage = largeimage;
					self.zoomWindow.css({ "background-size": self.largeWidth + 'px ' + self.largeHeight + 'px' });
					self.swapAction(smallimage, largeimage);
					return;              
				}          
				newImg.src = largeimage; // this must be done AFTER setting onload

			},
			swapAction: function(smallimage, largeimage){


				var self = this;    

				var newImg2 = new Image(); 
				newImg2.onload = function() {
					//re-calculate values
					self.nzHeight = newImg2.height;
					self.nzWidth = newImg2.width;
					self.options.onImageSwapComplete(self.$elem);

					self.doneCallback();  
					return;      
				}          
				newImg2.src = smallimage; 

				//reset the zoomlevel to that initially set in options
				self.currentZoomLevel = self.options.zoomLevel;
				self.options.maxZoomLevel = false;

				//swaps the main image
				//self.$elem.attr("src",smallimage);
				//swaps the zoom image     
				if(self.options.zoomType == "lens") {
					self.zoomLens.css({ backgroundImage: "url('" + largeimage + "')" }); 
				}
				if(self.options.zoomType == "window") {
					self.zoomWindow.css({ backgroundImage: "url('" + largeimage + "')" }); 
				}
				if(self.options.zoomType == "inner") {
					self.zoomWindow.css({ backgroundImage: "url('" + largeimage + "')" }); 
				} 



				self.currentImage = largeimage;

				if(self.options.imageCrossfade){
					var oldImg = self.$elem;
					var newImg = oldImg.clone();         
					self.$elem.attr("src",smallimage)
					self.$elem.after(newImg);
					newImg.stop(true).fadeOut(self.options.imageCrossfade, function() {
						$(this).remove();         
					});

					//       				if(self.options.zoomType == "inner"){
					//remove any attributes on the cloned image so we can resize later
					self.$elem.width("auto").removeAttr("width");
					self.$elem.height("auto").removeAttr("height");
					//   }

					oldImg.fadeIn(self.options.imageCrossfade);

					if(self.options.tint && self.options.zoomType != "inner") {

						var oldImgTint = self.zoomTintImage;
						var newImgTint = oldImgTint.clone();         
						self.zoomTintImage.attr("src",largeimage)
						self.zoomTintImage.after(newImgTint);
						newImgTint.stop(true).fadeOut(self.options.imageCrossfade, function() {
							$(this).remove();         
						});



						oldImgTint.fadeIn(self.options.imageCrossfade);


						//self.zoomTintImage.attr("width",elem.data("image"));

						//resize the tint window
						self.zoomTint.css({ height: self.$elem.height()});
						self.zoomTint.css({ width: self.$elem.width()});
					}    

					self.zoomContainer.css("height", self.$elem.height());
					self.zoomContainer.css("width", self.$elem.width());

					if(self.options.zoomType == "inner"){ 
						if(!self.options.constrainType){
							self.zoomWrap.parent().css("height", self.$elem.height());
							self.zoomWrap.parent().css("width", self.$elem.width());

							self.zoomWindow.css("height", self.$elem.height());
							self.zoomWindow.css("width", self.$elem.width());
						}
					} 

					if(self.options.imageCrossfade){  
						self.zoomWrap.css("height", self.$elem.height());
						self.zoomWrap.css("width", self.$elem.width());
					} 
				}
				else{
					self.$elem.attr("src",smallimage); 
					if(self.options.tint) {
						self.zoomTintImage.attr("src",largeimage);
						//self.zoomTintImage.attr("width",elem.data("image"));
						self.zoomTintImage.attr("height",self.$elem.height());
						//self.zoomTintImage.attr('src') = elem.data("image");
						self.zoomTintImage.css({ height: self.$elem.height()}); 
						self.zoomTint.css({ height: self.$elem.height()});

					}
					self.zoomContainer.css("height", self.$elem.height());
					self.zoomContainer.css("width", self.$elem.width());

					if(self.options.imageCrossfade){  
						self.zoomWrap.css("height", self.$elem.height());
						self.zoomWrap.css("width", self.$elem.width());
					} 
				}              
				if(self.options.constrainType){     

					//This will contrain the image proportions
					if(self.options.constrainType == "height"){ 

						self.zoomContainer.css("height", self.options.constrainSize);
						self.zoomContainer.css("width", "auto");

						if(self.options.imageCrossfade){  
							self.zoomWrap.css("height", self.options.constrainSize);
							self.zoomWrap.css("width", "auto"); 
							self.constwidth = self.zoomWrap.width();


						}
						else{                  
							self.$elem.css("height", self.options.constrainSize);
							self.$elem.css("width", "auto");
							self.constwidth = self.$elem.width();
						} 

						if(self.options.zoomType == "inner"){

							self.zoomWrap.parent().css("height", self.options.constrainSize);
							self.zoomWrap.parent().css("width", self.constwidth);   
							self.zoomWindow.css("height", self.options.constrainSize);
							self.zoomWindow.css("width", self.constwidth);    
						}        
						if(self.options.tint){
							self.tintContainer.css("height", self.options.constrainSize);
							self.tintContainer.css("width", self.constwidth);
							self.zoomTint.css("height", self.options.constrainSize);
							self.zoomTint.css("width", self.constwidth);
							self.zoomTintImage.css("height", self.options.constrainSize);
							self.zoomTintImage.css("width", self.constwidth); 
						} 

					}
					if(self.options.constrainType == "width"){       
						self.zoomContainer.css("height", "auto");
						self.zoomContainer.css("width", self.options.constrainSize);

						if(self.options.imageCrossfade){
							self.zoomWrap.css("height", "auto");
							self.zoomWrap.css("width", self.options.constrainSize);
							self.constheight = self.zoomWrap.height();
						}
						else{            
							self.$elem.css("height", "auto");
							self.$elem.css("width", self.options.constrainSize); 
							self.constheight = self.$elem.height();              
						} 
						if(self.options.zoomType == "inner"){
							self.zoomWrap.parent().css("height", self.constheight);
							self.zoomWrap.parent().css("width", self.options.constrainSize);   
							self.zoomWindow.css("height", self.constheight);
							self.zoomWindow.css("width", self.options.constrainSize);    
						} 
						if(self.options.tint){
							self.tintContainer.css("height", self.constheight);
							self.tintContainer.css("width", self.options.constrainSize);
							self.zoomTint.css("height", self.constheight);
							self.zoomTint.css("width", self.options.constrainSize);
							self.zoomTintImage.css("height", self.constheight);
							self.zoomTintImage.css("width", self.options.constrainSize); 
						}   

					}        


				}

			},
			doneCallback: function(){

				var self = this;
				if(self.options.loadingIcon){
					self.spinner.hide();     
				}   

				self.nzOffset = self.$elem.offset();
				self.nzWidth = self.$elem.width();
				self.nzHeight = self.$elem.height();

				// reset the zoomlevel back to default
				self.currentZoomLevel = self.options.zoomLevel;

				//ratio of the large to small image
				self.widthRatio = self.largeWidth / self.nzWidth;
				self.heightRatio = self.largeHeight / self.nzHeight; 

				//NEED TO ADD THE LENS SIZE FOR ROUND
				// adjust images less than the window height
				if(self.options.zoomType == "window") {

					if(self.nzHeight < self.options.zoomWindowWidth/self.widthRatio){
						lensHeight = self.nzHeight;  

					}
					else{
						lensHeight = String((self.options.zoomWindowHeight/self.heightRatio))
					}

					if(self.options.zoomWindowWidth < self.options.zoomWindowWidth){
						lensWidth = self.nzWidth;
					}       
					else{
						lensWidth =  (self.options.zoomWindowWidth/self.widthRatio);
					}


					if(self.zoomLens){

						self.zoomLens.css('width', lensWidth);    
						self.zoomLens.css('height', lensHeight); 


					}
				}
			},
			getCurrentImage: function(){
				var self = this;  
				return self.zoomImage; 
			}, 
			getGalleryList: function(){
				var self = this;   
				//loop through the gallery options and set them in list for fancybox
				self.gallerylist = [];
				if (self.options.gallery){ 


					$('#'+self.options.gallery + ' a').each(function() {

						var img_src = '';
						if($(this).data("zoom-image")){
							img_src = $(this).data("zoom-image");
						}
						else if($(this).data("image")){
							img_src = $(this).data("image");
						}			
						//put the current image at the start
						if(img_src == self.zoomImage){
							self.gallerylist.unshift({
								href: ''+img_src+'',
								title: $(this).find('img').attr("title")
							});	
						}
						else{
							self.gallerylist.push({
								href: ''+img_src+'',
								title: $(this).find('img').attr("title")
							});
						}


					});
				}                                                       
				//if no gallery - return current image
				else{
					self.gallerylist.push({
						href: ''+self.zoomImage+'',
						title: $(this).find('img').attr("title")
					}); 
				}
				return self.gallerylist;

			},
			changeZoomLevel: function(value){
				var self = this;   

				//flag a zoom, so can adjust the easing during setPosition     
				self.scrollingLock = true;   

				//round to two decimal places
				self.newvalue = parseFloat(value).toFixed(2);
				newvalue = parseFloat(value).toFixed(2);




				//maxwidth & Maxheight of the image
				maxheightnewvalue = self.largeHeight/((self.options.zoomWindowHeight / self.nzHeight) * self.nzHeight);     
				maxwidthtnewvalue = self.largeWidth/((self.options.zoomWindowWidth / self.nzWidth) * self.nzWidth);   	




				//calculate new heightratio
				if(self.options.zoomType != "inner")
				{
					if(maxheightnewvalue <= newvalue){
						self.heightRatio = (self.largeHeight/maxheightnewvalue) / self.nzHeight;
						self.newvalueheight = maxheightnewvalue;
						self.fullheight = true;

					}
					else{
						self.heightRatio = (self.largeHeight/newvalue) / self.nzHeight; 
						self.newvalueheight = newvalue;
						self.fullheight = false;

					}


//					calculate new width ratio

					if(maxwidthtnewvalue <= newvalue){
						self.widthRatio = (self.largeWidth/maxwidthtnewvalue) / self.nzWidth;
						self.newvaluewidth = maxwidthtnewvalue;
						self.fullwidth = true;

					}
					else{
						self.widthRatio = (self.largeWidth/newvalue) / self.nzWidth; 
						self.newvaluewidth = newvalue;
						self.fullwidth = false;

					}
					if(self.options.zoomType == "lens"){
						if(maxheightnewvalue <= newvalue){
							self.fullwidth = true;
							self.newvaluewidth = maxheightnewvalue;

						} else{
							self.widthRatio = (self.largeWidth/newvalue) / self.nzWidth; 
							self.newvaluewidth = newvalue;

							self.fullwidth = false;
						}}
				}



				if(self.options.zoomType == "inner")
				{
					maxheightnewvalue = parseFloat(self.largeHeight/self.nzHeight).toFixed(2);     
					maxwidthtnewvalue = parseFloat(self.largeWidth/self.nzWidth).toFixed(2);      
					if(newvalue > maxheightnewvalue){
						newvalue = maxheightnewvalue;
					}
					if(newvalue > maxwidthtnewvalue){
						newvalue = maxwidthtnewvalue;
					}      


					if(maxheightnewvalue <= newvalue){


						self.heightRatio = (self.largeHeight/newvalue) / self.nzHeight; 
						if(newvalue > maxheightnewvalue){
							self.newvalueheight = maxheightnewvalue;
						}else{
							self.newvalueheight = newvalue;
						}
						self.fullheight = true;


					}
					else{



						self.heightRatio = (self.largeHeight/newvalue) / self.nzHeight; 

						if(newvalue > maxheightnewvalue){

							self.newvalueheight = maxheightnewvalue;
						}else{
							self.newvalueheight = newvalue;
						}
						self.fullheight = false;
					}




					if(maxwidthtnewvalue <= newvalue){   

						self.widthRatio = (self.largeWidth/newvalue) / self.nzWidth; 
						if(newvalue > maxwidthtnewvalue){

							self.newvaluewidth = maxwidthtnewvalue;
						}else{
							self.newvaluewidth = newvalue;
						}

						self.fullwidth = true;


					}
					else{  

						self.widthRatio = (self.largeWidth/newvalue) / self.nzWidth; 
						self.newvaluewidth = newvalue;
						self.fullwidth = false;
					}        


				} //end inner
				scrcontinue = false;

				if(self.options.zoomType == "inner"){

					if(self.nzWidth >= self.nzHeight){
						if( self.newvaluewidth <= maxwidthtnewvalue){
							scrcontinue = true;
						}
						else{

							scrcontinue = false;
							self.fullheight = true;
							self.fullwidth = true;
						}
					}
					if(self.nzHeight > self.nzWidth){     
						if( self.newvaluewidth <= maxwidthtnewvalue){
							scrcontinue = true;
						}
						else{
							scrcontinue = false;  

							self.fullheight = true;
							self.fullwidth = true;
						}
					}
				}

				if(self.options.zoomType != "inner"){
					scrcontinue = true;
				}

				if(scrcontinue){



					self.zoomLock = 0;
					self.changeZoom = true;

					//if lens height is less than image height


					if(((self.options.zoomWindowHeight)/self.heightRatio) <= self.nzHeight){


						self.currentZoomLevel = self.newvalueheight; 
						if(self.options.zoomType != "lens" && self.options.zoomType != "inner") {
							self.changeBgSize = true;

							self.zoomLens.css({height: String((self.options.zoomWindowHeight)/self.heightRatio) + 'px' }) 
						}
						if(self.options.zoomType == "lens" || self.options.zoomType == "inner") {  
							self.changeBgSize = true;  
						}	


					} 




					if((self.options.zoomWindowWidth/self.widthRatio) <= self.nzWidth){



						if(self.options.zoomType != "inner"){
							if(self.newvaluewidth > self.newvalueheight)   {
								self.currentZoomLevel = self.newvaluewidth;                 

							}
						}

						if(self.options.zoomType != "lens" && self.options.zoomType != "inner") {
							self.changeBgSize = true;

							self.zoomLens.css({width: String((self.options.zoomWindowWidth)/self.widthRatio) + 'px' })
						}
						if(self.options.zoomType == "lens" || self.options.zoomType == "inner") {  
							self.changeBgSize = true;
						}	

					}
					if(self.options.zoomType == "inner"){
						self.changeBgSize = true;  

						if(self.nzWidth > self.nzHeight){
							self.currentZoomLevel = self.newvaluewidth;
						}
						if(self.nzHeight > self.nzWidth){
							self.currentZoomLevel = self.newvaluewidth;
						}
					}

				}      //under

				//sets the boundry change, called in setWindowPos
				self.setPosition(self.currentLoc);
				//
			},
			closeAll: function(){
				if(self.zoomWindow){self.zoomWindow.hide();}
				if(self.zoomLens){self.zoomLens.hide();}
				if(self.zoomTint){self.zoomTint.hide();}
			},
			changeState: function(value){
      	var self = this;
				if(value == 'enable'){self.options.zoomEnabled = true;}
				if(value == 'disable'){self.options.zoomEnabled = false;}

			}

	};




	$.fn.elevateZoom = function( options ) {
		return this.each(function() {
			var elevate = Object.create( ElevateZoom );

			elevate.init( options, this );

			$.data( this, 'elevateZoom', elevate );

		});
	};

	$.fn.elevateZoom.options = {
			zoomActivation: "hover", // Can also be click (PLACEHOLDER FOR NEXT VERSION)
      zoomEnabled: true, //false disables zoomwindow from showing
			preloading: 1, //by default, load all the images, if 0, then only load images after activated (PLACEHOLDER FOR NEXT VERSION)
			zoomLevel: 1, //default zoom level of image
			scrollZoom: false, //allow zoom on mousewheel, true to activate
			scrollZoomIncrement: 0.1,  //steps of the scrollzoom
			minZoomLevel: false,
			maxZoomLevel: false,
			easing: false,
			easingAmount: 12,
			lensSize: 200,
			zoomWindowWidth: 400,
			zoomWindowHeight: 400,
			zoomWindowOffetx: 0,
			zoomWindowOffety: 0,
			zoomWindowPosition: 1,
			zoomWindowBgColour: "#fff",
			lensFadeIn: false,
			lensFadeOut: false,
			debug: false,
			zoomWindowFadeIn: false,
			zoomWindowFadeOut: false,
			zoomWindowAlwaysShow: false,
			zoomTintFadeIn: false,
			zoomTintFadeOut: false,
			borderSize: 4,
			showLens: true,
			borderColour: "#888",
			lensBorderSize: 1,
			lensBorderColour: "#000",
			lensShape: "square", //can be "round"
			zoomType: "window", //window is default,  also "lens" available -
			containLensZoom: false,
			lensColour: "white", //colour of the lens background
			lensOpacity: 0.4, //opacity of the lens
			lenszoom: false,
			tint: false, //enable the tinting
			tintColour: "#333", //default tint color, can be anything, red, #ccc, rgb(0,0,0)
			tintOpacity: 0.4, //opacity of the tint
			gallery: false,
			galleryActiveClass: "zoomGalleryActive",
			imageCrossfade: false,
			constrainType: false,  //width or height
			constrainSize: false,  //in pixels the dimensions you want to constrain on
			loadingIcon: false, //http://www.example.com/spinner.gif
			cursor:"default", // user should set to what they want the cursor as, if they have set a click function
			responsive:true,
			onComplete: $.noop,
      onDestroy: function() {},
			onZoomedImageLoaded: function() {},
			onImageSwap: $.noop,
			onImageSwapComplete: $.noop
	};

})( jQuery, window, document );
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJqcXVlcnkuZWxldmF0ZXpvb20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqXHRqUXVlcnkgZWxldmF0ZVpvb20gMy4wLjhcbiAqXHREZW1vJ3MgYW5kIGRvY3VtZW50YXRpb246XG4gKlx0d3d3LmVsZXZhdGV3ZWIuY28udWsvaW1hZ2Utem9vbVxuICpcbiAqXHRDb3B5cmlnaHQgKGMpIDIwMTIgQW5kcmV3IEVhZGVzXG4gKlx0d3d3LmVsZXZhdGV3ZWIuY28udWtcbiAqXG4gKlx0RHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgR1BMIGFuZCBNSVQgbGljZW5zZXMuXG4gKlx0aHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NSVRfTGljZW5zZVxuICpcdGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvR05VX0dlbmVyYWxfUHVibGljX0xpY2Vuc2VcbiAqXG5cbi8qXG4gKlx0alF1ZXJ5IGVsZXZhdGVab29tIDMuMC4zXG4gKlx0RGVtbydzIGFuZCBkb2N1bWVudGF0aW9uOlxuICpcdHd3dy5lbGV2YXRld2ViLmNvLnVrL2ltYWdlLXpvb21cbiAqXG4gKlx0Q29weXJpZ2h0IChjKSAyMDEyIEFuZHJldyBFYWRlc1xuICpcdHd3dy5lbGV2YXRld2ViLmNvLnVrXG4gKlxuICpcdER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIEdQTCBhbmQgTUlUIGxpY2Vuc2VzLlxuICpcdGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTUlUX0xpY2Vuc2VcbiAqXHRodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dOVV9HZW5lcmFsX1B1YmxpY19MaWNlbnNlXG4gKi9cblxuXG5pZiAoIHR5cGVvZiBPYmplY3QuY3JlYXRlICE9PSAnZnVuY3Rpb24nICkge1xuXHRPYmplY3QuY3JlYXRlID0gZnVuY3Rpb24oIG9iaiApIHtcblx0XHRmdW5jdGlvbiBGKCkge307XG5cdFx0Ri5wcm90b3R5cGUgPSBvYmo7XG5cdFx0cmV0dXJuIG5ldyBGKCk7XG5cdH07XG59XG5cbihmdW5jdGlvbiggJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkICkge1xuXHR2YXIgRWxldmF0ZVpvb20gPSB7XG5cdFx0XHRpbml0OiBmdW5jdGlvbiggb3B0aW9ucywgZWxlbSApIHtcblx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRcdHNlbGYuZWxlbSA9IGVsZW07XG5cdFx0XHRcdHNlbGYuJGVsZW0gPSAkKCBlbGVtICk7XG5cblx0XHRcdFx0c2VsZi5pbWFnZVNyYyA9IHNlbGYuJGVsZW0uZGF0YShcInpvb20taW1hZ2VcIikgPyBzZWxmLiRlbGVtLmRhdGEoXCJ6b29tLWltYWdlXCIpIDogc2VsZi4kZWxlbS5hdHRyKFwic3JjXCIpO1xuXG5cdFx0XHRcdHNlbGYub3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSwgJC5mbi5lbGV2YXRlWm9vbS5vcHRpb25zLCBvcHRpb25zICk7XG5cblx0XHRcdFx0Ly9USU5UIE9WRVJSSURFIFNFVFRJTkdTXG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy50aW50KSB7XG5cdFx0XHRcdFx0c2VsZi5vcHRpb25zLmxlbnNDb2xvdXIgPSBcIm5vbmVcIiwgLy9jb2xvdXIgb2YgdGhlIGxlbnMgYmFja2dyb3VuZFxuXHRcdFx0XHRcdHNlbGYub3B0aW9ucy5sZW5zT3BhY2l0eSA9ICBcIjFcIiAvL29wYWNpdHkgb2YgdGhlIGxlbnNcblx0XHRcdFx0fVxuXHRcdFx0XHQvL0lOTkVSIE9WRVJSSURFIFNFVFRJTkdTXG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImlubmVyXCIpIHtzZWxmLm9wdGlvbnMuc2hvd0xlbnMgPSBmYWxzZTt9XG5cblxuXHRcdFx0XHQvL1JlbW92ZSBhbHQgb24gaG92ZXJcblxuXHRcdFx0XHRzZWxmLiRlbGVtLnBhcmVudCgpLnJlbW92ZUF0dHIoJ3RpdGxlJykucmVtb3ZlQXR0cignYWx0Jyk7XG5cblx0XHRcdFx0c2VsZi56b29tSW1hZ2UgPSBzZWxmLmltYWdlU3JjO1xuXG5cdFx0XHRcdHNlbGYucmVmcmVzaCggMSApO1xuXG5cblxuXHRcdFx0XHQvL0NyZWF0ZSB0aGUgaW1hZ2Ugc3dhcCBmcm9tIHRoZSBnYWxsZXJ5IFxuXHRcdFx0XHQkKCcjJytzZWxmLm9wdGlvbnMuZ2FsbGVyeSArICcgYScpLmNsaWNrKCBmdW5jdGlvbihlKSB7IFxuXG5cdFx0XHRcdFx0Ly9TZXQgYSBjbGFzcyBvbiB0aGUgY3VycmVudGx5IGFjdGl2ZSBnYWxsZXJ5IGltYWdlXG5cdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLmdhbGxlcnlBY3RpdmVDbGFzcyl7XG5cdFx0XHRcdFx0XHQkKCcjJytzZWxmLm9wdGlvbnMuZ2FsbGVyeSArICcgYScpLnJlbW92ZUNsYXNzKHNlbGYub3B0aW9ucy5nYWxsZXJ5QWN0aXZlQ2xhc3MpO1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcyhzZWxmLm9wdGlvbnMuZ2FsbGVyeUFjdGl2ZUNsYXNzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly9zdG9wIGFueSBsaW5rIG9uIHRoZSBhIHRhZyBmcm9tIHdvcmtpbmdcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0XHQvL2NhbGwgdGhlIHN3YXAgaW1hZ2UgZnVuY3Rpb24gICAgICAgICAgICBcblx0XHRcdFx0XHRpZigkKHRoaXMpLmRhdGEoXCJ6b29tLWltYWdlXCIpKXtzZWxmLnpvb21JbWFnZVByZSA9ICQodGhpcykuZGF0YShcInpvb20taW1hZ2VcIil9XG5cdFx0XHRcdFx0ZWxzZXtzZWxmLnpvb21JbWFnZVByZSA9ICQodGhpcykuZGF0YShcImltYWdlXCIpO31cblx0XHRcdFx0XHRzZWxmLnN3YXB0aGVpbWFnZSgkKHRoaXMpLmRhdGEoXCJpbWFnZVwiKSwgc2VsZi56b29tSW1hZ2VQcmUpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdH0sXG5cblx0XHRcdHJlZnJlc2g6IGZ1bmN0aW9uKCBsZW5ndGggKSB7XG5cdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYuZmV0Y2goc2VsZi5pbWFnZVNyYyk7XG5cblx0XHRcdFx0fSwgbGVuZ3RoIHx8IHNlbGYub3B0aW9ucy5yZWZyZXNoICk7XG5cdFx0XHR9LFxuXG5cdFx0XHRmZXRjaDogZnVuY3Rpb24oaW1nc3JjKSB7XG5cdFx0XHRcdC8vZ2V0IHRoZSBpbWFnZVxuXHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRcdHZhciBuZXdJbWcgPSBuZXcgSW1hZ2UoKTtcblx0XHRcdFx0bmV3SW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdC8vc2V0IHRoZSBsYXJnZSBpbWFnZSBkaW1lbnNpb25zIC0gdXNlZCB0byBjYWxjdWx0ZSByYXRpbydzXG5cdFx0XHRcdFx0c2VsZi5sYXJnZVdpZHRoID0gbmV3SW1nLndpZHRoO1xuXHRcdFx0XHRcdHNlbGYubGFyZ2VIZWlnaHQgPSBuZXdJbWcuaGVpZ2h0O1xuXHRcdFx0XHRcdC8vb25jZSBpbWFnZSBpcyBsb2FkZWQgc3RhcnQgdGhlIGNhbGxzXG5cdFx0XHRcdFx0c2VsZi5zdGFydFpvb20oKTtcblx0XHRcdFx0XHRzZWxmLmN1cnJlbnRJbWFnZSA9IHNlbGYuaW1hZ2VTcmM7XG5cdFx0XHRcdFx0Ly9sZXQgY2FsbGVyIGtub3cgaW1hZ2UgaGFzIGJlZW4gbG9hZGVkXG5cdFx0XHRcdFx0c2VsZi5vcHRpb25zLm9uWm9vbWVkSW1hZ2VMb2FkZWQoc2VsZi4kZWxlbSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmV3SW1nLnNyYyA9IGltZ3NyYzsgLy8gdGhpcyBtdXN0IGJlIGRvbmUgQUZURVIgc2V0dGluZyBvbmxvYWRcblxuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdH0sXG5cblx0XHRcdHN0YXJ0Wm9vbTogZnVuY3Rpb24oICkge1xuXHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRcdC8vZ2V0IGRpbWVuc2lvbnMgb2YgdGhlIG5vbiB6b29tZWQgaW1hZ2Vcblx0XHRcdFx0c2VsZi5ueldpZHRoID0gc2VsZi4kZWxlbS53aWR0aCgpO1xuXHRcdFx0XHRzZWxmLm56SGVpZ2h0ID0gc2VsZi4kZWxlbS5oZWlnaHQoKTtcblxuXHRcdFx0XHQvL2FjdGl2YXRlZCBlbGVtZW50c1xuXHRcdFx0XHRzZWxmLmlzV2luZG93QWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdHNlbGYuaXNMZW5zQWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdHNlbGYuaXNUaW50QWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdHNlbGYub3ZlcldpbmRvdyA9IGZhbHNlOyAgICBcblxuXHRcdFx0XHQvL0Nyb3NzRmFkZSBXcmFwcGVcblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLmltYWdlQ3Jvc3NmYWRlKXtcblx0XHRcdFx0XHRzZWxmLnpvb21XcmFwID0gc2VsZi4kZWxlbS53cmFwKCc8ZGl2IHN0eWxlPVwiaGVpZ2h0Oicrc2VsZi5uekhlaWdodCsncHg7d2lkdGg6JytzZWxmLm56V2lkdGgrJ3B4O1wiIGNsYXNzPVwiem9vbVdyYXBwZXJcIiAvPicpOyAgICAgICAgXG5cdFx0XHRcdFx0c2VsZi4kZWxlbS5jc3MoJ3Bvc2l0aW9uJywgJ2Fic29sdXRlJyk7IFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0c2VsZi56b29tTG9jayA9IDE7XG5cdFx0XHRcdHNlbGYuc2Nyb2xsaW5nTG9jayA9IGZhbHNlO1xuXHRcdFx0XHRzZWxmLmNoYW5nZUJnU2l6ZSA9IGZhbHNlO1xuXHRcdFx0XHRzZWxmLmN1cnJlbnRab29tTGV2ZWwgPSBzZWxmLm9wdGlvbnMuem9vbUxldmVsO1xuXG5cblx0XHRcdFx0Ly9nZXQgb2Zmc2V0IG9mIHRoZSBub24gem9vbWVkIGltYWdlXG5cdFx0XHRcdHNlbGYubnpPZmZzZXQgPSBzZWxmLiRlbGVtLm9mZnNldCgpO1xuXHRcdFx0XHQvL2NhbGN1bGF0ZSB0aGUgd2lkdGggcmF0aW8gb2YgdGhlIGxhcmdlL3NtYWxsIGltYWdlXG5cdFx0XHRcdHNlbGYud2lkdGhSYXRpbyA9IChzZWxmLmxhcmdlV2lkdGgvc2VsZi5jdXJyZW50Wm9vbUxldmVsKSAvIHNlbGYubnpXaWR0aDtcblx0XHRcdFx0c2VsZi5oZWlnaHRSYXRpbyA9IChzZWxmLmxhcmdlSGVpZ2h0L3NlbGYuY3VycmVudFpvb21MZXZlbCkgLyBzZWxmLm56SGVpZ2h0OyBcblxuXG5cdFx0XHRcdC8vaWYgd2luZG93IHpvb20gICAgICAgIFxuXHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJ3aW5kb3dcIikge1xuXHRcdFx0XHRcdHNlbGYuem9vbVdpbmRvd1N0eWxlID0gXCJvdmVyZmxvdzogaGlkZGVuO1wiXG5cdFx0XHRcdFx0XHQrIFwiYmFja2dyb3VuZC1wb3NpdGlvbjogMHB4IDBweDt0ZXh0LWFsaWduOmNlbnRlcjtcIiAgXG5cdFx0XHRcdFx0XHQrIFwiYmFja2dyb3VuZC1jb2xvcjogXCIgKyBTdHJpbmcoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dCZ0NvbG91cikgICAgICAgICAgICBcblx0XHRcdFx0XHRcdCsgXCI7d2lkdGg6IFwiICsgU3RyaW5nKHNlbGYub3B0aW9ucy56b29tV2luZG93V2lkdGgpICsgXCJweDtcIlxuXHRcdFx0XHRcdFx0KyBcImhlaWdodDogXCIgKyBTdHJpbmcoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dIZWlnaHQpXG5cdFx0XHRcdFx0XHQrIFwicHg7ZmxvYXQ6IGxlZnQ7XCJcblx0XHRcdFx0XHRcdCsgXCJiYWNrZ3JvdW5kLXNpemU6IFwiKyBzZWxmLmxhcmdlV2lkdGgvc2VsZi5jdXJyZW50Wm9vbUxldmVsKyBcInB4IFwiICtzZWxmLmxhcmdlSGVpZ2h0L3NlbGYuY3VycmVudFpvb21MZXZlbCArIFwicHg7XCJcblx0XHRcdFx0XHRcdCsgXCJkaXNwbGF5OiBub25lO3otaW5kZXg6MTAwO1wiXG5cdFx0XHRcdFx0XHQrIFwiYm9yZGVyOiBcIiArIFN0cmluZyhzZWxmLm9wdGlvbnMuYm9yZGVyU2l6ZSkgXG5cdFx0XHRcdFx0XHQrIFwicHggc29saWQgXCIgKyBzZWxmLm9wdGlvbnMuYm9yZGVyQ29sb3VyIFxuXHRcdFx0XHRcdFx0KyBcIjtiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1wiXG5cdFx0XHRcdFx0XHQrIFwicG9zaXRpb246IGFic29sdXRlO1wiO1xuXHRcdFx0XHR9ICAgIFxuXG5cblx0XHRcdFx0Ly9pZiBpbm5lciAgem9vbSAgICBcblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwiaW5uZXJcIikge1xuXHRcdFx0XHRcdC8vaGFzIGEgYm9yZGVyIGJlZW4gcHV0IG9uIHRoZSBpbWFnZT8gTGV0cyBjYXRlciBmb3IgdGhpc1xuXG5cdFx0XHRcdFx0dmFyIGJvcmRlcldpZHRoID0gc2VsZi4kZWxlbS5jc3MoXCJib3JkZXItbGVmdC13aWR0aFwiKTtcblxuXHRcdFx0XHRcdHNlbGYuem9vbVdpbmRvd1N0eWxlID0gXCJvdmVyZmxvdzogaGlkZGVuO1wiXG5cdFx0XHRcdFx0XHQrIFwibWFyZ2luLWxlZnQ6IFwiICsgU3RyaW5nKGJvcmRlcldpZHRoKSArIFwiO1wiIFxuXHRcdFx0XHRcdFx0KyBcIm1hcmdpbi10b3A6IFwiICsgU3RyaW5nKGJvcmRlcldpZHRoKSArIFwiO1wiICAgICAgICAgXG5cdFx0XHRcdFx0XHQrIFwiYmFja2dyb3VuZC1wb3NpdGlvbjogMHB4IDBweDtcIlxuXHRcdFx0XHRcdFx0KyBcIndpZHRoOiBcIiArIFN0cmluZyhzZWxmLm56V2lkdGgpICsgXCJweDtcIlxuXHRcdFx0XHRcdFx0KyBcImhlaWdodDogXCIgKyBTdHJpbmcoc2VsZi5uekhlaWdodCkgKyBcInB4O1wiXG5cdFx0XHRcdFx0XHQrIFwicHg7ZmxvYXQ6IGxlZnQ7XCJcblx0XHRcdFx0XHRcdCsgXCJkaXNwbGF5OiBub25lO1wiXG5cdFx0XHRcdFx0XHQrIFwiY3Vyc29yOlwiKyhzZWxmLm9wdGlvbnMuY3Vyc29yKStcIjtcIlxuXHRcdFx0XHRcdFx0KyBcInB4IHNvbGlkIFwiICsgc2VsZi5vcHRpb25zLmJvcmRlckNvbG91ciBcblx0XHRcdFx0XHRcdCsgXCI7YmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcIlxuXHRcdFx0XHRcdFx0KyBcInBvc2l0aW9uOiBhYnNvbHV0ZTtcIjtcblx0XHRcdFx0fSAgICBcblxuXG5cblx0XHRcdFx0Ly9sZW5zIHN0eWxlIGZvciB3aW5kb3cgem9vbVxuXHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJ3aW5kb3dcIikge1xuXG5cblx0XHRcdFx0XHQvLyBhZGp1c3QgaW1hZ2VzIGxlc3MgdGhhbiB0aGUgd2luZG93IGhlaWdodFxuXG5cdFx0XHRcdFx0aWYoc2VsZi5uekhlaWdodCA8IHNlbGYub3B0aW9ucy56b29tV2luZG93V2lkdGgvc2VsZi53aWR0aFJhdGlvKXtcblx0XHRcdFx0XHRcdGxlbnNIZWlnaHQgPSBzZWxmLm56SGVpZ2h0OyAgICAgICAgICAgICAgXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHRsZW5zSGVpZ2h0ID0gU3RyaW5nKChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd0hlaWdodC9zZWxmLmhlaWdodFJhdGlvKSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYoc2VsZi5sYXJnZVdpZHRoIDwgc2VsZi5vcHRpb25zLnpvb21XaW5kb3dXaWR0aCl7XG5cdFx0XHRcdFx0XHRsZW5zV2lkdGggPSBzZWxmLm56V2lkdGg7XG5cdFx0XHRcdFx0fSAgICAgICBcblx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0bGVuc1dpZHRoID0gIChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd1dpZHRoL3NlbGYud2lkdGhSYXRpbyk7XG5cdFx0XHRcdFx0fVxuXG5cblx0XHRcdFx0XHRzZWxmLmxlbnNTdHlsZSA9IFwiYmFja2dyb3VuZC1wb3NpdGlvbjogMHB4IDBweDt3aWR0aDogXCIgKyBTdHJpbmcoKHNlbGYub3B0aW9ucy56b29tV2luZG93V2lkdGgpL3NlbGYud2lkdGhSYXRpbykgKyBcInB4O2hlaWdodDogXCIgKyBTdHJpbmcoKHNlbGYub3B0aW9ucy56b29tV2luZG93SGVpZ2h0KS9zZWxmLmhlaWdodFJhdGlvKVxuXHRcdFx0XHRcdCsgXCJweDtmbG9hdDogcmlnaHQ7ZGlzcGxheTogbm9uZTtcIlxuXHRcdFx0XHRcdCsgXCJvdmVyZmxvdzogaGlkZGVuO1wiXG5cdFx0XHRcdFx0KyBcInotaW5kZXg6IDk5OTtcIiAgIFxuXHRcdFx0XHRcdCsgXCItd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTtcIiAgICAgICAgICAgICAgIFxuXHRcdFx0XHRcdCsgXCJvcGFjaXR5OlwiKyhzZWxmLm9wdGlvbnMubGVuc09wYWNpdHkpK1wiO2ZpbHRlcjogYWxwaGEob3BhY2l0eSA9IFwiKyhzZWxmLm9wdGlvbnMubGVuc09wYWNpdHkqMTAwKStcIik7IHpvb206MTtcIlxuXHRcdFx0XHRcdCsgXCJ3aWR0aDpcIitsZW5zV2lkdGgrXCJweDtcIlxuXHRcdFx0XHRcdCsgXCJoZWlnaHQ6XCIrbGVuc0hlaWdodCtcInB4O1wiXG5cdFx0XHRcdFx0KyBcImJhY2tncm91bmQtY29sb3I6XCIrKHNlbGYub3B0aW9ucy5sZW5zQ29sb3VyKStcIjtcIlx0XHRcdFx0XHRcblx0XHRcdFx0XHQrIFwiY3Vyc29yOlwiKyhzZWxmLm9wdGlvbnMuY3Vyc29yKStcIjtcIlxuXHRcdFx0XHRcdCsgXCJib3JkZXI6IFwiKyhzZWxmLm9wdGlvbnMubGVuc0JvcmRlclNpemUpK1wicHhcIiArXG5cdFx0XHRcdFx0XCIgc29saWQgXCIrKHNlbGYub3B0aW9ucy5sZW5zQm9yZGVyQ29sb3VyKStcIjtiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O3Bvc2l0aW9uOiBhYnNvbHV0ZTtcIjtcblx0XHRcdFx0fSBcblxuXG5cdFx0XHRcdC8vdGludCBzdHlsZVxuXHRcdFx0XHRzZWxmLnRpbnRTdHlsZSA9IFwiZGlzcGxheTogYmxvY2s7XCJcblx0XHRcdFx0XHQrIFwicG9zaXRpb246IGFic29sdXRlO1wiXG5cdFx0XHRcdFx0KyBcImJhY2tncm91bmQtY29sb3I6IFwiK3NlbGYub3B0aW9ucy50aW50Q29sb3VyK1wiO1wiXHRcblx0XHRcdFx0XHQrIFwiZmlsdGVyOmFscGhhKG9wYWNpdHk9MCk7XCJcdFx0XG5cdFx0XHRcdFx0KyBcIm9wYWNpdHk6IDA7XCJcdFxuXHRcdFx0XHRcdCsgXCJ3aWR0aDogXCIgKyBzZWxmLm56V2lkdGggKyBcInB4O1wiXG5cdFx0XHRcdFx0KyBcImhlaWdodDogXCIgKyBzZWxmLm56SGVpZ2h0ICsgXCJweDtcIlxuXG5cdFx0XHRcdFx0O1xuXG5cdFx0XHRcdC8vbGVucyBzdHlsZSBmb3IgbGVucyB6b29tIHdpdGggb3B0aW9uYWwgcm91bmQgZm9yIG1vZGVybiBicm93c2Vyc1xuXHRcdFx0XHRzZWxmLmxlbnNSb3VuZCA9ICcnO1xuXG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImxlbnNcIikge1xuXG5cdFx0XHRcdFx0c2VsZi5sZW5zU3R5bGUgPSBcImJhY2tncm91bmQtcG9zaXRpb246IDBweCAwcHg7XCJcblx0XHRcdFx0XHRcdCsgXCJmbG9hdDogbGVmdDtkaXNwbGF5OiBub25lO1wiXG5cdFx0XHRcdFx0XHQrIFwiYm9yZGVyOiBcIiArIFN0cmluZyhzZWxmLm9wdGlvbnMuYm9yZGVyU2l6ZSkgKyBcInB4IHNvbGlkIFwiICsgc2VsZi5vcHRpb25zLmJvcmRlckNvbG91citcIjtcIlxuXHRcdFx0XHRcdFx0KyBcIndpZHRoOlwiKyBTdHJpbmcoc2VsZi5vcHRpb25zLmxlbnNTaXplKSArXCJweDtcIlxuXHRcdFx0XHRcdFx0KyBcImhlaWdodDpcIisgU3RyaW5nKHNlbGYub3B0aW9ucy5sZW5zU2l6ZSkrXCJweDtcIlxuXHRcdFx0XHRcdFx0KyBcImJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7cG9zaXRpb246IGFic29sdXRlO1wiO1xuXG5cblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0Ly9kb2VzIG5vdCByb3VuZCBpbiBhbGwgYnJvd3NlcnNcblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLmxlbnNTaGFwZSA9PSBcInJvdW5kXCIpIHtcblx0XHRcdFx0XHRzZWxmLmxlbnNSb3VuZCA9IFwiYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogXCIgKyBTdHJpbmcoc2VsZi5vcHRpb25zLmxlbnNTaXplIC8gMiArIHNlbGYub3B0aW9ucy5ib3JkZXJTaXplKSArIFwicHg7XCJcblx0XHRcdFx0XHQrIFwiYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IFwiICsgU3RyaW5nKHNlbGYub3B0aW9ucy5sZW5zU2l6ZSAvIDIgKyBzZWxmLm9wdGlvbnMuYm9yZGVyU2l6ZSkgKyBcInB4O1wiXG5cdFx0XHRcdFx0KyBcImJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IFwiICsgU3RyaW5nKHNlbGYub3B0aW9ucy5sZW5zU2l6ZSAvIDIgKyBzZWxmLm9wdGlvbnMuYm9yZGVyU2l6ZSkgKyBcInB4O1wiXG5cdFx0XHRcdFx0KyBcImJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiBcIiArIFN0cmluZyhzZWxmLm9wdGlvbnMubGVuc1NpemUgLyAyICsgc2VsZi5vcHRpb25zLmJvcmRlclNpemUpICsgXCJweDtcIjtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly9jcmVhdGUgdGhlIGRpdidzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcIlwiXG5cdFx0XHRcdC8vc2VsZi56b29tQ29udGFpbmVyID0gJCgnPGRpdi8+JykuYWRkQ2xhc3MoJ3pvb21Db250YWluZXInKS5jc3Moe1wicG9zaXRpb25cIjpcInJlbGF0aXZlXCIsIFwiaGVpZ2h0XCI6c2VsZi5uekhlaWdodCwgXCJ3aWR0aFwiOnNlbGYubnpXaWR0aH0pO1xuXG5cdFx0XHRcdHNlbGYuem9vbUNvbnRhaW5lciA9ICQoJzxkaXYgY2xhc3M9XCJ6b29tQ29udGFpbmVyXCIgc3R5bGU9XCItd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oicrc2VsZi5uek9mZnNldC5sZWZ0KydweDt0b3A6JytzZWxmLm56T2Zmc2V0LnRvcCsncHg7aGVpZ2h0Oicrc2VsZi5uekhlaWdodCsncHg7d2lkdGg6JytzZWxmLm56V2lkdGgrJ3B4O1wiPjwvZGl2PicpO1xuXHRcdFx0XHQkKCdib2R5JykuYXBwZW5kKHNlbGYuem9vbUNvbnRhaW5lcik7XHRcblxuXG5cdFx0XHRcdC8vdGhpcyB3aWxsIGFkZCBvdmVyZmxvdyBoaWRkZW4gYW5kIGNvbnRyYWluIHRoZSBsZW5zIG9uIGxlbnMgbW9kZSAgICAgICBcblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLmNvbnRhaW5MZW5zWm9vbSAmJiBzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJsZW5zXCIpe1xuXHRcdFx0XHRcdHNlbGYuem9vbUNvbnRhaW5lci5jc3MoXCJvdmVyZmxvd1wiLCBcImhpZGRlblwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgIT0gXCJpbm5lclwiKSB7XG5cdFx0XHRcdFx0c2VsZi56b29tTGVucyA9ICQoXCI8ZGl2IGNsYXNzPSd6b29tTGVucycgc3R5bGU9J1wiICsgc2VsZi5sZW5zU3R5bGUgKyBzZWxmLmxlbnNSb3VuZCArXCInPiZuYnNwOzwvZGl2PlwiKVxuXHRcdFx0XHRcdC5hcHBlbmRUbyhzZWxmLnpvb21Db250YWluZXIpXG5cdFx0XHRcdFx0LmNsaWNrKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHNlbGYuJGVsZW0udHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0XHR9KTtcblxuXG5cdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnRpbnQpIHtcblx0XHRcdFx0XHRcdHNlbGYudGludENvbnRhaW5lciA9ICQoJzxkaXYvPicpLmFkZENsYXNzKCd0aW50Q29udGFpbmVyJyk7XHRcblx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnQgPSAkKFwiPGRpdiBjbGFzcz0nem9vbVRpbnQnIHN0eWxlPSdcIitzZWxmLnRpbnRTdHlsZStcIic+PC9kaXY+XCIpO1xuXG5cblx0XHRcdFx0XHRcdHNlbGYuem9vbUxlbnMud3JhcChzZWxmLnRpbnRDb250YWluZXIpO1xuXG5cblx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnRjc3MgPSBzZWxmLnpvb21MZW5zLmFmdGVyKHNlbGYuem9vbVRpbnQpO1x0XG5cblx0XHRcdFx0XHRcdC8vaWYgdGludCBlbmFibGVkIC0gc2V0IGFuIGltYWdlIHRvIHNob3cgb3ZlciB0aGUgdGludFxuXG5cdFx0XHRcdFx0XHRzZWxmLnpvb21UaW50SW1hZ2UgPSAkKCc8aW1nIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwcHg7IHRvcDogMHB4OyBtYXgtd2lkdGg6IG5vbmU7IHdpZHRoOiAnK3NlbGYubnpXaWR0aCsncHg7IGhlaWdodDogJytzZWxmLm56SGVpZ2h0KydweDtcIiBzcmM9XCInK3NlbGYuaW1hZ2VTcmMrJ1wiPicpXG5cdFx0XHRcdFx0XHQuYXBwZW5kVG8oc2VsZi56b29tTGVucylcblx0XHRcdFx0XHRcdC5jbGljayhmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRcdFx0c2VsZi4kZWxlbS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHR9ICAgICAgICAgIFxuXG5cdFx0XHRcdH1cblxuXG5cblxuXG5cblxuXHRcdFx0XHQvL2NyZWF0ZSB6b29tIHdpbmRvdyBcblx0XHRcdFx0aWYoaXNOYU4oc2VsZi5vcHRpb25zLnpvb21XaW5kb3dQb3NpdGlvbikpe1xuXHRcdFx0XHRcdHNlbGYuem9vbVdpbmRvdyA9ICQoXCI8ZGl2IHN0eWxlPSd6LWluZGV4Ojk5OTtsZWZ0OlwiKyhzZWxmLndpbmRvd09mZnNldExlZnQpK1wicHg7dG9wOlwiKyhzZWxmLndpbmRvd09mZnNldFRvcCkrXCJweDtcIiArIHNlbGYuem9vbVdpbmRvd1N0eWxlICsgXCInIGNsYXNzPSd6b29tV2luZG93Jz4mbmJzcDs8L2Rpdj5cIilcblx0XHRcdFx0XHQuYXBwZW5kVG8oJ2JvZHknKVxuXHRcdFx0XHRcdC5jbGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRzZWxmLiRlbGVtLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdHNlbGYuem9vbVdpbmRvdyA9ICQoXCI8ZGl2IHN0eWxlPSd6LWluZGV4Ojk5OTtsZWZ0OlwiKyhzZWxmLndpbmRvd09mZnNldExlZnQpK1wicHg7dG9wOlwiKyhzZWxmLndpbmRvd09mZnNldFRvcCkrXCJweDtcIiArIHNlbGYuem9vbVdpbmRvd1N0eWxlICsgXCInIGNsYXNzPSd6b29tV2luZG93Jz4mbmJzcDs8L2Rpdj5cIilcblx0XHRcdFx0XHQuYXBwZW5kVG8oc2VsZi56b29tQ29udGFpbmVyKVxuXHRcdFx0XHRcdC5jbGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRzZWxmLiRlbGVtLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gICAgICAgICAgICAgIFxuXHRcdFx0XHRzZWxmLnpvb21XaW5kb3dDb250YWluZXIgPSAkKCc8ZGl2Lz4nKS5hZGRDbGFzcygnem9vbVdpbmRvd0NvbnRhaW5lcicpLmNzcyhcIndpZHRoXCIsc2VsZi5vcHRpb25zLnpvb21XaW5kb3dXaWR0aCk7XG5cdFx0XHRcdHNlbGYuem9vbVdpbmRvdy53cmFwKHNlbGYuem9vbVdpbmRvd0NvbnRhaW5lcik7XG5cblxuXHRcdFx0XHQvLyAgc2VsZi5jYXB0aW9uU3R5bGUgPSBcInRleHQtYWxpZ246IGxlZnQ7YmFja2dyb3VuZC1jb2xvcjogYmxhY2s7Y29sb3I6IHdoaXRlO2ZvbnQtd2VpZ2h0OiBib2xkO3BhZGRpbmc6IDEwcHg7Zm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7Zm9udC1zaXplOiAxMXB4XCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cdFx0XHRcdC8vIHNlbGYuem9vbUNhcHRpb24gPSAkKCc8ZGl2IGNsYXNzPVwiZWxldmF0ZXpvb20tY2FwdGlvblwiIHN0eWxlPVwiJytzZWxmLmNhcHRpb25TdHlsZSsnZGlzcGxheTogYmxvY2s7IHdpZHRoOiAyODBweDtcIj5JTlNFUlQgQUxUIFRBRzwvZGl2PicpLmFwcGVuZFRvKHNlbGYuem9vbVdpbmRvdy5wYXJlbnQoKSk7XG5cblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwibGVuc1wiKSB7XG5cdFx0XHRcdFx0c2VsZi56b29tTGVucy5jc3MoeyBiYWNrZ3JvdW5kSW1hZ2U6IFwidXJsKCdcIiArIHNlbGYuaW1hZ2VTcmMgKyBcIicpXCIgfSk7IFxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcIndpbmRvd1wiKSB7XG5cdFx0XHRcdFx0c2VsZi56b29tV2luZG93LmNzcyh7IGJhY2tncm91bmRJbWFnZTogXCJ1cmwoJ1wiICsgc2VsZi5pbWFnZVNyYyArIFwiJylcIiB9KTsgXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwiaW5uZXJcIikge1xuXHRcdFx0XHRcdHNlbGYuem9vbVdpbmRvdy5jc3MoeyBiYWNrZ3JvdW5kSW1hZ2U6IFwidXJsKCdcIiArIHNlbGYuaW1hZ2VTcmMgKyBcIicpXCIgfSk7IFxuXHRcdFx0XHR9XG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLUVORCBUSEUgWk9PTSBXSU5ET1cgQU5EIExFTlMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRcdFx0Ly90b3VjaCBldmVudHNcblx0XHRcdFx0c2VsZi4kZWxlbS5iaW5kKCd0b3VjaG1vdmUnLCBmdW5jdGlvbihlKXsgICAgXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHZhciB0b3VjaCA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdIHx8IGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXTsgIFxuXHRcdFx0XHRcdHNlbGYuc2V0UG9zaXRpb24odG91Y2gpO1xuXG5cdFx0XHRcdH0pOyAgXG5cdFx0XHRcdHNlbGYuem9vbUNvbnRhaW5lci5iaW5kKCd0b3VjaG1vdmUnLCBmdW5jdGlvbihlKXsgXG5cdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwiaW5uZXJcIikge1xuXHRcdFx0XHRcdFx0c2VsZi5zaG93SGlkZVdpbmRvdyhcInNob3dcIik7XG5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHZhciB0b3VjaCA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdIHx8IGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXTsgIFxuXHRcdFx0XHRcdHNlbGYuc2V0UG9zaXRpb24odG91Y2gpOyBcblxuXHRcdFx0XHR9KTsgIFx0XG5cdFx0XHRcdHNlbGYuem9vbUNvbnRhaW5lci5iaW5kKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKGUpeyBcblx0XHRcdFx0XHRzZWxmLnNob3dIaWRlV2luZG93KFwiaGlkZVwiKTtcblx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuc2hvd0xlbnMpIHtzZWxmLnNob3dIaWRlTGVucyhcImhpZGVcIik7fVxuXHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy50aW50ICYmIHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImlubmVyXCIpIHtzZWxmLnNob3dIaWRlVGludChcImhpZGVcIik7fVxuXHRcdFx0XHR9KTsgIFx0XG5cblx0XHRcdFx0c2VsZi4kZWxlbS5iaW5kKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKGUpeyBcblx0XHRcdFx0XHRzZWxmLnNob3dIaWRlV2luZG93KFwiaGlkZVwiKTtcblx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuc2hvd0xlbnMpIHtzZWxmLnNob3dIaWRlTGVucyhcImhpZGVcIik7fVxuXHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy50aW50ICYmIHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImlubmVyXCIpIHtzZWxmLnNob3dIaWRlVGludChcImhpZGVcIik7fVxuXHRcdFx0XHR9KTsgIFx0XG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy5zaG93TGVucykge1xuXHRcdFx0XHRcdHNlbGYuem9vbUxlbnMuYmluZCgndG91Y2htb3ZlJywgZnVuY3Rpb24oZSl7IFxuXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHR2YXIgdG91Y2ggPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXSB8fCBlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07ICBcblx0XHRcdFx0XHRcdHNlbGYuc2V0UG9zaXRpb24odG91Y2gpOyBcblx0XHRcdFx0XHR9KTsgICAgXG5cblxuXHRcdFx0XHRcdHNlbGYuem9vbUxlbnMuYmluZCgndG91Y2hlbmQnLCBmdW5jdGlvbihlKXsgXG5cdFx0XHRcdFx0XHRzZWxmLnNob3dIaWRlV2luZG93KFwiaGlkZVwiKTtcblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy5zaG93TGVucykge3NlbGYuc2hvd0hpZGVMZW5zKFwiaGlkZVwiKTt9XG5cdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMudGludCAmJiBzZWxmLm9wdGlvbnMuem9vbVR5cGUgIT0gXCJpbm5lclwiKSB7c2VsZi5zaG93SGlkZVRpbnQoXCJoaWRlXCIpO31cblx0XHRcdFx0XHR9KTsgIFxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vTmVlZGVkIHRvIHdvcmsgaW4gSUVcblx0XHRcdFx0c2VsZi4kZWxlbS5iaW5kKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihlKXsgICBcblx0XHRcdFx0XHRpZihzZWxmLm92ZXJXaW5kb3cgPT0gZmFsc2Upe3NlbGYuc2V0RWxlbWVudHMoXCJzaG93XCIpO31cblx0XHRcdFx0XHQvL21ha2Ugc3VyZSBvbiBvcmllbnRhdGlvbiBjaGFuZ2UgdGhlIHNldHBvc2l0aW9uIGlzIG5vdCBmaXJlZFxuXHRcdFx0XHRcdGlmKHNlbGYubGFzdFggIT09IGUuY2xpZW50WCB8fCBzZWxmLmxhc3RZICE9PSBlLmNsaWVudFkpe1xuXHRcdFx0XHRcdFx0c2VsZi5zZXRQb3NpdGlvbihlKTtcblx0XHRcdFx0XHRcdHNlbGYuY3VycmVudExvYyA9IGU7XG5cdFx0XHRcdFx0fSAgIFxuXHRcdFx0XHRcdHNlbGYubGFzdFggPSBlLmNsaWVudFg7XG5cdFx0XHRcdFx0c2VsZi5sYXN0WSA9IGUuY2xpZW50WTsgICAgXG5cblx0XHRcdFx0fSk7ICBcdFxuXG5cdFx0XHRcdHNlbGYuem9vbUNvbnRhaW5lci5iaW5kKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihlKXsgXG5cblx0XHRcdFx0XHRpZihzZWxmLm92ZXJXaW5kb3cgPT0gZmFsc2Upe3NlbGYuc2V0RWxlbWVudHMoXCJzaG93XCIpO30gXG5cblx0XHRcdFx0XHQvL21ha2Ugc3VyZSBvbiBvcmllbnRhdGlvbiBjaGFuZ2UgdGhlIHNldHBvc2l0aW9uIGlzIG5vdCBmaXJlZCBcblx0XHRcdFx0XHRpZihzZWxmLmxhc3RYICE9PSBlLmNsaWVudFggfHwgc2VsZi5sYXN0WSAhPT0gZS5jbGllbnRZKXtcblx0XHRcdFx0XHRcdHNlbGYuc2V0UG9zaXRpb24oZSk7XG5cdFx0XHRcdFx0XHRzZWxmLmN1cnJlbnRMb2MgPSBlO1xuXHRcdFx0XHRcdH0gICBcblx0XHRcdFx0XHRzZWxmLmxhc3RYID0gZS5jbGllbnRYO1xuXHRcdFx0XHRcdHNlbGYubGFzdFkgPSBlLmNsaWVudFk7ICAgIFxuXHRcdFx0XHR9KTsgIFx0XG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImlubmVyXCIpIHtcblx0XHRcdFx0XHRzZWxmLnpvb21MZW5zLmJpbmQoJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGUpeyAgICAgIFxuXHRcdFx0XHRcdFx0Ly9tYWtlIHN1cmUgb24gb3JpZW50YXRpb24gY2hhbmdlIHRoZSBzZXRwb3NpdGlvbiBpcyBub3QgZmlyZWRcblx0XHRcdFx0XHRcdGlmKHNlbGYubGFzdFggIT09IGUuY2xpZW50WCB8fCBzZWxmLmxhc3RZICE9PSBlLmNsaWVudFkpe1xuXHRcdFx0XHRcdFx0XHRzZWxmLnNldFBvc2l0aW9uKGUpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLmN1cnJlbnRMb2MgPSBlO1xuXHRcdFx0XHRcdFx0fSAgIFxuXHRcdFx0XHRcdFx0c2VsZi5sYXN0WCA9IGUuY2xpZW50WDtcblx0XHRcdFx0XHRcdHNlbGYubGFzdFkgPSBlLmNsaWVudFk7ICAgIFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy50aW50ICYmIHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImlubmVyXCIpIHtcblx0XHRcdFx0XHRzZWxmLnpvb21UaW50LmJpbmQoJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGUpeyBcblx0XHRcdFx0XHRcdC8vbWFrZSBzdXJlIG9uIG9yaWVudGF0aW9uIGNoYW5nZSB0aGUgc2V0cG9zaXRpb24gaXMgbm90IGZpcmVkXG5cdFx0XHRcdFx0XHRpZihzZWxmLmxhc3RYICE9PSBlLmNsaWVudFggfHwgc2VsZi5sYXN0WSAhPT0gZS5jbGllbnRZKXtcblx0XHRcdFx0XHRcdFx0c2VsZi5zZXRQb3NpdGlvbihlKTtcblx0XHRcdFx0XHRcdFx0c2VsZi5jdXJyZW50TG9jID0gZTtcblx0XHRcdFx0XHRcdH0gICBcblx0XHRcdFx0XHRcdHNlbGYubGFzdFggPSBlLmNsaWVudFg7XG5cdFx0XHRcdFx0XHRzZWxmLmxhc3RZID0gZS5jbGllbnRZOyAgICBcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImlubmVyXCIpIHtcblx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuYmluZCgnbW91c2Vtb3ZlJywgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRcdFx0Ly9zZWxmLm92ZXJXaW5kb3cgPSB0cnVlO1xuXHRcdFx0XHRcdFx0Ly9tYWtlIHN1cmUgb24gb3JpZW50YXRpb24gY2hhbmdlIHRoZSBzZXRwb3NpdGlvbiBpcyBub3QgZmlyZWRcblx0XHRcdFx0XHRcdGlmKHNlbGYubGFzdFggIT09IGUuY2xpZW50WCB8fCBzZWxmLmxhc3RZICE9PSBlLmNsaWVudFkpe1xuXHRcdFx0XHRcdFx0XHRzZWxmLnNldFBvc2l0aW9uKGUpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLmN1cnJlbnRMb2MgPSBlO1xuXHRcdFx0XHRcdFx0fSAgIFxuXHRcdFx0XHRcdFx0c2VsZi5sYXN0WCA9IGUuY2xpZW50WDtcblx0XHRcdFx0XHRcdHNlbGYubGFzdFkgPSBlLmNsaWVudFk7ICAgIFxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdH1cblxuXG5cdFx0XHRcdC8vICBsZW5zRmFkZU91dDogNTAwLCAgem9vbVRpbnRGYWRlSW5cblx0XHRcdFx0c2VsZi56b29tQ29udGFpbmVyLmFkZChzZWxmLiRlbGVtKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCl7XG5cblx0XHRcdFx0XHRpZihzZWxmLm92ZXJXaW5kb3cgPT0gZmFsc2Upe3NlbGYuc2V0RWxlbWVudHMoXCJzaG93XCIpO30gXG5cblxuXHRcdFx0XHR9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0aWYoIXNlbGYuc2Nyb2xsTG9jayl7XG5cdFx0XHRcdFx0XHRzZWxmLnNldEVsZW1lbnRzKFwiaGlkZVwiKTtcbiAgICAgICAgICAgIHNlbGYub3B0aW9ucy5vbkRlc3Ryb3koc2VsZi4kZWxlbSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Ly9lbmQgb3ZlIGltYWdlXG5cblxuXG5cblxuXHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgIT0gXCJpbm5lclwiKSB7XG5cdFx0XHRcdFx0c2VsZi56b29tV2luZG93Lm1vdXNlZW50ZXIoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdHNlbGYub3ZlcldpbmRvdyA9IHRydWU7ICAgXG5cdFx0XHRcdFx0XHRzZWxmLnNldEVsZW1lbnRzKFwiaGlkZVwiKTsgICAgICAgICAgICAgICAgICBcblx0XHRcdFx0XHR9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCl7XG5cblx0XHRcdFx0XHRcdHNlbGYub3ZlcldpbmRvdyA9IGZhbHNlO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vZW5kIG92ZSBpbWFnZVxuXG5cblxuLy9cdFx0XHRcdHZhciBkZWx0YSA9IHBhcnNlSW50KGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhIHx8IC1lLm9yaWdpbmFsRXZlbnQuZGV0YWlsKTtcblxuXHRcdFx0XHQvLyAgICAgICQodGhpcykuZW1wdHkoKTsgICAgXG5cdFx0XHRcdC8vICAgIHJldHVybiBmYWxzZTtcblxuXHRcdFx0XHQvL2ZpeCBmb3IgaW5pdGlhbCB6b29tIHNldHRpbmdcblx0XHRcdFx0aWYgKHNlbGYub3B0aW9ucy56b29tTGV2ZWwgIT0gMSl7XG5cdFx0XHRcdFx0Ly9cdHNlbGYuY2hhbmdlWm9vbUxldmVsKHNlbGYuY3VycmVudFpvb21MZXZlbCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly9zZXQgdGhlIG1pbiB6b29tbGV2ZWxcblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLm1pblpvb21MZXZlbCl7XG5cdFx0XHRcdFx0c2VsZi5taW5ab29tTGV2ZWwgPSBzZWxmLm9wdGlvbnMubWluWm9vbUxldmVsO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0c2VsZi5taW5ab29tTGV2ZWwgPSBzZWxmLm9wdGlvbnMuc2Nyb2xsWm9vbUluY3JlbWVudCAqIDI7XG5cdFx0XHRcdH1cblxuXG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy5zY3JvbGxab29tKXtcblxuXG5cdFx0XHRcdFx0c2VsZi56b29tQ29udGFpbmVyLmFkZChzZWxmLiRlbGVtKS5iaW5kKCdtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsIE1vek1vdXNlUGl4ZWxTY3JvbGwnLCBmdW5jdGlvbihlKXtcblxuXG4vL1x0XHRcdFx0XHRcdGluIElFIHRoZXJlIGlzIGlzc3VlIHdpdGggZmlyaW5nIG9mIG1vdXNlbGVhdmUgLSBTbyBjaGVjayB3aGV0aGVyIHN0aWxsIHNjcm9sbGluZ1xuLy9cdFx0XHRcdFx0XHRhbmQgb24gbW91c2VsZWF2ZSBjaGVjayBpZiBzY3JvbGxsb2NrICAgICAgICAgIFxuXHRcdFx0XHRcdFx0c2VsZi5zY3JvbGxMb2NrID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCgkLmRhdGEodGhpcywgJ3RpbWVyJykpO1xuXHRcdFx0XHRcdFx0JC5kYXRhKHRoaXMsICd0aW1lcicsIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYuc2Nyb2xsTG9jayA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHQvL2RvIHNvbWV0aGluZ1xuXHRcdFx0XHRcdFx0fSwgMjUwKSk7XG5cblx0XHRcdFx0XHRcdHZhciB0aGVFdmVudCA9IGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhIHx8IGUub3JpZ2luYWxFdmVudC5kZXRhaWwqLTFcblxuXG5cdFx0XHRcdFx0XHQvL3RoaXMuc2Nyb2xsVG9wICs9ICggZGVsdGEgPCAwID8gMSA6IC0xICkgKiAzMDtcblx0XHRcdFx0XHRcdC8vICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cblx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cblx0XHRcdFx0XHRcdGlmKHRoZUV2ZW50IC8xMjAgPiAwKSB7XG5cdFx0XHRcdFx0XHRcdC8vc2Nyb2xsaW5nIHVwXG5cdFx0XHRcdFx0XHRcdGlmKHNlbGYuY3VycmVudFpvb21MZXZlbCA+PSBzZWxmLm1pblpvb21MZXZlbCl7IFxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuY2hhbmdlWm9vbUxldmVsKHNlbGYuY3VycmVudFpvb21MZXZlbC1zZWxmLm9wdGlvbnMuc2Nyb2xsWm9vbUluY3JlbWVudCk7ICAgICAgICBcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0XHQvL3Njcm9sbGluZyBkb3duXG5cblxuXHRcdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMubWF4Wm9vbUxldmVsKXtcblx0XHRcdFx0XHRcdFx0XHRpZihzZWxmLmN1cnJlbnRab29tTGV2ZWwgPD0gc2VsZi5vcHRpb25zLm1heFpvb21MZXZlbCl7ICAgICAgICAgICBcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuY2hhbmdlWm9vbUxldmVsKHBhcnNlRmxvYXQoc2VsZi5jdXJyZW50Wm9vbUxldmVsKStzZWxmLm9wdGlvbnMuc2Nyb2xsWm9vbUluY3JlbWVudCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHRcdFx0Ly9hbmR5IFxuXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5jaGFuZ2Vab29tTGV2ZWwocGFyc2VGbG9hdChzZWxmLmN1cnJlbnRab29tTGV2ZWwpK3NlbGYub3B0aW9ucy5zY3JvbGxab29tSW5jcmVtZW50KTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXG5cdFx0XHR9LFxuXHRcdFx0c2V0RWxlbWVudHM6IGZ1bmN0aW9uKHR5cGUpIHtcblx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBpZighc2VsZi5vcHRpb25zLnpvb21FbmFibGVkKXtyZXR1cm4gZmFsc2U7fVxuXHRcdFx0XHRpZih0eXBlPT1cInNob3dcIil7XG5cdFx0XHRcdFx0aWYoc2VsZi5pc1dpbmRvd1NldCl7XG5cdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJpbm5lclwiKSB7c2VsZi5zaG93SGlkZVdpbmRvdyhcInNob3dcIik7fVxuXHRcdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwid2luZG93XCIpIHtzZWxmLnNob3dIaWRlV2luZG93KFwic2hvd1wiKTt9XG5cdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuc2hvd0xlbnMpIHtzZWxmLnNob3dIaWRlTGVucyhcInNob3dcIik7fVxuXHRcdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnRpbnQgJiYgc2VsZi5vcHRpb25zLnpvb21UeXBlICE9IFwiaW5uZXJcIikge3NlbGYuc2hvd0hpZGVUaW50KFwic2hvd1wiKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZih0eXBlPT1cImhpZGVcIil7XG5cdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwid2luZG93XCIpIHtzZWxmLnNob3dIaWRlV2luZG93KFwiaGlkZVwiKTt9XG5cdFx0XHRcdFx0aWYoIXNlbGYub3B0aW9ucy50aW50KSB7c2VsZi5zaG93SGlkZVdpbmRvdyhcImhpZGVcIik7fVxuXHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy5zaG93TGVucykge3NlbGYuc2hvd0hpZGVMZW5zKFwiaGlkZVwiKTt9XG5cdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnRpbnQpIHtcdHNlbGYuc2hvd0hpZGVUaW50KFwiaGlkZVwiKTt9XG5cdFx0XHRcdH0gICBcblx0XHRcdH0sXG5cdFx0XHRzZXRQb3NpdGlvbjogZnVuY3Rpb24oZSkge1xuICAgICAgXG5cdFx0XHRcdHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIGlmKCFzZWxmLm9wdGlvbnMuem9vbUVuYWJsZWQpe3JldHVybiBmYWxzZTt9XG5cblx0XHRcdFx0Ly9yZWNhY2xjIG9mZnNldCBlYWNoIHRpbWUgaW4gY2FzZSB0aGUgaW1hZ2UgbW92ZXNcblx0XHRcdFx0Ly90aGlzIGNhbiBiZSBjYXVzZWQgYnkgb3RoZXIgb24gcGFnZSBlbGVtZW50c1xuXHRcdFx0XHRzZWxmLm56SGVpZ2h0ID0gc2VsZi4kZWxlbS5oZWlnaHQoKTtcblx0XHRcdFx0c2VsZi5ueldpZHRoID0gc2VsZi4kZWxlbS53aWR0aCgpO1xuXHRcdFx0XHRzZWxmLm56T2Zmc2V0ID0gc2VsZi4kZWxlbS5vZmZzZXQoKTtcblxuXHRcdFx0XHRpZihzZWxmLm9wdGlvbnMudGludCAmJiBzZWxmLm9wdGlvbnMuem9vbVR5cGUgIT0gXCJpbm5lclwiKSB7XG5cdFx0XHRcdFx0c2VsZi56b29tVGludC5jc3MoeyB0b3A6IDB9KTtcblx0XHRcdFx0XHRzZWxmLnpvb21UaW50LmNzcyh7IGxlZnQ6IDB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvL3NldCByZXNwb25zaXZlICAgICAgIFxuXHRcdFx0XHQvL3dpbGwgY2hlY2tpbmcgaWYgdGhlIGltYWdlIG5lZWRzIGNoYW5naW5nIGJlZm9yZSBydW5uaW5nIHRoaXMgY29kZSB3b3JrIGZhc3Rlcj9cblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnJlc3BvbnNpdmUgJiYgIXNlbGYub3B0aW9ucy5zY3JvbGxab29tKXtcblx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuc2hvd0xlbnMpeyBcblx0XHRcdFx0XHRcdGlmKHNlbGYubnpIZWlnaHQgPCBzZWxmLm9wdGlvbnMuem9vbVdpbmRvd1dpZHRoL3NlbGYud2lkdGhSYXRpbyl7XG5cdFx0XHRcdFx0XHRcdGxlbnNIZWlnaHQgPSBzZWxmLm56SGVpZ2h0OyAgICAgICAgICAgICAgXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0XHRsZW5zSGVpZ2h0ID0gU3RyaW5nKChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd0hlaWdodC9zZWxmLmhlaWdodFJhdGlvKSlcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKHNlbGYubGFyZ2VXaWR0aCA8IHNlbGYub3B0aW9ucy56b29tV2luZG93V2lkdGgpe1xuXHRcdFx0XHRcdFx0XHRsZW5zV2lkdGggPSBzZWxmLm56V2lkdGg7XG5cdFx0XHRcdFx0XHR9ICAgICAgIFxuXHRcdFx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHRcdFx0bGVuc1dpZHRoID0gIChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd1dpZHRoL3NlbGYud2lkdGhSYXRpbyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRzZWxmLndpZHRoUmF0aW8gPSBzZWxmLmxhcmdlV2lkdGggLyBzZWxmLm56V2lkdGg7XG5cdFx0XHRcdFx0XHRzZWxmLmhlaWdodFJhdGlvID0gc2VsZi5sYXJnZUhlaWdodCAvIHNlbGYubnpIZWlnaHQ7ICAgICAgICBcblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImxlbnNcIikge1xuXG5cblx0XHRcdFx0XHRcdFx0Ly9wb3NzaWJseSBkb250IG5lZWQgdG8ga2VlcCByZWNhbGNhbGN1bGF0aW5nXG5cdFx0XHRcdFx0XHRcdC8vaWYgdGhlIGxlbnMgaXMgaGVpZ2hlciB0aGFuIHRoZSBpbWFnZSwgdGhlbiBzZXQgbGVucyBzaXplIHRvIGltYWdlIHNpemVcblx0XHRcdFx0XHRcdFx0aWYoc2VsZi5uekhlaWdodCA8IHNlbGYub3B0aW9ucy56b29tV2luZG93V2lkdGgvc2VsZi53aWR0aFJhdGlvKXtcblx0XHRcdFx0XHRcdFx0XHRsZW5zSGVpZ2h0ID0gc2VsZi5uekhlaWdodDsgIFxuXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHRcdFx0XHRsZW5zSGVpZ2h0ID0gU3RyaW5nKChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd0hlaWdodC9zZWxmLmhlaWdodFJhdGlvKSlcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGlmKHNlbGYubnpXaWR0aCA8IHNlbGYub3B0aW9ucy56b29tV2luZG93SGVpZ2h0L3NlbGYuaGVpZ2h0UmF0aW8pe1xuXHRcdFx0XHRcdFx0XHRcdGxlbnNXaWR0aCA9IHNlbGYubnpXaWR0aDtcblx0XHRcdFx0XHRcdFx0fSAgICAgICBcblx0XHRcdFx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHRcdFx0XHRsZW5zV2lkdGggPSAgU3RyaW5nKChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd1dpZHRoL3NlbGYud2lkdGhSYXRpbykpO1xuXHRcdFx0XHRcdFx0XHR9ICAgICAgICAgICAgXG5cblx0XHRcdFx0XHRcdFx0c2VsZi56b29tTGVucy5jc3MoJ3dpZHRoJywgbGVuc1dpZHRoKTsgICAgXG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbUxlbnMuY3NzKCdoZWlnaHQnLCBsZW5zSGVpZ2h0KTsgXG5cblx0XHRcdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnRpbnQpeyAgICBcblx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21UaW50SW1hZ2UuY3NzKCd3aWR0aCcsIHNlbGYubnpXaWR0aCk7ICAgIFxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnRJbWFnZS5jc3MoJ2hlaWdodCcsIHNlbGYubnpIZWlnaHQpOyBcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9ICAgICAgICAgICAgICAgICAgICAgXG5cdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJsZW5zXCIpIHsgIFxuXG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbUxlbnMuY3NzKHsgd2lkdGg6IFN0cmluZyhzZWxmLm9wdGlvbnMubGVuc1NpemUpICsgJ3B4JywgaGVpZ2h0OiBTdHJpbmcoc2VsZi5vcHRpb25zLmxlbnNTaXplKSArICdweCcgfSkgICAgICBcblxuXG5cdFx0XHRcdFx0XHR9ICAgICAgICBcblx0XHRcdFx0XHRcdC8vZW5kIHJlc3BvbnNpdmUgaW1hZ2UgY2hhbmdlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly9jb250YWluZXIgZml4XG5cdFx0XHRcdHNlbGYuem9vbUNvbnRhaW5lci5jc3MoeyB0b3A6IHNlbGYubnpPZmZzZXQudG9wfSk7XG5cdFx0XHRcdHNlbGYuem9vbUNvbnRhaW5lci5jc3MoeyBsZWZ0OiBzZWxmLm56T2Zmc2V0LmxlZnR9KTtcblx0XHRcdFx0c2VsZi5tb3VzZUxlZnQgPSBwYXJzZUludChlLnBhZ2VYIC0gc2VsZi5uek9mZnNldC5sZWZ0KTtcblx0XHRcdFx0c2VsZi5tb3VzZVRvcCA9IHBhcnNlSW50KGUucGFnZVkgLSBzZWxmLm56T2Zmc2V0LnRvcCk7XG5cdFx0XHRcdC8vY2FsY3VsYXRlIHRoZSBMb2NhdGlvbiBvZiB0aGUgTGVuc1xuXG5cdFx0XHRcdC8vY2FsY3VsYXRlIHRoZSBib3VuZCByZWdpb25zIC0gYnV0IG9ubHkgaWYgem9vbSB3aW5kb3dcblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwid2luZG93XCIpIHtcblx0XHRcdFx0XHRzZWxmLkV0b3Bwb3MgPSAoc2VsZi5tb3VzZVRvcCA8IChzZWxmLnpvb21MZW5zLmhlaWdodCgpLzIpKTtcblx0XHRcdFx0XHRzZWxmLkVib3Bwb3MgPSAoc2VsZi5tb3VzZVRvcCA+IHNlbGYubnpIZWlnaHQgLSAoc2VsZi56b29tTGVucy5oZWlnaHQoKS8yKS0oc2VsZi5vcHRpb25zLmxlbnNCb3JkZXJTaXplKjIpKTtcblx0XHRcdFx0XHRzZWxmLkVsb3Bwb3MgPSAoc2VsZi5tb3VzZUxlZnQgPCAwKygoc2VsZi56b29tTGVucy53aWR0aCgpLzIpKSk7IFxuXHRcdFx0XHRcdHNlbGYuRXJvcHBvcyA9IChzZWxmLm1vdXNlTGVmdCA+IChzZWxmLm56V2lkdGggLSAoc2VsZi56b29tTGVucy53aWR0aCgpLzIpLShzZWxmLm9wdGlvbnMubGVuc0JvcmRlclNpemUqMikpKTsgIFxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vY2FsY3VsYXRlIHRoZSBib3VuZCByZWdpb25zIC0gYnV0IG9ubHkgZm9yIGlubmVyIHpvb21cblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwiaW5uZXJcIil7IFxuXHRcdFx0XHRcdHNlbGYuRXRvcHBvcyA9IChzZWxmLm1vdXNlVG9wIDwgKChzZWxmLm56SGVpZ2h0LzIpL3NlbGYuaGVpZ2h0UmF0aW8pICk7XG5cdFx0XHRcdFx0c2VsZi5FYm9wcG9zID0gKHNlbGYubW91c2VUb3AgPiAoc2VsZi5uekhlaWdodCAtICgoc2VsZi5uekhlaWdodC8yKS9zZWxmLmhlaWdodFJhdGlvKSkpO1xuXHRcdFx0XHRcdHNlbGYuRWxvcHBvcyA9IChzZWxmLm1vdXNlTGVmdCA8IDArKCgoc2VsZi5ueldpZHRoLzIpL3NlbGYud2lkdGhSYXRpbykpKTtcblx0XHRcdFx0XHRzZWxmLkVyb3Bwb3MgPSAoc2VsZi5tb3VzZUxlZnQgPiAoc2VsZi5ueldpZHRoIC0gKHNlbGYubnpXaWR0aC8yKS9zZWxmLndpZHRoUmF0aW8tKHNlbGYub3B0aW9ucy5sZW5zQm9yZGVyU2l6ZSoyKSkpOyAgXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBpZiB0aGUgbW91c2UgcG9zaXRpb24gb2YgdGhlIHNsaWRlciBpcyBvbmUgb2YgdGhlIG91dGVyYm91bmRzLCB0aGVuIGhpZGUgIHdpbmRvdyBhbmQgbGVuc1xuXHRcdFx0XHRpZiAoc2VsZi5tb3VzZUxlZnQgPCAwIHx8IHNlbGYubW91c2VUb3AgPCAwIHx8IHNlbGYubW91c2VMZWZ0ID4gc2VsZi5ueldpZHRoIHx8IHNlbGYubW91c2VUb3AgPiBzZWxmLm56SGVpZ2h0ICkge1x0XHRcdFx0ICAgICAgICAgIFxuXHRcdFx0XHRcdHNlbGYuc2V0RWxlbWVudHMoXCJoaWRlXCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHQvL2Vsc2UgY29udGludWUgd2l0aCBvcGVyYXRpb25zXG5cdFx0XHRcdGVsc2Uge1xuXG5cblx0XHRcdFx0XHQvL2xlbnMgb3B0aW9uc1xuXHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy5zaG93TGVucykge1xuXHRcdFx0XHRcdFx0Ly9cdFx0c2VsZi5zaG93SGlkZUxlbnMoXCJzaG93XCIpO1xuXHRcdFx0XHRcdFx0Ly9zZXQgYmFja2dyb3VuZCBwb3NpdGlvbiBvZiBsZW5zXG5cdFx0XHRcdFx0XHRzZWxmLmxlbnNMZWZ0UG9zID0gU3RyaW5nKE1hdGguZmxvb3Ioc2VsZi5tb3VzZUxlZnQgLSBzZWxmLnpvb21MZW5zLndpZHRoKCkgLyAyKSk7XG5cdFx0XHRcdFx0XHRzZWxmLmxlbnNUb3BQb3MgPSBTdHJpbmcoTWF0aC5mbG9vcihzZWxmLm1vdXNlVG9wIC0gc2VsZi56b29tTGVucy5oZWlnaHQoKSAvIDIpKTtcblxuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vYWRqdXN0IHRoZSBiYWNrZ3JvdW5kIHBvc2l0aW9uIGlmIHRoZSBtb3VzZSBpcyBpbiBvbmUgb2YgdGhlIG91dGVyIHJlZ2lvbnMgXG5cblx0XHRcdFx0XHQvL1RvcCByZWdpb25cblx0XHRcdFx0XHRpZihzZWxmLkV0b3Bwb3Mpe1xuXHRcdFx0XHRcdFx0c2VsZi5sZW5zVG9wUG9zID0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly9MZWZ0IFJlZ2lvblxuXHRcdFx0XHRcdGlmKHNlbGYuRWxvcHBvcyl7XG5cdFx0XHRcdFx0XHRzZWxmLndpbmRvd0xlZnRQb3MgPSAwO1xuXHRcdFx0XHRcdFx0c2VsZi5sZW5zTGVmdFBvcyA9IDA7XG5cdFx0XHRcdFx0XHRzZWxmLnRpbnRwb3M9MDtcblx0XHRcdFx0XHR9ICAgICBcblx0XHRcdFx0XHQvL1NldCBib3R0b20gYW5kIHJpZ2h0IHJlZ2lvbiBmb3Igd2luZG93IG1vZGVcblx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJ3aW5kb3dcIikge1xuXHRcdFx0XHRcdFx0aWYoc2VsZi5FYm9wcG9zKXtcblx0XHRcdFx0XHRcdFx0c2VsZi5sZW5zVG9wUG9zID0gTWF0aC5tYXgoIChzZWxmLm56SGVpZ2h0KS1zZWxmLnpvb21MZW5zLmhlaWdodCgpLShzZWxmLm9wdGlvbnMubGVuc0JvcmRlclNpemUqMiksIDAgKTtcblx0XHRcdFx0XHRcdH0gXG5cdFx0XHRcdFx0XHRpZihzZWxmLkVyb3Bwb3Mpe1xuXHRcdFx0XHRcdFx0XHRzZWxmLmxlbnNMZWZ0UG9zID0gKHNlbGYubnpXaWR0aC0oc2VsZi56b29tTGVucy53aWR0aCgpKS0oc2VsZi5vcHRpb25zLmxlbnNCb3JkZXJTaXplKjIpKTtcblx0XHRcdFx0XHRcdH0gIFxuXHRcdFx0XHRcdH0gIFxuXHRcdFx0XHRcdC8vU2V0IGJvdHRvbSBhbmQgcmlnaHQgcmVnaW9uIGZvciBpbm5lciBtb2RlXG5cdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwiaW5uZXJcIikge1xuXHRcdFx0XHRcdFx0aWYoc2VsZi5FYm9wcG9zKXtcblx0XHRcdFx0XHRcdFx0c2VsZi5sZW5zVG9wUG9zID0gTWF0aC5tYXgoICgoc2VsZi5uekhlaWdodCktKHNlbGYub3B0aW9ucy5sZW5zQm9yZGVyU2l6ZSoyKSksIDAgKTtcblx0XHRcdFx0XHRcdH0gXG5cdFx0XHRcdFx0XHRpZihzZWxmLkVyb3Bwb3Mpe1xuXHRcdFx0XHRcdFx0XHRzZWxmLmxlbnNMZWZ0UG9zID0gKHNlbGYubnpXaWR0aC0oc2VsZi5ueldpZHRoKS0oc2VsZi5vcHRpb25zLmxlbnNCb3JkZXJTaXplKjIpKTtcblx0XHRcdFx0XHRcdH0gIFxuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vaWYgbGVucyB6b29tXG5cdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwibGVuc1wiKSB7ICBcblx0XHRcdFx0XHRcdHNlbGYud2luZG93TGVmdFBvcyA9IFN0cmluZygoKGUucGFnZVggLSBzZWxmLm56T2Zmc2V0LmxlZnQpICogc2VsZi53aWR0aFJhdGlvIC0gc2VsZi56b29tTGVucy53aWR0aCgpIC8gMikgKiAoLTEpKTsgICBcblx0XHRcdFx0XHRcdHNlbGYud2luZG93VG9wUG9zID0gU3RyaW5nKCgoZS5wYWdlWSAtIHNlbGYubnpPZmZzZXQudG9wKSAqIHNlbGYuaGVpZ2h0UmF0aW8gLSBzZWxmLnpvb21MZW5zLmhlaWdodCgpIC8gMikgKiAoLTEpKTtcblxuXHRcdFx0XHRcdFx0c2VsZi56b29tTGVucy5jc3MoeyBiYWNrZ3JvdW5kUG9zaXRpb246IHNlbGYud2luZG93TGVmdFBvcyArICdweCAnICsgc2VsZi53aW5kb3dUb3BQb3MgKyAncHgnIH0pO1xuXG5cdFx0XHRcdFx0XHRpZihzZWxmLmNoYW5nZUJnU2l6ZSl7ICBcblxuXHRcdFx0XHRcdFx0XHRpZihzZWxmLm56SGVpZ2h0PnNlbGYubnpXaWR0aCl7ICBcblx0XHRcdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJsZW5zXCIpeyAgICAgICBcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuem9vbUxlbnMuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoL3NlbGYubmV3dmFsdWVoZWlnaHQgKyAncHggJyArIHNlbGYubGFyZ2VIZWlnaHQvc2VsZi5uZXd2YWx1ZWhlaWdodCArICdweCcgfSk7XG5cdFx0XHRcdFx0XHRcdFx0fSAgIFxuXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi56b29tV2luZG93LmNzcyh7IFwiYmFja2dyb3VuZC1zaXplXCI6IHNlbGYubGFyZ2VXaWR0aC9zZWxmLm5ld3ZhbHVlaGVpZ2h0ICsgJ3B4ICcgKyBzZWxmLmxhcmdlSGVpZ2h0L3NlbGYubmV3dmFsdWVoZWlnaHQgKyAncHgnIH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2V7ICAgICBcblx0XHRcdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJsZW5zXCIpeyAgICAgICBcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuem9vbUxlbnMuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoL3NlbGYubmV3dmFsdWV3aWR0aCArICdweCAnICsgc2VsZi5sYXJnZUhlaWdodC9zZWxmLm5ld3ZhbHVld2lkdGggKyAncHgnIH0pO1xuXHRcdFx0XHRcdFx0XHRcdH0gICBcblx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoL3NlbGYubmV3dmFsdWV3aWR0aCArICdweCAnICsgc2VsZi5sYXJnZUhlaWdodC9zZWxmLm5ld3ZhbHVld2lkdGggKyAncHgnIH0pOyAgICAgICAgICAgIFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHNlbGYuY2hhbmdlQmdTaXplID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR9ICAgIFxuXG5cdFx0XHRcdFx0XHRzZWxmLnNldFdpbmRvd1Bvc3RpdGlvbihlKTsgIFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvL2lmIHRpbnQgem9vbSAgIFxuXHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy50aW50ICYmIHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImlubmVyXCIpIHtcblx0XHRcdFx0XHRcdHNlbGYuc2V0VGludFBvc2l0aW9uKGUpO1xuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vc2V0IHRoZSBjc3MgYmFja2dyb3VuZCBwb3NpdGlvbiBcblx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJ3aW5kb3dcIikge1xuXHRcdFx0XHRcdFx0c2VsZi5zZXRXaW5kb3dQb3N0aXRpb24oZSk7ICAgXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImlubmVyXCIpIHtcblx0XHRcdFx0XHRcdHNlbGYuc2V0V2luZG93UG9zdGl0aW9uKGUpOyAgIFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuc2hvd0xlbnMpIHtcblxuXHRcdFx0XHRcdFx0aWYoc2VsZi5mdWxsd2lkdGggJiYgc2VsZi5vcHRpb25zLnpvb21UeXBlICE9IFwibGVuc1wiKXtcblx0XHRcdFx0XHRcdFx0c2VsZi5sZW5zTGVmdFBvcyA9IDA7XG5cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHNlbGYuem9vbUxlbnMuY3NzKHsgbGVmdDogc2VsZi5sZW5zTGVmdFBvcyArICdweCcsIHRvcDogc2VsZi5sZW5zVG9wUG9zICsgJ3B4JyB9KSAgXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0gLy9lbmQgZWxzZVxuXG5cblxuXHRcdFx0fSxcblx0XHRcdHNob3dIaWRlV2luZG93OiBmdW5jdGlvbihjaGFuZ2UpIHtcblx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzOyAgICAgICAgICAgICAgXG5cdFx0XHRcdGlmKGNoYW5nZSA9PSBcInNob3dcIil7ICAgICAgXG5cdFx0XHRcdFx0aWYoIXNlbGYuaXNXaW5kb3dBY3RpdmUpe1xuXHRcdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dGYWRlSW4pe1xuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuc3RvcCh0cnVlLCB0cnVlLCBmYWxzZSkuZmFkZUluKHNlbGYub3B0aW9ucy56b29tV2luZG93RmFkZUluKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2V7c2VsZi56b29tV2luZG93LnNob3coKTt9XG5cdFx0XHRcdFx0XHRzZWxmLmlzV2luZG93QWN0aXZlID0gdHJ1ZTtcblx0XHRcdFx0XHR9ICAgICAgICAgICAgXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoY2hhbmdlID09IFwiaGlkZVwiKXtcblx0XHRcdFx0XHRpZihzZWxmLmlzV2luZG93QWN0aXZlKXtcblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tV2luZG93RmFkZU91dCl7XG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbVdpbmRvdy5zdG9wKHRydWUsIHRydWUpLmZhZGVPdXQoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dGYWRlT3V0LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYubG9vcCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly9zdG9wIG1vdmluZyB0aGUgem9vbSB3aW5kb3cgd2hlbiB6b29tIHdpbmRvdyBpcyBmYWRlZCBvdXRcblx0XHRcdFx0XHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoc2VsZi5sb29wKTtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYubG9vcCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNle3NlbGYuem9vbVdpbmRvdy5oaWRlKCk7fVxuXHRcdFx0XHRcdFx0c2VsZi5pc1dpbmRvd0FjdGl2ZSA9IGZhbHNlOyAgICAgICAgXG5cdFx0XHRcdFx0fSAgICAgIFxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0c2hvd0hpZGVMZW5zOiBmdW5jdGlvbihjaGFuZ2UpIHtcblx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzOyAgICAgICAgICAgICAgXG5cdFx0XHRcdGlmKGNoYW5nZSA9PSBcInNob3dcIil7ICAgICAgXG5cdFx0XHRcdFx0aWYoIXNlbGYuaXNMZW5zQWN0aXZlKXtcblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy5sZW5zRmFkZUluKXtcblx0XHRcdFx0XHRcdFx0c2VsZi56b29tTGVucy5zdG9wKHRydWUsIHRydWUsIGZhbHNlKS5mYWRlSW4oc2VsZi5vcHRpb25zLmxlbnNGYWRlSW4pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZXtzZWxmLnpvb21MZW5zLnNob3coKTt9XG5cdFx0XHRcdFx0XHRzZWxmLmlzTGVuc0FjdGl2ZSA9IHRydWU7XG5cdFx0XHRcdFx0fSAgICAgICAgICAgIFxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGNoYW5nZSA9PSBcImhpZGVcIil7XG5cdFx0XHRcdFx0aWYoc2VsZi5pc0xlbnNBY3RpdmUpe1xuXHRcdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLmxlbnNGYWRlT3V0KXtcblx0XHRcdFx0XHRcdFx0c2VsZi56b29tTGVucy5zdG9wKHRydWUsIHRydWUpLmZhZGVPdXQoc2VsZi5vcHRpb25zLmxlbnNGYWRlT3V0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2V7c2VsZi56b29tTGVucy5oaWRlKCk7fVxuXHRcdFx0XHRcdFx0c2VsZi5pc0xlbnNBY3RpdmUgPSBmYWxzZTsgICAgICAgIFxuXHRcdFx0XHRcdH0gICAgICBcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHNob3dIaWRlVGludDogZnVuY3Rpb24oY2hhbmdlKSB7XG5cdFx0XHRcdHZhciBzZWxmID0gdGhpczsgICAgICAgICAgICAgIFxuXHRcdFx0XHRpZihjaGFuZ2UgPT0gXCJzaG93XCIpeyAgICAgIFxuXHRcdFx0XHRcdGlmKCFzZWxmLmlzVGludEFjdGl2ZSl7XG5cblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVGludEZhZGVJbil7XG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnQuY3NzKHtvcGFjaXR5OnNlbGYub3B0aW9ucy50aW50T3BhY2l0eX0pLmFuaW1hdGUoKS5zdG9wKHRydWUsIHRydWUpLmZhZGVJbihcInNsb3dcIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21UaW50LmNzcyh7b3BhY2l0eTpzZWxmLm9wdGlvbnMudGludE9wYWNpdHl9KS5hbmltYXRlKCk7XG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnQuc2hvdygpO1xuXG5cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHNlbGYuaXNUaW50QWN0aXZlID0gdHJ1ZTtcblx0XHRcdFx0XHR9ICAgICAgICAgICAgXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoY2hhbmdlID09IFwiaGlkZVwiKXsgICAgICBcblx0XHRcdFx0XHRpZihzZWxmLmlzVGludEFjdGl2ZSl7IFxuXG5cdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVRpbnRGYWRlT3V0KXtcblx0XHRcdFx0XHRcdFx0c2VsZi56b29tVGludC5zdG9wKHRydWUsIHRydWUpLmZhZGVPdXQoc2VsZi5vcHRpb25zLnpvb21UaW50RmFkZU91dCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNle3NlbGYuem9vbVRpbnQuaGlkZSgpO31cblx0XHRcdFx0XHRcdHNlbGYuaXNUaW50QWN0aXZlID0gZmFsc2U7ICAgICAgICBcblx0XHRcdFx0XHR9ICAgICAgXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRzZXRMZW5zUG9zdGl0aW9uOiBmdW5jdGlvbiggZSApIHtcblxuXG5cdFx0XHR9LFxuXHRcdFx0c2V0V2luZG93UG9zdGl0aW9uOiBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0Ly9yZXR1cm4gb2JqLnNsaWNlKCAwLCBjb3VudCApO1xuXHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdFx0aWYoIWlzTmFOKHNlbGYub3B0aW9ucy56b29tV2luZG93UG9zaXRpb24pKXtcblxuXHRcdFx0XHRcdHN3aXRjaCAoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dQb3NpdGlvbikgeyBcblx0XHRcdFx0XHRjYXNlIDE6IC8vZG9uZSAgICAgICAgIFxuXHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRUb3AgPSAoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dPZmZldHkpOy8vRE9ORSAtIDFcblx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0TGVmdCA9KCtzZWxmLm56V2lkdGgpOyAvL0RPTkUgMSwgMiwgMywgNCwgMTZcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgMjpcblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tV2luZG93SGVpZ2h0ID4gc2VsZi5uekhlaWdodCl7IC8vcG9zaXRpdmUgbWFyZ2luXG5cblx0XHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRUb3AgPSAoKHNlbGYub3B0aW9ucy56b29tV2luZG93SGVpZ2h0LzIpLShzZWxmLm56SGVpZ2h0LzIpKSooLTEpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLndpbmRvd09mZnNldExlZnQgPShzZWxmLm56V2lkdGgpOyAvL0RPTkUgMSwgMiwgMywgNCwgMTZcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2V7IC8vbmVnYXRpdmUgbWFyZ2luXG5cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgMzogLy9kb25lICAgICAgICBcblx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0VG9wID0gKHNlbGYubnpIZWlnaHQgLSBzZWxmLnpvb21XaW5kb3cuaGVpZ2h0KCkgLSAoc2VsZi5vcHRpb25zLmJvcmRlclNpemUqMikpOyAvL0RPTkUgMyw5XG5cdFx0XHRcdFx0XHRzZWxmLndpbmRvd09mZnNldExlZnQgPShzZWxmLm56V2lkdGgpOyAvL0RPTkUgMSwgMiwgMywgNCwgMTZcblx0XHRcdFx0XHRcdGJyZWFrOyAgICAgIFxuXHRcdFx0XHRcdGNhc2UgNDogLy9kb25lICBcblx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0VG9wID0gKHNlbGYubnpIZWlnaHQpOyAvL0RPTkUgLSA0LDUsNiw3LDhcblx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0TGVmdCA9KHNlbGYubnpXaWR0aCk7IC8vRE9ORSAxLCAyLCAzLCA0LCAxNlxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSA1OiAvL2RvbmUgIFxuXHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRUb3AgPSAoc2VsZi5uekhlaWdodCk7IC8vRE9ORSAtIDQsNSw2LDcsOFxuXHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRMZWZ0ID0oc2VsZi5ueldpZHRoLXNlbGYuem9vbVdpbmRvdy53aWR0aCgpLShzZWxmLm9wdGlvbnMuYm9yZGVyU2l6ZSoyKSk7IC8vRE9ORSAtIDUsMTVcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgNjogXG5cdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVdpbmRvd0hlaWdodCA+IHNlbGYubnpIZWlnaHQpeyAvL3Bvc2l0aXZlIG1hcmdpblxuXHRcdFx0XHRcdFx0XHRzZWxmLndpbmRvd09mZnNldFRvcCA9IChzZWxmLm56SGVpZ2h0KTsgIC8vRE9ORSAtIDQsNSw2LDcsOFxuXG5cdFx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0TGVmdCA9KChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd1dpZHRoLzIpLShzZWxmLm56V2lkdGgvMikrKHNlbGYub3B0aW9ucy5ib3JkZXJTaXplKjIpKSooLTEpOyAgXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNleyAvL25lZ2F0aXZlIG1hcmdpblxuXG5cdFx0XHRcdFx0XHR9XG5cblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSA3OiAvL2RvbmUgIFxuXHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRUb3AgPSAoc2VsZi5uekhlaWdodCk7ICAvL0RPTkUgLSA0LDUsNiw3LDhcblx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0TGVmdCA9IDA7IC8vRE9ORSA3LCAxM1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSA4OiAvL2RvbmUgIFxuXHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRUb3AgPSAoc2VsZi5uekhlaWdodCk7IC8vRE9ORSAtIDQsNSw2LDcsOFxuXHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRMZWZ0ID0oc2VsZi56b29tV2luZG93LndpZHRoKCkrKHNlbGYub3B0aW9ucy5ib3JkZXJTaXplKjIpICkqICgtMSk7ICAvL0RPTkUgOCw5LDEwLDExLDEyXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIDk6ICAvL2RvbmUgIFxuXHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRUb3AgPSAoc2VsZi5uekhlaWdodCAtIHNlbGYuem9vbVdpbmRvdy5oZWlnaHQoKSAtIChzZWxmLm9wdGlvbnMuYm9yZGVyU2l6ZSoyKSk7IC8vRE9ORSAzLDlcblx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0TGVmdCA9KHNlbGYuem9vbVdpbmRvdy53aWR0aCgpKyhzZWxmLm9wdGlvbnMuYm9yZGVyU2l6ZSoyKSApKiAoLTEpOyAgLy9ET05FIDgsOSwxMCwxMSwxMlxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAxMDogXG5cdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVdpbmRvd0hlaWdodCA+IHNlbGYubnpIZWlnaHQpeyAvL3Bvc2l0aXZlIG1hcmdpblxuXG5cdFx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0VG9wID0gKChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd0hlaWdodC8yKS0oc2VsZi5uekhlaWdodC8yKSkqKC0xKTtcblx0XHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRMZWZ0ID0oc2VsZi56b29tV2luZG93LndpZHRoKCkrKHNlbGYub3B0aW9ucy5ib3JkZXJTaXplKjIpICkqICgtMSk7ICAvL0RPTkUgOCw5LDEwLDExLDEyXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNleyAvL25lZ2F0aXZlIG1hcmdpblxuXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIDExOiBcblx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0VG9wID0gKHNlbGYub3B0aW9ucy56b29tV2luZG93T2ZmZXR5KTtcblx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0TGVmdCA9KHNlbGYuem9vbVdpbmRvdy53aWR0aCgpKyhzZWxmLm9wdGlvbnMuYm9yZGVyU2l6ZSoyKSApKiAoLTEpOyAgLy9ET05FIDgsOSwxMCwxMSwxMlxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAxMjogLy9kb25lICBcblx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0VG9wID0gKHNlbGYuem9vbVdpbmRvdy5oZWlnaHQoKSsoc2VsZi5vcHRpb25zLmJvcmRlclNpemUqMikpKigtMSk7IC8vRE9ORSAxMiwxMywxNCwxNSwxNlxuXHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRMZWZ0ID0oc2VsZi56b29tV2luZG93LndpZHRoKCkrKHNlbGYub3B0aW9ucy5ib3JkZXJTaXplKjIpICkqICgtMSk7ICAvL0RPTkUgOCw5LDEwLDExLDEyXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIDEzOiAvL2RvbmUgIFxuXHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRUb3AgPSAoc2VsZi56b29tV2luZG93LmhlaWdodCgpKyhzZWxmLm9wdGlvbnMuYm9yZGVyU2l6ZSoyKSkqKC0xKTsgLy9ET05FIDEyLDEzLDE0LDE1LDE2XG5cdFx0XHRcdFx0XHRzZWxmLndpbmRvd09mZnNldExlZnQgPSgwKTsgLy9ET05FIDcsIDEzXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIDE0OiBcblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tV2luZG93SGVpZ2h0ID4gc2VsZi5uekhlaWdodCl7IC8vcG9zaXRpdmUgbWFyZ2luXG5cdFx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0VG9wID0gKHNlbGYuem9vbVdpbmRvdy5oZWlnaHQoKSsoc2VsZi5vcHRpb25zLmJvcmRlclNpemUqMikpKigtMSk7IC8vRE9ORSAxMiwxMywxNCwxNSwxNlxuXG5cdFx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0TGVmdCA9KChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd1dpZHRoLzIpLShzZWxmLm56V2lkdGgvMikrKHNlbGYub3B0aW9ucy5ib3JkZXJTaXplKjIpKSooLTEpOyAgXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNleyAvL25lZ2F0aXZlIG1hcmdpblxuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgMTU6Ly9kb25lICAgXG5cdFx0XHRcdFx0XHRzZWxmLndpbmRvd09mZnNldFRvcCA9IChzZWxmLnpvb21XaW5kb3cuaGVpZ2h0KCkrKHNlbGYub3B0aW9ucy5ib3JkZXJTaXplKjIpKSooLTEpOyAvL0RPTkUgMTIsMTMsMTQsMTUsMTZcblx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0TGVmdCA9KHNlbGYubnpXaWR0aC1zZWxmLnpvb21XaW5kb3cud2lkdGgoKS0oc2VsZi5vcHRpb25zLmJvcmRlclNpemUqMikpOyAvL0RPTkUgLSA1LDE1XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIDE2OiAgLy9kb25lICBcblx0XHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0VG9wID0gKHNlbGYuem9vbVdpbmRvdy5oZWlnaHQoKSsoc2VsZi5vcHRpb25zLmJvcmRlclNpemUqMikpKigtMSk7IC8vRE9ORSAxMiwxMywxNCwxNSwxNlxuXHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRMZWZ0ID0oc2VsZi5ueldpZHRoKTsgLy9ET05FIDEsIDIsIDMsIDQsIDE2XG5cdFx0XHRcdFx0XHRicmVhazsgICAgICAgICAgICBcblx0XHRcdFx0XHRkZWZhdWx0OiAvL2RvbmUgIFxuXHRcdFx0XHRcdFx0c2VsZi53aW5kb3dPZmZzZXRUb3AgPSAoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dPZmZldHkpOy8vRE9ORSAtIDFcblx0XHRcdFx0XHRzZWxmLndpbmRvd09mZnNldExlZnQgPShzZWxmLm56V2lkdGgpOyAvL0RPTkUgMSwgMiwgMywgNCwgMTZcblx0XHRcdFx0XHR9IFxuXHRcdFx0XHR9IC8vZW5kIGlzTkFOXG5cdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0Ly9XRSBDQU4gUE9TSVRJT04gSU4gQSBDTEFTUyAtIEFTU1VNRSBUSEFUIEFOWSBTVFJJTkcgUEFTU0VEIElTXG5cdFx0XHRcdFx0c2VsZi5leHRlcm5hbENvbnRhaW5lciA9ICQoJyMnK3NlbGYub3B0aW9ucy56b29tV2luZG93UG9zaXRpb24pO1xuXHRcdFx0XHRcdHNlbGYuZXh0ZXJuYWxDb250YWluZXJXaWR0aCA9IHNlbGYuZXh0ZXJuYWxDb250YWluZXIud2lkdGgoKTtcblx0XHRcdFx0XHRzZWxmLmV4dGVybmFsQ29udGFpbmVySGVpZ2h0ID0gc2VsZi5leHRlcm5hbENvbnRhaW5lci5oZWlnaHQoKTtcblx0XHRcdFx0XHRzZWxmLmV4dGVybmFsQ29udGFpbmVyT2Zmc2V0ID0gc2VsZi5leHRlcm5hbENvbnRhaW5lci5vZmZzZXQoKTtcblxuXHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0VG9wID0gc2VsZi5leHRlcm5hbENvbnRhaW5lck9mZnNldC50b3A7Ly9ET05FIC0gMVxuXHRcdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0TGVmdCA9c2VsZi5leHRlcm5hbENvbnRhaW5lck9mZnNldC5sZWZ0OyAvL0RPTkUgMSwgMiwgMywgNCwgMTZcblxuXHRcdFx0XHR9XG5cdFx0XHRcdHNlbGYuaXNXaW5kb3dTZXQgPSB0cnVlO1xuXHRcdFx0XHRzZWxmLndpbmRvd09mZnNldFRvcCA9IHNlbGYud2luZG93T2Zmc2V0VG9wICsgc2VsZi5vcHRpb25zLnpvb21XaW5kb3dPZmZldHk7XG5cdFx0XHRcdHNlbGYud2luZG93T2Zmc2V0TGVmdCA9IHNlbGYud2luZG93T2Zmc2V0TGVmdCArIHNlbGYub3B0aW9ucy56b29tV2luZG93T2ZmZXR4O1xuXG5cdFx0XHRcdHNlbGYuem9vbVdpbmRvdy5jc3MoeyB0b3A6IHNlbGYud2luZG93T2Zmc2V0VG9wfSk7XG5cdFx0XHRcdHNlbGYuem9vbVdpbmRvdy5jc3MoeyBsZWZ0OiBzZWxmLndpbmRvd09mZnNldExlZnR9KTtcblxuXHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJpbm5lclwiKSB7XG5cdFx0XHRcdFx0c2VsZi56b29tV2luZG93LmNzcyh7IHRvcDogMH0pO1xuXHRcdFx0XHRcdHNlbGYuem9vbVdpbmRvdy5jc3MoeyBsZWZ0OiAwfSk7XG5cblx0XHRcdFx0fSAgIFxuXG5cblx0XHRcdFx0c2VsZi53aW5kb3dMZWZ0UG9zID0gU3RyaW5nKCgoZS5wYWdlWCAtIHNlbGYubnpPZmZzZXQubGVmdCkgKiBzZWxmLndpZHRoUmF0aW8gLSBzZWxmLnpvb21XaW5kb3cud2lkdGgoKSAvIDIpICogKC0xKSk7ICAgXG5cdFx0XHRcdHNlbGYud2luZG93VG9wUG9zID0gU3RyaW5nKCgoZS5wYWdlWSAtIHNlbGYubnpPZmZzZXQudG9wKSAqIHNlbGYuaGVpZ2h0UmF0aW8gLSBzZWxmLnpvb21XaW5kb3cuaGVpZ2h0KCkgLyAyKSAqICgtMSkpO1xuXHRcdFx0XHRpZihzZWxmLkV0b3Bwb3Mpe3NlbGYud2luZG93VG9wUG9zID0gMDt9XG5cdFx0XHRcdGlmKHNlbGYuRWxvcHBvcyl7c2VsZi53aW5kb3dMZWZ0UG9zID0gMDt9ICAgICBcblx0XHRcdFx0aWYoc2VsZi5FYm9wcG9zKXtzZWxmLndpbmRvd1RvcFBvcyA9IChzZWxmLmxhcmdlSGVpZ2h0L3NlbGYuY3VycmVudFpvb21MZXZlbC1zZWxmLnpvb21XaW5kb3cuaGVpZ2h0KCkpKigtMSk7ICB9IFxuXHRcdFx0XHRpZihzZWxmLkVyb3Bwb3Mpe3NlbGYud2luZG93TGVmdFBvcyA9ICgoc2VsZi5sYXJnZVdpZHRoL3NlbGYuY3VycmVudFpvb21MZXZlbC1zZWxmLnpvb21XaW5kb3cud2lkdGgoKSkqKC0xKSk7fSAgICBcblxuXHRcdFx0XHQvL3N0b3BzIG1pY3JvIG1vdmVtZW50c1xuXHRcdFx0XHRpZihzZWxmLmZ1bGxoZWlnaHQpe1xuXHRcdFx0XHRcdHNlbGYud2luZG93VG9wUG9zID0gMDtcblxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHNlbGYuZnVsbHdpZHRoKXtcblx0XHRcdFx0XHRzZWxmLndpbmRvd0xlZnRQb3MgPSAwO1xuXG5cdFx0XHRcdH1cblx0XHRcdFx0Ly9zZXQgdGhlIGNzcyBiYWNrZ3JvdW5kIHBvc2l0aW9uIFxuXG5cblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwid2luZG93XCIgfHwgc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwiaW5uZXJcIikge1xuXG5cdFx0XHRcdFx0aWYoc2VsZi56b29tTG9jayA9PSAxKXtcblx0XHRcdFx0XHRcdC8vb3ZlcnJpZGVzIGZvciBpbWFnZXMgbm90IHpvb21hYmxlXG5cdFx0XHRcdFx0XHRpZihzZWxmLndpZHRoUmF0aW8gPD0gMSl7XG5cblx0XHRcdFx0XHRcdFx0c2VsZi53aW5kb3dMZWZ0UG9zID0gMDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKHNlbGYuaGVpZ2h0UmF0aW8gPD0gMSl7IFxuXHRcdFx0XHRcdFx0XHRzZWxmLndpbmRvd1RvcFBvcyA9IDA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIGFkanVzdCBpbWFnZXMgbGVzcyB0aGFuIHRoZSB3aW5kb3cgaGVpZ2h0XG5cblx0XHRcdFx0XHRpZiAoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwid2luZG93XCIpIHtcblx0XHRcdFx0XHRcdGlmIChzZWxmLmxhcmdlSGVpZ2h0IDwgc2VsZi5vcHRpb25zLnpvb21XaW5kb3dIZWlnaHQpIHtcblxuXHRcdFx0XHRcdFx0XHRzZWxmLndpbmRvd1RvcFBvcyA9IDA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5sYXJnZVdpZHRoIDwgc2VsZi5vcHRpb25zLnpvb21XaW5kb3dXaWR0aCkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLndpbmRvd0xlZnRQb3MgPSAwO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vc2V0IHRoZSB6b29td2luZG93IGJhY2tncm91bmQgcG9zaXRpb25cblx0XHRcdFx0XHRpZiAoc2VsZi5vcHRpb25zLmVhc2luZyl7XG5cblx0XHRcdFx0XHRcdC8vICAgICBpZihzZWxmLmNoYW5nZVpvb20pe1xuXHRcdFx0XHRcdFx0Ly8gICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi5sb29wKTtcblx0XHRcdFx0XHRcdC8vICAgICAgICAgICBzZWxmLmNoYW5nZVpvb20gPSBmYWxzZTtcblx0XHRcdFx0XHRcdC8vICAgICAgICAgICBzZWxmLmxvb3AgPSBmYWxzZTtcblxuXHRcdFx0XHRcdFx0Ly8gICAgICAgICAgICB9XG5cdFx0XHRcdFx0XHQvL3NldCB0aGUgcG9zIHRvIDAgaWYgbm90IHNldFxuXHRcdFx0XHRcdFx0aWYoIXNlbGYueHApe3NlbGYueHAgPSAwO31cblx0XHRcdFx0XHRcdGlmKCFzZWxmLnlwKXtzZWxmLnlwID0gMDt9ICBcblx0XHRcdFx0XHRcdC8vaWYgbG9vcCBub3QgYWxyZWFkeSBzdGFydGVkLCB0aGVuIHJ1biBpdCBcblx0XHRcdFx0XHRcdGlmICghc2VsZi5sb29wKXsgICAgICAgICAgIFxuXHRcdFx0XHRcdFx0XHRzZWxmLmxvb3AgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpeyAgICAgICAgICAgICAgICBcblx0XHRcdFx0XHRcdFx0XHQvL3VzaW5nIHplbm8ncyBwYXJhZG94ICAgIFxuXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi54cCArPSAoc2VsZi53aW5kb3dMZWZ0UG9zICAtIHNlbGYueHApIC8gc2VsZi5vcHRpb25zLmVhc2luZ0Ftb3VudDsgXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi55cCArPSAoc2VsZi53aW5kb3dUb3BQb3MgIC0gc2VsZi55cCkgLyBzZWxmLm9wdGlvbnMuZWFzaW5nQW1vdW50O1xuXHRcdFx0XHRcdFx0XHRcdGlmKHNlbGYuc2Nyb2xsaW5nTG9jayl7XG5cblxuXHRcdFx0XHRcdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbChzZWxmLmxvb3ApO1xuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi54cCA9IHNlbGYud2luZG93TGVmdFBvcztcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYueXAgPSBzZWxmLndpbmRvd1RvcFBvcyAgICAgICAgICAgIFxuXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnhwID0gKChlLnBhZ2VYIC0gc2VsZi5uek9mZnNldC5sZWZ0KSAqIHNlbGYud2lkdGhSYXRpbyAtIHNlbGYuem9vbVdpbmRvdy53aWR0aCgpIC8gMikgKiAoLTEpO1xuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi55cCA9ICgoKGUucGFnZVkgLSBzZWxmLm56T2Zmc2V0LnRvcCkgKiBzZWxmLmhlaWdodFJhdGlvIC0gc2VsZi56b29tV2luZG93LmhlaWdodCgpIC8gMikgKiAoLTEpKTsgICAgICAgICAgICAgICAgICAgICAgICAgXG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmKHNlbGYuY2hhbmdlQmdTaXplKXsgICAgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmKHNlbGYubnpIZWlnaHQ+c2VsZi5ueldpZHRoKXsgIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImxlbnNcIil7ICAgICAgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21MZW5zLmNzcyh7IFwiYmFja2dyb3VuZC1zaXplXCI6IHNlbGYubGFyZ2VXaWR0aC9zZWxmLm5ld3ZhbHVlaGVpZ2h0ICsgJ3B4ICcgKyBzZWxmLmxhcmdlSGVpZ2h0L3NlbGYubmV3dmFsdWVoZWlnaHQgKyAncHgnIH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gICBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoL3NlbGYubmV3dmFsdWVoZWlnaHQgKyAncHggJyArIHNlbGYubGFyZ2VIZWlnaHQvc2VsZi5uZXd2YWx1ZWhlaWdodCArICdweCcgfSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZXsgICBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgIT0gXCJsZW5zXCIpeyAgICAgIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi56b29tTGVucy5jc3MoeyBcImJhY2tncm91bmQtc2l6ZVwiOiBzZWxmLmxhcmdlV2lkdGgvc2VsZi5uZXd2YWx1ZXdpZHRoICsgJ3B4ICcgKyBzZWxmLmxhcmdlSGVpZ2h0L3NlbGYubmV3dmFsdWVoZWlnaHQgKyAncHgnIH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gICAgICAgICAgICBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoL3NlbGYubmV3dmFsdWV3aWR0aCArICdweCAnICsgc2VsZi5sYXJnZUhlaWdodC9zZWxmLm5ld3ZhbHVld2lkdGggKyAncHgnIH0pOyAgICAgICAgICAgIFxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvKlxuICAgICAgICAgICAgIGlmKCFzZWxmLmJneHApe3NlbGYuYmd4cCA9IHNlbGYubGFyZ2VXaWR0aC9zZWxmLm5ld3ZhbHVlO31cblx0XHRcdFx0XHRcdGlmKCFzZWxmLmJneXApe3NlbGYuYmd5cCA9IHNlbGYubGFyZ2VIZWlnaHQvc2VsZi5uZXd2YWx1ZSA7fSAgXG4gICAgICAgICAgICAgICAgIGlmICghc2VsZi5iZ2xvb3ApeyAgIFxuICAgICAgICAgICAgICAgICBcdHNlbGYuYmdsb29wID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsgICBcblxuICAgICAgICAgICAgICAgICBzZWxmLmJneHAgKz0gKHNlbGYubGFyZ2VXaWR0aC9zZWxmLm5ld3ZhbHVlICAtIHNlbGYuYmd4cCkgLyBzZWxmLm9wdGlvbnMuZWFzaW5nQW1vdW50OyBcblx0XHRcdFx0XHRcdFx0XHRzZWxmLmJneXAgKz0gKHNlbGYubGFyZ2VIZWlnaHQvc2VsZi5uZXd2YWx1ZSAgLSBzZWxmLmJneXApIC8gc2VsZi5vcHRpb25zLmVhc2luZ0Ftb3VudDtcblxuICAgICAgICAgICBzZWxmLnpvb21XaW5kb3cuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5iZ3hwICsgJ3B4ICcgKyBzZWxmLmJneXAgKyAncHgnIH0pO1xuXG5cbiAgICAgICAgICAgICAgICAgIH0sIDE2KTtcblxuICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLmNoYW5nZUJnU2l6ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgYmFja2dyb3VuZFBvc2l0aW9uOiBzZWxmLndpbmRvd0xlZnRQb3MgKyAncHggJyArIHNlbGYud2luZG93VG9wUG9zICsgJ3B4JyB9KTtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuc2Nyb2xsaW5nTG9jayA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5sb29wID0gZmFsc2U7XG5cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoTWF0aC5yb3VuZChNYXRoLmFicyhzZWxmLnhwIC0gc2VsZi53aW5kb3dMZWZ0UG9zKSArIE1hdGguYWJzKHNlbGYueXAgLSBzZWxmLndpbmRvd1RvcFBvcykpIDwgMSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly9zdG9wcyBtaWNybyBtb3ZlbWVudHNcblx0XHRcdFx0XHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoc2VsZi5sb29wKTtcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuem9vbVdpbmRvdy5jc3MoeyBiYWNrZ3JvdW5kUG9zaXRpb246IHNlbGYud2luZG93TGVmdFBvcyArICdweCAnICsgc2VsZi53aW5kb3dUb3BQb3MgKyAncHgnIH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5sb29wID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZihzZWxmLmNoYW5nZUJnU2l6ZSl7ICAgIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZihzZWxmLm56SGVpZ2h0PnNlbGYubnpXaWR0aCl7IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImxlbnNcIil7ICAgICAgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21MZW5zLmNzcyh7IFwiYmFja2dyb3VuZC1zaXplXCI6IHNlbGYubGFyZ2VXaWR0aC9zZWxmLm5ld3ZhbHVlaGVpZ2h0ICsgJ3B4ICcgKyBzZWxmLmxhcmdlSGVpZ2h0L3NlbGYubmV3dmFsdWVoZWlnaHQgKyAncHgnIH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gICAgICAgICBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoL3NlbGYubmV3dmFsdWVoZWlnaHQgKyAncHggJyArIHNlbGYubGFyZ2VIZWlnaHQvc2VsZi5uZXd2YWx1ZWhlaWdodCArICdweCcgfSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZXsgICAgICAgICAgICAgICAgIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImxlbnNcIil7ICAgICBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuem9vbUxlbnMuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoL3NlbGYubmV3dmFsdWV3aWR0aCArICdweCAnICsgc2VsZi5sYXJnZUhlaWdodC9zZWxmLm5ld3ZhbHVld2lkdGggKyAncHgnIH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gICAgICBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoL3NlbGYubmV3dmFsdWV3aWR0aCArICdweCAnICsgc2VsZi5sYXJnZUhlaWdodC9zZWxmLm5ld3ZhbHVld2lkdGggKyAncHgnIH0pOyAgICAgICAgICAgIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuY2hhbmdlQmdTaXplID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHR9ICAgICAgICAgICAgICAgICAgIFxuXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgYmFja2dyb3VuZFBvc2l0aW9uOiBzZWxmLnhwICsgJ3B4ICcgKyBzZWxmLnlwICsgJ3B4JyB9KTtcblx0XHRcdFx0XHRcdFx0XHR9ICAgICAgIFxuXHRcdFx0XHRcdFx0XHR9LCAxNik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSAgIFxuXHRcdFx0XHRcdGVsc2V7ICAgIFxuXHRcdFx0XHRcdFx0aWYoc2VsZi5jaGFuZ2VCZ1NpemUpeyAgXG5cdFx0XHRcdFx0XHRcdGlmKHNlbGYubnpIZWlnaHQ+c2VsZi5ueldpZHRoKXsgIFxuXHRcdFx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImxlbnNcIil7ICAgICAgXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21MZW5zLmNzcyh7IFwiYmFja2dyb3VuZC1zaXplXCI6IHNlbGYubGFyZ2VXaWR0aC9zZWxmLm5ld3ZhbHVlaGVpZ2h0ICsgJ3B4ICcgKyBzZWxmLmxhcmdlSGVpZ2h0L3NlbGYubmV3dmFsdWVoZWlnaHQgKyAncHgnIH0pO1xuXHRcdFx0XHRcdFx0XHRcdH0gXG5cblx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoL3NlbGYubmV3dmFsdWVoZWlnaHQgKyAncHggJyArIHNlbGYubGFyZ2VIZWlnaHQvc2VsZi5uZXd2YWx1ZWhlaWdodCArICdweCcgfSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZXsgICAgIFxuXHRcdFx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImxlbnNcIil7ICAgICAgXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21MZW5zLmNzcyh7IFwiYmFja2dyb3VuZC1zaXplXCI6IHNlbGYubGFyZ2VXaWR0aC9zZWxmLm5ld3ZhbHVld2lkdGggKyAncHggJyArIHNlbGYubGFyZ2VIZWlnaHQvc2VsZi5uZXd2YWx1ZXdpZHRoICsgJ3B4JyB9KTtcblx0XHRcdFx0XHRcdFx0XHR9IFxuXHRcdFx0XHRcdFx0XHRcdGlmKChzZWxmLmxhcmdlSGVpZ2h0L3NlbGYubmV3dmFsdWV3aWR0aCkgPCBzZWxmLm9wdGlvbnMuem9vbVdpbmRvd0hlaWdodCl7IFxuXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoL3NlbGYubmV3dmFsdWV3aWR0aCArICdweCAnICsgc2VsZi5sYXJnZUhlaWdodC9zZWxmLm5ld3ZhbHVld2lkdGggKyAncHgnIH0pOyAgICAgICAgICAgIFxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRlbHNle1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoL3NlbGYubmV3dmFsdWVoZWlnaHQgKyAncHggJyArIHNlbGYubGFyZ2VIZWlnaHQvc2VsZi5uZXd2YWx1ZWhlaWdodCArICdweCcgfSk7ICAgXG5cdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0c2VsZi5jaGFuZ2VCZ1NpemUgPSBmYWxzZTtcblx0XHRcdFx0XHRcdH0gICAgIFxuXG5cdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgYmFja2dyb3VuZFBvc2l0aW9uOiBzZWxmLndpbmRvd0xlZnRQb3MgKyAncHggJyArIHNlbGYud2luZG93VG9wUG9zICsgJ3B4JyB9KTsgICAgICAgXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IFxuXHRcdFx0fSxcblx0XHRcdHNldFRpbnRQb3NpdGlvbjogZnVuY3Rpb24oZSl7XG5cdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0c2VsZi5uek9mZnNldCA9IHNlbGYuJGVsZW0ub2Zmc2V0KCk7XG5cdFx0XHRcdHNlbGYudGludHBvcyA9IFN0cmluZygoKGUucGFnZVggLSBzZWxmLm56T2Zmc2V0LmxlZnQpLShzZWxmLnpvb21MZW5zLndpZHRoKCkgLyAyKSkgKiAoLTEpKTsgXG5cdFx0XHRcdHNlbGYudGludHBvc3kgPSBTdHJpbmcoKChlLnBhZ2VZIC0gc2VsZi5uek9mZnNldC50b3ApIC0gc2VsZi56b29tTGVucy5oZWlnaHQoKSAvIDIpICogKC0xKSk7XHRcblx0XHRcdFx0aWYoc2VsZi5FdG9wcG9zKXtcblx0XHRcdFx0XHRzZWxmLnRpbnRwb3N5ID0gMDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihzZWxmLkVsb3Bwb3Mpe1xuXHRcdFx0XHRcdHNlbGYudGludHBvcz0wO1xuXHRcdFx0XHR9ICAgICBcblx0XHRcdFx0aWYoc2VsZi5FYm9wcG9zKXtcblx0XHRcdFx0XHRzZWxmLnRpbnRwb3N5ID0gKHNlbGYubnpIZWlnaHQtc2VsZi56b29tTGVucy5oZWlnaHQoKS0oc2VsZi5vcHRpb25zLmxlbnNCb3JkZXJTaXplKjIpKSooLTEpO1xuXHRcdFx0XHR9IFxuXHRcdFx0XHRpZihzZWxmLkVyb3Bwb3Mpe1xuXHRcdFx0XHRcdHNlbGYudGludHBvcyA9ICgoc2VsZi5ueldpZHRoLXNlbGYuem9vbUxlbnMud2lkdGgoKS0oc2VsZi5vcHRpb25zLmxlbnNCb3JkZXJTaXplKjIpKSooLTEpKTtcblx0XHRcdFx0fSAgICBcblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnRpbnQpIHtcblx0XHRcdFx0XHQvL3N0b3BzIG1pY3JvIG1vdmVtZW50c1xuXHRcdFx0XHRcdGlmKHNlbGYuZnVsbGhlaWdodCl7XG5cdFx0XHRcdFx0XHRzZWxmLnRpbnRwb3N5ID0gMDtcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihzZWxmLmZ1bGx3aWR0aCl7IFxuXHRcdFx0XHRcdFx0c2VsZi50aW50cG9zID0gMDtcblxuXHRcdFx0XHRcdH0gICBcblx0XHRcdFx0XHRzZWxmLnpvb21UaW50SW1hZ2UuY3NzKHsnbGVmdCc6IHNlbGYudGludHBvcysncHgnfSk7XG5cdFx0XHRcdFx0c2VsZi56b29tVGludEltYWdlLmNzcyh7J3RvcCc6IHNlbGYudGludHBvc3krJ3B4J30pO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRzd2FwdGhlaW1hZ2U6IGZ1bmN0aW9uKHNtYWxsaW1hZ2UsIGxhcmdlaW1hZ2Upe1xuXHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHRcdHZhciBuZXdJbWcgPSBuZXcgSW1hZ2UoKTsgXG5cblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLmxvYWRpbmdJY29uKXtcblx0XHRcdFx0XHRzZWxmLnNwaW5uZXIgPSAkKCc8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogdXJsKFxcJycrc2VsZi5vcHRpb25zLmxvYWRpbmdJY29uKydcXCcpIG5vLXJlcGVhdCBjZW50ZXI7aGVpZ2h0Oicrc2VsZi5uekhlaWdodCsncHg7d2lkdGg6JytzZWxmLm56V2lkdGgrJ3B4O3otaW5kZXg6IDIwMDA7cG9zaXRpb246IGFic29sdXRlOyBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1wiPjwvZGl2PicpO1xuXHRcdFx0XHRcdHNlbGYuJGVsZW0uYWZ0ZXIoc2VsZi5zcGlubmVyKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNlbGYub3B0aW9ucy5vbkltYWdlU3dhcChzZWxmLiRlbGVtKTtcblxuXHRcdFx0XHRuZXdJbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi5sYXJnZVdpZHRoID0gbmV3SW1nLndpZHRoO1xuXHRcdFx0XHRcdHNlbGYubGFyZ2VIZWlnaHQgPSBuZXdJbWcuaGVpZ2h0O1xuXHRcdFx0XHRcdHNlbGYuem9vbUltYWdlID0gbGFyZ2VpbWFnZTtcblx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgXCJiYWNrZ3JvdW5kLXNpemVcIjogc2VsZi5sYXJnZVdpZHRoICsgJ3B4ICcgKyBzZWxmLmxhcmdlSGVpZ2h0ICsgJ3B4JyB9KTtcblx0XHRcdFx0XHRzZWxmLnN3YXBBY3Rpb24oc21hbGxpbWFnZSwgbGFyZ2VpbWFnZSk7XG5cdFx0XHRcdFx0cmV0dXJuOyAgICAgICAgICAgICAgXG5cdFx0XHRcdH0gICAgICAgICAgXG5cdFx0XHRcdG5ld0ltZy5zcmMgPSBsYXJnZWltYWdlOyAvLyB0aGlzIG11c3QgYmUgZG9uZSBBRlRFUiBzZXR0aW5nIG9ubG9hZFxuXG5cdFx0XHR9LFxuXHRcdFx0c3dhcEFjdGlvbjogZnVuY3Rpb24oc21hbGxpbWFnZSwgbGFyZ2VpbWFnZSl7XG5cblxuXHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7ICAgIFxuXG5cdFx0XHRcdHZhciBuZXdJbWcyID0gbmV3IEltYWdlKCk7IFxuXHRcdFx0XHRuZXdJbWcyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdC8vcmUtY2FsY3VsYXRlIHZhbHVlc1xuXHRcdFx0XHRcdHNlbGYubnpIZWlnaHQgPSBuZXdJbWcyLmhlaWdodDtcblx0XHRcdFx0XHRzZWxmLm56V2lkdGggPSBuZXdJbWcyLndpZHRoO1xuXHRcdFx0XHRcdHNlbGYub3B0aW9ucy5vbkltYWdlU3dhcENvbXBsZXRlKHNlbGYuJGVsZW0pO1xuXG5cdFx0XHRcdFx0c2VsZi5kb25lQ2FsbGJhY2soKTsgIFxuXHRcdFx0XHRcdHJldHVybjsgICAgICBcblx0XHRcdFx0fSAgICAgICAgICBcblx0XHRcdFx0bmV3SW1nMi5zcmMgPSBzbWFsbGltYWdlOyBcblxuXHRcdFx0XHQvL3Jlc2V0IHRoZSB6b29tbGV2ZWwgdG8gdGhhdCBpbml0aWFsbHkgc2V0IGluIG9wdGlvbnNcblx0XHRcdFx0c2VsZi5jdXJyZW50Wm9vbUxldmVsID0gc2VsZi5vcHRpb25zLnpvb21MZXZlbDtcblx0XHRcdFx0c2VsZi5vcHRpb25zLm1heFpvb21MZXZlbCA9IGZhbHNlO1xuXG5cdFx0XHRcdC8vc3dhcHMgdGhlIG1haW4gaW1hZ2Vcblx0XHRcdFx0Ly9zZWxmLiRlbGVtLmF0dHIoXCJzcmNcIixzbWFsbGltYWdlKTtcblx0XHRcdFx0Ly9zd2FwcyB0aGUgem9vbSBpbWFnZSAgICAgXG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImxlbnNcIikge1xuXHRcdFx0XHRcdHNlbGYuem9vbUxlbnMuY3NzKHsgYmFja2dyb3VuZEltYWdlOiBcInVybCgnXCIgKyBsYXJnZWltYWdlICsgXCInKVwiIH0pOyBcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJ3aW5kb3dcIikge1xuXHRcdFx0XHRcdHNlbGYuem9vbVdpbmRvdy5jc3MoeyBiYWNrZ3JvdW5kSW1hZ2U6IFwidXJsKCdcIiArIGxhcmdlaW1hZ2UgKyBcIicpXCIgfSk7IFxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImlubmVyXCIpIHtcblx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKHsgYmFja2dyb3VuZEltYWdlOiBcInVybCgnXCIgKyBsYXJnZWltYWdlICsgXCInKVwiIH0pOyBcblx0XHRcdFx0fSBcblxuXG5cblx0XHRcdFx0c2VsZi5jdXJyZW50SW1hZ2UgPSBsYXJnZWltYWdlO1xuXG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy5pbWFnZUNyb3NzZmFkZSl7XG5cdFx0XHRcdFx0dmFyIG9sZEltZyA9IHNlbGYuJGVsZW07XG5cdFx0XHRcdFx0dmFyIG5ld0ltZyA9IG9sZEltZy5jbG9uZSgpOyAgICAgICAgIFxuXHRcdFx0XHRcdHNlbGYuJGVsZW0uYXR0cihcInNyY1wiLHNtYWxsaW1hZ2UpXG5cdFx0XHRcdFx0c2VsZi4kZWxlbS5hZnRlcihuZXdJbWcpO1xuXHRcdFx0XHRcdG5ld0ltZy5zdG9wKHRydWUpLmZhZGVPdXQoc2VsZi5vcHRpb25zLmltYWdlQ3Jvc3NmYWRlLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdCQodGhpcykucmVtb3ZlKCk7ICAgICAgICAgXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvLyAgICAgICBcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImlubmVyXCIpe1xuXHRcdFx0XHRcdC8vcmVtb3ZlIGFueSBhdHRyaWJ1dGVzIG9uIHRoZSBjbG9uZWQgaW1hZ2Ugc28gd2UgY2FuIHJlc2l6ZSBsYXRlclxuXHRcdFx0XHRcdHNlbGYuJGVsZW0ud2lkdGgoXCJhdXRvXCIpLnJlbW92ZUF0dHIoXCJ3aWR0aFwiKTtcblx0XHRcdFx0XHRzZWxmLiRlbGVtLmhlaWdodChcImF1dG9cIikucmVtb3ZlQXR0cihcImhlaWdodFwiKTtcblx0XHRcdFx0XHQvLyAgIH1cblxuXHRcdFx0XHRcdG9sZEltZy5mYWRlSW4oc2VsZi5vcHRpb25zLmltYWdlQ3Jvc3NmYWRlKTtcblxuXHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy50aW50ICYmIHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImlubmVyXCIpIHtcblxuXHRcdFx0XHRcdFx0dmFyIG9sZEltZ1RpbnQgPSBzZWxmLnpvb21UaW50SW1hZ2U7XG5cdFx0XHRcdFx0XHR2YXIgbmV3SW1nVGludCA9IG9sZEltZ1RpbnQuY2xvbmUoKTsgICAgICAgICBcblx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnRJbWFnZS5hdHRyKFwic3JjXCIsbGFyZ2VpbWFnZSlcblx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnRJbWFnZS5hZnRlcihuZXdJbWdUaW50KTtcblx0XHRcdFx0XHRcdG5ld0ltZ1RpbnQuc3RvcCh0cnVlKS5mYWRlT3V0KHNlbGYub3B0aW9ucy5pbWFnZUNyb3NzZmFkZSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdCQodGhpcykucmVtb3ZlKCk7ICAgICAgICAgXG5cdFx0XHRcdFx0XHR9KTtcblxuXG5cblx0XHRcdFx0XHRcdG9sZEltZ1RpbnQuZmFkZUluKHNlbGYub3B0aW9ucy5pbWFnZUNyb3NzZmFkZSk7XG5cblxuXHRcdFx0XHRcdFx0Ly9zZWxmLnpvb21UaW50SW1hZ2UuYXR0cihcIndpZHRoXCIsZWxlbS5kYXRhKFwiaW1hZ2VcIikpO1xuXG5cdFx0XHRcdFx0XHQvL3Jlc2l6ZSB0aGUgdGludCB3aW5kb3dcblx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnQuY3NzKHsgaGVpZ2h0OiBzZWxmLiRlbGVtLmhlaWdodCgpfSk7XG5cdFx0XHRcdFx0XHRzZWxmLnpvb21UaW50LmNzcyh7IHdpZHRoOiBzZWxmLiRlbGVtLndpZHRoKCl9KTtcblx0XHRcdFx0XHR9ICAgIFxuXG5cdFx0XHRcdFx0c2VsZi56b29tQ29udGFpbmVyLmNzcyhcImhlaWdodFwiLCBzZWxmLiRlbGVtLmhlaWdodCgpKTtcblx0XHRcdFx0XHRzZWxmLnpvb21Db250YWluZXIuY3NzKFwid2lkdGhcIiwgc2VsZi4kZWxlbS53aWR0aCgpKTtcblxuXHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImlubmVyXCIpeyBcblx0XHRcdFx0XHRcdGlmKCFzZWxmLm9wdGlvbnMuY29uc3RyYWluVHlwZSl7XG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbVdyYXAucGFyZW50KCkuY3NzKFwiaGVpZ2h0XCIsIHNlbGYuJGVsZW0uaGVpZ2h0KCkpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XcmFwLnBhcmVudCgpLmNzcyhcIndpZHRoXCIsIHNlbGYuJGVsZW0ud2lkdGgoKSk7XG5cblx0XHRcdFx0XHRcdFx0c2VsZi56b29tV2luZG93LmNzcyhcImhlaWdodFwiLCBzZWxmLiRlbGVtLmhlaWdodCgpKTtcblx0XHRcdFx0XHRcdFx0c2VsZi56b29tV2luZG93LmNzcyhcIndpZHRoXCIsIHNlbGYuJGVsZW0ud2lkdGgoKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBcblxuXHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy5pbWFnZUNyb3NzZmFkZSl7ICBcblx0XHRcdFx0XHRcdHNlbGYuem9vbVdyYXAuY3NzKFwiaGVpZ2h0XCIsIHNlbGYuJGVsZW0uaGVpZ2h0KCkpO1xuXHRcdFx0XHRcdFx0c2VsZi56b29tV3JhcC5jc3MoXCJ3aWR0aFwiLCBzZWxmLiRlbGVtLndpZHRoKCkpO1xuXHRcdFx0XHRcdH0gXG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHRzZWxmLiRlbGVtLmF0dHIoXCJzcmNcIixzbWFsbGltYWdlKTsgXG5cdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnRpbnQpIHtcblx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnRJbWFnZS5hdHRyKFwic3JjXCIsbGFyZ2VpbWFnZSk7XG5cdFx0XHRcdFx0XHQvL3NlbGYuem9vbVRpbnRJbWFnZS5hdHRyKFwid2lkdGhcIixlbGVtLmRhdGEoXCJpbWFnZVwiKSk7XG5cdFx0XHRcdFx0XHRzZWxmLnpvb21UaW50SW1hZ2UuYXR0cihcImhlaWdodFwiLHNlbGYuJGVsZW0uaGVpZ2h0KCkpO1xuXHRcdFx0XHRcdFx0Ly9zZWxmLnpvb21UaW50SW1hZ2UuYXR0cignc3JjJykgPSBlbGVtLmRhdGEoXCJpbWFnZVwiKTtcblx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnRJbWFnZS5jc3MoeyBoZWlnaHQ6IHNlbGYuJGVsZW0uaGVpZ2h0KCl9KTsgXG5cdFx0XHRcdFx0XHRzZWxmLnpvb21UaW50LmNzcyh7IGhlaWdodDogc2VsZi4kZWxlbS5oZWlnaHQoKX0pO1xuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHNlbGYuem9vbUNvbnRhaW5lci5jc3MoXCJoZWlnaHRcIiwgc2VsZi4kZWxlbS5oZWlnaHQoKSk7XG5cdFx0XHRcdFx0c2VsZi56b29tQ29udGFpbmVyLmNzcyhcIndpZHRoXCIsIHNlbGYuJGVsZW0ud2lkdGgoKSk7XG5cblx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuaW1hZ2VDcm9zc2ZhZGUpeyAgXG5cdFx0XHRcdFx0XHRzZWxmLnpvb21XcmFwLmNzcyhcImhlaWdodFwiLCBzZWxmLiRlbGVtLmhlaWdodCgpKTtcblx0XHRcdFx0XHRcdHNlbGYuem9vbVdyYXAuY3NzKFwid2lkdGhcIiwgc2VsZi4kZWxlbS53aWR0aCgpKTtcblx0XHRcdFx0XHR9IFxuXHRcdFx0XHR9ICAgICAgICAgICAgICBcblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLmNvbnN0cmFpblR5cGUpeyAgICAgXG5cblx0XHRcdFx0XHQvL1RoaXMgd2lsbCBjb250cmFpbiB0aGUgaW1hZ2UgcHJvcG9ydGlvbnNcblx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuY29uc3RyYWluVHlwZSA9PSBcImhlaWdodFwiKXsgXG5cblx0XHRcdFx0XHRcdHNlbGYuem9vbUNvbnRhaW5lci5jc3MoXCJoZWlnaHRcIiwgc2VsZi5vcHRpb25zLmNvbnN0cmFpblNpemUpO1xuXHRcdFx0XHRcdFx0c2VsZi56b29tQ29udGFpbmVyLmNzcyhcIndpZHRoXCIsIFwiYXV0b1wiKTtcblxuXHRcdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLmltYWdlQ3Jvc3NmYWRlKXsgIFxuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XcmFwLmNzcyhcImhlaWdodFwiLCBzZWxmLm9wdGlvbnMuY29uc3RyYWluU2l6ZSk7XG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbVdyYXAuY3NzKFwid2lkdGhcIiwgXCJhdXRvXCIpOyBcblx0XHRcdFx0XHRcdFx0c2VsZi5jb25zdHdpZHRoID0gc2VsZi56b29tV3JhcC53aWR0aCgpO1xuXG5cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2V7ICAgICAgICAgICAgICAgICAgXG5cdFx0XHRcdFx0XHRcdHNlbGYuJGVsZW0uY3NzKFwiaGVpZ2h0XCIsIHNlbGYub3B0aW9ucy5jb25zdHJhaW5TaXplKTtcblx0XHRcdFx0XHRcdFx0c2VsZi4kZWxlbS5jc3MoXCJ3aWR0aFwiLCBcImF1dG9cIik7XG5cdFx0XHRcdFx0XHRcdHNlbGYuY29uc3R3aWR0aCA9IHNlbGYuJGVsZW0ud2lkdGgoKTtcblx0XHRcdFx0XHRcdH0gXG5cblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImlubmVyXCIpe1xuXG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbVdyYXAucGFyZW50KCkuY3NzKFwiaGVpZ2h0XCIsIHNlbGYub3B0aW9ucy5jb25zdHJhaW5TaXplKTtcblx0XHRcdFx0XHRcdFx0c2VsZi56b29tV3JhcC5wYXJlbnQoKS5jc3MoXCJ3aWR0aFwiLCBzZWxmLmNvbnN0d2lkdGgpOyAgIFxuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XaW5kb3cuY3NzKFwiaGVpZ2h0XCIsIHNlbGYub3B0aW9ucy5jb25zdHJhaW5TaXplKTtcblx0XHRcdFx0XHRcdFx0c2VsZi56b29tV2luZG93LmNzcyhcIndpZHRoXCIsIHNlbGYuY29uc3R3aWR0aCk7ICAgIFxuXHRcdFx0XHRcdFx0fSAgICAgICAgXG5cdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMudGludCl7XG5cdFx0XHRcdFx0XHRcdHNlbGYudGludENvbnRhaW5lci5jc3MoXCJoZWlnaHRcIiwgc2VsZi5vcHRpb25zLmNvbnN0cmFpblNpemUpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnRpbnRDb250YWluZXIuY3NzKFwid2lkdGhcIiwgc2VsZi5jb25zdHdpZHRoKTtcblx0XHRcdFx0XHRcdFx0c2VsZi56b29tVGludC5jc3MoXCJoZWlnaHRcIiwgc2VsZi5vcHRpb25zLmNvbnN0cmFpblNpemUpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21UaW50LmNzcyhcIndpZHRoXCIsIHNlbGYuY29uc3R3aWR0aCk7XG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnRJbWFnZS5jc3MoXCJoZWlnaHRcIiwgc2VsZi5vcHRpb25zLmNvbnN0cmFpblNpemUpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21UaW50SW1hZ2UuY3NzKFwid2lkdGhcIiwgc2VsZi5jb25zdHdpZHRoKTsgXG5cdFx0XHRcdFx0XHR9IFxuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy5jb25zdHJhaW5UeXBlID09IFwid2lkdGhcIil7ICAgICAgIFxuXHRcdFx0XHRcdFx0c2VsZi56b29tQ29udGFpbmVyLmNzcyhcImhlaWdodFwiLCBcImF1dG9cIik7XG5cdFx0XHRcdFx0XHRzZWxmLnpvb21Db250YWluZXIuY3NzKFwid2lkdGhcIiwgc2VsZi5vcHRpb25zLmNvbnN0cmFpblNpemUpO1xuXG5cdFx0XHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuaW1hZ2VDcm9zc2ZhZGUpe1xuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XcmFwLmNzcyhcImhlaWdodFwiLCBcImF1dG9cIik7XG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbVdyYXAuY3NzKFwid2lkdGhcIiwgc2VsZi5vcHRpb25zLmNvbnN0cmFpblNpemUpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLmNvbnN0aGVpZ2h0ID0gc2VsZi56b29tV3JhcC5oZWlnaHQoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2V7ICAgICAgICAgICAgXG5cdFx0XHRcdFx0XHRcdHNlbGYuJGVsZW0uY3NzKFwiaGVpZ2h0XCIsIFwiYXV0b1wiKTtcblx0XHRcdFx0XHRcdFx0c2VsZi4kZWxlbS5jc3MoXCJ3aWR0aFwiLCBzZWxmLm9wdGlvbnMuY29uc3RyYWluU2l6ZSk7IFxuXHRcdFx0XHRcdFx0XHRzZWxmLmNvbnN0aGVpZ2h0ID0gc2VsZi4kZWxlbS5oZWlnaHQoKTsgICAgICAgICAgICAgIFxuXHRcdFx0XHRcdFx0fSBcblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImlubmVyXCIpe1xuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21XcmFwLnBhcmVudCgpLmNzcyhcImhlaWdodFwiLCBzZWxmLmNvbnN0aGVpZ2h0KTtcblx0XHRcdFx0XHRcdFx0c2VsZi56b29tV3JhcC5wYXJlbnQoKS5jc3MoXCJ3aWR0aFwiLCBzZWxmLm9wdGlvbnMuY29uc3RyYWluU2l6ZSk7ICAgXG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbVdpbmRvdy5jc3MoXCJoZWlnaHRcIiwgc2VsZi5jb25zdGhlaWdodCk7XG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbVdpbmRvdy5jc3MoXCJ3aWR0aFwiLCBzZWxmLm9wdGlvbnMuY29uc3RyYWluU2l6ZSk7ICAgIFxuXHRcdFx0XHRcdFx0fSBcblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy50aW50KXtcblx0XHRcdFx0XHRcdFx0c2VsZi50aW50Q29udGFpbmVyLmNzcyhcImhlaWdodFwiLCBzZWxmLmNvbnN0aGVpZ2h0KTtcblx0XHRcdFx0XHRcdFx0c2VsZi50aW50Q29udGFpbmVyLmNzcyhcIndpZHRoXCIsIHNlbGYub3B0aW9ucy5jb25zdHJhaW5TaXplKTtcblx0XHRcdFx0XHRcdFx0c2VsZi56b29tVGludC5jc3MoXCJoZWlnaHRcIiwgc2VsZi5jb25zdGhlaWdodCk7XG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbVRpbnQuY3NzKFwid2lkdGhcIiwgc2VsZi5vcHRpb25zLmNvbnN0cmFpblNpemUpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21UaW50SW1hZ2UuY3NzKFwiaGVpZ2h0XCIsIHNlbGYuY29uc3RoZWlnaHQpO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21UaW50SW1hZ2UuY3NzKFwid2lkdGhcIiwgc2VsZi5vcHRpb25zLmNvbnN0cmFpblNpemUpOyBcblx0XHRcdFx0XHRcdH0gICBcblxuXHRcdFx0XHRcdH0gICAgICAgIFxuXG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9LFxuXHRcdFx0ZG9uZUNhbGxiYWNrOiBmdW5jdGlvbigpe1xuXG5cdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLmxvYWRpbmdJY29uKXtcblx0XHRcdFx0XHRzZWxmLnNwaW5uZXIuaGlkZSgpOyAgICAgXG5cdFx0XHRcdH0gICBcblxuXHRcdFx0XHRzZWxmLm56T2Zmc2V0ID0gc2VsZi4kZWxlbS5vZmZzZXQoKTtcblx0XHRcdFx0c2VsZi5ueldpZHRoID0gc2VsZi4kZWxlbS53aWR0aCgpO1xuXHRcdFx0XHRzZWxmLm56SGVpZ2h0ID0gc2VsZi4kZWxlbS5oZWlnaHQoKTtcblxuXHRcdFx0XHQvLyByZXNldCB0aGUgem9vbWxldmVsIGJhY2sgdG8gZGVmYXVsdFxuXHRcdFx0XHRzZWxmLmN1cnJlbnRab29tTGV2ZWwgPSBzZWxmLm9wdGlvbnMuem9vbUxldmVsO1xuXG5cdFx0XHRcdC8vcmF0aW8gb2YgdGhlIGxhcmdlIHRvIHNtYWxsIGltYWdlXG5cdFx0XHRcdHNlbGYud2lkdGhSYXRpbyA9IHNlbGYubGFyZ2VXaWR0aCAvIHNlbGYubnpXaWR0aDtcblx0XHRcdFx0c2VsZi5oZWlnaHRSYXRpbyA9IHNlbGYubGFyZ2VIZWlnaHQgLyBzZWxmLm56SGVpZ2h0OyBcblxuXHRcdFx0XHQvL05FRUQgVE8gQUREIFRIRSBMRU5TIFNJWkUgRk9SIFJPVU5EXG5cdFx0XHRcdC8vIGFkanVzdCBpbWFnZXMgbGVzcyB0aGFuIHRoZSB3aW5kb3cgaGVpZ2h0XG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcIndpbmRvd1wiKSB7XG5cblx0XHRcdFx0XHRpZihzZWxmLm56SGVpZ2h0IDwgc2VsZi5vcHRpb25zLnpvb21XaW5kb3dXaWR0aC9zZWxmLndpZHRoUmF0aW8pe1xuXHRcdFx0XHRcdFx0bGVuc0hlaWdodCA9IHNlbGYubnpIZWlnaHQ7ICBcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0bGVuc0hlaWdodCA9IFN0cmluZygoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dIZWlnaHQvc2VsZi5oZWlnaHRSYXRpbykpXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dXaWR0aCA8IHNlbGYub3B0aW9ucy56b29tV2luZG93V2lkdGgpe1xuXHRcdFx0XHRcdFx0bGVuc1dpZHRoID0gc2VsZi5ueldpZHRoO1xuXHRcdFx0XHRcdH0gICAgICAgXG5cdFx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHRcdGxlbnNXaWR0aCA9ICAoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dXaWR0aC9zZWxmLndpZHRoUmF0aW8pO1xuXHRcdFx0XHRcdH1cblxuXG5cdFx0XHRcdFx0aWYoc2VsZi56b29tTGVucyl7XG5cblx0XHRcdFx0XHRcdHNlbGYuem9vbUxlbnMuY3NzKCd3aWR0aCcsIGxlbnNXaWR0aCk7ICAgIFxuXHRcdFx0XHRcdFx0c2VsZi56b29tTGVucy5jc3MoJ2hlaWdodCcsIGxlbnNIZWlnaHQpOyBcblxuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0Z2V0Q3VycmVudEltYWdlOiBmdW5jdGlvbigpe1xuXHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7ICBcblx0XHRcdFx0cmV0dXJuIHNlbGYuem9vbUltYWdlOyBcblx0XHRcdH0sIFxuXHRcdFx0Z2V0R2FsbGVyeUxpc3Q6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciBzZWxmID0gdGhpczsgICBcblx0XHRcdFx0Ly9sb29wIHRocm91Z2ggdGhlIGdhbGxlcnkgb3B0aW9ucyBhbmQgc2V0IHRoZW0gaW4gbGlzdCBmb3IgZmFuY3lib3hcblx0XHRcdFx0c2VsZi5nYWxsZXJ5bGlzdCA9IFtdO1xuXHRcdFx0XHRpZiAoc2VsZi5vcHRpb25zLmdhbGxlcnkpeyBcblxuXG5cdFx0XHRcdFx0JCgnIycrc2VsZi5vcHRpb25zLmdhbGxlcnkgKyAnIGEnKS5lYWNoKGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0XHR2YXIgaW1nX3NyYyA9ICcnO1xuXHRcdFx0XHRcdFx0aWYoJCh0aGlzKS5kYXRhKFwiem9vbS1pbWFnZVwiKSl7XG5cdFx0XHRcdFx0XHRcdGltZ19zcmMgPSAkKHRoaXMpLmRhdGEoXCJ6b29tLWltYWdlXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZigkKHRoaXMpLmRhdGEoXCJpbWFnZVwiKSl7XG5cdFx0XHRcdFx0XHRcdGltZ19zcmMgPSAkKHRoaXMpLmRhdGEoXCJpbWFnZVwiKTtcblx0XHRcdFx0XHRcdH1cdFx0XHRcblx0XHRcdFx0XHRcdC8vcHV0IHRoZSBjdXJyZW50IGltYWdlIGF0IHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0aWYoaW1nX3NyYyA9PSBzZWxmLnpvb21JbWFnZSl7XG5cdFx0XHRcdFx0XHRcdHNlbGYuZ2FsbGVyeWxpc3QudW5zaGlmdCh7XG5cdFx0XHRcdFx0XHRcdFx0aHJlZjogJycraW1nX3NyYysnJyxcblx0XHRcdFx0XHRcdFx0XHR0aXRsZTogJCh0aGlzKS5maW5kKCdpbWcnKS5hdHRyKFwidGl0bGVcIilcblx0XHRcdFx0XHRcdFx0fSk7XHRcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHRcdHNlbGYuZ2FsbGVyeWxpc3QucHVzaCh7XG5cdFx0XHRcdFx0XHRcdFx0aHJlZjogJycraW1nX3NyYysnJyxcblx0XHRcdFx0XHRcdFx0XHR0aXRsZTogJCh0aGlzKS5maW5kKCdpbWcnKS5hdHRyKFwidGl0bGVcIilcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cblxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXHRcdFx0XHQvL2lmIG5vIGdhbGxlcnkgLSByZXR1cm4gY3VycmVudCBpbWFnZVxuXHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdHNlbGYuZ2FsbGVyeWxpc3QucHVzaCh7XG5cdFx0XHRcdFx0XHRocmVmOiAnJytzZWxmLnpvb21JbWFnZSsnJyxcblx0XHRcdFx0XHRcdHRpdGxlOiAkKHRoaXMpLmZpbmQoJ2ltZycpLmF0dHIoXCJ0aXRsZVwiKVxuXHRcdFx0XHRcdH0pOyBcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2VsZi5nYWxsZXJ5bGlzdDtcblxuXHRcdFx0fSxcblx0XHRcdGNoYW5nZVpvb21MZXZlbDogZnVuY3Rpb24odmFsdWUpe1xuXHRcdFx0XHR2YXIgc2VsZiA9IHRoaXM7ICAgXG5cblx0XHRcdFx0Ly9mbGFnIGEgem9vbSwgc28gY2FuIGFkanVzdCB0aGUgZWFzaW5nIGR1cmluZyBzZXRQb3NpdGlvbiAgICAgXG5cdFx0XHRcdHNlbGYuc2Nyb2xsaW5nTG9jayA9IHRydWU7ICAgXG5cblx0XHRcdFx0Ly9yb3VuZCB0byB0d28gZGVjaW1hbCBwbGFjZXNcblx0XHRcdFx0c2VsZi5uZXd2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpLnRvRml4ZWQoMik7XG5cdFx0XHRcdG5ld3ZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSkudG9GaXhlZCgyKTtcblxuXG5cblxuXHRcdFx0XHQvL21heHdpZHRoICYgTWF4aGVpZ2h0IG9mIHRoZSBpbWFnZVxuXHRcdFx0XHRtYXhoZWlnaHRuZXd2YWx1ZSA9IHNlbGYubGFyZ2VIZWlnaHQvKChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd0hlaWdodCAvIHNlbGYubnpIZWlnaHQpICogc2VsZi5uekhlaWdodCk7ICAgICBcblx0XHRcdFx0bWF4d2lkdGh0bmV3dmFsdWUgPSBzZWxmLmxhcmdlV2lkdGgvKChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd1dpZHRoIC8gc2VsZi5ueldpZHRoKSAqIHNlbGYubnpXaWR0aCk7ICAgXHRcblxuXG5cblxuXHRcdFx0XHQvL2NhbGN1bGF0ZSBuZXcgaGVpZ2h0cmF0aW9cblx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlICE9IFwiaW5uZXJcIilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmKG1heGhlaWdodG5ld3ZhbHVlIDw9IG5ld3ZhbHVlKXtcblx0XHRcdFx0XHRcdHNlbGYuaGVpZ2h0UmF0aW8gPSAoc2VsZi5sYXJnZUhlaWdodC9tYXhoZWlnaHRuZXd2YWx1ZSkgLyBzZWxmLm56SGVpZ2h0O1xuXHRcdFx0XHRcdFx0c2VsZi5uZXd2YWx1ZWhlaWdodCA9IG1heGhlaWdodG5ld3ZhbHVlO1xuXHRcdFx0XHRcdFx0c2VsZi5mdWxsaGVpZ2h0ID0gdHJ1ZTtcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0c2VsZi5oZWlnaHRSYXRpbyA9IChzZWxmLmxhcmdlSGVpZ2h0L25ld3ZhbHVlKSAvIHNlbGYubnpIZWlnaHQ7IFxuXHRcdFx0XHRcdFx0c2VsZi5uZXd2YWx1ZWhlaWdodCA9IG5ld3ZhbHVlO1xuXHRcdFx0XHRcdFx0c2VsZi5mdWxsaGVpZ2h0ID0gZmFsc2U7XG5cblx0XHRcdFx0XHR9XG5cblxuLy9cdFx0XHRcdFx0Y2FsY3VsYXRlIG5ldyB3aWR0aCByYXRpb1xuXG5cdFx0XHRcdFx0aWYobWF4d2lkdGh0bmV3dmFsdWUgPD0gbmV3dmFsdWUpe1xuXHRcdFx0XHRcdFx0c2VsZi53aWR0aFJhdGlvID0gKHNlbGYubGFyZ2VXaWR0aC9tYXh3aWR0aHRuZXd2YWx1ZSkgLyBzZWxmLm56V2lkdGg7XG5cdFx0XHRcdFx0XHRzZWxmLm5ld3ZhbHVld2lkdGggPSBtYXh3aWR0aHRuZXd2YWx1ZTtcblx0XHRcdFx0XHRcdHNlbGYuZnVsbHdpZHRoID0gdHJ1ZTtcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0c2VsZi53aWR0aFJhdGlvID0gKHNlbGYubGFyZ2VXaWR0aC9uZXd2YWx1ZSkgLyBzZWxmLm56V2lkdGg7IFxuXHRcdFx0XHRcdFx0c2VsZi5uZXd2YWx1ZXdpZHRoID0gbmV3dmFsdWU7XG5cdFx0XHRcdFx0XHRzZWxmLmZ1bGx3aWR0aCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImxlbnNcIil7XG5cdFx0XHRcdFx0XHRpZihtYXhoZWlnaHRuZXd2YWx1ZSA8PSBuZXd2YWx1ZSl7XG5cdFx0XHRcdFx0XHRcdHNlbGYuZnVsbHdpZHRoID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0c2VsZi5uZXd2YWx1ZXdpZHRoID0gbWF4aGVpZ2h0bmV3dmFsdWU7XG5cblx0XHRcdFx0XHRcdH0gZWxzZXtcblx0XHRcdFx0XHRcdFx0c2VsZi53aWR0aFJhdGlvID0gKHNlbGYubGFyZ2VXaWR0aC9uZXd2YWx1ZSkgLyBzZWxmLm56V2lkdGg7IFxuXHRcdFx0XHRcdFx0XHRzZWxmLm5ld3ZhbHVld2lkdGggPSBuZXd2YWx1ZTtcblxuXHRcdFx0XHRcdFx0XHRzZWxmLmZ1bGx3aWR0aCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0fX1cblx0XHRcdFx0fVxuXG5cblxuXHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJpbm5lclwiKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bWF4aGVpZ2h0bmV3dmFsdWUgPSBwYXJzZUZsb2F0KHNlbGYubGFyZ2VIZWlnaHQvc2VsZi5uekhlaWdodCkudG9GaXhlZCgyKTsgICAgIFxuXHRcdFx0XHRcdG1heHdpZHRodG5ld3ZhbHVlID0gcGFyc2VGbG9hdChzZWxmLmxhcmdlV2lkdGgvc2VsZi5ueldpZHRoKS50b0ZpeGVkKDIpOyAgICAgIFxuXHRcdFx0XHRcdGlmKG5ld3ZhbHVlID4gbWF4aGVpZ2h0bmV3dmFsdWUpe1xuXHRcdFx0XHRcdFx0bmV3dmFsdWUgPSBtYXhoZWlnaHRuZXd2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYobmV3dmFsdWUgPiBtYXh3aWR0aHRuZXd2YWx1ZSl7XG5cdFx0XHRcdFx0XHRuZXd2YWx1ZSA9IG1heHdpZHRodG5ld3ZhbHVlO1xuXHRcdFx0XHRcdH0gICAgICBcblxuXG5cdFx0XHRcdFx0aWYobWF4aGVpZ2h0bmV3dmFsdWUgPD0gbmV3dmFsdWUpe1xuXG5cblx0XHRcdFx0XHRcdHNlbGYuaGVpZ2h0UmF0aW8gPSAoc2VsZi5sYXJnZUhlaWdodC9uZXd2YWx1ZSkgLyBzZWxmLm56SGVpZ2h0OyBcblx0XHRcdFx0XHRcdGlmKG5ld3ZhbHVlID4gbWF4aGVpZ2h0bmV3dmFsdWUpe1xuXHRcdFx0XHRcdFx0XHRzZWxmLm5ld3ZhbHVlaGVpZ2h0ID0gbWF4aGVpZ2h0bmV3dmFsdWU7XG5cdFx0XHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRcdFx0c2VsZi5uZXd2YWx1ZWhlaWdodCA9IG5ld3ZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0c2VsZi5mdWxsaGVpZ2h0ID0gdHJ1ZTtcblxuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2V7XG5cblxuXG5cdFx0XHRcdFx0XHRzZWxmLmhlaWdodFJhdGlvID0gKHNlbGYubGFyZ2VIZWlnaHQvbmV3dmFsdWUpIC8gc2VsZi5uekhlaWdodDsgXG5cblx0XHRcdFx0XHRcdGlmKG5ld3ZhbHVlID4gbWF4aGVpZ2h0bmV3dmFsdWUpe1xuXG5cdFx0XHRcdFx0XHRcdHNlbGYubmV3dmFsdWVoZWlnaHQgPSBtYXhoZWlnaHRuZXd2YWx1ZTtcblx0XHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0XHRzZWxmLm5ld3ZhbHVlaGVpZ2h0ID0gbmV3dmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRzZWxmLmZ1bGxoZWlnaHQgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cblxuXG5cblx0XHRcdFx0XHRpZihtYXh3aWR0aHRuZXd2YWx1ZSA8PSBuZXd2YWx1ZSl7ICAgXG5cblx0XHRcdFx0XHRcdHNlbGYud2lkdGhSYXRpbyA9IChzZWxmLmxhcmdlV2lkdGgvbmV3dmFsdWUpIC8gc2VsZi5ueldpZHRoOyBcblx0XHRcdFx0XHRcdGlmKG5ld3ZhbHVlID4gbWF4d2lkdGh0bmV3dmFsdWUpe1xuXG5cdFx0XHRcdFx0XHRcdHNlbGYubmV3dmFsdWV3aWR0aCA9IG1heHdpZHRodG5ld3ZhbHVlO1xuXHRcdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHRcdHNlbGYubmV3dmFsdWV3aWR0aCA9IG5ld3ZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzZWxmLmZ1bGx3aWR0aCA9IHRydWU7XG5cblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNleyAgXG5cblx0XHRcdFx0XHRcdHNlbGYud2lkdGhSYXRpbyA9IChzZWxmLmxhcmdlV2lkdGgvbmV3dmFsdWUpIC8gc2VsZi5ueldpZHRoOyBcblx0XHRcdFx0XHRcdHNlbGYubmV3dmFsdWV3aWR0aCA9IG5ld3ZhbHVlO1xuXHRcdFx0XHRcdFx0c2VsZi5mdWxsd2lkdGggPSBmYWxzZTtcblx0XHRcdFx0XHR9ICAgICAgICBcblxuXG5cdFx0XHRcdH0gLy9lbmQgaW5uZXJcblx0XHRcdFx0c2NyY29udGludWUgPSBmYWxzZTtcblxuXHRcdFx0XHRpZihzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJpbm5lclwiKXtcblxuXHRcdFx0XHRcdGlmKHNlbGYubnpXaWR0aCA+PSBzZWxmLm56SGVpZ2h0KXtcblx0XHRcdFx0XHRcdGlmKCBzZWxmLm5ld3ZhbHVld2lkdGggPD0gbWF4d2lkdGh0bmV3dmFsdWUpe1xuXHRcdFx0XHRcdFx0XHRzY3Jjb250aW51ZSA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNle1xuXG5cdFx0XHRcdFx0XHRcdHNjcmNvbnRpbnVlID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdHNlbGYuZnVsbGhlaWdodCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdHNlbGYuZnVsbHdpZHRoID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYoc2VsZi5uekhlaWdodCA+IHNlbGYubnpXaWR0aCl7ICAgICBcblx0XHRcdFx0XHRcdGlmKCBzZWxmLm5ld3ZhbHVld2lkdGggPD0gbWF4d2lkdGh0bmV3dmFsdWUpe1xuXHRcdFx0XHRcdFx0XHRzY3Jjb250aW51ZSA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0XHRzY3Jjb250aW51ZSA9IGZhbHNlOyAgXG5cblx0XHRcdFx0XHRcdFx0c2VsZi5mdWxsaGVpZ2h0ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0c2VsZi5mdWxsd2lkdGggPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImlubmVyXCIpe1xuXHRcdFx0XHRcdHNjcmNvbnRpbnVlID0gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKHNjcmNvbnRpbnVlKXtcblxuXG5cblx0XHRcdFx0XHRzZWxmLnpvb21Mb2NrID0gMDtcblx0XHRcdFx0XHRzZWxmLmNoYW5nZVpvb20gPSB0cnVlO1xuXG5cdFx0XHRcdFx0Ly9pZiBsZW5zIGhlaWdodCBpcyBsZXNzIHRoYW4gaW1hZ2UgaGVpZ2h0XG5cblxuXHRcdFx0XHRcdGlmKCgoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dIZWlnaHQpL3NlbGYuaGVpZ2h0UmF0aW8pIDw9IHNlbGYubnpIZWlnaHQpe1xuXG5cblx0XHRcdFx0XHRcdHNlbGYuY3VycmVudFpvb21MZXZlbCA9IHNlbGYubmV3dmFsdWVoZWlnaHQ7IFxuXHRcdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlICE9IFwibGVuc1wiICYmIHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImlubmVyXCIpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5jaGFuZ2VCZ1NpemUgPSB0cnVlO1xuXG5cdFx0XHRcdFx0XHRcdHNlbGYuem9vbUxlbnMuY3NzKHtoZWlnaHQ6IFN0cmluZygoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dIZWlnaHQpL3NlbGYuaGVpZ2h0UmF0aW8pICsgJ3B4JyB9KSBcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImxlbnNcIiB8fCBzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJpbm5lclwiKSB7ICBcblx0XHRcdFx0XHRcdFx0c2VsZi5jaGFuZ2VCZ1NpemUgPSB0cnVlOyAgXG5cdFx0XHRcdFx0XHR9XHRcblxuXG5cdFx0XHRcdFx0fSBcblxuXG5cblxuXHRcdFx0XHRcdGlmKChzZWxmLm9wdGlvbnMuem9vbVdpbmRvd1dpZHRoL3NlbGYud2lkdGhSYXRpbykgPD0gc2VsZi5ueldpZHRoKXtcblxuXG5cblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImlubmVyXCIpe1xuXHRcdFx0XHRcdFx0XHRpZihzZWxmLm5ld3ZhbHVld2lkdGggPiBzZWxmLm5ld3ZhbHVlaGVpZ2h0KSAgIHtcblx0XHRcdFx0XHRcdFx0XHRzZWxmLmN1cnJlbnRab29tTGV2ZWwgPSBzZWxmLm5ld3ZhbHVld2lkdGg7ICAgICAgICAgICAgICAgICBcblxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSAhPSBcImxlbnNcIiAmJiBzZWxmLm9wdGlvbnMuem9vbVR5cGUgIT0gXCJpbm5lclwiKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYuY2hhbmdlQmdTaXplID0gdHJ1ZTtcblxuXHRcdFx0XHRcdFx0XHRzZWxmLnpvb21MZW5zLmNzcyh7d2lkdGg6IFN0cmluZygoc2VsZi5vcHRpb25zLnpvb21XaW5kb3dXaWR0aCkvc2VsZi53aWR0aFJhdGlvKSArICdweCcgfSlcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKHNlbGYub3B0aW9ucy56b29tVHlwZSA9PSBcImxlbnNcIiB8fCBzZWxmLm9wdGlvbnMuem9vbVR5cGUgPT0gXCJpbm5lclwiKSB7ICBcblx0XHRcdFx0XHRcdFx0c2VsZi5jaGFuZ2VCZ1NpemUgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVx0XG5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYoc2VsZi5vcHRpb25zLnpvb21UeXBlID09IFwiaW5uZXJcIil7XG5cdFx0XHRcdFx0XHRzZWxmLmNoYW5nZUJnU2l6ZSA9IHRydWU7ICBcblxuXHRcdFx0XHRcdFx0aWYoc2VsZi5ueldpZHRoID4gc2VsZi5uekhlaWdodCl7XG5cdFx0XHRcdFx0XHRcdHNlbGYuY3VycmVudFpvb21MZXZlbCA9IHNlbGYubmV3dmFsdWV3aWR0aDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKHNlbGYubnpIZWlnaHQgPiBzZWxmLm56V2lkdGgpe1xuXHRcdFx0XHRcdFx0XHRzZWxmLmN1cnJlbnRab29tTGV2ZWwgPSBzZWxmLm5ld3ZhbHVld2lkdGg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0gICAgICAvL3VuZGVyXG5cblx0XHRcdFx0Ly9zZXRzIHRoZSBib3VuZHJ5IGNoYW5nZSwgY2FsbGVkIGluIHNldFdpbmRvd1Bvc1xuXHRcdFx0XHRzZWxmLnNldFBvc2l0aW9uKHNlbGYuY3VycmVudExvYyk7XG5cdFx0XHRcdC8vXG5cdFx0XHR9LFxuXHRcdFx0Y2xvc2VBbGw6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGlmKHNlbGYuem9vbVdpbmRvdyl7c2VsZi56b29tV2luZG93LmhpZGUoKTt9XG5cdFx0XHRcdGlmKHNlbGYuem9vbUxlbnMpe3NlbGYuem9vbUxlbnMuaGlkZSgpO31cblx0XHRcdFx0aWYoc2VsZi56b29tVGludCl7c2VsZi56b29tVGludC5oaWRlKCk7fVxuXHRcdFx0fSxcblx0XHRcdGNoYW5nZVN0YXRlOiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICBcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdFx0aWYodmFsdWUgPT0gJ2VuYWJsZScpe3NlbGYub3B0aW9ucy56b29tRW5hYmxlZCA9IHRydWU7fVxuXHRcdFx0XHRpZih2YWx1ZSA9PSAnZGlzYWJsZScpe3NlbGYub3B0aW9ucy56b29tRW5hYmxlZCA9IGZhbHNlO31cblxuXHRcdFx0fVxuXG5cdH07XG5cblxuXG5cblx0JC5mbi5lbGV2YXRlWm9vbSA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZWxldmF0ZSA9IE9iamVjdC5jcmVhdGUoIEVsZXZhdGVab29tICk7XG5cblx0XHRcdGVsZXZhdGUuaW5pdCggb3B0aW9ucywgdGhpcyApO1xuXG5cdFx0XHQkLmRhdGEoIHRoaXMsICdlbGV2YXRlWm9vbScsIGVsZXZhdGUgKTtcblxuXHRcdH0pO1xuXHR9O1xuXG5cdCQuZm4uZWxldmF0ZVpvb20ub3B0aW9ucyA9IHtcblx0XHRcdHpvb21BY3RpdmF0aW9uOiBcImhvdmVyXCIsIC8vIENhbiBhbHNvIGJlIGNsaWNrIChQTEFDRUhPTERFUiBGT1IgTkVYVCBWRVJTSU9OKVxuICAgICAgem9vbUVuYWJsZWQ6IHRydWUsIC8vZmFsc2UgZGlzYWJsZXMgem9vbXdpbmRvdyBmcm9tIHNob3dpbmdcblx0XHRcdHByZWxvYWRpbmc6IDEsIC8vYnkgZGVmYXVsdCwgbG9hZCBhbGwgdGhlIGltYWdlcywgaWYgMCwgdGhlbiBvbmx5IGxvYWQgaW1hZ2VzIGFmdGVyIGFjdGl2YXRlZCAoUExBQ0VIT0xERVIgRk9SIE5FWFQgVkVSU0lPTilcblx0XHRcdHpvb21MZXZlbDogMSwgLy9kZWZhdWx0IHpvb20gbGV2ZWwgb2YgaW1hZ2Vcblx0XHRcdHNjcm9sbFpvb206IGZhbHNlLCAvL2FsbG93IHpvb20gb24gbW91c2V3aGVlbCwgdHJ1ZSB0byBhY3RpdmF0ZVxuXHRcdFx0c2Nyb2xsWm9vbUluY3JlbWVudDogMC4xLCAgLy9zdGVwcyBvZiB0aGUgc2Nyb2xsem9vbVxuXHRcdFx0bWluWm9vbUxldmVsOiBmYWxzZSxcblx0XHRcdG1heFpvb21MZXZlbDogZmFsc2UsXG5cdFx0XHRlYXNpbmc6IGZhbHNlLFxuXHRcdFx0ZWFzaW5nQW1vdW50OiAxMixcblx0XHRcdGxlbnNTaXplOiAyMDAsXG5cdFx0XHR6b29tV2luZG93V2lkdGg6IDQwMCxcblx0XHRcdHpvb21XaW5kb3dIZWlnaHQ6IDQwMCxcblx0XHRcdHpvb21XaW5kb3dPZmZldHg6IDAsXG5cdFx0XHR6b29tV2luZG93T2ZmZXR5OiAwLFxuXHRcdFx0em9vbVdpbmRvd1Bvc2l0aW9uOiAxLFxuXHRcdFx0em9vbVdpbmRvd0JnQ29sb3VyOiBcIiNmZmZcIixcblx0XHRcdGxlbnNGYWRlSW46IGZhbHNlLFxuXHRcdFx0bGVuc0ZhZGVPdXQ6IGZhbHNlLFxuXHRcdFx0ZGVidWc6IGZhbHNlLFxuXHRcdFx0em9vbVdpbmRvd0ZhZGVJbjogZmFsc2UsXG5cdFx0XHR6b29tV2luZG93RmFkZU91dDogZmFsc2UsXG5cdFx0XHR6b29tV2luZG93QWx3YXlzU2hvdzogZmFsc2UsXG5cdFx0XHR6b29tVGludEZhZGVJbjogZmFsc2UsXG5cdFx0XHR6b29tVGludEZhZGVPdXQ6IGZhbHNlLFxuXHRcdFx0Ym9yZGVyU2l6ZTogNCxcblx0XHRcdHNob3dMZW5zOiB0cnVlLFxuXHRcdFx0Ym9yZGVyQ29sb3VyOiBcIiM4ODhcIixcblx0XHRcdGxlbnNCb3JkZXJTaXplOiAxLFxuXHRcdFx0bGVuc0JvcmRlckNvbG91cjogXCIjMDAwXCIsXG5cdFx0XHRsZW5zU2hhcGU6IFwic3F1YXJlXCIsIC8vY2FuIGJlIFwicm91bmRcIlxuXHRcdFx0em9vbVR5cGU6IFwid2luZG93XCIsIC8vd2luZG93IGlzIGRlZmF1bHQsICBhbHNvIFwibGVuc1wiIGF2YWlsYWJsZSAtXG5cdFx0XHRjb250YWluTGVuc1pvb206IGZhbHNlLFxuXHRcdFx0bGVuc0NvbG91cjogXCJ3aGl0ZVwiLCAvL2NvbG91ciBvZiB0aGUgbGVucyBiYWNrZ3JvdW5kXG5cdFx0XHRsZW5zT3BhY2l0eTogMC40LCAvL29wYWNpdHkgb2YgdGhlIGxlbnNcblx0XHRcdGxlbnN6b29tOiBmYWxzZSxcblx0XHRcdHRpbnQ6IGZhbHNlLCAvL2VuYWJsZSB0aGUgdGludGluZ1xuXHRcdFx0dGludENvbG91cjogXCIjMzMzXCIsIC8vZGVmYXVsdCB0aW50IGNvbG9yLCBjYW4gYmUgYW55dGhpbmcsIHJlZCwgI2NjYywgcmdiKDAsMCwwKVxuXHRcdFx0dGludE9wYWNpdHk6IDAuNCwgLy9vcGFjaXR5IG9mIHRoZSB0aW50XG5cdFx0XHRnYWxsZXJ5OiBmYWxzZSxcblx0XHRcdGdhbGxlcnlBY3RpdmVDbGFzczogXCJ6b29tR2FsbGVyeUFjdGl2ZVwiLFxuXHRcdFx0aW1hZ2VDcm9zc2ZhZGU6IGZhbHNlLFxuXHRcdFx0Y29uc3RyYWluVHlwZTogZmFsc2UsICAvL3dpZHRoIG9yIGhlaWdodFxuXHRcdFx0Y29uc3RyYWluU2l6ZTogZmFsc2UsICAvL2luIHBpeGVscyB0aGUgZGltZW5zaW9ucyB5b3Ugd2FudCB0byBjb25zdHJhaW4gb25cblx0XHRcdGxvYWRpbmdJY29uOiBmYWxzZSwgLy9odHRwOi8vd3d3LmV4YW1wbGUuY29tL3NwaW5uZXIuZ2lmXG5cdFx0XHRjdXJzb3I6XCJkZWZhdWx0XCIsIC8vIHVzZXIgc2hvdWxkIHNldCB0byB3aGF0IHRoZXkgd2FudCB0aGUgY3Vyc29yIGFzLCBpZiB0aGV5IGhhdmUgc2V0IGEgY2xpY2sgZnVuY3Rpb25cblx0XHRcdHJlc3BvbnNpdmU6dHJ1ZSxcblx0XHRcdG9uQ29tcGxldGU6ICQubm9vcCxcbiAgICAgIG9uRGVzdHJveTogZnVuY3Rpb24oKSB7fSxcblx0XHRcdG9uWm9vbWVkSW1hZ2VMb2FkZWQ6IGZ1bmN0aW9uKCkge30sXG5cdFx0XHRvbkltYWdlU3dhcDogJC5ub29wLFxuXHRcdFx0b25JbWFnZVN3YXBDb21wbGV0ZTogJC5ub29wXG5cdH07XG5cbn0pKCBqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQgKTsiXSwiZmlsZSI6ImpxdWVyeS5lbGV2YXRlem9vbS5qcyJ9
;
/*! Magnific Popup - v1.1.0 - 2016-02-20
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2016 Dmitry Semenov; */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(a){var b,c,d,e,f,g,h="Close",i="BeforeClose",j="AfterClose",k="BeforeAppend",l="MarkupParse",m="Open",n="Change",o="mfp",p="."+o,q="mfp-ready",r="mfp-removing",s="mfp-prevent-close",t=function(){},u=!!window.jQuery,v=a(window),w=function(a,c){b.ev.on(o+a+p,c)},x=function(b,c,d,e){var f=document.createElement("div");return f.className="mfp-"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},y=function(c,d){b.ev.triggerHandler(o+c,d),b.st.callbacks&&(c=c.charAt(0).toLowerCase()+c.slice(1),b.st.callbacks[c]&&b.st.callbacks[c].apply(b,a.isArray(d)?d:[d]))},z=function(c){return c===g&&b.currTemplate.closeBtn||(b.currTemplate.closeBtn=a(b.st.closeMarkup.replace("%title%",b.st.tClose)),g=c),b.currTemplate.closeBtn},A=function(){a.magnificPopup.instance||(b=new t,b.init(),a.magnificPopup.instance=b)},B=function(){var a=document.createElement("p").style,b=["ms","O","Moz","Webkit"];if(void 0!==a.transition)return!0;for(;b.length;)if(b.pop()+"Transition"in a)return!0;return!1};t.prototype={constructor:t,init:function(){var c=navigator.appVersion;b.isLowIE=b.isIE8=document.all&&!document.addEventListener,b.isAndroid=/android/gi.test(c),b.isIOS=/iphone|ipad|ipod/gi.test(c),b.supportsTransition=B(),b.probablyMobile=b.isAndroid||b.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),d=a(document),b.popupsCache={}},open:function(c){var e;if(c.isObj===!1){b.items=c.items.toArray(),b.index=0;var g,h=c.items;for(e=0;e<h.length;e++)if(g=h[e],g.parsed&&(g=g.el[0]),g===c.el[0]){b.index=e;break}}else b.items=a.isArray(c.items)?c.items:[c.items],b.index=c.index||0;if(b.isOpen)return void b.updateItemHTML();b.types=[],f="",c.mainEl&&c.mainEl.length?b.ev=c.mainEl.eq(0):b.ev=d,c.key?(b.popupsCache[c.key]||(b.popupsCache[c.key]={}),b.currTemplate=b.popupsCache[c.key]):b.currTemplate={},b.st=a.extend(!0,{},a.magnificPopup.defaults,c),b.fixedContentPos="auto"===b.st.fixedContentPos?!b.probablyMobile:b.st.fixedContentPos,b.st.modal&&(b.st.closeOnContentClick=!1,b.st.closeOnBgClick=!1,b.st.showCloseBtn=!1,b.st.enableEscapeKey=!1),b.bgOverlay||(b.bgOverlay=x("bg").on("click"+p,function(){b.close()}),b.wrap=x("wrap").attr("tabindex",-1).on("click"+p,function(a){b._checkIfClose(a.target)&&b.close()}),b.container=x("container",b.wrap)),b.contentContainer=x("content"),b.st.preloader&&(b.preloader=x("preloader",b.container,b.st.tLoading));var i=a.magnificPopup.modules;for(e=0;e<i.length;e++){var j=i[e];j=j.charAt(0).toUpperCase()+j.slice(1),b["init"+j].call(b)}y("BeforeOpen"),b.st.showCloseBtn&&(b.st.closeBtnInside?(w(l,function(a,b,c,d){c.close_replaceWith=z(d.type)}),f+=" mfp-close-btn-in"):b.wrap.append(z())),b.st.alignTop&&(f+=" mfp-align-top"),b.fixedContentPos?b.wrap.css({overflow:b.st.overflowY,overflowX:"hidden",overflowY:b.st.overflowY}):b.wrap.css({top:v.scrollTop(),position:"absolute"}),(b.st.fixedBgPos===!1||"auto"===b.st.fixedBgPos&&!b.fixedContentPos)&&b.bgOverlay.css({height:d.height(),position:"absolute"}),b.st.enableEscapeKey&&d.on("keyup"+p,function(a){27===a.keyCode&&b.close()}),v.on("resize"+p,function(){b.updateSize()}),b.st.closeOnContentClick||(f+=" mfp-auto-cursor"),f&&b.wrap.addClass(f);var k=b.wH=v.height(),n={};if(b.fixedContentPos&&b._hasScrollBar(k)){var o=b._getScrollbarSize();o&&(n.marginRight=o)}b.fixedContentPos&&(b.isIE7?a("body, html").css("overflow","hidden"):n.overflow="hidden");var r=b.st.mainClass;return b.isIE7&&(r+=" mfp-ie7"),r&&b._addClassToMFP(r),b.updateItemHTML(),y("BuildControls"),a("html").css(n),b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo||a(document.body)),b._lastFocusedEl=document.activeElement,setTimeout(function(){b.content?(b._addClassToMFP(q),b._setFocus()):b.bgOverlay.addClass(q),d.on("focusin"+p,b._onFocusIn)},16),b.isOpen=!0,b.updateSize(k),y(m),c},close:function(){b.isOpen&&(y(i),b.isOpen=!1,b.st.removalDelay&&!b.isLowIE&&b.supportsTransition?(b._addClassToMFP(r),setTimeout(function(){b._close()},b.st.removalDelay)):b._close())},_close:function(){y(h);var c=r+" "+q+" ";if(b.bgOverlay.detach(),b.wrap.detach(),b.container.empty(),b.st.mainClass&&(c+=b.st.mainClass+" "),b._removeClassFromMFP(c),b.fixedContentPos){var e={marginRight:""};b.isIE7?a("body, html").css("overflow",""):e.overflow="",a("html").css(e)}d.off("keyup"+p+" focusin"+p),b.ev.off(p),b.wrap.attr("class","mfp-wrap").removeAttr("style"),b.bgOverlay.attr("class","mfp-bg"),b.container.attr("class","mfp-container"),!b.st.showCloseBtn||b.st.closeBtnInside&&b.currTemplate[b.currItem.type]!==!0||b.currTemplate.closeBtn&&b.currTemplate.closeBtn.detach(),b.st.autoFocusLast&&b._lastFocusedEl&&a(b._lastFocusedEl).focus(),b.currItem=null,b.content=null,b.currTemplate=null,b.prevHeight=0,y(j)},updateSize:function(a){if(b.isIOS){var c=document.documentElement.clientWidth/window.innerWidth,d=window.innerHeight*c;b.wrap.css("height",d),b.wH=d}else b.wH=a||v.height();b.fixedContentPos||b.wrap.css("height",b.wH),y("Resize")},updateItemHTML:function(){var c=b.items[b.index];b.contentContainer.detach(),b.content&&b.content.detach(),c.parsed||(c=b.parseEl(b.index));var d=c.type;if(y("BeforeChange",[b.currItem?b.currItem.type:"",d]),b.currItem=c,!b.currTemplate[d]){var f=b.st[d]?b.st[d].markup:!1;y("FirstMarkupParse",f),f?b.currTemplate[d]=a(f):b.currTemplate[d]=!0}e&&e!==c.type&&b.container.removeClass("mfp-"+e+"-holder");var g=b["get"+d.charAt(0).toUpperCase()+d.slice(1)](c,b.currTemplate[d]);b.appendContent(g,d),c.preloaded=!0,y(n,c),e=c.type,b.container.prepend(b.contentContainer),y("AfterChange")},appendContent:function(a,c){b.content=a,a?b.st.showCloseBtn&&b.st.closeBtnInside&&b.currTemplate[c]===!0?b.content.find(".mfp-close").length||b.content.append(z()):b.content=a:b.content="",y(k),b.container.addClass("mfp-"+c+"-holder"),b.contentContainer.append(b.content)},parseEl:function(c){var d,e=b.items[c];if(e.tagName?e={el:a(e)}:(d=e.type,e={data:e,src:e.src}),e.el){for(var f=b.types,g=0;g<f.length;g++)if(e.el.hasClass("mfp-"+f[g])){d=f[g];break}e.src=e.el.attr("data-mfp-src"),e.src||(e.src=e.el.attr("href"))}return e.type=d||b.st.type||"inline",e.index=c,e.parsed=!0,b.items[c]=e,y("ElementParse",e),b.items[c]},addGroup:function(a,c){var d=function(d){d.mfpEl=this,b._openClick(d,a,c)};c||(c={});var e="click.magnificPopup";c.mainEl=a,c.items?(c.isObj=!0,a.off(e).on(e,d)):(c.isObj=!1,c.delegate?a.off(e).on(e,c.delegate,d):(c.items=a,a.off(e).on(e,d)))},_openClick:function(c,d,e){var f=void 0!==e.midClick?e.midClick:a.magnificPopup.defaults.midClick;if(f||!(2===c.which||c.ctrlKey||c.metaKey||c.altKey||c.shiftKey)){var g=void 0!==e.disableOn?e.disableOn:a.magnificPopup.defaults.disableOn;if(g)if(a.isFunction(g)){if(!g.call(b))return!0}else if(v.width()<g)return!0;c.type&&(c.preventDefault(),b.isOpen&&c.stopPropagation()),e.el=a(c.mfpEl),e.delegate&&(e.items=d.find(e.delegate)),b.open(e)}},updateStatus:function(a,d){if(b.preloader){c!==a&&b.container.removeClass("mfp-s-"+c),d||"loading"!==a||(d=b.st.tLoading);var e={status:a,text:d};y("UpdateStatus",e),a=e.status,d=e.text,b.preloader.html(d),b.preloader.find("a").on("click",function(a){a.stopImmediatePropagation()}),b.container.addClass("mfp-s-"+a),c=a}},_checkIfClose:function(c){if(!a(c).hasClass(s)){var d=b.st.closeOnContentClick,e=b.st.closeOnBgClick;if(d&&e)return!0;if(!b.content||a(c).hasClass("mfp-close")||b.preloader&&c===b.preloader[0])return!0;if(c===b.content[0]||a.contains(b.content[0],c)){if(d)return!0}else if(e&&a.contains(document,c))return!0;return!1}},_addClassToMFP:function(a){b.bgOverlay.addClass(a),b.wrap.addClass(a)},_removeClassFromMFP:function(a){this.bgOverlay.removeClass(a),b.wrap.removeClass(a)},_hasScrollBar:function(a){return(b.isIE7?d.height():document.body.scrollHeight)>(a||v.height())},_setFocus:function(){(b.st.focus?b.content.find(b.st.focus).eq(0):b.wrap).focus()},_onFocusIn:function(c){return c.target===b.wrap[0]||a.contains(b.wrap[0],c.target)?void 0:(b._setFocus(),!1)},_parseMarkup:function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),y(l,[b,c,d]),a.each(c,function(c,d){if(void 0===d||d===!1)return!0;if(e=c.split("_"),e.length>1){var f=b.find(p+"-"+e[0]);if(f.length>0){var g=e[1];"replaceWith"===g?f[0]!==d[0]&&f.replaceWith(d):"img"===g?f.is("img")?f.attr("src",d):f.replaceWith(a("<img>").attr("src",d).attr("class",f.attr("class"))):f.attr(e[1],d)}}else b.find(p+"-"+c).html(d)})},_getScrollbarSize:function(){if(void 0===b.scrollbarSize){var a=document.createElement("div");a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a),b.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return b.scrollbarSize}},a.magnificPopup={instance:null,proto:t.prototype,modules:[],open:function(b,c){return A(),b=b?a.extend(!0,{},b):{},b.isObj=!0,b.index=c||0,this.instance.open(b)},close:function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},registerModule:function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},a.fn.magnificPopup=function(c){A();var d=a(this);if("string"==typeof c)if("open"===c){var e,f=u?d.data("magnificPopup"):d[0].magnificPopup,g=parseInt(arguments[1],10)||0;f.items?e=f.items[g]:(e=d,f.delegate&&(e=e.find(f.delegate)),e=e.eq(g)),b._openClick({mfpEl:e},d,f)}else b.isOpen&&b[c].apply(b,Array.prototype.slice.call(arguments,1));else c=a.extend(!0,{},c),u?d.data("magnificPopup",c):d[0].magnificPopup=c,b.addGroup(d,c);return d};var C,D,E,F="inline",G=function(){E&&(D.after(E.addClass(C)).detach(),E=null)};a.magnificPopup.registerModule(F,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){b.types.push(F),w(h+"."+F,function(){G()})},getInline:function(c,d){if(G(),c.src){var e=b.st.inline,f=a(c.src);if(f.length){var g=f[0].parentNode;g&&g.tagName&&(D||(C=e.hiddenClass,D=x(C),C="mfp-"+C),E=f.after(D).detach().removeClass(C)),b.updateStatus("ready")}else b.updateStatus("error",e.tNotFound),f=a("<div>");return c.inlineElement=f,f}return b.updateStatus("ready"),b._parseMarkup(d,{},c),d}}});var H,I="ajax",J=function(){H&&a(document.body).removeClass(H)},K=function(){J(),b.req&&b.req.abort()};a.magnificPopup.registerModule(I,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){b.types.push(I),H=b.st.ajax.cursor,w(h+"."+I,K),w("BeforeChange."+I,K)},getAjax:function(c){H&&a(document.body).addClass(H),b.updateStatus("loading");var d=a.extend({url:c.src,success:function(d,e,f){var g={data:d,xhr:f};y("ParseAjax",g),b.appendContent(a(g.data),I),c.finished=!0,J(),b._setFocus(),setTimeout(function(){b.wrap.addClass(q)},16),b.updateStatus("ready"),y("AjaxContentAdded")},error:function(){J(),c.finished=c.loadError=!0,b.updateStatus("error",b.st.ajax.tError.replace("%url%",c.src))}},b.st.ajax.settings);return b.req=a.ajax(d),""}}});var L,M=function(c){if(c.data&&void 0!==c.data.title)return c.data.title;var d=b.st.image.titleSrc;if(d){if(a.isFunction(d))return d.call(b,c);if(c.el)return c.el.attr(d)||""}return""};a.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var c=b.st.image,d=".image";b.types.push("image"),w(m+d,function(){"image"===b.currItem.type&&c.cursor&&a(document.body).addClass(c.cursor)}),w(h+d,function(){c.cursor&&a(document.body).removeClass(c.cursor),v.off("resize"+p)}),w("Resize"+d,b.resizeImage),b.isLowIE&&w("AfterChange",b.resizeImage)},resizeImage:function(){var a=b.currItem;if(a&&a.img&&b.st.image.verticalFit){var c=0;b.isLowIE&&(c=parseInt(a.img.css("padding-top"),10)+parseInt(a.img.css("padding-bottom"),10)),a.img.css("max-height",b.wH-c)}},_onImageHasSize:function(a){a.img&&(a.hasSize=!0,L&&clearInterval(L),a.isCheckingImgSize=!1,y("ImageHasSize",a),a.imgHidden&&(b.content&&b.content.removeClass("mfp-loading"),a.imgHidden=!1))},findImageSize:function(a){var c=0,d=a.img[0],e=function(f){L&&clearInterval(L),L=setInterval(function(){return d.naturalWidth>0?void b._onImageHasSize(a):(c>200&&clearInterval(L),c++,void(3===c?e(10):40===c?e(50):100===c&&e(500)))},f)};e(1)},getImage:function(c,d){var e=0,f=function(){c&&(c.img[0].complete?(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("ready")),c.hasSize=!0,c.loaded=!0,y("ImageLoadComplete")):(e++,200>e?setTimeout(f,100):g()))},g=function(){c&&(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("error",h.tError.replace("%url%",c.src))),c.hasSize=!0,c.loaded=!0,c.loadError=!0)},h=b.st.image,i=d.find(".mfp-img");if(i.length){var j=document.createElement("img");j.className="mfp-img",c.el&&c.el.find("img").length&&(j.alt=c.el.find("img").attr("alt")),c.img=a(j).on("load.mfploader",f).on("error.mfploader",g),j.src=c.src,i.is("img")&&(c.img=c.img.clone()),j=c.img[0],j.naturalWidth>0?c.hasSize=!0:j.width||(c.hasSize=!1)}return b._parseMarkup(d,{title:M(c),img_replaceWith:c.img},c),b.resizeImage(),c.hasSize?(L&&clearInterval(L),c.loadError?(d.addClass("mfp-loading"),b.updateStatus("error",h.tError.replace("%url%",c.src))):(d.removeClass("mfp-loading"),b.updateStatus("ready")),d):(b.updateStatus("loading"),c.loading=!0,c.hasSize||(c.imgHidden=!0,d.addClass("mfp-loading"),b.findImageSize(c)),d)}}});var N,O=function(){return void 0===N&&(N=void 0!==document.createElement("p").style.MozTransform),N};a.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(a){return a.is("img")?a:a.find("img")}},proto:{initZoom:function(){var a,c=b.st.zoom,d=".zoom";if(c.enabled&&b.supportsTransition){var e,f,g=c.duration,j=function(a){var b=a.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),d="all "+c.duration/1e3+"s "+c.easing,e={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},f="transition";return e["-webkit-"+f]=e["-moz-"+f]=e["-o-"+f]=e[f]=d,b.css(e),b},k=function(){b.content.css("visibility","visible")};w("BuildControls"+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.content.css("visibility","hidden"),a=b._getItemToZoom(),!a)return void k();f=j(a),f.css(b._getOffset()),b.wrap.append(f),e=setTimeout(function(){f.css(b._getOffset(!0)),e=setTimeout(function(){k(),setTimeout(function(){f.remove(),a=f=null,y("ZoomAnimationEnded")},16)},g)},16)}}),w(i+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.st.removalDelay=g,!a){if(a=b._getItemToZoom(),!a)return;f=j(a)}f.css(b._getOffset(!0)),b.wrap.append(f),b.content.css("visibility","hidden"),setTimeout(function(){f.css(b._getOffset())},16)}}),w(h+d,function(){b._allowZoom()&&(k(),f&&f.remove(),a=null)})}},_allowZoom:function(){return"image"===b.currItem.type},_getItemToZoom:function(){return b.currItem.hasSize?b.currItem.img:!1},_getOffset:function(c){var d;d=c?b.currItem.img:b.st.zoom.opener(b.currItem.el||b.currItem);var e=d.offset(),f=parseInt(d.css("padding-top"),10),g=parseInt(d.css("padding-bottom"),10);e.top-=a(window).scrollTop()-f;var h={width:d.width(),height:(u?d.innerHeight():d[0].offsetHeight)-g-f};return O()?h["-moz-transform"]=h.transform="translate("+e.left+"px,"+e.top+"px)":(h.left=e.left,h.top=e.top),h}}});var P="iframe",Q="//about:blank",R=function(a){if(b.currTemplate[P]){var c=b.currTemplate[P].find("iframe");c.length&&(a||(c[0].src=Q),b.isIE8&&c.css("display",a?"block":"none"))}};a.magnificPopup.registerModule(P,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){b.types.push(P),w("BeforeChange",function(a,b,c){b!==c&&(b===P?R():c===P&&R(!0))}),w(h+"."+P,function(){R()})},getIframe:function(c,d){var e=c.src,f=b.st.iframe;a.each(f.patterns,function(){return e.indexOf(this.index)>-1?(this.id&&(e="string"==typeof this.id?e.substr(e.lastIndexOf(this.id)+this.id.length,e.length):this.id.call(this,e)),e=this.src.replace("%id%",e),!1):void 0});var g={};return f.srcAction&&(g[f.srcAction]=e),b._parseMarkup(d,g,c),b.updateStatus("ready"),d}}});var S=function(a){var c=b.items.length;return a>c-1?a-c:0>a?c+a:a},T=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)};a.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var c=b.st.gallery,e=".mfp-gallery";return b.direction=!0,c&&c.enabled?(f+=" mfp-gallery",w(m+e,function(){c.navigateByImgClick&&b.wrap.on("click"+e,".mfp-img",function(){return b.items.length>1?(b.next(),!1):void 0}),d.on("keydown"+e,function(a){37===a.keyCode?b.prev():39===a.keyCode&&b.next()})}),w("UpdateStatus"+e,function(a,c){c.text&&(c.text=T(c.text,b.currItem.index,b.items.length))}),w(l+e,function(a,d,e,f){var g=b.items.length;e.counter=g>1?T(c.tCounter,f.index,g):""}),w("BuildControls"+e,function(){if(b.items.length>1&&c.arrows&&!b.arrowLeft){var d=c.arrowMarkup,e=b.arrowLeft=a(d.replace(/%title%/gi,c.tPrev).replace(/%dir%/gi,"left")).addClass(s),f=b.arrowRight=a(d.replace(/%title%/gi,c.tNext).replace(/%dir%/gi,"right")).addClass(s);e.click(function(){b.prev()}),f.click(function(){b.next()}),b.container.append(e.add(f))}}),w(n+e,function(){b._preloadTimeout&&clearTimeout(b._preloadTimeout),b._preloadTimeout=setTimeout(function(){b.preloadNearbyImages(),b._preloadTimeout=null},16)}),void w(h+e,function(){d.off(e),b.wrap.off("click"+e),b.arrowRight=b.arrowLeft=null})):!1},next:function(){b.direction=!0,b.index=S(b.index+1),b.updateItemHTML()},prev:function(){b.direction=!1,b.index=S(b.index-1),b.updateItemHTML()},goTo:function(a){b.direction=a>=b.index,b.index=a,b.updateItemHTML()},preloadNearbyImages:function(){var a,c=b.st.gallery.preload,d=Math.min(c[0],b.items.length),e=Math.min(c[1],b.items.length);for(a=1;a<=(b.direction?e:d);a++)b._preloadItem(b.index+a);for(a=1;a<=(b.direction?d:e);a++)b._preloadItem(b.index-a)},_preloadItem:function(c){if(c=S(c),!b.items[c].preloaded){var d=b.items[c];d.parsed||(d=b.parseEl(c)),y("LazyLoad",d),"image"===d.type&&(d.img=a('<img class="mfp-img" />').on("load.mfploader",function(){d.hasSize=!0}).on("error.mfploader",function(){d.hasSize=!0,d.loadError=!0,y("LazyLoadError",d)}).attr("src",d.src)),d.preloaded=!0}}}});var U="retina";a.magnificPopup.registerModule(U,{options:{replaceSrc:function(a){return a.src.replace(/\.\w+$/,function(a){return"@2x"+a})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var a=b.st.retina,c=a.ratio;c=isNaN(c)?c():c,c>1&&(w("ImageHasSize."+U,function(a,b){b.img.css({"max-width":b.img[0].naturalWidth/c,width:"100%"})}),w("ElementParse."+U,function(b,d){d.src=a.replaceSrc(d,c)}))}}}}),A()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJqcXVlcnkubWFnbmlmaWMtcG9wdXAubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBNYWduaWZpYyBQb3B1cCAtIHYxLjEuMCAtIDIwMTYtMDItMjBcbiogaHR0cDovL2RpbXNlbWVub3YuY29tL3BsdWdpbnMvbWFnbmlmaWMtcG9wdXAvXG4qIENvcHlyaWdodCAoYykgMjAxNiBEbWl0cnkgU2VtZW5vdjsgKi9cbiFmdW5jdGlvbihhKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxhKTphKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP3JlcXVpcmUoXCJqcXVlcnlcIik6d2luZG93LmpRdWVyeXx8d2luZG93LlplcHRvKX0oZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9XCJDbG9zZVwiLGk9XCJCZWZvcmVDbG9zZVwiLGo9XCJBZnRlckNsb3NlXCIsaz1cIkJlZm9yZUFwcGVuZFwiLGw9XCJNYXJrdXBQYXJzZVwiLG09XCJPcGVuXCIsbj1cIkNoYW5nZVwiLG89XCJtZnBcIixwPVwiLlwiK28scT1cIm1mcC1yZWFkeVwiLHI9XCJtZnAtcmVtb3ZpbmdcIixzPVwibWZwLXByZXZlbnQtY2xvc2VcIix0PWZ1bmN0aW9uKCl7fSx1PSEhd2luZG93LmpRdWVyeSx2PWEod2luZG93KSx3PWZ1bmN0aW9uKGEsYyl7Yi5ldi5vbihvK2ErcCxjKX0seD1mdW5jdGlvbihiLGMsZCxlKXt2YXIgZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBmLmNsYXNzTmFtZT1cIm1mcC1cIitiLGQmJihmLmlubmVySFRNTD1kKSxlP2MmJmMuYXBwZW5kQ2hpbGQoZik6KGY9YShmKSxjJiZmLmFwcGVuZFRvKGMpKSxmfSx5PWZ1bmN0aW9uKGMsZCl7Yi5ldi50cmlnZ2VySGFuZGxlcihvK2MsZCksYi5zdC5jYWxsYmFja3MmJihjPWMuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkrYy5zbGljZSgxKSxiLnN0LmNhbGxiYWNrc1tjXSYmYi5zdC5jYWxsYmFja3NbY10uYXBwbHkoYixhLmlzQXJyYXkoZCk/ZDpbZF0pKX0sej1mdW5jdGlvbihjKXtyZXR1cm4gYz09PWcmJmIuY3VyclRlbXBsYXRlLmNsb3NlQnRufHwoYi5jdXJyVGVtcGxhdGUuY2xvc2VCdG49YShiLnN0LmNsb3NlTWFya3VwLnJlcGxhY2UoXCIldGl0bGUlXCIsYi5zdC50Q2xvc2UpKSxnPWMpLGIuY3VyclRlbXBsYXRlLmNsb3NlQnRufSxBPWZ1bmN0aW9uKCl7YS5tYWduaWZpY1BvcHVwLmluc3RhbmNlfHwoYj1uZXcgdCxiLmluaXQoKSxhLm1hZ25pZmljUG9wdXAuaW5zdGFuY2U9Yil9LEI9ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKS5zdHlsZSxiPVtcIm1zXCIsXCJPXCIsXCJNb3pcIixcIldlYmtpdFwiXTtpZih2b2lkIDAhPT1hLnRyYW5zaXRpb24pcmV0dXJuITA7Zm9yKDtiLmxlbmd0aDspaWYoYi5wb3AoKStcIlRyYW5zaXRpb25cImluIGEpcmV0dXJuITA7cmV0dXJuITF9O3QucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjp0LGluaXQ6ZnVuY3Rpb24oKXt2YXIgYz1uYXZpZ2F0b3IuYXBwVmVyc2lvbjtiLmlzTG93SUU9Yi5pc0lFOD1kb2N1bWVudC5hbGwmJiFkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyLGIuaXNBbmRyb2lkPS9hbmRyb2lkL2dpLnRlc3QoYyksYi5pc0lPUz0vaXBob25lfGlwYWR8aXBvZC9naS50ZXN0KGMpLGIuc3VwcG9ydHNUcmFuc2l0aW9uPUIoKSxiLnByb2JhYmx5TW9iaWxlPWIuaXNBbmRyb2lkfHxiLmlzSU9TfHwvKE9wZXJhIE1pbmkpfEtpbmRsZXx3ZWJPU3xCbGFja0JlcnJ5fChPcGVyYSBNb2JpKXwoV2luZG93cyBQaG9uZSl8SUVNb2JpbGUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGQ9YShkb2N1bWVudCksYi5wb3B1cHNDYWNoZT17fX0sb3BlbjpmdW5jdGlvbihjKXt2YXIgZTtpZihjLmlzT2JqPT09ITEpe2IuaXRlbXM9Yy5pdGVtcy50b0FycmF5KCksYi5pbmRleD0wO3ZhciBnLGg9Yy5pdGVtcztmb3IoZT0wO2U8aC5sZW5ndGg7ZSsrKWlmKGc9aFtlXSxnLnBhcnNlZCYmKGc9Zy5lbFswXSksZz09PWMuZWxbMF0pe2IuaW5kZXg9ZTticmVha319ZWxzZSBiLml0ZW1zPWEuaXNBcnJheShjLml0ZW1zKT9jLml0ZW1zOltjLml0ZW1zXSxiLmluZGV4PWMuaW5kZXh8fDA7aWYoYi5pc09wZW4pcmV0dXJuIHZvaWQgYi51cGRhdGVJdGVtSFRNTCgpO2IudHlwZXM9W10sZj1cIlwiLGMubWFpbkVsJiZjLm1haW5FbC5sZW5ndGg/Yi5ldj1jLm1haW5FbC5lcSgwKTpiLmV2PWQsYy5rZXk/KGIucG9wdXBzQ2FjaGVbYy5rZXldfHwoYi5wb3B1cHNDYWNoZVtjLmtleV09e30pLGIuY3VyclRlbXBsYXRlPWIucG9wdXBzQ2FjaGVbYy5rZXldKTpiLmN1cnJUZW1wbGF0ZT17fSxiLnN0PWEuZXh0ZW5kKCEwLHt9LGEubWFnbmlmaWNQb3B1cC5kZWZhdWx0cyxjKSxiLmZpeGVkQ29udGVudFBvcz1cImF1dG9cIj09PWIuc3QuZml4ZWRDb250ZW50UG9zPyFiLnByb2JhYmx5TW9iaWxlOmIuc3QuZml4ZWRDb250ZW50UG9zLGIuc3QubW9kYWwmJihiLnN0LmNsb3NlT25Db250ZW50Q2xpY2s9ITEsYi5zdC5jbG9zZU9uQmdDbGljaz0hMSxiLnN0LnNob3dDbG9zZUJ0bj0hMSxiLnN0LmVuYWJsZUVzY2FwZUtleT0hMSksYi5iZ092ZXJsYXl8fChiLmJnT3ZlcmxheT14KFwiYmdcIikub24oXCJjbGlja1wiK3AsZnVuY3Rpb24oKXtiLmNsb3NlKCl9KSxiLndyYXA9eChcIndyYXBcIikuYXR0cihcInRhYmluZGV4XCIsLTEpLm9uKFwiY2xpY2tcIitwLGZ1bmN0aW9uKGEpe2IuX2NoZWNrSWZDbG9zZShhLnRhcmdldCkmJmIuY2xvc2UoKX0pLGIuY29udGFpbmVyPXgoXCJjb250YWluZXJcIixiLndyYXApKSxiLmNvbnRlbnRDb250YWluZXI9eChcImNvbnRlbnRcIiksYi5zdC5wcmVsb2FkZXImJihiLnByZWxvYWRlcj14KFwicHJlbG9hZGVyXCIsYi5jb250YWluZXIsYi5zdC50TG9hZGluZykpO3ZhciBpPWEubWFnbmlmaWNQb3B1cC5tb2R1bGVzO2ZvcihlPTA7ZTxpLmxlbmd0aDtlKyspe3ZhciBqPWlbZV07aj1qLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2ouc2xpY2UoMSksYltcImluaXRcIitqXS5jYWxsKGIpfXkoXCJCZWZvcmVPcGVuXCIpLGIuc3Quc2hvd0Nsb3NlQnRuJiYoYi5zdC5jbG9zZUJ0bkluc2lkZT8odyhsLGZ1bmN0aW9uKGEsYixjLGQpe2MuY2xvc2VfcmVwbGFjZVdpdGg9eihkLnR5cGUpfSksZis9XCIgbWZwLWNsb3NlLWJ0bi1pblwiKTpiLndyYXAuYXBwZW5kKHooKSkpLGIuc3QuYWxpZ25Ub3AmJihmKz1cIiBtZnAtYWxpZ24tdG9wXCIpLGIuZml4ZWRDb250ZW50UG9zP2Iud3JhcC5jc3Moe292ZXJmbG93OmIuc3Qub3ZlcmZsb3dZLG92ZXJmbG93WDpcImhpZGRlblwiLG92ZXJmbG93WTpiLnN0Lm92ZXJmbG93WX0pOmIud3JhcC5jc3Moe3RvcDp2LnNjcm9sbFRvcCgpLHBvc2l0aW9uOlwiYWJzb2x1dGVcIn0pLChiLnN0LmZpeGVkQmdQb3M9PT0hMXx8XCJhdXRvXCI9PT1iLnN0LmZpeGVkQmdQb3MmJiFiLmZpeGVkQ29udGVudFBvcykmJmIuYmdPdmVybGF5LmNzcyh7aGVpZ2h0OmQuaGVpZ2h0KCkscG9zaXRpb246XCJhYnNvbHV0ZVwifSksYi5zdC5lbmFibGVFc2NhcGVLZXkmJmQub24oXCJrZXl1cFwiK3AsZnVuY3Rpb24oYSl7Mjc9PT1hLmtleUNvZGUmJmIuY2xvc2UoKX0pLHYub24oXCJyZXNpemVcIitwLGZ1bmN0aW9uKCl7Yi51cGRhdGVTaXplKCl9KSxiLnN0LmNsb3NlT25Db250ZW50Q2xpY2t8fChmKz1cIiBtZnAtYXV0by1jdXJzb3JcIiksZiYmYi53cmFwLmFkZENsYXNzKGYpO3ZhciBrPWIud0g9di5oZWlnaHQoKSxuPXt9O2lmKGIuZml4ZWRDb250ZW50UG9zJiZiLl9oYXNTY3JvbGxCYXIoaykpe3ZhciBvPWIuX2dldFNjcm9sbGJhclNpemUoKTtvJiYobi5tYXJnaW5SaWdodD1vKX1iLmZpeGVkQ29udGVudFBvcyYmKGIuaXNJRTc/YShcImJvZHksIGh0bWxcIikuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKTpuLm92ZXJmbG93PVwiaGlkZGVuXCIpO3ZhciByPWIuc3QubWFpbkNsYXNzO3JldHVybiBiLmlzSUU3JiYocis9XCIgbWZwLWllN1wiKSxyJiZiLl9hZGRDbGFzc1RvTUZQKHIpLGIudXBkYXRlSXRlbUhUTUwoKSx5KFwiQnVpbGRDb250cm9sc1wiKSxhKFwiaHRtbFwiKS5jc3MobiksYi5iZ092ZXJsYXkuYWRkKGIud3JhcCkucHJlcGVuZFRvKGIuc3QucHJlcGVuZFRvfHxhKGRvY3VtZW50LmJvZHkpKSxiLl9sYXN0Rm9jdXNlZEVsPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsc2V0VGltZW91dChmdW5jdGlvbigpe2IuY29udGVudD8oYi5fYWRkQ2xhc3NUb01GUChxKSxiLl9zZXRGb2N1cygpKTpiLmJnT3ZlcmxheS5hZGRDbGFzcyhxKSxkLm9uKFwiZm9jdXNpblwiK3AsYi5fb25Gb2N1c0luKX0sMTYpLGIuaXNPcGVuPSEwLGIudXBkYXRlU2l6ZShrKSx5KG0pLGN9LGNsb3NlOmZ1bmN0aW9uKCl7Yi5pc09wZW4mJih5KGkpLGIuaXNPcGVuPSExLGIuc3QucmVtb3ZhbERlbGF5JiYhYi5pc0xvd0lFJiZiLnN1cHBvcnRzVHJhbnNpdGlvbj8oYi5fYWRkQ2xhc3NUb01GUChyKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5fY2xvc2UoKX0sYi5zdC5yZW1vdmFsRGVsYXkpKTpiLl9jbG9zZSgpKX0sX2Nsb3NlOmZ1bmN0aW9uKCl7eShoKTt2YXIgYz1yK1wiIFwiK3ErXCIgXCI7aWYoYi5iZ092ZXJsYXkuZGV0YWNoKCksYi53cmFwLmRldGFjaCgpLGIuY29udGFpbmVyLmVtcHR5KCksYi5zdC5tYWluQ2xhc3MmJihjKz1iLnN0Lm1haW5DbGFzcytcIiBcIiksYi5fcmVtb3ZlQ2xhc3NGcm9tTUZQKGMpLGIuZml4ZWRDb250ZW50UG9zKXt2YXIgZT17bWFyZ2luUmlnaHQ6XCJcIn07Yi5pc0lFNz9hKFwiYm9keSwgaHRtbFwiKS5jc3MoXCJvdmVyZmxvd1wiLFwiXCIpOmUub3ZlcmZsb3c9XCJcIixhKFwiaHRtbFwiKS5jc3MoZSl9ZC5vZmYoXCJrZXl1cFwiK3ArXCIgZm9jdXNpblwiK3ApLGIuZXYub2ZmKHApLGIud3JhcC5hdHRyKFwiY2xhc3NcIixcIm1mcC13cmFwXCIpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKSxiLmJnT3ZlcmxheS5hdHRyKFwiY2xhc3NcIixcIm1mcC1iZ1wiKSxiLmNvbnRhaW5lci5hdHRyKFwiY2xhc3NcIixcIm1mcC1jb250YWluZXJcIiksIWIuc3Quc2hvd0Nsb3NlQnRufHxiLnN0LmNsb3NlQnRuSW5zaWRlJiZiLmN1cnJUZW1wbGF0ZVtiLmN1cnJJdGVtLnR5cGVdIT09ITB8fGIuY3VyclRlbXBsYXRlLmNsb3NlQnRuJiZiLmN1cnJUZW1wbGF0ZS5jbG9zZUJ0bi5kZXRhY2goKSxiLnN0LmF1dG9Gb2N1c0xhc3QmJmIuX2xhc3RGb2N1c2VkRWwmJmEoYi5fbGFzdEZvY3VzZWRFbCkuZm9jdXMoKSxiLmN1cnJJdGVtPW51bGwsYi5jb250ZW50PW51bGwsYi5jdXJyVGVtcGxhdGU9bnVsbCxiLnByZXZIZWlnaHQ9MCx5KGopfSx1cGRhdGVTaXplOmZ1bmN0aW9uKGEpe2lmKGIuaXNJT1Mpe3ZhciBjPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC93aW5kb3cuaW5uZXJXaWR0aCxkPXdpbmRvdy5pbm5lckhlaWdodCpjO2Iud3JhcC5jc3MoXCJoZWlnaHRcIixkKSxiLndIPWR9ZWxzZSBiLndIPWF8fHYuaGVpZ2h0KCk7Yi5maXhlZENvbnRlbnRQb3N8fGIud3JhcC5jc3MoXCJoZWlnaHRcIixiLndIKSx5KFwiUmVzaXplXCIpfSx1cGRhdGVJdGVtSFRNTDpmdW5jdGlvbigpe3ZhciBjPWIuaXRlbXNbYi5pbmRleF07Yi5jb250ZW50Q29udGFpbmVyLmRldGFjaCgpLGIuY29udGVudCYmYi5jb250ZW50LmRldGFjaCgpLGMucGFyc2VkfHwoYz1iLnBhcnNlRWwoYi5pbmRleCkpO3ZhciBkPWMudHlwZTtpZih5KFwiQmVmb3JlQ2hhbmdlXCIsW2IuY3Vyckl0ZW0/Yi5jdXJySXRlbS50eXBlOlwiXCIsZF0pLGIuY3Vyckl0ZW09YywhYi5jdXJyVGVtcGxhdGVbZF0pe3ZhciBmPWIuc3RbZF0/Yi5zdFtkXS5tYXJrdXA6ITE7eShcIkZpcnN0TWFya3VwUGFyc2VcIixmKSxmP2IuY3VyclRlbXBsYXRlW2RdPWEoZik6Yi5jdXJyVGVtcGxhdGVbZF09ITB9ZSYmZSE9PWMudHlwZSYmYi5jb250YWluZXIucmVtb3ZlQ2xhc3MoXCJtZnAtXCIrZStcIi1ob2xkZXJcIik7dmFyIGc9YltcImdldFwiK2QuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZC5zbGljZSgxKV0oYyxiLmN1cnJUZW1wbGF0ZVtkXSk7Yi5hcHBlbmRDb250ZW50KGcsZCksYy5wcmVsb2FkZWQ9ITAseShuLGMpLGU9Yy50eXBlLGIuY29udGFpbmVyLnByZXBlbmQoYi5jb250ZW50Q29udGFpbmVyKSx5KFwiQWZ0ZXJDaGFuZ2VcIil9LGFwcGVuZENvbnRlbnQ6ZnVuY3Rpb24oYSxjKXtiLmNvbnRlbnQ9YSxhP2Iuc3Quc2hvd0Nsb3NlQnRuJiZiLnN0LmNsb3NlQnRuSW5zaWRlJiZiLmN1cnJUZW1wbGF0ZVtjXT09PSEwP2IuY29udGVudC5maW5kKFwiLm1mcC1jbG9zZVwiKS5sZW5ndGh8fGIuY29udGVudC5hcHBlbmQoeigpKTpiLmNvbnRlbnQ9YTpiLmNvbnRlbnQ9XCJcIix5KGspLGIuY29udGFpbmVyLmFkZENsYXNzKFwibWZwLVwiK2MrXCItaG9sZGVyXCIpLGIuY29udGVudENvbnRhaW5lci5hcHBlbmQoYi5jb250ZW50KX0scGFyc2VFbDpmdW5jdGlvbihjKXt2YXIgZCxlPWIuaXRlbXNbY107aWYoZS50YWdOYW1lP2U9e2VsOmEoZSl9OihkPWUudHlwZSxlPXtkYXRhOmUsc3JjOmUuc3JjfSksZS5lbCl7Zm9yKHZhciBmPWIudHlwZXMsZz0wO2c8Zi5sZW5ndGg7ZysrKWlmKGUuZWwuaGFzQ2xhc3MoXCJtZnAtXCIrZltnXSkpe2Q9ZltnXTticmVha31lLnNyYz1lLmVsLmF0dHIoXCJkYXRhLW1mcC1zcmNcIiksZS5zcmN8fChlLnNyYz1lLmVsLmF0dHIoXCJocmVmXCIpKX1yZXR1cm4gZS50eXBlPWR8fGIuc3QudHlwZXx8XCJpbmxpbmVcIixlLmluZGV4PWMsZS5wYXJzZWQ9ITAsYi5pdGVtc1tjXT1lLHkoXCJFbGVtZW50UGFyc2VcIixlKSxiLml0ZW1zW2NdfSxhZGRHcm91cDpmdW5jdGlvbihhLGMpe3ZhciBkPWZ1bmN0aW9uKGQpe2QubWZwRWw9dGhpcyxiLl9vcGVuQ2xpY2soZCxhLGMpfTtjfHwoYz17fSk7dmFyIGU9XCJjbGljay5tYWduaWZpY1BvcHVwXCI7Yy5tYWluRWw9YSxjLml0ZW1zPyhjLmlzT2JqPSEwLGEub2ZmKGUpLm9uKGUsZCkpOihjLmlzT2JqPSExLGMuZGVsZWdhdGU/YS5vZmYoZSkub24oZSxjLmRlbGVnYXRlLGQpOihjLml0ZW1zPWEsYS5vZmYoZSkub24oZSxkKSkpfSxfb3BlbkNsaWNrOmZ1bmN0aW9uKGMsZCxlKXt2YXIgZj12b2lkIDAhPT1lLm1pZENsaWNrP2UubWlkQ2xpY2s6YS5tYWduaWZpY1BvcHVwLmRlZmF1bHRzLm1pZENsaWNrO2lmKGZ8fCEoMj09PWMud2hpY2h8fGMuY3RybEtleXx8Yy5tZXRhS2V5fHxjLmFsdEtleXx8Yy5zaGlmdEtleSkpe3ZhciBnPXZvaWQgMCE9PWUuZGlzYWJsZU9uP2UuZGlzYWJsZU9uOmEubWFnbmlmaWNQb3B1cC5kZWZhdWx0cy5kaXNhYmxlT247aWYoZylpZihhLmlzRnVuY3Rpb24oZykpe2lmKCFnLmNhbGwoYikpcmV0dXJuITB9ZWxzZSBpZih2LndpZHRoKCk8ZylyZXR1cm4hMDtjLnR5cGUmJihjLnByZXZlbnREZWZhdWx0KCksYi5pc09wZW4mJmMuc3RvcFByb3BhZ2F0aW9uKCkpLGUuZWw9YShjLm1mcEVsKSxlLmRlbGVnYXRlJiYoZS5pdGVtcz1kLmZpbmQoZS5kZWxlZ2F0ZSkpLGIub3BlbihlKX19LHVwZGF0ZVN0YXR1czpmdW5jdGlvbihhLGQpe2lmKGIucHJlbG9hZGVyKXtjIT09YSYmYi5jb250YWluZXIucmVtb3ZlQ2xhc3MoXCJtZnAtcy1cIitjKSxkfHxcImxvYWRpbmdcIiE9PWF8fChkPWIuc3QudExvYWRpbmcpO3ZhciBlPXtzdGF0dXM6YSx0ZXh0OmR9O3koXCJVcGRhdGVTdGF0dXNcIixlKSxhPWUuc3RhdHVzLGQ9ZS50ZXh0LGIucHJlbG9hZGVyLmh0bWwoZCksYi5wcmVsb2FkZXIuZmluZChcImFcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2Euc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9KSxiLmNvbnRhaW5lci5hZGRDbGFzcyhcIm1mcC1zLVwiK2EpLGM9YX19LF9jaGVja0lmQ2xvc2U6ZnVuY3Rpb24oYyl7aWYoIWEoYykuaGFzQ2xhc3Mocykpe3ZhciBkPWIuc3QuY2xvc2VPbkNvbnRlbnRDbGljayxlPWIuc3QuY2xvc2VPbkJnQ2xpY2s7aWYoZCYmZSlyZXR1cm4hMDtpZighYi5jb250ZW50fHxhKGMpLmhhc0NsYXNzKFwibWZwLWNsb3NlXCIpfHxiLnByZWxvYWRlciYmYz09PWIucHJlbG9hZGVyWzBdKXJldHVybiEwO2lmKGM9PT1iLmNvbnRlbnRbMF18fGEuY29udGFpbnMoYi5jb250ZW50WzBdLGMpKXtpZihkKXJldHVybiEwfWVsc2UgaWYoZSYmYS5jb250YWlucyhkb2N1bWVudCxjKSlyZXR1cm4hMDtyZXR1cm4hMX19LF9hZGRDbGFzc1RvTUZQOmZ1bmN0aW9uKGEpe2IuYmdPdmVybGF5LmFkZENsYXNzKGEpLGIud3JhcC5hZGRDbGFzcyhhKX0sX3JlbW92ZUNsYXNzRnJvbU1GUDpmdW5jdGlvbihhKXt0aGlzLmJnT3ZlcmxheS5yZW1vdmVDbGFzcyhhKSxiLndyYXAucmVtb3ZlQ2xhc3MoYSl9LF9oYXNTY3JvbGxCYXI6ZnVuY3Rpb24oYSl7cmV0dXJuKGIuaXNJRTc/ZC5oZWlnaHQoKTpkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCk+KGF8fHYuaGVpZ2h0KCkpfSxfc2V0Rm9jdXM6ZnVuY3Rpb24oKXsoYi5zdC5mb2N1cz9iLmNvbnRlbnQuZmluZChiLnN0LmZvY3VzKS5lcSgwKTpiLndyYXApLmZvY3VzKCl9LF9vbkZvY3VzSW46ZnVuY3Rpb24oYyl7cmV0dXJuIGMudGFyZ2V0PT09Yi53cmFwWzBdfHxhLmNvbnRhaW5zKGIud3JhcFswXSxjLnRhcmdldCk/dm9pZCAwOihiLl9zZXRGb2N1cygpLCExKX0sX3BhcnNlTWFya3VwOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtkLmRhdGEmJihjPWEuZXh0ZW5kKGQuZGF0YSxjKSkseShsLFtiLGMsZF0pLGEuZWFjaChjLGZ1bmN0aW9uKGMsZCl7aWYodm9pZCAwPT09ZHx8ZD09PSExKXJldHVybiEwO2lmKGU9Yy5zcGxpdChcIl9cIiksZS5sZW5ndGg+MSl7dmFyIGY9Yi5maW5kKHArXCItXCIrZVswXSk7aWYoZi5sZW5ndGg+MCl7dmFyIGc9ZVsxXTtcInJlcGxhY2VXaXRoXCI9PT1nP2ZbMF0hPT1kWzBdJiZmLnJlcGxhY2VXaXRoKGQpOlwiaW1nXCI9PT1nP2YuaXMoXCJpbWdcIik/Zi5hdHRyKFwic3JjXCIsZCk6Zi5yZXBsYWNlV2l0aChhKFwiPGltZz5cIikuYXR0cihcInNyY1wiLGQpLmF0dHIoXCJjbGFzc1wiLGYuYXR0cihcImNsYXNzXCIpKSk6Zi5hdHRyKGVbMV0sZCl9fWVsc2UgYi5maW5kKHArXCItXCIrYykuaHRtbChkKX0pfSxfZ2V0U2Nyb2xsYmFyU2l6ZTpmdW5jdGlvbigpe2lmKHZvaWQgMD09PWIuc2Nyb2xsYmFyU2l6ZSl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLnN0eWxlLmNzc1RleHQ9XCJ3aWR0aDogOTlweDsgaGVpZ2h0OiA5OXB4OyBvdmVyZmxvdzogc2Nyb2xsOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTk5OTlweDtcIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpLGIuc2Nyb2xsYmFyU2l6ZT1hLm9mZnNldFdpZHRoLWEuY2xpZW50V2lkdGgsZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKX1yZXR1cm4gYi5zY3JvbGxiYXJTaXplfX0sYS5tYWduaWZpY1BvcHVwPXtpbnN0YW5jZTpudWxsLHByb3RvOnQucHJvdG90eXBlLG1vZHVsZXM6W10sb3BlbjpmdW5jdGlvbihiLGMpe3JldHVybiBBKCksYj1iP2EuZXh0ZW5kKCEwLHt9LGIpOnt9LGIuaXNPYmo9ITAsYi5pbmRleD1jfHwwLHRoaXMuaW5zdGFuY2Uub3BlbihiKX0sY2xvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gYS5tYWduaWZpY1BvcHVwLmluc3RhbmNlJiZhLm1hZ25pZmljUG9wdXAuaW5zdGFuY2UuY2xvc2UoKX0scmVnaXN0ZXJNb2R1bGU6ZnVuY3Rpb24oYixjKXtjLm9wdGlvbnMmJihhLm1hZ25pZmljUG9wdXAuZGVmYXVsdHNbYl09Yy5vcHRpb25zKSxhLmV4dGVuZCh0aGlzLnByb3RvLGMucHJvdG8pLHRoaXMubW9kdWxlcy5wdXNoKGIpfSxkZWZhdWx0czp7ZGlzYWJsZU9uOjAsa2V5Om51bGwsbWlkQ2xpY2s6ITEsbWFpbkNsYXNzOlwiXCIscHJlbG9hZGVyOiEwLGZvY3VzOlwiXCIsY2xvc2VPbkNvbnRlbnRDbGljazohMSxjbG9zZU9uQmdDbGljazohMCxjbG9zZUJ0bkluc2lkZTohMCxzaG93Q2xvc2VCdG46ITAsZW5hYmxlRXNjYXBlS2V5OiEwLG1vZGFsOiExLGFsaWduVG9wOiExLHJlbW92YWxEZWxheTowLHByZXBlbmRUbzpudWxsLGZpeGVkQ29udGVudFBvczpcImF1dG9cIixmaXhlZEJnUG9zOlwiYXV0b1wiLG92ZXJmbG93WTpcImF1dG9cIixjbG9zZU1hcmt1cDonPGJ1dHRvbiB0aXRsZT1cIiV0aXRsZSVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtZnAtY2xvc2VcIj4mIzIxNTs8L2J1dHRvbj4nLHRDbG9zZTpcIkNsb3NlIChFc2MpXCIsdExvYWRpbmc6XCJMb2FkaW5nLi4uXCIsYXV0b0ZvY3VzTGFzdDohMH19LGEuZm4ubWFnbmlmaWNQb3B1cD1mdW5jdGlvbihjKXtBKCk7dmFyIGQ9YSh0aGlzKTtpZihcInN0cmluZ1wiPT10eXBlb2YgYylpZihcIm9wZW5cIj09PWMpe3ZhciBlLGY9dT9kLmRhdGEoXCJtYWduaWZpY1BvcHVwXCIpOmRbMF0ubWFnbmlmaWNQb3B1cCxnPXBhcnNlSW50KGFyZ3VtZW50c1sxXSwxMCl8fDA7Zi5pdGVtcz9lPWYuaXRlbXNbZ106KGU9ZCxmLmRlbGVnYXRlJiYoZT1lLmZpbmQoZi5kZWxlZ2F0ZSkpLGU9ZS5lcShnKSksYi5fb3BlbkNsaWNrKHttZnBFbDplfSxkLGYpfWVsc2UgYi5pc09wZW4mJmJbY10uYXBwbHkoYixBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpO2Vsc2UgYz1hLmV4dGVuZCghMCx7fSxjKSx1P2QuZGF0YShcIm1hZ25pZmljUG9wdXBcIixjKTpkWzBdLm1hZ25pZmljUG9wdXA9YyxiLmFkZEdyb3VwKGQsYyk7cmV0dXJuIGR9O3ZhciBDLEQsRSxGPVwiaW5saW5lXCIsRz1mdW5jdGlvbigpe0UmJihELmFmdGVyKEUuYWRkQ2xhc3MoQykpLmRldGFjaCgpLEU9bnVsbCl9O2EubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZShGLHtvcHRpb25zOntoaWRkZW5DbGFzczpcImhpZGVcIixtYXJrdXA6XCJcIix0Tm90Rm91bmQ6XCJDb250ZW50IG5vdCBmb3VuZFwifSxwcm90bzp7aW5pdElubGluZTpmdW5jdGlvbigpe2IudHlwZXMucHVzaChGKSx3KGgrXCIuXCIrRixmdW5jdGlvbigpe0coKX0pfSxnZXRJbmxpbmU6ZnVuY3Rpb24oYyxkKXtpZihHKCksYy5zcmMpe3ZhciBlPWIuc3QuaW5saW5lLGY9YShjLnNyYyk7aWYoZi5sZW5ndGgpe3ZhciBnPWZbMF0ucGFyZW50Tm9kZTtnJiZnLnRhZ05hbWUmJihEfHwoQz1lLmhpZGRlbkNsYXNzLEQ9eChDKSxDPVwibWZwLVwiK0MpLEU9Zi5hZnRlcihEKS5kZXRhY2goKS5yZW1vdmVDbGFzcyhDKSksYi51cGRhdGVTdGF0dXMoXCJyZWFkeVwiKX1lbHNlIGIudXBkYXRlU3RhdHVzKFwiZXJyb3JcIixlLnROb3RGb3VuZCksZj1hKFwiPGRpdj5cIik7cmV0dXJuIGMuaW5saW5lRWxlbWVudD1mLGZ9cmV0dXJuIGIudXBkYXRlU3RhdHVzKFwicmVhZHlcIiksYi5fcGFyc2VNYXJrdXAoZCx7fSxjKSxkfX19KTt2YXIgSCxJPVwiYWpheFwiLEo9ZnVuY3Rpb24oKXtIJiZhKGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKEgpfSxLPWZ1bmN0aW9uKCl7SigpLGIucmVxJiZiLnJlcS5hYm9ydCgpfTthLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoSSx7b3B0aW9uczp7c2V0dGluZ3M6bnVsbCxjdXJzb3I6XCJtZnAtYWpheC1jdXJcIix0RXJyb3I6JzxhIGhyZWY9XCIldXJsJVwiPlRoZSBjb250ZW50PC9hPiBjb3VsZCBub3QgYmUgbG9hZGVkLid9LHByb3RvOntpbml0QWpheDpmdW5jdGlvbigpe2IudHlwZXMucHVzaChJKSxIPWIuc3QuYWpheC5jdXJzb3IsdyhoK1wiLlwiK0ksSyksdyhcIkJlZm9yZUNoYW5nZS5cIitJLEspfSxnZXRBamF4OmZ1bmN0aW9uKGMpe0gmJmEoZG9jdW1lbnQuYm9keSkuYWRkQ2xhc3MoSCksYi51cGRhdGVTdGF0dXMoXCJsb2FkaW5nXCIpO3ZhciBkPWEuZXh0ZW5kKHt1cmw6Yy5zcmMsc3VjY2VzczpmdW5jdGlvbihkLGUsZil7dmFyIGc9e2RhdGE6ZCx4aHI6Zn07eShcIlBhcnNlQWpheFwiLGcpLGIuYXBwZW5kQ29udGVudChhKGcuZGF0YSksSSksYy5maW5pc2hlZD0hMCxKKCksYi5fc2V0Rm9jdXMoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi53cmFwLmFkZENsYXNzKHEpfSwxNiksYi51cGRhdGVTdGF0dXMoXCJyZWFkeVwiKSx5KFwiQWpheENvbnRlbnRBZGRlZFwiKX0sZXJyb3I6ZnVuY3Rpb24oKXtKKCksYy5maW5pc2hlZD1jLmxvYWRFcnJvcj0hMCxiLnVwZGF0ZVN0YXR1cyhcImVycm9yXCIsYi5zdC5hamF4LnRFcnJvci5yZXBsYWNlKFwiJXVybCVcIixjLnNyYykpfX0sYi5zdC5hamF4LnNldHRpbmdzKTtyZXR1cm4gYi5yZXE9YS5hamF4KGQpLFwiXCJ9fX0pO3ZhciBMLE09ZnVuY3Rpb24oYyl7aWYoYy5kYXRhJiZ2b2lkIDAhPT1jLmRhdGEudGl0bGUpcmV0dXJuIGMuZGF0YS50aXRsZTt2YXIgZD1iLnN0LmltYWdlLnRpdGxlU3JjO2lmKGQpe2lmKGEuaXNGdW5jdGlvbihkKSlyZXR1cm4gZC5jYWxsKGIsYyk7aWYoYy5lbClyZXR1cm4gYy5lbC5hdHRyKGQpfHxcIlwifXJldHVyblwiXCJ9O2EubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZShcImltYWdlXCIse29wdGlvbnM6e21hcmt1cDonPGRpdiBjbGFzcz1cIm1mcC1maWd1cmVcIj48ZGl2IGNsYXNzPVwibWZwLWNsb3NlXCI+PC9kaXY+PGZpZ3VyZT48ZGl2IGNsYXNzPVwibWZwLWltZ1wiPjwvZGl2PjxmaWdjYXB0aW9uPjxkaXYgY2xhc3M9XCJtZnAtYm90dG9tLWJhclwiPjxkaXYgY2xhc3M9XCJtZnAtdGl0bGVcIj48L2Rpdj48ZGl2IGNsYXNzPVwibWZwLWNvdW50ZXJcIj48L2Rpdj48L2Rpdj48L2ZpZ2NhcHRpb24+PC9maWd1cmU+PC9kaXY+JyxjdXJzb3I6XCJtZnAtem9vbS1vdXQtY3VyXCIsdGl0bGVTcmM6XCJ0aXRsZVwiLHZlcnRpY2FsRml0OiEwLHRFcnJvcjonPGEgaHJlZj1cIiV1cmwlXCI+VGhlIGltYWdlPC9hPiBjb3VsZCBub3QgYmUgbG9hZGVkLid9LHByb3RvOntpbml0SW1hZ2U6ZnVuY3Rpb24oKXt2YXIgYz1iLnN0LmltYWdlLGQ9XCIuaW1hZ2VcIjtiLnR5cGVzLnB1c2goXCJpbWFnZVwiKSx3KG0rZCxmdW5jdGlvbigpe1wiaW1hZ2VcIj09PWIuY3Vyckl0ZW0udHlwZSYmYy5jdXJzb3ImJmEoZG9jdW1lbnQuYm9keSkuYWRkQ2xhc3MoYy5jdXJzb3IpfSksdyhoK2QsZnVuY3Rpb24oKXtjLmN1cnNvciYmYShkb2N1bWVudC5ib2R5KS5yZW1vdmVDbGFzcyhjLmN1cnNvciksdi5vZmYoXCJyZXNpemVcIitwKX0pLHcoXCJSZXNpemVcIitkLGIucmVzaXplSW1hZ2UpLGIuaXNMb3dJRSYmdyhcIkFmdGVyQ2hhbmdlXCIsYi5yZXNpemVJbWFnZSl9LHJlc2l6ZUltYWdlOmZ1bmN0aW9uKCl7dmFyIGE9Yi5jdXJySXRlbTtpZihhJiZhLmltZyYmYi5zdC5pbWFnZS52ZXJ0aWNhbEZpdCl7dmFyIGM9MDtiLmlzTG93SUUmJihjPXBhcnNlSW50KGEuaW1nLmNzcyhcInBhZGRpbmctdG9wXCIpLDEwKStwYXJzZUludChhLmltZy5jc3MoXCJwYWRkaW5nLWJvdHRvbVwiKSwxMCkpLGEuaW1nLmNzcyhcIm1heC1oZWlnaHRcIixiLndILWMpfX0sX29uSW1hZ2VIYXNTaXplOmZ1bmN0aW9uKGEpe2EuaW1nJiYoYS5oYXNTaXplPSEwLEwmJmNsZWFySW50ZXJ2YWwoTCksYS5pc0NoZWNraW5nSW1nU2l6ZT0hMSx5KFwiSW1hZ2VIYXNTaXplXCIsYSksYS5pbWdIaWRkZW4mJihiLmNvbnRlbnQmJmIuY29udGVudC5yZW1vdmVDbGFzcyhcIm1mcC1sb2FkaW5nXCIpLGEuaW1nSGlkZGVuPSExKSl9LGZpbmRJbWFnZVNpemU6ZnVuY3Rpb24oYSl7dmFyIGM9MCxkPWEuaW1nWzBdLGU9ZnVuY3Rpb24oZil7TCYmY2xlYXJJbnRlcnZhbChMKSxMPXNldEludGVydmFsKGZ1bmN0aW9uKCl7cmV0dXJuIGQubmF0dXJhbFdpZHRoPjA/dm9pZCBiLl9vbkltYWdlSGFzU2l6ZShhKTooYz4yMDAmJmNsZWFySW50ZXJ2YWwoTCksYysrLHZvaWQoMz09PWM/ZSgxMCk6NDA9PT1jP2UoNTApOjEwMD09PWMmJmUoNTAwKSkpfSxmKX07ZSgxKX0sZ2V0SW1hZ2U6ZnVuY3Rpb24oYyxkKXt2YXIgZT0wLGY9ZnVuY3Rpb24oKXtjJiYoYy5pbWdbMF0uY29tcGxldGU/KGMuaW1nLm9mZihcIi5tZnBsb2FkZXJcIiksYz09PWIuY3Vyckl0ZW0mJihiLl9vbkltYWdlSGFzU2l6ZShjKSxiLnVwZGF0ZVN0YXR1cyhcInJlYWR5XCIpKSxjLmhhc1NpemU9ITAsYy5sb2FkZWQ9ITAseShcIkltYWdlTG9hZENvbXBsZXRlXCIpKTooZSsrLDIwMD5lP3NldFRpbWVvdXQoZiwxMDApOmcoKSkpfSxnPWZ1bmN0aW9uKCl7YyYmKGMuaW1nLm9mZihcIi5tZnBsb2FkZXJcIiksYz09PWIuY3Vyckl0ZW0mJihiLl9vbkltYWdlSGFzU2l6ZShjKSxiLnVwZGF0ZVN0YXR1cyhcImVycm9yXCIsaC50RXJyb3IucmVwbGFjZShcIiV1cmwlXCIsYy5zcmMpKSksYy5oYXNTaXplPSEwLGMubG9hZGVkPSEwLGMubG9hZEVycm9yPSEwKX0saD1iLnN0LmltYWdlLGk9ZC5maW5kKFwiLm1mcC1pbWdcIik7aWYoaS5sZW5ndGgpe3ZhciBqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7ai5jbGFzc05hbWU9XCJtZnAtaW1nXCIsYy5lbCYmYy5lbC5maW5kKFwiaW1nXCIpLmxlbmd0aCYmKGouYWx0PWMuZWwuZmluZChcImltZ1wiKS5hdHRyKFwiYWx0XCIpKSxjLmltZz1hKGopLm9uKFwibG9hZC5tZnBsb2FkZXJcIixmKS5vbihcImVycm9yLm1mcGxvYWRlclwiLGcpLGouc3JjPWMuc3JjLGkuaXMoXCJpbWdcIikmJihjLmltZz1jLmltZy5jbG9uZSgpKSxqPWMuaW1nWzBdLGoubmF0dXJhbFdpZHRoPjA/Yy5oYXNTaXplPSEwOmoud2lkdGh8fChjLmhhc1NpemU9ITEpfXJldHVybiBiLl9wYXJzZU1hcmt1cChkLHt0aXRsZTpNKGMpLGltZ19yZXBsYWNlV2l0aDpjLmltZ30sYyksYi5yZXNpemVJbWFnZSgpLGMuaGFzU2l6ZT8oTCYmY2xlYXJJbnRlcnZhbChMKSxjLmxvYWRFcnJvcj8oZC5hZGRDbGFzcyhcIm1mcC1sb2FkaW5nXCIpLGIudXBkYXRlU3RhdHVzKFwiZXJyb3JcIixoLnRFcnJvci5yZXBsYWNlKFwiJXVybCVcIixjLnNyYykpKTooZC5yZW1vdmVDbGFzcyhcIm1mcC1sb2FkaW5nXCIpLGIudXBkYXRlU3RhdHVzKFwicmVhZHlcIikpLGQpOihiLnVwZGF0ZVN0YXR1cyhcImxvYWRpbmdcIiksYy5sb2FkaW5nPSEwLGMuaGFzU2l6ZXx8KGMuaW1nSGlkZGVuPSEwLGQuYWRkQ2xhc3MoXCJtZnAtbG9hZGluZ1wiKSxiLmZpbmRJbWFnZVNpemUoYykpLGQpfX19KTt2YXIgTixPPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PU4mJihOPXZvaWQgMCE9PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpLnN0eWxlLk1velRyYW5zZm9ybSksTn07YS5tYWduaWZpY1BvcHVwLnJlZ2lzdGVyTW9kdWxlKFwiem9vbVwiLHtvcHRpb25zOntlbmFibGVkOiExLGVhc2luZzpcImVhc2UtaW4tb3V0XCIsZHVyYXRpb246MzAwLG9wZW5lcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5pcyhcImltZ1wiKT9hOmEuZmluZChcImltZ1wiKX19LHByb3RvOntpbml0Wm9vbTpmdW5jdGlvbigpe3ZhciBhLGM9Yi5zdC56b29tLGQ9XCIuem9vbVwiO2lmKGMuZW5hYmxlZCYmYi5zdXBwb3J0c1RyYW5zaXRpb24pe3ZhciBlLGYsZz1jLmR1cmF0aW9uLGo9ZnVuY3Rpb24oYSl7dmFyIGI9YS5jbG9uZSgpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKS5yZW1vdmVBdHRyKFwiY2xhc3NcIikuYWRkQ2xhc3MoXCJtZnAtYW5pbWF0ZWQtaW1hZ2VcIiksZD1cImFsbCBcIitjLmR1cmF0aW9uLzFlMytcInMgXCIrYy5lYXNpbmcsZT17cG9zaXRpb246XCJmaXhlZFwiLHpJbmRleDo5OTk5LGxlZnQ6MCx0b3A6MCxcIi13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eVwiOlwiaGlkZGVuXCJ9LGY9XCJ0cmFuc2l0aW9uXCI7cmV0dXJuIGVbXCItd2Via2l0LVwiK2ZdPWVbXCItbW96LVwiK2ZdPWVbXCItby1cIitmXT1lW2ZdPWQsYi5jc3MoZSksYn0saz1mdW5jdGlvbigpe2IuY29udGVudC5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJ2aXNpYmxlXCIpfTt3KFwiQnVpbGRDb250cm9sc1wiK2QsZnVuY3Rpb24oKXtpZihiLl9hbGxvd1pvb20oKSl7aWYoY2xlYXJUaW1lb3V0KGUpLGIuY29udGVudC5jc3MoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIiksYT1iLl9nZXRJdGVtVG9ab29tKCksIWEpcmV0dXJuIHZvaWQgaygpO2Y9aihhKSxmLmNzcyhiLl9nZXRPZmZzZXQoKSksYi53cmFwLmFwcGVuZChmKSxlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLmNzcyhiLl9nZXRPZmZzZXQoITApKSxlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtrKCksc2V0VGltZW91dChmdW5jdGlvbigpe2YucmVtb3ZlKCksYT1mPW51bGwseShcIlpvb21BbmltYXRpb25FbmRlZFwiKX0sMTYpfSxnKX0sMTYpfX0pLHcoaStkLGZ1bmN0aW9uKCl7aWYoYi5fYWxsb3dab29tKCkpe2lmKGNsZWFyVGltZW91dChlKSxiLnN0LnJlbW92YWxEZWxheT1nLCFhKXtpZihhPWIuX2dldEl0ZW1Ub1pvb20oKSwhYSlyZXR1cm47Zj1qKGEpfWYuY3NzKGIuX2dldE9mZnNldCghMCkpLGIud3JhcC5hcHBlbmQoZiksYi5jb250ZW50LmNzcyhcInZpc2liaWxpdHlcIixcImhpZGRlblwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zi5jc3MoYi5fZ2V0T2Zmc2V0KCkpfSwxNil9fSksdyhoK2QsZnVuY3Rpb24oKXtiLl9hbGxvd1pvb20oKSYmKGsoKSxmJiZmLnJlbW92ZSgpLGE9bnVsbCl9KX19LF9hbGxvd1pvb206ZnVuY3Rpb24oKXtyZXR1cm5cImltYWdlXCI9PT1iLmN1cnJJdGVtLnR5cGV9LF9nZXRJdGVtVG9ab29tOmZ1bmN0aW9uKCl7cmV0dXJuIGIuY3Vyckl0ZW0uaGFzU2l6ZT9iLmN1cnJJdGVtLmltZzohMX0sX2dldE9mZnNldDpmdW5jdGlvbihjKXt2YXIgZDtkPWM/Yi5jdXJySXRlbS5pbWc6Yi5zdC56b29tLm9wZW5lcihiLmN1cnJJdGVtLmVsfHxiLmN1cnJJdGVtKTt2YXIgZT1kLm9mZnNldCgpLGY9cGFyc2VJbnQoZC5jc3MoXCJwYWRkaW5nLXRvcFwiKSwxMCksZz1wYXJzZUludChkLmNzcyhcInBhZGRpbmctYm90dG9tXCIpLDEwKTtlLnRvcC09YSh3aW5kb3cpLnNjcm9sbFRvcCgpLWY7dmFyIGg9e3dpZHRoOmQud2lkdGgoKSxoZWlnaHQ6KHU/ZC5pbm5lckhlaWdodCgpOmRbMF0ub2Zmc2V0SGVpZ2h0KS1nLWZ9O3JldHVybiBPKCk/aFtcIi1tb3otdHJhbnNmb3JtXCJdPWgudHJhbnNmb3JtPVwidHJhbnNsYXRlKFwiK2UubGVmdCtcInB4LFwiK2UudG9wK1wicHgpXCI6KGgubGVmdD1lLmxlZnQsaC50b3A9ZS50b3ApLGh9fX0pO3ZhciBQPVwiaWZyYW1lXCIsUT1cIi8vYWJvdXQ6YmxhbmtcIixSPWZ1bmN0aW9uKGEpe2lmKGIuY3VyclRlbXBsYXRlW1BdKXt2YXIgYz1iLmN1cnJUZW1wbGF0ZVtQXS5maW5kKFwiaWZyYW1lXCIpO2MubGVuZ3RoJiYoYXx8KGNbMF0uc3JjPVEpLGIuaXNJRTgmJmMuY3NzKFwiZGlzcGxheVwiLGE/XCJibG9ja1wiOlwibm9uZVwiKSl9fTthLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoUCx7b3B0aW9uczp7bWFya3VwOic8ZGl2IGNsYXNzPVwibWZwLWlmcmFtZS1zY2FsZXJcIj48ZGl2IGNsYXNzPVwibWZwLWNsb3NlXCI+PC9kaXY+PGlmcmFtZSBjbGFzcz1cIm1mcC1pZnJhbWVcIiBzcmM9XCIvL2Fib3V0OmJsYW5rXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPjwvZGl2Picsc3JjQWN0aW9uOlwiaWZyYW1lX3NyY1wiLHBhdHRlcm5zOnt5b3V0dWJlOntpbmRleDpcInlvdXR1YmUuY29tXCIsaWQ6XCJ2PVwiLHNyYzpcIi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLyVpZCU/YXV0b3BsYXk9MVwifSx2aW1lbzp7aW5kZXg6XCJ2aW1lby5jb20vXCIsaWQ6XCIvXCIsc3JjOlwiLy9wbGF5ZXIudmltZW8uY29tL3ZpZGVvLyVpZCU/YXV0b3BsYXk9MVwifSxnbWFwczp7aW5kZXg6XCIvL21hcHMuZ29vZ2xlLlwiLHNyYzpcIiVpZCUmb3V0cHV0PWVtYmVkXCJ9fX0scHJvdG86e2luaXRJZnJhbWU6ZnVuY3Rpb24oKXtiLnR5cGVzLnB1c2goUCksdyhcIkJlZm9yZUNoYW5nZVwiLGZ1bmN0aW9uKGEsYixjKXtiIT09YyYmKGI9PT1QP1IoKTpjPT09UCYmUighMCkpfSksdyhoK1wiLlwiK1AsZnVuY3Rpb24oKXtSKCl9KX0sZ2V0SWZyYW1lOmZ1bmN0aW9uKGMsZCl7dmFyIGU9Yy5zcmMsZj1iLnN0LmlmcmFtZTthLmVhY2goZi5wYXR0ZXJucyxmdW5jdGlvbigpe3JldHVybiBlLmluZGV4T2YodGhpcy5pbmRleCk+LTE/KHRoaXMuaWQmJihlPVwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLmlkP2Uuc3Vic3RyKGUubGFzdEluZGV4T2YodGhpcy5pZCkrdGhpcy5pZC5sZW5ndGgsZS5sZW5ndGgpOnRoaXMuaWQuY2FsbCh0aGlzLGUpKSxlPXRoaXMuc3JjLnJlcGxhY2UoXCIlaWQlXCIsZSksITEpOnZvaWQgMH0pO3ZhciBnPXt9O3JldHVybiBmLnNyY0FjdGlvbiYmKGdbZi5zcmNBY3Rpb25dPWUpLGIuX3BhcnNlTWFya3VwKGQsZyxjKSxiLnVwZGF0ZVN0YXR1cyhcInJlYWR5XCIpLGR9fX0pO3ZhciBTPWZ1bmN0aW9uKGEpe3ZhciBjPWIuaXRlbXMubGVuZ3RoO3JldHVybiBhPmMtMT9hLWM6MD5hP2MrYTphfSxUPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYS5yZXBsYWNlKC8lY3VyciUvZ2ksYisxKS5yZXBsYWNlKC8ldG90YWwlL2dpLGMpfTthLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoXCJnYWxsZXJ5XCIse29wdGlvbnM6e2VuYWJsZWQ6ITEsYXJyb3dNYXJrdXA6JzxidXR0b24gdGl0bGU9XCIldGl0bGUlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwibWZwLWFycm93IG1mcC1hcnJvdy0lZGlyJVwiPjwvYnV0dG9uPicscHJlbG9hZDpbMCwyXSxuYXZpZ2F0ZUJ5SW1nQ2xpY2s6ITAsYXJyb3dzOiEwLHRQcmV2OlwiUHJldmlvdXMgKExlZnQgYXJyb3cga2V5KVwiLHROZXh0OlwiTmV4dCAoUmlnaHQgYXJyb3cga2V5KVwiLHRDb3VudGVyOlwiJWN1cnIlIG9mICV0b3RhbCVcIn0scHJvdG86e2luaXRHYWxsZXJ5OmZ1bmN0aW9uKCl7dmFyIGM9Yi5zdC5nYWxsZXJ5LGU9XCIubWZwLWdhbGxlcnlcIjtyZXR1cm4gYi5kaXJlY3Rpb249ITAsYyYmYy5lbmFibGVkPyhmKz1cIiBtZnAtZ2FsbGVyeVwiLHcobStlLGZ1bmN0aW9uKCl7Yy5uYXZpZ2F0ZUJ5SW1nQ2xpY2smJmIud3JhcC5vbihcImNsaWNrXCIrZSxcIi5tZnAtaW1nXCIsZnVuY3Rpb24oKXtyZXR1cm4gYi5pdGVtcy5sZW5ndGg+MT8oYi5uZXh0KCksITEpOnZvaWQgMH0pLGQub24oXCJrZXlkb3duXCIrZSxmdW5jdGlvbihhKXszNz09PWEua2V5Q29kZT9iLnByZXYoKTozOT09PWEua2V5Q29kZSYmYi5uZXh0KCl9KX0pLHcoXCJVcGRhdGVTdGF0dXNcIitlLGZ1bmN0aW9uKGEsYyl7Yy50ZXh0JiYoYy50ZXh0PVQoYy50ZXh0LGIuY3Vyckl0ZW0uaW5kZXgsYi5pdGVtcy5sZW5ndGgpKX0pLHcobCtlLGZ1bmN0aW9uKGEsZCxlLGYpe3ZhciBnPWIuaXRlbXMubGVuZ3RoO2UuY291bnRlcj1nPjE/VChjLnRDb3VudGVyLGYuaW5kZXgsZyk6XCJcIn0pLHcoXCJCdWlsZENvbnRyb2xzXCIrZSxmdW5jdGlvbigpe2lmKGIuaXRlbXMubGVuZ3RoPjEmJmMuYXJyb3dzJiYhYi5hcnJvd0xlZnQpe3ZhciBkPWMuYXJyb3dNYXJrdXAsZT1iLmFycm93TGVmdD1hKGQucmVwbGFjZSgvJXRpdGxlJS9naSxjLnRQcmV2KS5yZXBsYWNlKC8lZGlyJS9naSxcImxlZnRcIikpLmFkZENsYXNzKHMpLGY9Yi5hcnJvd1JpZ2h0PWEoZC5yZXBsYWNlKC8ldGl0bGUlL2dpLGMudE5leHQpLnJlcGxhY2UoLyVkaXIlL2dpLFwicmlnaHRcIikpLmFkZENsYXNzKHMpO2UuY2xpY2soZnVuY3Rpb24oKXtiLnByZXYoKX0pLGYuY2xpY2soZnVuY3Rpb24oKXtiLm5leHQoKX0pLGIuY29udGFpbmVyLmFwcGVuZChlLmFkZChmKSl9fSksdyhuK2UsZnVuY3Rpb24oKXtiLl9wcmVsb2FkVGltZW91dCYmY2xlYXJUaW1lb3V0KGIuX3ByZWxvYWRUaW1lb3V0KSxiLl9wcmVsb2FkVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5wcmVsb2FkTmVhcmJ5SW1hZ2VzKCksYi5fcHJlbG9hZFRpbWVvdXQ9bnVsbH0sMTYpfSksdm9pZCB3KGgrZSxmdW5jdGlvbigpe2Qub2ZmKGUpLGIud3JhcC5vZmYoXCJjbGlja1wiK2UpLGIuYXJyb3dSaWdodD1iLmFycm93TGVmdD1udWxsfSkpOiExfSxuZXh0OmZ1bmN0aW9uKCl7Yi5kaXJlY3Rpb249ITAsYi5pbmRleD1TKGIuaW5kZXgrMSksYi51cGRhdGVJdGVtSFRNTCgpfSxwcmV2OmZ1bmN0aW9uKCl7Yi5kaXJlY3Rpb249ITEsYi5pbmRleD1TKGIuaW5kZXgtMSksYi51cGRhdGVJdGVtSFRNTCgpfSxnb1RvOmZ1bmN0aW9uKGEpe2IuZGlyZWN0aW9uPWE+PWIuaW5kZXgsYi5pbmRleD1hLGIudXBkYXRlSXRlbUhUTUwoKX0scHJlbG9hZE5lYXJieUltYWdlczpmdW5jdGlvbigpe3ZhciBhLGM9Yi5zdC5nYWxsZXJ5LnByZWxvYWQsZD1NYXRoLm1pbihjWzBdLGIuaXRlbXMubGVuZ3RoKSxlPU1hdGgubWluKGNbMV0sYi5pdGVtcy5sZW5ndGgpO2ZvcihhPTE7YTw9KGIuZGlyZWN0aW9uP2U6ZCk7YSsrKWIuX3ByZWxvYWRJdGVtKGIuaW5kZXgrYSk7Zm9yKGE9MTthPD0oYi5kaXJlY3Rpb24/ZDplKTthKyspYi5fcHJlbG9hZEl0ZW0oYi5pbmRleC1hKX0sX3ByZWxvYWRJdGVtOmZ1bmN0aW9uKGMpe2lmKGM9UyhjKSwhYi5pdGVtc1tjXS5wcmVsb2FkZWQpe3ZhciBkPWIuaXRlbXNbY107ZC5wYXJzZWR8fChkPWIucGFyc2VFbChjKSkseShcIkxhenlMb2FkXCIsZCksXCJpbWFnZVwiPT09ZC50eXBlJiYoZC5pbWc9YSgnPGltZyBjbGFzcz1cIm1mcC1pbWdcIiAvPicpLm9uKFwibG9hZC5tZnBsb2FkZXJcIixmdW5jdGlvbigpe2QuaGFzU2l6ZT0hMH0pLm9uKFwiZXJyb3IubWZwbG9hZGVyXCIsZnVuY3Rpb24oKXtkLmhhc1NpemU9ITAsZC5sb2FkRXJyb3I9ITAseShcIkxhenlMb2FkRXJyb3JcIixkKX0pLmF0dHIoXCJzcmNcIixkLnNyYykpLGQucHJlbG9hZGVkPSEwfX19fSk7dmFyIFU9XCJyZXRpbmFcIjthLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoVSx7b3B0aW9uczp7cmVwbGFjZVNyYzpmdW5jdGlvbihhKXtyZXR1cm4gYS5zcmMucmVwbGFjZSgvXFwuXFx3KyQvLGZ1bmN0aW9uKGEpe3JldHVyblwiQDJ4XCIrYX0pfSxyYXRpbzoxfSxwcm90bzp7aW5pdFJldGluYTpmdW5jdGlvbigpe2lmKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvPjEpe3ZhciBhPWIuc3QucmV0aW5hLGM9YS5yYXRpbztjPWlzTmFOKGMpP2MoKTpjLGM+MSYmKHcoXCJJbWFnZUhhc1NpemUuXCIrVSxmdW5jdGlvbihhLGIpe2IuaW1nLmNzcyh7XCJtYXgtd2lkdGhcIjpiLmltZ1swXS5uYXR1cmFsV2lkdGgvYyx3aWR0aDpcIjEwMCVcIn0pfSksdyhcIkVsZW1lbnRQYXJzZS5cIitVLGZ1bmN0aW9uKGIsZCl7ZC5zcmM9YS5yZXBsYWNlU3JjKGQsYyl9KSl9fX19KSxBKCl9KTsiXSwiZmlsZSI6ImpxdWVyeS5tYWduaWZpYy1wb3B1cC5taW4uanMifQ==
;
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.AOS=t()}(this,function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t="Expected a function",n=NaN,o="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,c=/^0o[0-7]+$/i,s=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,l=u||d||Function("return this")(),f=Object.prototype.toString,m=Math.max,p=Math.min,b=function(){return l.Date.now()};function v(e,n,o){var i,a,r,c,s,u,d=0,l=!1,f=!1,v=!0;if("function"!=typeof e)throw new TypeError(t);function y(t){var n=i,o=a;return i=a=void 0,d=t,c=e.apply(o,n)}function h(e){var t=e-u;return void 0===u||t>=n||t<0||f&&e-d>=r}function k(){var e=b();if(h(e))return x(e);s=setTimeout(k,function(e){var t=n-(e-u);return f?p(t,r-(e-d)):t}(e))}function x(e){return s=void 0,v&&i?y(e):(i=a=void 0,c)}function O(){var e=b(),t=h(e);if(i=arguments,a=this,u=e,t){if(void 0===s)return function(e){return d=e,s=setTimeout(k,n),l?y(e):c}(u);if(f)return s=setTimeout(k,n),y(u)}return void 0===s&&(s=setTimeout(k,n)),c}return n=w(n)||0,g(o)&&(l=!!o.leading,r=(f="maxWait"in o)?m(w(o.maxWait)||0,n):r,v="trailing"in o?!!o.trailing:v),O.cancel=function(){void 0!==s&&clearTimeout(s),d=0,i=u=a=s=void 0},O.flush=function(){return void 0===s?c:x(b())},O}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==o}(e))return n;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var u=r.test(e);return u||c.test(e)?s(e.slice(2),u?2:8):a.test(e)?n:+e}var y=function(e,n,o){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError(t);return g(o)&&(i="leading"in o?!!o.leading:i,a="trailing"in o?!!o.trailing:a),v(e,n,{leading:i,maxWait:n,trailing:a})},h="Expected a function",k=NaN,x="[object Symbol]",O=/^\s+|\s+$/g,j=/^[-+]0x[0-9a-f]+$/i,E=/^0b[01]+$/i,N=/^0o[0-7]+$/i,z=parseInt,C="object"==typeof e&&e&&e.Object===Object&&e,A="object"==typeof self&&self&&self.Object===Object&&self,q=C||A||Function("return this")(),L=Object.prototype.toString,T=Math.max,M=Math.min,S=function(){return q.Date.now()};function D(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function H(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&L.call(e)==x}(e))return k;if(D(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=D(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(O,"");var n=E.test(e);return n||N.test(e)?z(e.slice(2),n?2:8):j.test(e)?k:+e}var $=function(e,t,n){var o,i,a,r,c,s,u=0,d=!1,l=!1,f=!0;if("function"!=typeof e)throw new TypeError(h);function m(t){var n=o,a=i;return o=i=void 0,u=t,r=e.apply(a,n)}function p(e){var n=e-s;return void 0===s||n>=t||n<0||l&&e-u>=a}function b(){var e=S();if(p(e))return v(e);c=setTimeout(b,function(e){var n=t-(e-s);return l?M(n,a-(e-u)):n}(e))}function v(e){return c=void 0,f&&o?m(e):(o=i=void 0,r)}function g(){var e=S(),n=p(e);if(o=arguments,i=this,s=e,n){if(void 0===c)return function(e){return u=e,c=setTimeout(b,t),d?m(e):r}(s);if(l)return c=setTimeout(b,t),m(s)}return void 0===c&&(c=setTimeout(b,t)),r}return t=H(t)||0,D(n)&&(d=!!n.leading,a=(l="maxWait"in n)?T(H(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),g.cancel=function(){void 0!==c&&clearTimeout(c),u=0,o=s=i=c=void 0},g.flush=function(){return void 0===c?r:v(S())},g},W=function(){};function P(e){e&&e.forEach(function(e){var t=Array.prototype.slice.call(e.addedNodes),n=Array.prototype.slice.call(e.removedNodes);if(function e(t){var n=void 0,o=void 0;for(n=0;n<t.length;n+=1){if((o=t[n]).dataset&&o.dataset.aos)return!0;if(o.children&&e(o.children))return!0}return!1}(t.concat(n)))return W()})}function Y(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}var _={isSupported:function(){return!!Y()},ready:function(e,t){var n=window.document,o=new(Y())(P);W=t,o.observe(n.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}},B=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},K=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,G=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,J=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,Q=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;function R(){return navigator.userAgent||navigator.vendor||window.opera||""}var U=new(function(){function e(){B(this,e)}return F(e,[{key:"phone",value:function(){var e=R();return!(!K.test(e)&&!G.test(e.substr(0,4)))}},{key:"mobile",value:function(){var e=R();return!(!J.test(e)&&!Q.test(e.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}},{key:"ie11",value:function(){return"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style}}]),e}()),V=function(e,t){var n=void 0;return U.ie11()?(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,{detail:t}):n=new CustomEvent(e,{detail:t}),document.dispatchEvent(n)},X=function(e){return e.forEach(function(e,t){return function(e,t){var n=e.options,o=e.position,i=e.node,a=(e.data,function(){e.animated&&(function(e,t){t&&t.forEach(function(t){return e.classList.remove(t)})}(i,n.animatedClassNames),V("aos:out",i),e.options.id&&V("aos:in:"+e.options.id,i),e.animated=!1)});n.mirror&&t>=o.out&&!n.once?a():t>=o.in?e.animated||(function(e,t){t&&t.forEach(function(t){return e.classList.add(t)})}(i,n.animatedClassNames),V("aos:in",i),e.options.id&&V("aos:in:"+e.options.id,i),e.animated=!0):e.animated&&!n.once&&a()}(e,window.pageYOffset)})},Z=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-("BODY"!=e.tagName?e.scrollLeft:0),n+=e.offsetTop-("BODY"!=e.tagName?e.scrollTop:0),e=e.offsetParent;return{top:n,left:t}},ee=function(e,t,n){var o=e.getAttribute("data-aos-"+t);if(void 0!==o){if("true"===o)return!0;if("false"===o)return!1}return o||n},te=function(e,t){return e.forEach(function(e,n){var o=ee(e.node,"mirror",t.mirror),i=ee(e.node,"once",t.once),a=ee(e.node,"id"),r=t.useClassNames&&e.node.getAttribute("data-aos"),c=[t.animatedClassName].concat(r?r.split(" "):[]).filter(function(e){return"string"==typeof e});t.initClassName&&e.node.classList.add(t.initClassName),e.position={in:function(e,t,n){var o=window.innerHeight,i=ee(e,"anchor"),a=ee(e,"anchor-placement"),r=Number(ee(e,"offset",a?0:t)),c=a||n,s=e;i&&document.querySelectorAll(i)&&(s=document.querySelectorAll(i)[0]);var u=Z(s).top-o;switch(c){case"top-bottom":break;case"center-bottom":u+=s.offsetHeight/2;break;case"bottom-bottom":u+=s.offsetHeight;break;case"top-center":u+=o/2;break;case"center-center":u+=o/2+s.offsetHeight/2;break;case"bottom-center":u+=o/2+s.offsetHeight;break;case"top-top":u+=o;break;case"bottom-top":u+=o+s.offsetHeight;break;case"center-top":u+=o+s.offsetHeight/2}return u+r}(e.node,t.offset,t.anchorPlacement),out:o&&function(e,t){window.innerHeight;var n=ee(e,"anchor"),o=ee(e,"offset",t),i=e;return n&&document.querySelectorAll(n)&&(i=document.querySelectorAll(n)[0]),Z(i).top+i.offsetHeight-o}(e.node,t.offset)},e.options={once:i,mirror:o,animatedClassNames:c,id:a}}),e},ne=function(){var e=document.querySelectorAll("[data-aos]");return Array.prototype.map.call(e,function(e){return{node:e}})},oe=[],ie=!1,ae={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,mirror:!1,anchorPlacement:"top-bottom",startEvent:"DOMContentLoaded",animatedClassName:"aos-animate",initClassName:"aos-init",useClassNames:!1,disableMutationObserver:!1,throttleDelay:99,debounceDelay:50},re=function(){return document.all&&!window.atob},ce=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(ie=!0),ie&&(oe=te(oe,ae),X(oe),window.addEventListener("scroll",y(function(){X(oe,ae.once)},ae.throttleDelay)))},se=function(){if(oe=ne(),de(ae.disable)||re())return ue();ce()},ue=function(){oe.forEach(function(e,t){e.node.removeAttribute("data-aos"),e.node.removeAttribute("data-aos-easing"),e.node.removeAttribute("data-aos-duration"),e.node.removeAttribute("data-aos-delay"),ae.initClassName&&e.node.classList.remove(ae.initClassName),ae.animatedClassName&&e.node.classList.remove(ae.animatedClassName)})},de=function(e){return!0===e||"mobile"===e&&U.mobile()||"phone"===e&&U.phone()||"tablet"===e&&U.tablet()||"function"==typeof e&&!0===e()};return{init:function(e){return ae=I(ae,e),oe=ne(),ae.disableMutationObserver||_.isSupported()||(console.info('\n      aos: MutationObserver is not supported on this browser,\n      code mutations observing has been disabled.\n      You may have to call "refreshHard()" by yourself.\n    '),ae.disableMutationObserver=!0),ae.disableMutationObserver||_.ready("[data-aos]",se),de(ae.disable)||re()?ue():(document.querySelector("body").setAttribute("data-aos-easing",ae.easing),document.querySelector("body").setAttribute("data-aos-duration",ae.duration),document.querySelector("body").setAttribute("data-aos-delay",ae.delay),-1===["DOMContentLoaded","load"].indexOf(ae.startEvent)?document.addEventListener(ae.startEvent,function(){ce(!0)}):window.addEventListener("load",function(){ce(!0)}),"DOMContentLoaded"===ae.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1&&ce(!0),window.addEventListener("resize",$(ce,ae.debounceDelay,!0)),window.addEventListener("orientationchange",$(ce,ae.debounceDelay,!0)),oe)},refresh:ce,refreshHard:se}});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJhb3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6ZS5BT1M9dCgpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp7fSx0PVwiRXhwZWN0ZWQgYSBmdW5jdGlvblwiLG49TmFOLG89XCJbb2JqZWN0IFN5bWJvbF1cIixpPS9eXFxzK3xcXHMrJC9nLGE9L15bLStdMHhbMC05YS1mXSskL2kscj0vXjBiWzAxXSskL2ksYz0vXjBvWzAtN10rJC9pLHM9cGFyc2VJbnQsdT1cIm9iamVjdFwiPT10eXBlb2YgZSYmZSYmZS5PYmplY3Q9PT1PYmplY3QmJmUsZD1cIm9iamVjdFwiPT10eXBlb2Ygc2VsZiYmc2VsZiYmc2VsZi5PYmplY3Q9PT1PYmplY3QmJnNlbGYsbD11fHxkfHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCksZj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLG09TWF0aC5tYXgscD1NYXRoLm1pbixiPWZ1bmN0aW9uKCl7cmV0dXJuIGwuRGF0ZS5ub3coKX07ZnVuY3Rpb24gdihlLG4sbyl7dmFyIGksYSxyLGMscyx1LGQ9MCxsPSExLGY9ITEsdj0hMDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IodCk7ZnVuY3Rpb24geSh0KXt2YXIgbj1pLG89YTtyZXR1cm4gaT1hPXZvaWQgMCxkPXQsYz1lLmFwcGx5KG8sbil9ZnVuY3Rpb24gaChlKXt2YXIgdD1lLXU7cmV0dXJuIHZvaWQgMD09PXV8fHQ+PW58fHQ8MHx8ZiYmZS1kPj1yfWZ1bmN0aW9uIGsoKXt2YXIgZT1iKCk7aWYoaChlKSlyZXR1cm4geChlKTtzPXNldFRpbWVvdXQoayxmdW5jdGlvbihlKXt2YXIgdD1uLShlLXUpO3JldHVybiBmP3AodCxyLShlLWQpKTp0fShlKSl9ZnVuY3Rpb24geChlKXtyZXR1cm4gcz12b2lkIDAsdiYmaT95KGUpOihpPWE9dm9pZCAwLGMpfWZ1bmN0aW9uIE8oKXt2YXIgZT1iKCksdD1oKGUpO2lmKGk9YXJndW1lbnRzLGE9dGhpcyx1PWUsdCl7aWYodm9pZCAwPT09cylyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGQ9ZSxzPXNldFRpbWVvdXQoayxuKSxsP3koZSk6Y30odSk7aWYoZilyZXR1cm4gcz1zZXRUaW1lb3V0KGssbikseSh1KX1yZXR1cm4gdm9pZCAwPT09cyYmKHM9c2V0VGltZW91dChrLG4pKSxjfXJldHVybiBuPXcobil8fDAsZyhvKSYmKGw9ISFvLmxlYWRpbmcscj0oZj1cIm1heFdhaXRcImluIG8pP20odyhvLm1heFdhaXQpfHwwLG4pOnIsdj1cInRyYWlsaW5nXCJpbiBvPyEhby50cmFpbGluZzp2KSxPLmNhbmNlbD1mdW5jdGlvbigpe3ZvaWQgMCE9PXMmJmNsZWFyVGltZW91dChzKSxkPTAsaT11PWE9cz12b2lkIDB9LE8uZmx1c2g9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09cz9jOngoYigpKX0sT31mdW5jdGlvbiBnKGUpe3ZhciB0PXR5cGVvZiBlO3JldHVybiEhZSYmKFwib2JqZWN0XCI9PXR8fFwiZnVuY3Rpb25cIj09dCl9ZnVuY3Rpb24gdyhlKXtpZihcIm51bWJlclwiPT10eXBlb2YgZSlyZXR1cm4gZTtpZihmdW5jdGlvbihlKXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgZXx8ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiZcIm9iamVjdFwiPT10eXBlb2YgZX0oZSkmJmYuY2FsbChlKT09b30oZSkpcmV0dXJuIG47aWYoZyhlKSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgZS52YWx1ZU9mP2UudmFsdWVPZigpOmU7ZT1nKHQpP3QrXCJcIjp0fWlmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiAwPT09ZT9lOitlO2U9ZS5yZXBsYWNlKGksXCJcIik7dmFyIHU9ci50ZXN0KGUpO3JldHVybiB1fHxjLnRlc3QoZSk/cyhlLnNsaWNlKDIpLHU/Mjo4KTphLnRlc3QoZSk/bjorZX12YXIgeT1mdW5jdGlvbihlLG4sbyl7dmFyIGk9ITAsYT0hMDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IodCk7cmV0dXJuIGcobykmJihpPVwibGVhZGluZ1wiaW4gbz8hIW8ubGVhZGluZzppLGE9XCJ0cmFpbGluZ1wiaW4gbz8hIW8udHJhaWxpbmc6YSksdihlLG4se2xlYWRpbmc6aSxtYXhXYWl0Om4sdHJhaWxpbmc6YX0pfSxoPVwiRXhwZWN0ZWQgYSBmdW5jdGlvblwiLGs9TmFOLHg9XCJbb2JqZWN0IFN5bWJvbF1cIixPPS9eXFxzK3xcXHMrJC9nLGo9L15bLStdMHhbMC05YS1mXSskL2ksRT0vXjBiWzAxXSskL2ksTj0vXjBvWzAtN10rJC9pLHo9cGFyc2VJbnQsQz1cIm9iamVjdFwiPT10eXBlb2YgZSYmZSYmZS5PYmplY3Q9PT1PYmplY3QmJmUsQT1cIm9iamVjdFwiPT10eXBlb2Ygc2VsZiYmc2VsZiYmc2VsZi5PYmplY3Q9PT1PYmplY3QmJnNlbGYscT1DfHxBfHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCksTD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLFQ9TWF0aC5tYXgsTT1NYXRoLm1pbixTPWZ1bmN0aW9uKCl7cmV0dXJuIHEuRGF0ZS5ub3coKX07ZnVuY3Rpb24gRChlKXt2YXIgdD10eXBlb2YgZTtyZXR1cm4hIWUmJihcIm9iamVjdFwiPT10fHxcImZ1bmN0aW9uXCI9PXQpfWZ1bmN0aW9uIEgoZSl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUpcmV0dXJuIGU7aWYoZnVuY3Rpb24oZSl7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIGV8fGZ1bmN0aW9uKGUpe3JldHVybiEhZSYmXCJvYmplY3RcIj09dHlwZW9mIGV9KGUpJiZMLmNhbGwoZSk9PXh9KGUpKXJldHVybiBrO2lmKEQoZSkpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIGUudmFsdWVPZj9lLnZhbHVlT2YoKTplO2U9RCh0KT90K1wiXCI6dH1pZihcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm4gMD09PWU/ZTorZTtlPWUucmVwbGFjZShPLFwiXCIpO3ZhciBuPUUudGVzdChlKTtyZXR1cm4gbnx8Ti50ZXN0KGUpP3ooZS5zbGljZSgyKSxuPzI6OCk6ai50ZXN0KGUpP2s6K2V9dmFyICQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBvLGksYSxyLGMscyx1PTAsZD0hMSxsPSExLGY9ITA7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKGgpO2Z1bmN0aW9uIG0odCl7dmFyIG49byxhPWk7cmV0dXJuIG89aT12b2lkIDAsdT10LHI9ZS5hcHBseShhLG4pfWZ1bmN0aW9uIHAoZSl7dmFyIG49ZS1zO3JldHVybiB2b2lkIDA9PT1zfHxuPj10fHxuPDB8fGwmJmUtdT49YX1mdW5jdGlvbiBiKCl7dmFyIGU9UygpO2lmKHAoZSkpcmV0dXJuIHYoZSk7Yz1zZXRUaW1lb3V0KGIsZnVuY3Rpb24oZSl7dmFyIG49dC0oZS1zKTtyZXR1cm4gbD9NKG4sYS0oZS11KSk6bn0oZSkpfWZ1bmN0aW9uIHYoZSl7cmV0dXJuIGM9dm9pZCAwLGYmJm8/bShlKToobz1pPXZvaWQgMCxyKX1mdW5jdGlvbiBnKCl7dmFyIGU9UygpLG49cChlKTtpZihvPWFyZ3VtZW50cyxpPXRoaXMscz1lLG4pe2lmKHZvaWQgMD09PWMpcmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB1PWUsYz1zZXRUaW1lb3V0KGIsdCksZD9tKGUpOnJ9KHMpO2lmKGwpcmV0dXJuIGM9c2V0VGltZW91dChiLHQpLG0ocyl9cmV0dXJuIHZvaWQgMD09PWMmJihjPXNldFRpbWVvdXQoYix0KSkscn1yZXR1cm4gdD1IKHQpfHwwLEQobikmJihkPSEhbi5sZWFkaW5nLGE9KGw9XCJtYXhXYWl0XCJpbiBuKT9UKEgobi5tYXhXYWl0KXx8MCx0KTphLGY9XCJ0cmFpbGluZ1wiaW4gbj8hIW4udHJhaWxpbmc6ZiksZy5jYW5jZWw9ZnVuY3Rpb24oKXt2b2lkIDAhPT1jJiZjbGVhclRpbWVvdXQoYyksdT0wLG89cz1pPWM9dm9pZCAwfSxnLmZsdXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PWM/cjp2KFMoKSl9LGd9LFc9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFAoZSl7ZSYmZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUuYWRkZWROb2Rlcyksbj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnJlbW92ZWROb2Rlcyk7aWYoZnVuY3Rpb24gZSh0KXt2YXIgbj12b2lkIDAsbz12b2lkIDA7Zm9yKG49MDtuPHQubGVuZ3RoO24rPTEpe2lmKChvPXRbbl0pLmRhdGFzZXQmJm8uZGF0YXNldC5hb3MpcmV0dXJuITA7aWYoby5jaGlsZHJlbiYmZShvLmNoaWxkcmVuKSlyZXR1cm4hMH1yZXR1cm4hMX0odC5jb25jYXQobikpKXJldHVybiBXKCl9KX1mdW5jdGlvbiBZKCl7cmV0dXJuIHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk1vek11dGF0aW9uT2JzZXJ2ZXJ9dmFyIF89e2lzU3VwcG9ydGVkOmZ1bmN0aW9uKCl7cmV0dXJuISFZKCl9LHJlYWR5OmZ1bmN0aW9uKGUsdCl7dmFyIG49d2luZG93LmRvY3VtZW50LG89bmV3KFkoKSkoUCk7Vz10LG8ub2JzZXJ2ZShuLmRvY3VtZW50RWxlbWVudCx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITAscmVtb3ZlZE5vZGVzOiEwfSl9fSxCPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX0sRj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIG89dFtuXTtvLmVudW1lcmFibGU9by5lbnVtZXJhYmxlfHwhMSxvLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fXJldHVybiBmdW5jdGlvbih0LG4sbyl7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksbyYmZSh0LG8pLHR9fSgpLEk9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIG49YXJndW1lbnRzW3RdO2Zvcih2YXIgbyBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLG8pJiYoZVtvXT1uW29dKX1yZXR1cm4gZX0sSz0vKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vL2ksRz0vMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaSxKPS8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm98YW5kcm9pZHxpcGFkfHBsYXlib29rfHNpbGsvaSxRPS8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pO2Z1bmN0aW9uIFIoKXtyZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudHx8bmF2aWdhdG9yLnZlbmRvcnx8d2luZG93Lm9wZXJhfHxcIlwifXZhciBVPW5ldyhmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtCKHRoaXMsZSl9cmV0dXJuIEYoZSxbe2tleTpcInBob25lXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1SKCk7cmV0dXJuISghSy50ZXN0KGUpJiYhRy50ZXN0KGUuc3Vic3RyKDAsNCkpKX19LHtrZXk6XCJtb2JpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPVIoKTtyZXR1cm4hKCFKLnRlc3QoZSkmJiFRLnRlc3QoZS5zdWJzdHIoMCw0KSkpfX0se2tleTpcInRhYmxldFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9iaWxlKCkmJiF0aGlzLnBob25lKCl9fSx7a2V5OlwiaWUxMVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCItbXMtc2Nyb2xsLWxpbWl0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUmJlwiLW1zLWltZS1hbGlnblwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlfX1dKSxlfSgpKSxWPWZ1bmN0aW9uKGUsdCl7dmFyIG49dm9pZCAwO3JldHVybiBVLmllMTEoKT8obj1kb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpKS5pbml0Q3VzdG9tRXZlbnQoZSwhMCwhMCx7ZGV0YWlsOnR9KTpuPW5ldyBDdXN0b21FdmVudChlLHtkZXRhaWw6dH0pLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobil9LFg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuPWUub3B0aW9ucyxvPWUucG9zaXRpb24saT1lLm5vZGUsYT0oZS5kYXRhLGZ1bmN0aW9uKCl7ZS5hbmltYXRlZCYmKGZ1bmN0aW9uKGUsdCl7dCYmdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmNsYXNzTGlzdC5yZW1vdmUodCl9KX0oaSxuLmFuaW1hdGVkQ2xhc3NOYW1lcyksVihcImFvczpvdXRcIixpKSxlLm9wdGlvbnMuaWQmJlYoXCJhb3M6aW46XCIrZS5vcHRpb25zLmlkLGkpLGUuYW5pbWF0ZWQ9ITEpfSk7bi5taXJyb3ImJnQ+PW8ub3V0JiYhbi5vbmNlP2EoKTp0Pj1vLmluP2UuYW5pbWF0ZWR8fChmdW5jdGlvbihlLHQpe3QmJnQuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5jbGFzc0xpc3QuYWRkKHQpfSl9KGksbi5hbmltYXRlZENsYXNzTmFtZXMpLFYoXCJhb3M6aW5cIixpKSxlLm9wdGlvbnMuaWQmJlYoXCJhb3M6aW46XCIrZS5vcHRpb25zLmlkLGkpLGUuYW5pbWF0ZWQ9ITApOmUuYW5pbWF0ZWQmJiFuLm9uY2UmJmEoKX0oZSx3aW5kb3cucGFnZVlPZmZzZXQpfSl9LFo9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj0wO2UmJiFpc05hTihlLm9mZnNldExlZnQpJiYhaXNOYU4oZS5vZmZzZXRUb3ApOyl0Kz1lLm9mZnNldExlZnQtKFwiQk9EWVwiIT1lLnRhZ05hbWU/ZS5zY3JvbGxMZWZ0OjApLG4rPWUub2Zmc2V0VG9wLShcIkJPRFlcIiE9ZS50YWdOYW1lP2Uuc2Nyb2xsVG9wOjApLGU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJue3RvcDpuLGxlZnQ6dH19LGVlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgbz1lLmdldEF0dHJpYnV0ZShcImRhdGEtYW9zLVwiK3QpO2lmKHZvaWQgMCE9PW8pe2lmKFwidHJ1ZVwiPT09bylyZXR1cm4hMDtpZihcImZhbHNlXCI9PT1vKXJldHVybiExfXJldHVybiBvfHxufSx0ZT1mdW5jdGlvbihlLHQpe3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSxuKXt2YXIgbz1lZShlLm5vZGUsXCJtaXJyb3JcIix0Lm1pcnJvciksaT1lZShlLm5vZGUsXCJvbmNlXCIsdC5vbmNlKSxhPWVlKGUubm9kZSxcImlkXCIpLHI9dC51c2VDbGFzc05hbWVzJiZlLm5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1hb3NcIiksYz1bdC5hbmltYXRlZENsYXNzTmFtZV0uY29uY2F0KHI/ci5zcGxpdChcIiBcIik6W10pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZX0pO3QuaW5pdENsYXNzTmFtZSYmZS5ub2RlLmNsYXNzTGlzdC5hZGQodC5pbml0Q2xhc3NOYW1lKSxlLnBvc2l0aW9uPXtpbjpmdW5jdGlvbihlLHQsbil7dmFyIG89d2luZG93LmlubmVySGVpZ2h0LGk9ZWUoZSxcImFuY2hvclwiKSxhPWVlKGUsXCJhbmNob3ItcGxhY2VtZW50XCIpLHI9TnVtYmVyKGVlKGUsXCJvZmZzZXRcIixhPzA6dCkpLGM9YXx8bixzPWU7aSYmZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChpKSYmKHM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChpKVswXSk7dmFyIHU9WihzKS50b3Atbztzd2l0Y2goYyl7Y2FzZVwidG9wLWJvdHRvbVwiOmJyZWFrO2Nhc2VcImNlbnRlci1ib3R0b21cIjp1Kz1zLm9mZnNldEhlaWdodC8yO2JyZWFrO2Nhc2VcImJvdHRvbS1ib3R0b21cIjp1Kz1zLm9mZnNldEhlaWdodDticmVhaztjYXNlXCJ0b3AtY2VudGVyXCI6dSs9by8yO2JyZWFrO2Nhc2VcImNlbnRlci1jZW50ZXJcIjp1Kz1vLzIrcy5vZmZzZXRIZWlnaHQvMjticmVhaztjYXNlXCJib3R0b20tY2VudGVyXCI6dSs9by8yK3Mub2Zmc2V0SGVpZ2h0O2JyZWFrO2Nhc2VcInRvcC10b3BcIjp1Kz1vO2JyZWFrO2Nhc2VcImJvdHRvbS10b3BcIjp1Kz1vK3Mub2Zmc2V0SGVpZ2h0O2JyZWFrO2Nhc2VcImNlbnRlci10b3BcIjp1Kz1vK3Mub2Zmc2V0SGVpZ2h0LzJ9cmV0dXJuIHUrcn0oZS5ub2RlLHQub2Zmc2V0LHQuYW5jaG9yUGxhY2VtZW50KSxvdXQ6byYmZnVuY3Rpb24oZSx0KXt3aW5kb3cuaW5uZXJIZWlnaHQ7dmFyIG49ZWUoZSxcImFuY2hvclwiKSxvPWVlKGUsXCJvZmZzZXRcIix0KSxpPWU7cmV0dXJuIG4mJmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwobikmJihpPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwobilbMF0pLFooaSkudG9wK2kub2Zmc2V0SGVpZ2h0LW99KGUubm9kZSx0Lm9mZnNldCl9LGUub3B0aW9ucz17b25jZTppLG1pcnJvcjpvLGFuaW1hdGVkQ2xhc3NOYW1lczpjLGlkOmF9fSksZX0sbmU9ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtYW9zXVwiKTtyZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGUsZnVuY3Rpb24oZSl7cmV0dXJue25vZGU6ZX19KX0sb2U9W10saWU9ITEsYWU9e29mZnNldDoxMjAsZGVsYXk6MCxlYXNpbmc6XCJlYXNlXCIsZHVyYXRpb246NDAwLGRpc2FibGU6ITEsb25jZTohMSxtaXJyb3I6ITEsYW5jaG9yUGxhY2VtZW50OlwidG9wLWJvdHRvbVwiLHN0YXJ0RXZlbnQ6XCJET01Db250ZW50TG9hZGVkXCIsYW5pbWF0ZWRDbGFzc05hbWU6XCJhb3MtYW5pbWF0ZVwiLGluaXRDbGFzc05hbWU6XCJhb3MtaW5pdFwiLHVzZUNsYXNzTmFtZXM6ITEsZGlzYWJsZU11dGF0aW9uT2JzZXJ2ZXI6ITEsdGhyb3R0bGVEZWxheTo5OSxkZWJvdW5jZURlbGF5OjUwfSxyZT1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5hbGwmJiF3aW5kb3cuYXRvYn0sY2U9ZnVuY3Rpb24oKXthcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdJiYoaWU9ITApLGllJiYob2U9dGUob2UsYWUpLFgob2UpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIseShmdW5jdGlvbigpe1gob2UsYWUub25jZSl9LGFlLnRocm90dGxlRGVsYXkpKSl9LHNlPWZ1bmN0aW9uKCl7aWYob2U9bmUoKSxkZShhZS5kaXNhYmxlKXx8cmUoKSlyZXR1cm4gdWUoKTtjZSgpfSx1ZT1mdW5jdGlvbigpe29lLmZvckVhY2goZnVuY3Rpb24oZSx0KXtlLm5vZGUucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1hb3NcIiksZS5ub2RlLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtYW9zLWVhc2luZ1wiKSxlLm5vZGUucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1hb3MtZHVyYXRpb25cIiksZS5ub2RlLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtYW9zLWRlbGF5XCIpLGFlLmluaXRDbGFzc05hbWUmJmUubm9kZS5jbGFzc0xpc3QucmVtb3ZlKGFlLmluaXRDbGFzc05hbWUpLGFlLmFuaW1hdGVkQ2xhc3NOYW1lJiZlLm5vZGUuY2xhc3NMaXN0LnJlbW92ZShhZS5hbmltYXRlZENsYXNzTmFtZSl9KX0sZGU9ZnVuY3Rpb24oZSl7cmV0dXJuITA9PT1lfHxcIm1vYmlsZVwiPT09ZSYmVS5tb2JpbGUoKXx8XCJwaG9uZVwiPT09ZSYmVS5waG9uZSgpfHxcInRhYmxldFwiPT09ZSYmVS50YWJsZXQoKXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZSYmITA9PT1lKCl9O3JldHVybntpbml0OmZ1bmN0aW9uKGUpe3JldHVybiBhZT1JKGFlLGUpLG9lPW5lKCksYWUuZGlzYWJsZU11dGF0aW9uT2JzZXJ2ZXJ8fF8uaXNTdXBwb3J0ZWQoKXx8KGNvbnNvbGUuaW5mbygnXFxuICAgICAgYW9zOiBNdXRhdGlvbk9ic2VydmVyIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyLFxcbiAgICAgIGNvZGUgbXV0YXRpb25zIG9ic2VydmluZyBoYXMgYmVlbiBkaXNhYmxlZC5cXG4gICAgICBZb3UgbWF5IGhhdmUgdG8gY2FsbCBcInJlZnJlc2hIYXJkKClcIiBieSB5b3Vyc2VsZi5cXG4gICAgJyksYWUuZGlzYWJsZU11dGF0aW9uT2JzZXJ2ZXI9ITApLGFlLmRpc2FibGVNdXRhdGlvbk9ic2VydmVyfHxfLnJlYWR5KFwiW2RhdGEtYW9zXVwiLHNlKSxkZShhZS5kaXNhYmxlKXx8cmUoKT91ZSgpOihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWFvcy1lYXNpbmdcIixhZS5lYXNpbmcpLGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLnNldEF0dHJpYnV0ZShcImRhdGEtYW9zLWR1cmF0aW9uXCIsYWUuZHVyYXRpb24pLGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLnNldEF0dHJpYnV0ZShcImRhdGEtYW9zLWRlbGF5XCIsYWUuZGVsYXkpLC0xPT09W1wiRE9NQ29udGVudExvYWRlZFwiLFwibG9hZFwiXS5pbmRleE9mKGFlLnN0YXJ0RXZlbnQpP2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoYWUuc3RhcnRFdmVudCxmdW5jdGlvbigpe2NlKCEwKX0pOndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKCl7Y2UoITApfSksXCJET01Db250ZW50TG9hZGVkXCI9PT1hZS5zdGFydEV2ZW50JiZbXCJjb21wbGV0ZVwiLFwiaW50ZXJhY3RpdmVcIl0uaW5kZXhPZihkb2N1bWVudC5yZWFkeVN0YXRlKT4tMSYmY2UoITApLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsJChjZSxhZS5kZWJvdW5jZURlbGF5LCEwKSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCQoY2UsYWUuZGVib3VuY2VEZWxheSwhMCkpLG9lKX0scmVmcmVzaDpjZSxyZWZyZXNoSGFyZDpzZX19KTtcbiJdLCJmaWxlIjoiYW9zLmpzIn0=
;
/*
 2017 Julian Garnier
 Released under the MIT license
*/
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,r,p){if(p.get||p.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[r]=p.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var r=0;return $jscomp.iteratorPrototype(function(){return r<e.length?{done:!1,value:e[r++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(e,r){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var p=0,m={next:function(){if(p<e.length){var u=p++;return{value:r(u,e[u]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill=function(e,r,p,m){if(r){p=$jscomp.global;e=e.split(".");for(m=0;m<e.length-1;m++){var u=e[m];u in p||(p[u]={});p=p[u]}e=e[e.length-1];m=p[e];r=r(m);r!=m&&null!=r&&$jscomp.defineProperty(p,e,{configurable:!0,writable:!0,value:r})}};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");var $jscomp$this=this;
(function(e,r){"function"===typeof define&&define.amd?define([],r):"object"===typeof module&&module.exports?module.exports=r():e.anime=r()})(this,function(){function e(a){if(!h.col(a))try{return document.querySelectorAll(a)}catch(c){}}function r(a,c){for(var d=a.length,b=2<=arguments.length?arguments[1]:void 0,f=[],n=0;n<d;n++)if(n in a){var k=a[n];c.call(b,k,n,a)&&f.push(k)}return f}function p(a){return a.reduce(function(a,d){return a.concat(h.arr(d)?p(d):d)},[])}function m(a){if(h.arr(a))return a;
h.str(a)&&(a=e(a)||a);return a instanceof NodeList||a instanceof HTMLCollection?[].slice.call(a):[a]}function u(a,c){return a.some(function(a){return a===c})}function C(a){var c={},d;for(d in a)c[d]=a[d];return c}function D(a,c){var d=C(a),b;for(b in a)d[b]=c.hasOwnProperty(b)?c[b]:a[b];return d}function z(a,c){var d=C(a),b;for(b in c)d[b]=h.und(a[b])?c[b]:a[b];return d}function T(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,c,d,k){return c+c+d+d+k+k});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
a=parseInt(c[1],16);var d=parseInt(c[2],16),c=parseInt(c[3],16);return"rgba("+a+","+d+","+c+",1)"}function U(a){function c(a,c,b){0>b&&(b+=1);1<b&&--b;return b<1/6?a+6*(c-a)*b:.5>b?c:b<2/3?a+(c-a)*(2/3-b)*6:a}var d=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(a)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(a);a=parseInt(d[1])/360;var b=parseInt(d[2])/100,f=parseInt(d[3])/100,d=d[4]||1;if(0==b)f=b=a=f;else{var n=.5>f?f*(1+b):f+b-f*b,k=2*f-n,f=c(k,n,a+1/3),b=c(k,n,a);a=c(k,n,a-1/3)}return"rgba("+
255*f+","+255*b+","+255*a+","+d+")"}function y(a){if(a=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(a))return a[2]}function V(a){if(-1<a.indexOf("translate")||"perspective"===a)return"px";if(-1<a.indexOf("rotate")||-1<a.indexOf("skew"))return"deg"}function I(a,c){return h.fnc(a)?a(c.target,c.id,c.total):a}function E(a,c){if(c in a.style)return getComputedStyle(a).getPropertyValue(c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function J(a,c){if(h.dom(a)&&
u(W,c))return"transform";if(h.dom(a)&&(a.getAttribute(c)||h.svg(a)&&a[c]))return"attribute";if(h.dom(a)&&"transform"!==c&&E(a,c))return"css";if(null!=a[c])return"object"}function X(a,c){var d=V(c),d=-1<c.indexOf("scale")?1:0+d;a=a.style.transform;if(!a)return d;for(var b=[],f=[],n=[],k=/(\w+)\((.+?)\)/g;b=k.exec(a);)f.push(b[1]),n.push(b[2]);a=r(n,function(a,b){return f[b]===c});return a.length?a[0]:d}function K(a,c){switch(J(a,c)){case "transform":return X(a,c);case "css":return E(a,c);case "attribute":return a.getAttribute(c)}return a[c]||
0}function L(a,c){var d=/^(\*=|\+=|-=)/.exec(a);if(!d)return a;var b=y(a)||0;c=parseFloat(c);a=parseFloat(a.replace(d[0],""));switch(d[0][0]){case "+":return c+a+b;case "-":return c-a+b;case "*":return c*a+b}}function F(a,c){return Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2))}function M(a){a=a.points;for(var c=0,d,b=0;b<a.numberOfItems;b++){var f=a.getItem(b);0<b&&(c+=F(d,f));d=f}return c}function N(a){if(a.getTotalLength)return a.getTotalLength();switch(a.tagName.toLowerCase()){case "circle":return 2*
Math.PI*a.getAttribute("r");case "rect":return 2*a.getAttribute("width")+2*a.getAttribute("height");case "line":return F({x:a.getAttribute("x1"),y:a.getAttribute("y1")},{x:a.getAttribute("x2"),y:a.getAttribute("y2")});case "polyline":return M(a);case "polygon":var c=a.points;return M(a)+F(c.getItem(c.numberOfItems-1),c.getItem(0))}}function Y(a,c){function d(b){b=void 0===b?0:b;return a.el.getPointAtLength(1<=c+b?c+b:0)}var b=d(),f=d(-1),n=d(1);switch(a.property){case "x":return b.x;case "y":return b.y;
case "angle":return 180*Math.atan2(n.y-f.y,n.x-f.x)/Math.PI}}function O(a,c){var d=/-?\d*\.?\d+/g,b;b=h.pth(a)?a.totalLength:a;if(h.col(b))if(h.rgb(b)){var f=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(b);b=f?"rgba("+f[1]+",1)":b}else b=h.hex(b)?T(b):h.hsl(b)?U(b):void 0;else f=(f=y(b))?b.substr(0,b.length-f.length):b,b=c&&!/\s/g.test(b)?f+c:f;b+="";return{original:b,numbers:b.match(d)?b.match(d).map(Number):[0],strings:h.str(a)||c?b.split(d):[]}}function P(a){a=a?p(h.arr(a)?a.map(m):m(a)):[];return r(a,
function(a,d,b){return b.indexOf(a)===d})}function Z(a){var c=P(a);return c.map(function(a,b){return{target:a,id:b,total:c.length}})}function aa(a,c){var d=C(c);if(h.arr(a)){var b=a.length;2!==b||h.obj(a[0])?h.fnc(c.duration)||(d.duration=c.duration/b):a={value:a}}return m(a).map(function(a,b){b=b?0:c.delay;a=h.obj(a)&&!h.pth(a)?a:{value:a};h.und(a.delay)&&(a.delay=b);return a}).map(function(a){return z(a,d)})}function ba(a,c){var d={},b;for(b in a){var f=I(a[b],c);h.arr(f)&&(f=f.map(function(a){return I(a,
c)}),1===f.length&&(f=f[0]));d[b]=f}d.duration=parseFloat(d.duration);d.delay=parseFloat(d.delay);return d}function ca(a){return h.arr(a)?A.apply(this,a):Q[a]}function da(a,c){var d;return a.tweens.map(function(b){b=ba(b,c);var f=b.value,e=K(c.target,a.name),k=d?d.to.original:e,k=h.arr(f)?f[0]:k,w=L(h.arr(f)?f[1]:f,k),e=y(w)||y(k)||y(e);b.from=O(k,e);b.to=O(w,e);b.start=d?d.end:a.offset;b.end=b.start+b.delay+b.duration;b.easing=ca(b.easing);b.elasticity=(1E3-Math.min(Math.max(b.elasticity,1),999))/
1E3;b.isPath=h.pth(f);b.isColor=h.col(b.from.original);b.isColor&&(b.round=1);return d=b})}function ea(a,c){return r(p(a.map(function(a){return c.map(function(b){var c=J(a.target,b.name);if(c){var d=da(b,a);b={type:c,property:b.name,animatable:a,tweens:d,duration:d[d.length-1].end,delay:d[0].delay}}else b=void 0;return b})})),function(a){return!h.und(a)})}function R(a,c,d,b){var f="delay"===a;return c.length?(f?Math.min:Math.max).apply(Math,c.map(function(b){return b[a]})):f?b.delay:d.offset+b.delay+
b.duration}function fa(a){var c=D(ga,a),d=D(S,a),b=Z(a.targets),f=[],e=z(c,d),k;for(k in a)e.hasOwnProperty(k)||"targets"===k||f.push({name:k,offset:e.offset,tweens:aa(a[k],d)});a=ea(b,f);return z(c,{children:[],animatables:b,animations:a,duration:R("duration",a,c,d),delay:R("delay",a,c,d)})}function q(a){function c(){return window.Promise&&new Promise(function(a){return p=a})}function d(a){return g.reversed?g.duration-a:a}function b(a){for(var b=0,c={},d=g.animations,f=d.length;b<f;){var e=d[b],
k=e.animatable,h=e.tweens,n=h.length-1,l=h[n];n&&(l=r(h,function(b){return a<b.end})[0]||l);for(var h=Math.min(Math.max(a-l.start-l.delay,0),l.duration)/l.duration,w=isNaN(h)?1:l.easing(h,l.elasticity),h=l.to.strings,p=l.round,n=[],m=void 0,m=l.to.numbers.length,t=0;t<m;t++){var x=void 0,x=l.to.numbers[t],q=l.from.numbers[t],x=l.isPath?Y(l.value,w*x):q+w*(x-q);p&&(l.isColor&&2<t||(x=Math.round(x*p)/p));n.push(x)}if(l=h.length)for(m=h[0],w=0;w<l;w++)p=h[w+1],t=n[w],isNaN(t)||(m=p?m+(t+p):m+(t+" "));
else m=n[0];ha[e.type](k.target,e.property,m,c,k.id);e.currentValue=m;b++}if(b=Object.keys(c).length)for(d=0;d<b;d++)H||(H=E(document.body,"transform")?"transform":"-webkit-transform"),g.animatables[d].target.style[H]=c[d].join(" ");g.currentTime=a;g.progress=a/g.duration*100}function f(a){if(g[a])g[a](g)}function e(){g.remaining&&!0!==g.remaining&&g.remaining--}function k(a){var k=g.duration,n=g.offset,w=n+g.delay,r=g.currentTime,x=g.reversed,q=d(a);if(g.children.length){var u=g.children,v=u.length;
if(q>=g.currentTime)for(var G=0;G<v;G++)u[G].seek(q);else for(;v--;)u[v].seek(q)}if(q>=w||!k)g.began||(g.began=!0,f("begin")),f("run");if(q>n&&q<k)b(q);else if(q<=n&&0!==r&&(b(0),x&&e()),q>=k&&r!==k||!k)b(k),x||e();f("update");a>=k&&(g.remaining?(t=h,"alternate"===g.direction&&(g.reversed=!g.reversed)):(g.pause(),g.completed||(g.completed=!0,f("complete"),"Promise"in window&&(p(),m=c()))),l=0)}a=void 0===a?{}:a;var h,t,l=0,p=null,m=c(),g=fa(a);g.reset=function(){var a=g.direction,c=g.loop;g.currentTime=
0;g.progress=0;g.paused=!0;g.began=!1;g.completed=!1;g.reversed="reverse"===a;g.remaining="alternate"===a&&1===c?2:c;b(0);for(a=g.children.length;a--;)g.children[a].reset()};g.tick=function(a){h=a;t||(t=h);k((l+h-t)*q.speed)};g.seek=function(a){k(d(a))};g.pause=function(){var a=v.indexOf(g);-1<a&&v.splice(a,1);g.paused=!0};g.play=function(){g.paused&&(g.paused=!1,t=0,l=d(g.currentTime),v.push(g),B||ia())};g.reverse=function(){g.reversed=!g.reversed;t=0;l=d(g.currentTime)};g.restart=function(){g.pause();
g.reset();g.play()};g.finished=m;g.reset();g.autoplay&&g.play();return g}var ga={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},S={duration:1E3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},W="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),H,h={arr:function(a){return Array.isArray(a)},obj:function(a){return-1<Object.prototype.toString.call(a).indexOf("Object")},
pth:function(a){return h.obj(a)&&a.hasOwnProperty("totalLength")},svg:function(a){return a instanceof SVGElement},dom:function(a){return a.nodeType||h.svg(a)},str:function(a){return"string"===typeof a},fnc:function(a){return"function"===typeof a},und:function(a){return"undefined"===typeof a},hex:function(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)},rgb:function(a){return/^rgb/.test(a)},hsl:function(a){return/^hsl/.test(a)},col:function(a){return h.hex(a)||h.rgb(a)||h.hsl(a)}},A=function(){function a(a,
d,b){return(((1-3*b+3*d)*a+(3*b-6*d))*a+3*d)*a}return function(c,d,b,f){if(0<=c&&1>=c&&0<=b&&1>=b){var e=new Float32Array(11);if(c!==d||b!==f)for(var k=0;11>k;++k)e[k]=a(.1*k,c,b);return function(k){if(c===d&&b===f)return k;if(0===k)return 0;if(1===k)return 1;for(var h=0,l=1;10!==l&&e[l]<=k;++l)h+=.1;--l;var l=h+(k-e[l])/(e[l+1]-e[l])*.1,n=3*(1-3*b+3*c)*l*l+2*(3*b-6*c)*l+3*c;if(.001<=n){for(h=0;4>h;++h){n=3*(1-3*b+3*c)*l*l+2*(3*b-6*c)*l+3*c;if(0===n)break;var m=a(l,c,b)-k,l=l-m/n}k=l}else if(0===
n)k=l;else{var l=h,h=h+.1,g=0;do m=l+(h-l)/2,n=a(m,c,b)-k,0<n?h=m:l=m;while(1e-7<Math.abs(n)&&10>++g);k=m}return a(k,d,f)}}}}(),Q=function(){function a(a,b){return 0===a||1===a?a:-Math.pow(2,10*(a-1))*Math.sin(2*(a-1-b/(2*Math.PI)*Math.asin(1))*Math.PI/b)}var c="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),d={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],a],Out:[[.25,
.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(b,c){return 1-a(1-b,c)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(b,c){return.5>b?a(2*b,c)/2:1-a(-2*b+2,c)/2}]},b={linear:A(.25,.25,.75,.75)},f={},e;for(e in d)f.type=e,d[f.type].forEach(function(a){return function(d,f){b["ease"+a.type+c[f]]=h.fnc(d)?
d:A.apply($jscomp$this,d)}}(f)),f={type:f.type};return b}(),ha={css:function(a,c,d){return a.style[c]=d},attribute:function(a,c,d){return a.setAttribute(c,d)},object:function(a,c,d){return a[c]=d},transform:function(a,c,d,b,f){b[f]||(b[f]=[]);b[f].push(c+"("+d+")")}},v=[],B=0,ia=function(){function a(){B=requestAnimationFrame(c)}function c(c){var b=v.length;if(b){for(var d=0;d<b;)v[d]&&v[d].tick(c),d++;a()}else cancelAnimationFrame(B),B=0}return a}();q.version="2.2.0";q.speed=1;q.running=v;q.remove=
function(a){a=P(a);for(var c=v.length;c--;)for(var d=v[c],b=d.animations,f=b.length;f--;)u(a,b[f].animatable.target)&&(b.splice(f,1),b.length||d.pause())};q.getValue=K;q.path=function(a,c){var d=h.str(a)?e(a)[0]:a,b=c||100;return function(a){return{el:d,property:a,totalLength:N(d)*(b/100)}}};q.setDashoffset=function(a){var c=N(a);a.setAttribute("stroke-dasharray",c);return c};q.bezier=A;q.easings=Q;q.timeline=function(a){var c=q(a);c.pause();c.duration=0;c.add=function(d){c.children.forEach(function(a){a.began=
!0;a.completed=!0});m(d).forEach(function(b){var d=z(b,D(S,a||{}));d.targets=d.targets||a.targets;b=c.duration;var e=d.offset;d.autoplay=!1;d.direction=c.direction;d.offset=h.und(e)?b:L(e,b);c.began=!0;c.completed=!0;c.seek(d.offset);d=q(d);d.began=!0;d.completed=!0;d.duration>b&&(c.duration=d.duration);c.children.push(d)});c.seek(0);c.reset();c.autoplay&&c.restart();return c};return c};q.random=function(a,c){return Math.floor(Math.random()*(c-a+1))+a};return q});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJhbmltZS5taW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAyMDE3IEp1bGlhbiBHYXJuaWVyXG4gUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4qL1xudmFyICRqc2NvbXA9e3Njb3BlOnt9fTskanNjb21wLmRlZmluZVByb3BlcnR5PVwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihlLHIscCl7aWYocC5nZXR8fHAuc2V0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJFUzMgZG9lcyBub3Qgc3VwcG9ydCBnZXR0ZXJzIGFuZCBzZXR0ZXJzLlwiKTtlIT1BcnJheS5wcm90b3R5cGUmJmUhPU9iamVjdC5wcm90b3R5cGUmJihlW3JdPXAudmFsdWUpfTskanNjb21wLmdldEdsb2JhbD1mdW5jdGlvbihlKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3c9PT1lP2U6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbCYmbnVsbCE9Z2xvYmFsP2dsb2JhbDplfTskanNjb21wLmdsb2JhbD0kanNjb21wLmdldEdsb2JhbCh0aGlzKTskanNjb21wLlNZTUJPTF9QUkVGSVg9XCJqc2NvbXBfc3ltYm9sX1wiO1xuJGpzY29tcC5pbml0U3ltYm9sPWZ1bmN0aW9uKCl7JGpzY29tcC5pbml0U3ltYm9sPWZ1bmN0aW9uKCl7fTskanNjb21wLmdsb2JhbC5TeW1ib2x8fCgkanNjb21wLmdsb2JhbC5TeW1ib2w9JGpzY29tcC5TeW1ib2wpfTskanNjb21wLnN5bWJvbENvdW50ZXJfPTA7JGpzY29tcC5TeW1ib2w9ZnVuY3Rpb24oZSl7cmV0dXJuICRqc2NvbXAuU1lNQk9MX1BSRUZJWCsoZXx8XCJcIikrJGpzY29tcC5zeW1ib2xDb3VudGVyXysrfTtcbiRqc2NvbXAuaW5pdFN5bWJvbEl0ZXJhdG9yPWZ1bmN0aW9uKCl7JGpzY29tcC5pbml0U3ltYm9sKCk7dmFyIGU9JGpzY29tcC5nbG9iYWwuU3ltYm9sLml0ZXJhdG9yO2V8fChlPSRqc2NvbXAuZ2xvYmFsLlN5bWJvbC5pdGVyYXRvcj0kanNjb21wLmdsb2JhbC5TeW1ib2woXCJpdGVyYXRvclwiKSk7XCJmdW5jdGlvblwiIT10eXBlb2YgQXJyYXkucHJvdG90eXBlW2VdJiYkanNjb21wLmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSxlLHtjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gJGpzY29tcC5hcnJheUl0ZXJhdG9yKHRoaXMpfX0pOyRqc2NvbXAuaW5pdFN5bWJvbEl0ZXJhdG9yPWZ1bmN0aW9uKCl7fX07JGpzY29tcC5hcnJheUl0ZXJhdG9yPWZ1bmN0aW9uKGUpe3ZhciByPTA7cmV0dXJuICRqc2NvbXAuaXRlcmF0b3JQcm90b3R5cGUoZnVuY3Rpb24oKXtyZXR1cm4gcjxlLmxlbmd0aD97ZG9uZTohMSx2YWx1ZTplW3IrK119Ontkb25lOiEwfX0pfTtcbiRqc2NvbXAuaXRlcmF0b3JQcm90b3R5cGU9ZnVuY3Rpb24oZSl7JGpzY29tcC5pbml0U3ltYm9sSXRlcmF0b3IoKTtlPXtuZXh0OmV9O2VbJGpzY29tcC5nbG9iYWwuU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtyZXR1cm4gZX07JGpzY29tcC5hcnJheT0kanNjb21wLmFycmF5fHx7fTskanNjb21wLml0ZXJhdG9yRnJvbUFycmF5PWZ1bmN0aW9uKGUscil7JGpzY29tcC5pbml0U3ltYm9sSXRlcmF0b3IoKTtlIGluc3RhbmNlb2YgU3RyaW5nJiYoZSs9XCJcIik7dmFyIHA9MCxtPXtuZXh0OmZ1bmN0aW9uKCl7aWYocDxlLmxlbmd0aCl7dmFyIHU9cCsrO3JldHVybnt2YWx1ZTpyKHUsZVt1XSksZG9uZTohMX19bS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6ITAsdmFsdWU6dm9pZCAwfX07cmV0dXJuIG0ubmV4dCgpfX07bVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIG19O3JldHVybiBtfTtcbiRqc2NvbXAucG9seWZpbGw9ZnVuY3Rpb24oZSxyLHAsbSl7aWYocil7cD0kanNjb21wLmdsb2JhbDtlPWUuc3BsaXQoXCIuXCIpO2ZvcihtPTA7bTxlLmxlbmd0aC0xO20rKyl7dmFyIHU9ZVttXTt1IGluIHB8fChwW3VdPXt9KTtwPXBbdV19ZT1lW2UubGVuZ3RoLTFdO209cFtlXTtyPXIobSk7ciE9bSYmbnVsbCE9ciYmJGpzY29tcC5kZWZpbmVQcm9wZXJ0eShwLGUse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpyfSl9fTskanNjb21wLnBvbHlmaWxsKFwiQXJyYXkucHJvdG90eXBlLmtleXNcIixmdW5jdGlvbihlKXtyZXR1cm4gZT9lOmZ1bmN0aW9uKCl7cmV0dXJuICRqc2NvbXAuaXRlcmF0b3JGcm9tQXJyYXkodGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gZX0pfX0sXCJlczYtaW1wbFwiLFwiZXMzXCIpO3ZhciAkanNjb21wJHRoaXM9dGhpcztcbihmdW5jdGlvbihlLHIpe1wiZnVuY3Rpb25cIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLHIpOlwib2JqZWN0XCI9PT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1yKCk6ZS5hbmltZT1yKCl9KSh0aGlzLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShhKXtpZighaC5jb2woYSkpdHJ5e3JldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGEpfWNhdGNoKGMpe319ZnVuY3Rpb24gcihhLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxiPTI8PWFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzFdOnZvaWQgMCxmPVtdLG49MDtuPGQ7bisrKWlmKG4gaW4gYSl7dmFyIGs9YVtuXTtjLmNhbGwoYixrLG4sYSkmJmYucHVzaChrKX1yZXR1cm4gZn1mdW5jdGlvbiBwKGEpe3JldHVybiBhLnJlZHVjZShmdW5jdGlvbihhLGQpe3JldHVybiBhLmNvbmNhdChoLmFycihkKT9wKGQpOmQpfSxbXSl9ZnVuY3Rpb24gbShhKXtpZihoLmFycihhKSlyZXR1cm4gYTtcbmguc3RyKGEpJiYoYT1lKGEpfHxhKTtyZXR1cm4gYSBpbnN0YW5jZW9mIE5vZGVMaXN0fHxhIGluc3RhbmNlb2YgSFRNTENvbGxlY3Rpb24/W10uc2xpY2UuY2FsbChhKTpbYV19ZnVuY3Rpb24gdShhLGMpe3JldHVybiBhLnNvbWUoZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1jfSl9ZnVuY3Rpb24gQyhhKXt2YXIgYz17fSxkO2ZvcihkIGluIGEpY1tkXT1hW2RdO3JldHVybiBjfWZ1bmN0aW9uIEQoYSxjKXt2YXIgZD1DKGEpLGI7Zm9yKGIgaW4gYSlkW2JdPWMuaGFzT3duUHJvcGVydHkoYik/Y1tiXTphW2JdO3JldHVybiBkfWZ1bmN0aW9uIHooYSxjKXt2YXIgZD1DKGEpLGI7Zm9yKGIgaW4gYylkW2JdPWgudW5kKGFbYl0pP2NbYl06YVtiXTtyZXR1cm4gZH1mdW5jdGlvbiBUKGEpe2E9YS5yZXBsYWNlKC9eIz8oW2EtZlxcZF0pKFthLWZcXGRdKShbYS1mXFxkXSkkL2ksZnVuY3Rpb24oYSxjLGQsayl7cmV0dXJuIGMrYytkK2QraytrfSk7dmFyIGM9L14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKGEpO1xuYT1wYXJzZUludChjWzFdLDE2KTt2YXIgZD1wYXJzZUludChjWzJdLDE2KSxjPXBhcnNlSW50KGNbM10sMTYpO3JldHVyblwicmdiYShcIithK1wiLFwiK2QrXCIsXCIrYytcIiwxKVwifWZ1bmN0aW9uIFUoYSl7ZnVuY3Rpb24gYyhhLGMsYil7MD5iJiYoYis9MSk7MTxiJiYtLWI7cmV0dXJuIGI8MS82P2ErNiooYy1hKSpiOi41PmI/YzpiPDIvMz9hKyhjLWEpKigyLzMtYikqNjphfXZhciBkPS9oc2xcXCgoXFxkKyksXFxzKihbXFxkLl0rKSUsXFxzKihbXFxkLl0rKSVcXCkvZy5leGVjKGEpfHwvaHNsYVxcKChcXGQrKSxcXHMqKFtcXGQuXSspJSxcXHMqKFtcXGQuXSspJSxcXHMqKFtcXGQuXSspXFwpL2cuZXhlYyhhKTthPXBhcnNlSW50KGRbMV0pLzM2MDt2YXIgYj1wYXJzZUludChkWzJdKS8xMDAsZj1wYXJzZUludChkWzNdKS8xMDAsZD1kWzRdfHwxO2lmKDA9PWIpZj1iPWE9ZjtlbHNle3ZhciBuPS41PmY/ZiooMStiKTpmK2ItZipiLGs9MipmLW4sZj1jKGssbixhKzEvMyksYj1jKGssbixhKTthPWMoayxuLGEtMS8zKX1yZXR1cm5cInJnYmEoXCIrXG4yNTUqZitcIixcIisyNTUqYitcIixcIisyNTUqYStcIixcIitkK1wiKVwifWZ1bmN0aW9uIHkoYSl7aWYoYT0vKFtcXCtcXC1dP1swLTkjXFwuXSspKCV8cHh8cHR8ZW18cmVtfGlufGNtfG1tfGV4fGNofHBjfHZ3fHZofHZtaW58dm1heHxkZWd8cmFkfHR1cm4pPyQvLmV4ZWMoYSkpcmV0dXJuIGFbMl19ZnVuY3Rpb24gVihhKXtpZigtMTxhLmluZGV4T2YoXCJ0cmFuc2xhdGVcIil8fFwicGVyc3BlY3RpdmVcIj09PWEpcmV0dXJuXCJweFwiO2lmKC0xPGEuaW5kZXhPZihcInJvdGF0ZVwiKXx8LTE8YS5pbmRleE9mKFwic2tld1wiKSlyZXR1cm5cImRlZ1wifWZ1bmN0aW9uIEkoYSxjKXtyZXR1cm4gaC5mbmMoYSk/YShjLnRhcmdldCxjLmlkLGMudG90YWwpOmF9ZnVuY3Rpb24gRShhLGMpe2lmKGMgaW4gYS5zdHlsZSlyZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZShhKS5nZXRQcm9wZXJ0eVZhbHVlKGMucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZyxcIiQxLSQyXCIpLnRvTG93ZXJDYXNlKCkpfHxcIjBcIn1mdW5jdGlvbiBKKGEsYyl7aWYoaC5kb20oYSkmJlxudShXLGMpKXJldHVyblwidHJhbnNmb3JtXCI7aWYoaC5kb20oYSkmJihhLmdldEF0dHJpYnV0ZShjKXx8aC5zdmcoYSkmJmFbY10pKXJldHVyblwiYXR0cmlidXRlXCI7aWYoaC5kb20oYSkmJlwidHJhbnNmb3JtXCIhPT1jJiZFKGEsYykpcmV0dXJuXCJjc3NcIjtpZihudWxsIT1hW2NdKXJldHVyblwib2JqZWN0XCJ9ZnVuY3Rpb24gWChhLGMpe3ZhciBkPVYoYyksZD0tMTxjLmluZGV4T2YoXCJzY2FsZVwiKT8xOjArZDthPWEuc3R5bGUudHJhbnNmb3JtO2lmKCFhKXJldHVybiBkO2Zvcih2YXIgYj1bXSxmPVtdLG49W10saz0vKFxcdyspXFwoKC4rPylcXCkvZztiPWsuZXhlYyhhKTspZi5wdXNoKGJbMV0pLG4ucHVzaChiWzJdKTthPXIobixmdW5jdGlvbihhLGIpe3JldHVybiBmW2JdPT09Y30pO3JldHVybiBhLmxlbmd0aD9hWzBdOmR9ZnVuY3Rpb24gSyhhLGMpe3N3aXRjaChKKGEsYykpe2Nhc2UgXCJ0cmFuc2Zvcm1cIjpyZXR1cm4gWChhLGMpO2Nhc2UgXCJjc3NcIjpyZXR1cm4gRShhLGMpO2Nhc2UgXCJhdHRyaWJ1dGVcIjpyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoYyl9cmV0dXJuIGFbY118fFxuMH1mdW5jdGlvbiBMKGEsYyl7dmFyIGQ9L14oXFwqPXxcXCs9fC09KS8uZXhlYyhhKTtpZighZClyZXR1cm4gYTt2YXIgYj15KGEpfHwwO2M9cGFyc2VGbG9hdChjKTthPXBhcnNlRmxvYXQoYS5yZXBsYWNlKGRbMF0sXCJcIikpO3N3aXRjaChkWzBdWzBdKXtjYXNlIFwiK1wiOnJldHVybiBjK2ErYjtjYXNlIFwiLVwiOnJldHVybiBjLWErYjtjYXNlIFwiKlwiOnJldHVybiBjKmErYn19ZnVuY3Rpb24gRihhLGMpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coYy54LWEueCwyKStNYXRoLnBvdyhjLnktYS55LDIpKX1mdW5jdGlvbiBNKGEpe2E9YS5wb2ludHM7Zm9yKHZhciBjPTAsZCxiPTA7YjxhLm51bWJlck9mSXRlbXM7YisrKXt2YXIgZj1hLmdldEl0ZW0oYik7MDxiJiYoYys9RihkLGYpKTtkPWZ9cmV0dXJuIGN9ZnVuY3Rpb24gTihhKXtpZihhLmdldFRvdGFsTGVuZ3RoKXJldHVybiBhLmdldFRvdGFsTGVuZ3RoKCk7c3dpdGNoKGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlIFwiY2lyY2xlXCI6cmV0dXJuIDIqXG5NYXRoLlBJKmEuZ2V0QXR0cmlidXRlKFwiclwiKTtjYXNlIFwicmVjdFwiOnJldHVybiAyKmEuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikrMiphLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKTtjYXNlIFwibGluZVwiOnJldHVybiBGKHt4OmEuZ2V0QXR0cmlidXRlKFwieDFcIikseTphLmdldEF0dHJpYnV0ZShcInkxXCIpfSx7eDphLmdldEF0dHJpYnV0ZShcIngyXCIpLHk6YS5nZXRBdHRyaWJ1dGUoXCJ5MlwiKX0pO2Nhc2UgXCJwb2x5bGluZVwiOnJldHVybiBNKGEpO2Nhc2UgXCJwb2x5Z29uXCI6dmFyIGM9YS5wb2ludHM7cmV0dXJuIE0oYSkrRihjLmdldEl0ZW0oYy5udW1iZXJPZkl0ZW1zLTEpLGMuZ2V0SXRlbSgwKSl9fWZ1bmN0aW9uIFkoYSxjKXtmdW5jdGlvbiBkKGIpe2I9dm9pZCAwPT09Yj8wOmI7cmV0dXJuIGEuZWwuZ2V0UG9pbnRBdExlbmd0aCgxPD1jK2I/YytiOjApfXZhciBiPWQoKSxmPWQoLTEpLG49ZCgxKTtzd2l0Y2goYS5wcm9wZXJ0eSl7Y2FzZSBcInhcIjpyZXR1cm4gYi54O2Nhc2UgXCJ5XCI6cmV0dXJuIGIueTtcbmNhc2UgXCJhbmdsZVwiOnJldHVybiAxODAqTWF0aC5hdGFuMihuLnktZi55LG4ueC1mLngpL01hdGguUEl9fWZ1bmN0aW9uIE8oYSxjKXt2YXIgZD0vLT9cXGQqXFwuP1xcZCsvZyxiO2I9aC5wdGgoYSk/YS50b3RhbExlbmd0aDphO2lmKGguY29sKGIpKWlmKGgucmdiKGIpKXt2YXIgZj0vcmdiXFwoKFxcZCssXFxzKltcXGRdKyxcXHMqW1xcZF0rKVxcKS9nLmV4ZWMoYik7Yj1mP1wicmdiYShcIitmWzFdK1wiLDEpXCI6Yn1lbHNlIGI9aC5oZXgoYik/VChiKTpoLmhzbChiKT9VKGIpOnZvaWQgMDtlbHNlIGY9KGY9eShiKSk/Yi5zdWJzdHIoMCxiLmxlbmd0aC1mLmxlbmd0aCk6YixiPWMmJiEvXFxzL2cudGVzdChiKT9mK2M6ZjtiKz1cIlwiO3JldHVybntvcmlnaW5hbDpiLG51bWJlcnM6Yi5tYXRjaChkKT9iLm1hdGNoKGQpLm1hcChOdW1iZXIpOlswXSxzdHJpbmdzOmguc3RyKGEpfHxjP2Iuc3BsaXQoZCk6W119fWZ1bmN0aW9uIFAoYSl7YT1hP3AoaC5hcnIoYSk/YS5tYXAobSk6bShhKSk6W107cmV0dXJuIHIoYSxcbmZ1bmN0aW9uKGEsZCxiKXtyZXR1cm4gYi5pbmRleE9mKGEpPT09ZH0pfWZ1bmN0aW9uIFooYSl7dmFyIGM9UChhKTtyZXR1cm4gYy5tYXAoZnVuY3Rpb24oYSxiKXtyZXR1cm57dGFyZ2V0OmEsaWQ6Yix0b3RhbDpjLmxlbmd0aH19KX1mdW5jdGlvbiBhYShhLGMpe3ZhciBkPUMoYyk7aWYoaC5hcnIoYSkpe3ZhciBiPWEubGVuZ3RoOzIhPT1ifHxoLm9iaihhWzBdKT9oLmZuYyhjLmR1cmF0aW9uKXx8KGQuZHVyYXRpb249Yy5kdXJhdGlvbi9iKTphPXt2YWx1ZTphfX1yZXR1cm4gbShhKS5tYXAoZnVuY3Rpb24oYSxiKXtiPWI/MDpjLmRlbGF5O2E9aC5vYmooYSkmJiFoLnB0aChhKT9hOnt2YWx1ZTphfTtoLnVuZChhLmRlbGF5KSYmKGEuZGVsYXk9Yik7cmV0dXJuIGF9KS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIHooYSxkKX0pfWZ1bmN0aW9uIGJhKGEsYyl7dmFyIGQ9e30sYjtmb3IoYiBpbiBhKXt2YXIgZj1JKGFbYl0sYyk7aC5hcnIoZikmJihmPWYubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBJKGEsXG5jKX0pLDE9PT1mLmxlbmd0aCYmKGY9ZlswXSkpO2RbYl09Zn1kLmR1cmF0aW9uPXBhcnNlRmxvYXQoZC5kdXJhdGlvbik7ZC5kZWxheT1wYXJzZUZsb2F0KGQuZGVsYXkpO3JldHVybiBkfWZ1bmN0aW9uIGNhKGEpe3JldHVybiBoLmFycihhKT9BLmFwcGx5KHRoaXMsYSk6UVthXX1mdW5jdGlvbiBkYShhLGMpe3ZhciBkO3JldHVybiBhLnR3ZWVucy5tYXAoZnVuY3Rpb24oYil7Yj1iYShiLGMpO3ZhciBmPWIudmFsdWUsZT1LKGMudGFyZ2V0LGEubmFtZSksaz1kP2QudG8ub3JpZ2luYWw6ZSxrPWguYXJyKGYpP2ZbMF06ayx3PUwoaC5hcnIoZik/ZlsxXTpmLGspLGU9eSh3KXx8eShrKXx8eShlKTtiLmZyb209TyhrLGUpO2IudG89Tyh3LGUpO2Iuc3RhcnQ9ZD9kLmVuZDphLm9mZnNldDtiLmVuZD1iLnN0YXJ0K2IuZGVsYXkrYi5kdXJhdGlvbjtiLmVhc2luZz1jYShiLmVhc2luZyk7Yi5lbGFzdGljaXR5PSgxRTMtTWF0aC5taW4oTWF0aC5tYXgoYi5lbGFzdGljaXR5LDEpLDk5OSkpL1xuMUUzO2IuaXNQYXRoPWgucHRoKGYpO2IuaXNDb2xvcj1oLmNvbChiLmZyb20ub3JpZ2luYWwpO2IuaXNDb2xvciYmKGIucm91bmQ9MSk7cmV0dXJuIGQ9Yn0pfWZ1bmN0aW9uIGVhKGEsYyl7cmV0dXJuIHIocChhLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYy5tYXAoZnVuY3Rpb24oYil7dmFyIGM9SihhLnRhcmdldCxiLm5hbWUpO2lmKGMpe3ZhciBkPWRhKGIsYSk7Yj17dHlwZTpjLHByb3BlcnR5OmIubmFtZSxhbmltYXRhYmxlOmEsdHdlZW5zOmQsZHVyYXRpb246ZFtkLmxlbmd0aC0xXS5lbmQsZGVsYXk6ZFswXS5kZWxheX19ZWxzZSBiPXZvaWQgMDtyZXR1cm4gYn0pfSkpLGZ1bmN0aW9uKGEpe3JldHVybiFoLnVuZChhKX0pfWZ1bmN0aW9uIFIoYSxjLGQsYil7dmFyIGY9XCJkZWxheVwiPT09YTtyZXR1cm4gYy5sZW5ndGg/KGY/TWF0aC5taW46TWF0aC5tYXgpLmFwcGx5KE1hdGgsYy5tYXAoZnVuY3Rpb24oYil7cmV0dXJuIGJbYV19KSk6Zj9iLmRlbGF5OmQub2Zmc2V0K2IuZGVsYXkrXG5iLmR1cmF0aW9ufWZ1bmN0aW9uIGZhKGEpe3ZhciBjPUQoZ2EsYSksZD1EKFMsYSksYj1aKGEudGFyZ2V0cyksZj1bXSxlPXooYyxkKSxrO2ZvcihrIGluIGEpZS5oYXNPd25Qcm9wZXJ0eShrKXx8XCJ0YXJnZXRzXCI9PT1rfHxmLnB1c2goe25hbWU6ayxvZmZzZXQ6ZS5vZmZzZXQsdHdlZW5zOmFhKGFba10sZCl9KTthPWVhKGIsZik7cmV0dXJuIHooYyx7Y2hpbGRyZW46W10sYW5pbWF0YWJsZXM6YixhbmltYXRpb25zOmEsZHVyYXRpb246UihcImR1cmF0aW9uXCIsYSxjLGQpLGRlbGF5OlIoXCJkZWxheVwiLGEsYyxkKX0pfWZ1bmN0aW9uIHEoYSl7ZnVuY3Rpb24gYygpe3JldHVybiB3aW5kb3cuUHJvbWlzZSYmbmV3IFByb21pc2UoZnVuY3Rpb24oYSl7cmV0dXJuIHA9YX0pfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGcucmV2ZXJzZWQ/Zy5kdXJhdGlvbi1hOmF9ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9MCxjPXt9LGQ9Zy5hbmltYXRpb25zLGY9ZC5sZW5ndGg7YjxmOyl7dmFyIGU9ZFtiXSxcbms9ZS5hbmltYXRhYmxlLGg9ZS50d2VlbnMsbj1oLmxlbmd0aC0xLGw9aFtuXTtuJiYobD1yKGgsZnVuY3Rpb24oYil7cmV0dXJuIGE8Yi5lbmR9KVswXXx8bCk7Zm9yKHZhciBoPU1hdGgubWluKE1hdGgubWF4KGEtbC5zdGFydC1sLmRlbGF5LDApLGwuZHVyYXRpb24pL2wuZHVyYXRpb24sdz1pc05hTihoKT8xOmwuZWFzaW5nKGgsbC5lbGFzdGljaXR5KSxoPWwudG8uc3RyaW5ncyxwPWwucm91bmQsbj1bXSxtPXZvaWQgMCxtPWwudG8ubnVtYmVycy5sZW5ndGgsdD0wO3Q8bTt0Kyspe3ZhciB4PXZvaWQgMCx4PWwudG8ubnVtYmVyc1t0XSxxPWwuZnJvbS5udW1iZXJzW3RdLHg9bC5pc1BhdGg/WShsLnZhbHVlLHcqeCk6cSt3Kih4LXEpO3AmJihsLmlzQ29sb3ImJjI8dHx8KHg9TWF0aC5yb3VuZCh4KnApL3ApKTtuLnB1c2goeCl9aWYobD1oLmxlbmd0aClmb3IobT1oWzBdLHc9MDt3PGw7dysrKXA9aFt3KzFdLHQ9blt3XSxpc05hTih0KXx8KG09cD9tKyh0K3ApOm0rKHQrXCIgXCIpKTtcbmVsc2UgbT1uWzBdO2hhW2UudHlwZV0oay50YXJnZXQsZS5wcm9wZXJ0eSxtLGMsay5pZCk7ZS5jdXJyZW50VmFsdWU9bTtiKyt9aWYoYj1PYmplY3Qua2V5cyhjKS5sZW5ndGgpZm9yKGQ9MDtkPGI7ZCsrKUh8fChIPUUoZG9jdW1lbnQuYm9keSxcInRyYW5zZm9ybVwiKT9cInRyYW5zZm9ybVwiOlwiLXdlYmtpdC10cmFuc2Zvcm1cIiksZy5hbmltYXRhYmxlc1tkXS50YXJnZXQuc3R5bGVbSF09Y1tkXS5qb2luKFwiIFwiKTtnLmN1cnJlbnRUaW1lPWE7Zy5wcm9ncmVzcz1hL2cuZHVyYXRpb24qMTAwfWZ1bmN0aW9uIGYoYSl7aWYoZ1thXSlnW2FdKGcpfWZ1bmN0aW9uIGUoKXtnLnJlbWFpbmluZyYmITAhPT1nLnJlbWFpbmluZyYmZy5yZW1haW5pbmctLX1mdW5jdGlvbiBrKGEpe3ZhciBrPWcuZHVyYXRpb24sbj1nLm9mZnNldCx3PW4rZy5kZWxheSxyPWcuY3VycmVudFRpbWUseD1nLnJldmVyc2VkLHE9ZChhKTtpZihnLmNoaWxkcmVuLmxlbmd0aCl7dmFyIHU9Zy5jaGlsZHJlbix2PXUubGVuZ3RoO1xuaWYocT49Zy5jdXJyZW50VGltZSlmb3IodmFyIEc9MDtHPHY7RysrKXVbR10uc2VlayhxKTtlbHNlIGZvcig7di0tOyl1W3ZdLnNlZWsocSl9aWYocT49d3x8IWspZy5iZWdhbnx8KGcuYmVnYW49ITAsZihcImJlZ2luXCIpKSxmKFwicnVuXCIpO2lmKHE+biYmcTxrKWIocSk7ZWxzZSBpZihxPD1uJiYwIT09ciYmKGIoMCkseCYmZSgpKSxxPj1rJiZyIT09a3x8IWspYihrKSx4fHxlKCk7ZihcInVwZGF0ZVwiKTthPj1rJiYoZy5yZW1haW5pbmc/KHQ9aCxcImFsdGVybmF0ZVwiPT09Zy5kaXJlY3Rpb24mJihnLnJldmVyc2VkPSFnLnJldmVyc2VkKSk6KGcucGF1c2UoKSxnLmNvbXBsZXRlZHx8KGcuY29tcGxldGVkPSEwLGYoXCJjb21wbGV0ZVwiKSxcIlByb21pc2VcImluIHdpbmRvdyYmKHAoKSxtPWMoKSkpKSxsPTApfWE9dm9pZCAwPT09YT97fTphO3ZhciBoLHQsbD0wLHA9bnVsbCxtPWMoKSxnPWZhKGEpO2cucmVzZXQ9ZnVuY3Rpb24oKXt2YXIgYT1nLmRpcmVjdGlvbixjPWcubG9vcDtnLmN1cnJlbnRUaW1lPVxuMDtnLnByb2dyZXNzPTA7Zy5wYXVzZWQ9ITA7Zy5iZWdhbj0hMTtnLmNvbXBsZXRlZD0hMTtnLnJldmVyc2VkPVwicmV2ZXJzZVwiPT09YTtnLnJlbWFpbmluZz1cImFsdGVybmF0ZVwiPT09YSYmMT09PWM/MjpjO2IoMCk7Zm9yKGE9Zy5jaGlsZHJlbi5sZW5ndGg7YS0tOylnLmNoaWxkcmVuW2FdLnJlc2V0KCl9O2cudGljaz1mdW5jdGlvbihhKXtoPWE7dHx8KHQ9aCk7aygobCtoLXQpKnEuc3BlZWQpfTtnLnNlZWs9ZnVuY3Rpb24oYSl7ayhkKGEpKX07Zy5wYXVzZT1mdW5jdGlvbigpe3ZhciBhPXYuaW5kZXhPZihnKTstMTxhJiZ2LnNwbGljZShhLDEpO2cucGF1c2VkPSEwfTtnLnBsYXk9ZnVuY3Rpb24oKXtnLnBhdXNlZCYmKGcucGF1c2VkPSExLHQ9MCxsPWQoZy5jdXJyZW50VGltZSksdi5wdXNoKGcpLEJ8fGlhKCkpfTtnLnJldmVyc2U9ZnVuY3Rpb24oKXtnLnJldmVyc2VkPSFnLnJldmVyc2VkO3Q9MDtsPWQoZy5jdXJyZW50VGltZSl9O2cucmVzdGFydD1mdW5jdGlvbigpe2cucGF1c2UoKTtcbmcucmVzZXQoKTtnLnBsYXkoKX07Zy5maW5pc2hlZD1tO2cucmVzZXQoKTtnLmF1dG9wbGF5JiZnLnBsYXkoKTtyZXR1cm4gZ312YXIgZ2E9e3VwZGF0ZTp2b2lkIDAsYmVnaW46dm9pZCAwLHJ1bjp2b2lkIDAsY29tcGxldGU6dm9pZCAwLGxvb3A6MSxkaXJlY3Rpb246XCJub3JtYWxcIixhdXRvcGxheTohMCxvZmZzZXQ6MH0sUz17ZHVyYXRpb246MUUzLGRlbGF5OjAsZWFzaW5nOlwiZWFzZU91dEVsYXN0aWNcIixlbGFzdGljaXR5OjUwMCxyb3VuZDowfSxXPVwidHJhbnNsYXRlWCB0cmFuc2xhdGVZIHRyYW5zbGF0ZVogcm90YXRlIHJvdGF0ZVggcm90YXRlWSByb3RhdGVaIHNjYWxlIHNjYWxlWCBzY2FsZVkgc2NhbGVaIHNrZXdYIHNrZXdZIHBlcnNwZWN0aXZlXCIuc3BsaXQoXCIgXCIpLEgsaD17YXJyOmZ1bmN0aW9uKGEpe3JldHVybiBBcnJheS5pc0FycmF5KGEpfSxvYmo6ZnVuY3Rpb24oYSl7cmV0dXJuLTE8T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpLmluZGV4T2YoXCJPYmplY3RcIil9LFxucHRoOmZ1bmN0aW9uKGEpe3JldHVybiBoLm9iaihhKSYmYS5oYXNPd25Qcm9wZXJ0eShcInRvdGFsTGVuZ3RoXCIpfSxzdmc6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBTVkdFbGVtZW50fSxkb206ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZVR5cGV8fGguc3ZnKGEpfSxzdHI6ZnVuY3Rpb24oYSl7cmV0dXJuXCJzdHJpbmdcIj09PXR5cGVvZiBhfSxmbmM6ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT09dHlwZW9mIGF9LHVuZDpmdW5jdGlvbihhKXtyZXR1cm5cInVuZGVmaW5lZFwiPT09dHlwZW9mIGF9LGhleDpmdW5jdGlvbihhKXtyZXR1cm4vKF4jWzAtOUEtRl17Nn0kKXwoXiNbMC05QS1GXXszfSQpL2kudGVzdChhKX0scmdiOmZ1bmN0aW9uKGEpe3JldHVybi9ecmdiLy50ZXN0KGEpfSxoc2w6ZnVuY3Rpb24oYSl7cmV0dXJuL15oc2wvLnRlc3QoYSl9LGNvbDpmdW5jdGlvbihhKXtyZXR1cm4gaC5oZXgoYSl8fGgucmdiKGEpfHxoLmhzbChhKX19LEE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsXG5kLGIpe3JldHVybigoKDEtMypiKzMqZCkqYSsoMypiLTYqZCkpKmErMypkKSphfXJldHVybiBmdW5jdGlvbihjLGQsYixmKXtpZigwPD1jJiYxPj1jJiYwPD1iJiYxPj1iKXt2YXIgZT1uZXcgRmxvYXQzMkFycmF5KDExKTtpZihjIT09ZHx8YiE9PWYpZm9yKHZhciBrPTA7MTE+azsrK2spZVtrXT1hKC4xKmssYyxiKTtyZXR1cm4gZnVuY3Rpb24oayl7aWYoYz09PWQmJmI9PT1mKXJldHVybiBrO2lmKDA9PT1rKXJldHVybiAwO2lmKDE9PT1rKXJldHVybiAxO2Zvcih2YXIgaD0wLGw9MTsxMCE9PWwmJmVbbF08PWs7KytsKWgrPS4xOy0tbDt2YXIgbD1oKyhrLWVbbF0pLyhlW2wrMV0tZVtsXSkqLjEsbj0zKigxLTMqYiszKmMpKmwqbCsyKigzKmItNipjKSpsKzMqYztpZiguMDAxPD1uKXtmb3IoaD0wOzQ+aDsrK2gpe249MyooMS0zKmIrMypjKSpsKmwrMiooMypiLTYqYykqbCszKmM7aWYoMD09PW4pYnJlYWs7dmFyIG09YShsLGMsYiktayxsPWwtbS9ufWs9bH1lbHNlIGlmKDA9PT1cbm4paz1sO2Vsc2V7dmFyIGw9aCxoPWgrLjEsZz0wO2RvIG09bCsoaC1sKS8yLG49YShtLGMsYiktaywwPG4/aD1tOmw9bTt3aGlsZSgxZS03PE1hdGguYWJzKG4pJiYxMD4rK2cpO2s9bX1yZXR1cm4gYShrLGQsZil9fX19KCksUT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiKXtyZXR1cm4gMD09PWF8fDE9PT1hP2E6LU1hdGgucG93KDIsMTAqKGEtMSkpKk1hdGguc2luKDIqKGEtMS1iLygyKk1hdGguUEkpKk1hdGguYXNpbigxKSkqTWF0aC5QSS9iKX12YXIgYz1cIlF1YWQgQ3ViaWMgUXVhcnQgUXVpbnQgU2luZSBFeHBvIENpcmMgQmFjayBFbGFzdGljXCIuc3BsaXQoXCIgXCIpLGQ9e0luOltbLjU1LC4wODUsLjY4LC41M10sWy41NSwuMDU1LC42NzUsLjE5XSxbLjg5NSwuMDMsLjY4NSwuMjJdLFsuNzU1LC4wNSwuODU1LC4wNl0sWy40NywwLC43NDUsLjcxNV0sWy45NSwuMDUsLjc5NSwuMDM1XSxbLjYsLjA0LC45OCwuMzM1XSxbLjYsLS4yOCwuNzM1LC4wNDVdLGFdLE91dDpbWy4yNSxcbi40NiwuNDUsLjk0XSxbLjIxNSwuNjEsLjM1NSwxXSxbLjE2NSwuODQsLjQ0LDFdLFsuMjMsMSwuMzIsMV0sWy4zOSwuNTc1LC41NjUsMV0sWy4xOSwxLC4yMiwxXSxbLjA3NSwuODIsLjE2NSwxXSxbLjE3NSwuODg1LC4zMiwxLjI3NV0sZnVuY3Rpb24oYixjKXtyZXR1cm4gMS1hKDEtYixjKX1dLEluT3V0OltbLjQ1NSwuMDMsLjUxNSwuOTU1XSxbLjY0NSwuMDQ1LC4zNTUsMV0sWy43NywwLC4xNzUsMV0sWy44NiwwLC4wNywxXSxbLjQ0NSwuMDUsLjU1LC45NV0sWzEsMCwwLDFdLFsuNzg1LC4xMzUsLjE1LC44Nl0sWy42OCwtLjU1LC4yNjUsMS41NV0sZnVuY3Rpb24oYixjKXtyZXR1cm4uNT5iP2EoMipiLGMpLzI6MS1hKC0yKmIrMixjKS8yfV19LGI9e2xpbmVhcjpBKC4yNSwuMjUsLjc1LC43NSl9LGY9e30sZTtmb3IoZSBpbiBkKWYudHlwZT1lLGRbZi50eXBlXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihkLGYpe2JbXCJlYXNlXCIrYS50eXBlK2NbZl1dPWguZm5jKGQpP1xuZDpBLmFwcGx5KCRqc2NvbXAkdGhpcyxkKX19KGYpKSxmPXt0eXBlOmYudHlwZX07cmV0dXJuIGJ9KCksaGE9e2NzczpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGEuc3R5bGVbY109ZH0sYXR0cmlidXRlOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoYyxkKX0sb2JqZWN0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYVtjXT1kfSx0cmFuc2Zvcm06ZnVuY3Rpb24oYSxjLGQsYixmKXtiW2ZdfHwoYltmXT1bXSk7YltmXS5wdXNoKGMrXCIoXCIrZCtcIilcIil9fSx2PVtdLEI9MCxpYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtCPXJlcXVlc3RBbmltYXRpb25GcmFtZShjKX1mdW5jdGlvbiBjKGMpe3ZhciBiPXYubGVuZ3RoO2lmKGIpe2Zvcih2YXIgZD0wO2Q8YjspdltkXSYmdltkXS50aWNrKGMpLGQrKzthKCl9ZWxzZSBjYW5jZWxBbmltYXRpb25GcmFtZShCKSxCPTB9cmV0dXJuIGF9KCk7cS52ZXJzaW9uPVwiMi4yLjBcIjtxLnNwZWVkPTE7cS5ydW5uaW5nPXY7cS5yZW1vdmU9XG5mdW5jdGlvbihhKXthPVAoYSk7Zm9yKHZhciBjPXYubGVuZ3RoO2MtLTspZm9yKHZhciBkPXZbY10sYj1kLmFuaW1hdGlvbnMsZj1iLmxlbmd0aDtmLS07KXUoYSxiW2ZdLmFuaW1hdGFibGUudGFyZ2V0KSYmKGIuc3BsaWNlKGYsMSksYi5sZW5ndGh8fGQucGF1c2UoKSl9O3EuZ2V0VmFsdWU9SztxLnBhdGg9ZnVuY3Rpb24oYSxjKXt2YXIgZD1oLnN0cihhKT9lKGEpWzBdOmEsYj1jfHwxMDA7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybntlbDpkLHByb3BlcnR5OmEsdG90YWxMZW5ndGg6TihkKSooYi8xMDApfX19O3Euc2V0RGFzaG9mZnNldD1mdW5jdGlvbihhKXt2YXIgYz1OKGEpO2Euc2V0QXR0cmlidXRlKFwic3Ryb2tlLWRhc2hhcnJheVwiLGMpO3JldHVybiBjfTtxLmJlemllcj1BO3EuZWFzaW5ncz1RO3EudGltZWxpbmU9ZnVuY3Rpb24oYSl7dmFyIGM9cShhKTtjLnBhdXNlKCk7Yy5kdXJhdGlvbj0wO2MuYWRkPWZ1bmN0aW9uKGQpe2MuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihhKXthLmJlZ2FuPVxuITA7YS5jb21wbGV0ZWQ9ITB9KTttKGQpLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGQ9eihiLEQoUyxhfHx7fSkpO2QudGFyZ2V0cz1kLnRhcmdldHN8fGEudGFyZ2V0cztiPWMuZHVyYXRpb247dmFyIGU9ZC5vZmZzZXQ7ZC5hdXRvcGxheT0hMTtkLmRpcmVjdGlvbj1jLmRpcmVjdGlvbjtkLm9mZnNldD1oLnVuZChlKT9iOkwoZSxiKTtjLmJlZ2FuPSEwO2MuY29tcGxldGVkPSEwO2Muc2VlayhkLm9mZnNldCk7ZD1xKGQpO2QuYmVnYW49ITA7ZC5jb21wbGV0ZWQ9ITA7ZC5kdXJhdGlvbj5iJiYoYy5kdXJhdGlvbj1kLmR1cmF0aW9uKTtjLmNoaWxkcmVuLnB1c2goZCl9KTtjLnNlZWsoMCk7Yy5yZXNldCgpO2MuYXV0b3BsYXkmJmMucmVzdGFydCgpO3JldHVybiBjfTtyZXR1cm4gY307cS5yYW5kb209ZnVuY3Rpb24oYSxjKXtyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihjLWErMSkpK2F9O3JldHVybiBxfSk7Il0sImZpbGUiOiJhbmltZS5taW4uanMifQ==
;
/**
 * sticky-sidebar - A JavaScript plugin for making smart and high performance.
 * @version v3.3.1
 * @link https://github.com/abouolia/sticky-sidebar
 * @author Ahmed Bouhuolia
 * @license The MIT License (MIT)
**/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.StickySidebar=e()}(this,function(){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var i=e(function(t,e){(function(t){Object.defineProperty(t,"__esModule",{value:!0});var l,n,e=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),i=(l=".stickySidebar",n={topSpacing:0,bottomSpacing:0,containerSelector:!1,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",resizeSensor:!0,minWidth:!1},function(){function c(t){var e=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.options=c.extend(n,i),this.sidebar="string"==typeof t?document.querySelector(t):t,void 0===this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=!1,this.container=this.sidebar.parentElement,this.affixedType="STATIC",this.direction="down",this.support={transform:!1,transform3d:!1},this._initialized=!1,this._reStyle=!1,this._breakpoint=!1,this.dimensions={translateY:0,maxTranslateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0},["handleEvent"].forEach(function(t){e[t]=e[t].bind(e)}),this.initialize()}return e(c,[{key:"initialize",value:function(){var i=this;if(this._setSupportFeatures(),this.options.innerWrapperSelector&&(this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector),null===this.sidebarInner&&(this.sidebarInner=!1)),!this.sidebarInner){var t=document.createElement("div");for(t.setAttribute("class","inner-wrapper-sticky"),this.sidebar.appendChild(t);this.sidebar.firstChild!=t;)t.appendChild(this.sidebar.firstChild);this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){var e=document.querySelectorAll(this.options.containerSelector);if((e=Array.prototype.slice.call(e)).forEach(function(t,e){t.contains(i.sidebar)&&(i.container=t)}),!e.length)throw new Error("The container does not contains on the sidebar.")}"function"!=typeof this.options.topSpacing&&(this.options.topSpacing=parseInt(this.options.topSpacing)||0),"function"!=typeof this.options.bottomSpacing&&(this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0),this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(),this.bindEvents(),this._initialized=!0}},{key:"bindEvents",value:function(){window.addEventListener("resize",this,{passive:!0,capture:!1}),window.addEventListener("scroll",this,{passive:!0,capture:!1}),this.sidebar.addEventListener("update"+l,this),this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(new ResizeSensor(this.sidebarInner,this.handleEvent),new ResizeSensor(this.container,this.handleEvent))}},{key:"handleEvent",value:function(t){this.updateSticky(t)}},{key:"calcDimensions",value:function(){if(!this._breakpoint){var t=this.dimensions;t.containerTop=c.offsetRelative(this.container).top,t.containerHeight=this.container.clientHeight,t.containerBottom=t.containerTop+t.containerHeight,t.sidebarHeight=this.sidebarInner.offsetHeight,t.sidebarWidth=this.sidebarInner.offsetWidth,t.viewportHeight=window.innerHeight,t.maxTranslateY=t.containerHeight-t.sidebarHeight,this._calcDimensionsWithScroll()}}},{key:"_calcDimensionsWithScroll",value:function(){var t=this.dimensions;t.sidebarLeft=c.offsetRelative(this.sidebar).left,t.viewportTop=document.documentElement.scrollTop||document.body.scrollTop,t.viewportBottom=t.viewportTop+t.viewportHeight,t.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft,t.topSpacing=this.options.topSpacing,t.bottomSpacing=this.options.bottomSpacing,"function"==typeof t.topSpacing&&(t.topSpacing=parseInt(t.topSpacing(this.sidebar))||0),"function"==typeof t.bottomSpacing&&(t.bottomSpacing=parseInt(t.bottomSpacing(this.sidebar))||0),"VIEWPORT-TOP"===this.affixedType?t.topSpacing<t.lastTopSpacing&&(t.translateY+=t.lastTopSpacing-t.topSpacing,this._reStyle=!0):"VIEWPORT-BOTTOM"===this.affixedType&&t.bottomSpacing<t.lastBottomSpacing&&(t.translateY+=t.lastBottomSpacing-t.bottomSpacing,this._reStyle=!0),t.lastTopSpacing=t.topSpacing,t.lastBottomSpacing=t.bottomSpacing}},{key:"isSidebarFitsViewport",value:function(){var t=this.dimensions,e="down"===this.scrollDirection?t.lastBottomSpacing:t.lastTopSpacing;return this.dimensions.sidebarHeight+e<this.dimensions.viewportHeight}},{key:"observeScrollDir",value:function(){var t=this.dimensions;if(t.lastViewportTop!==t.viewportTop){var e="down"===this.direction?Math.min:Math.max;t.viewportTop===e(t.viewportTop,t.lastViewportTop)&&(this.direction="down"===this.direction?"up":"down")}}},{key:"getAffixType",value:function(){this._calcDimensionsWithScroll();var t=this.dimensions,e=t.viewportTop+t.topSpacing,i=this.affixedType;return e<=t.containerTop||t.containerHeight<=t.sidebarHeight?(t.translateY=0,i="STATIC"):i="up"===this.direction?this._getAffixTypeScrollingUp():this._getAffixTypeScrollingDown(),t.translateY=Math.max(0,t.translateY),t.translateY=Math.min(t.containerHeight,t.translateY),t.translateY=Math.round(t.translateY),t.lastViewportTop=t.viewportTop,i}},{key:"_getAffixTypeScrollingDown",value:function(){var t=this.dimensions,e=t.sidebarHeight+t.containerTop,i=t.viewportTop+t.topSpacing,n=t.viewportBottom-t.bottomSpacing,o=this.affixedType;return this.isSidebarFitsViewport()?t.sidebarHeight+i>=t.containerBottom?(t.translateY=t.containerBottom-e,o="CONTAINER-BOTTOM"):i>=t.containerTop&&(t.translateY=i-t.containerTop,o="VIEWPORT-TOP"):t.containerBottom<=n?(t.translateY=t.containerBottom-e,o="CONTAINER-BOTTOM"):e+t.translateY<=n?(t.translateY=n-e,o="VIEWPORT-BOTTOM"):t.containerTop+t.translateY<=i&&0!==t.translateY&&t.maxTranslateY!==t.translateY&&(o="VIEWPORT-UNBOTTOM"),o}},{key:"_getAffixTypeScrollingUp",value:function(){var t=this.dimensions,e=t.sidebarHeight+t.containerTop,i=t.viewportTop+t.topSpacing,n=t.viewportBottom-t.bottomSpacing,o=this.affixedType;return i<=t.translateY+t.containerTop?(t.translateY=i-t.containerTop,o="VIEWPORT-TOP"):t.containerBottom<=n?(t.translateY=t.containerBottom-e,o="CONTAINER-BOTTOM"):this.isSidebarFitsViewport()||t.containerTop<=i&&0!==t.translateY&&t.maxTranslateY!==t.translateY&&(o="VIEWPORT-UNBOTTOM"),o}},{key:"_getStyle",value:function(t){if(void 0!==t){var e={inner:{},outer:{}},i=this.dimensions;switch(t){case"VIEWPORT-TOP":e.inner={position:"fixed",top:i.topSpacing,left:i.sidebarLeft-i.viewportLeft,width:i.sidebarWidth};break;case"VIEWPORT-BOTTOM":e.inner={position:"fixed",top:"auto",left:i.sidebarLeft,bottom:i.bottomSpacing,width:i.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var n=this._getTranslate(0,i.translateY+"px");e.inner=n?{transform:n}:{position:"absolute",top:i.translateY,width:i.sidebarWidth}}switch(t){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":e.outer={height:i.sidebarHeight,position:"relative"}}return e.outer=c.extend({height:"",position:""},e.outer),e.inner=c.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:""},e.inner),e}}},{key:"stickyPosition",value:function(t){if(!this._breakpoint){t=this._reStyle||t||!1,this.options.topSpacing,this.options.bottomSpacing;var e=this.getAffixType(),i=this._getStyle(e);if((this.affixedType!=e||t)&&e){var n="affix."+e.toLowerCase().replace("viewport-","")+l;for(var o in c.eventTrigger(this.sidebar,n),"STATIC"===e?c.removeClass(this.sidebar,this.options.stickyClass):c.addClass(this.sidebar,this.options.stickyClass),i.outer){var s="number"==typeof i.outer[o]?"px":"";this.sidebar.style[o]=i.outer[o]+s}for(var r in i.inner){var a="number"==typeof i.inner[r]?"px":"";this.sidebarInner.style[r]=i.inner[r]+a}var p="affixed."+e.toLowerCase().replace("viewport-","")+l;c.eventTrigger(this.sidebar,p)}else this._initialized&&(this.sidebarInner.style.left=i.inner.left);this.affixedType=e}}},{key:"_widthBreakpoint",value:function(){window.innerWidth<=this.options.minWidth?(this._breakpoint=!0,this.affixedType="STATIC",this.sidebar.removeAttribute("style"),c.removeClass(this.sidebar,this.options.stickyClass),this.sidebarInner.removeAttribute("style")):this._breakpoint=!1}},{key:"updateSticky",value:function(){var t,e=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._running||(this._running=!0,t=i.type,requestAnimationFrame(function(){switch(t){case"scroll":e._calcDimensionsWithScroll(),e.observeScrollDir(),e.stickyPosition();break;case"resize":default:e._widthBreakpoint(),e.calcDimensions(),e.stickyPosition(!0)}e._running=!1}))}},{key:"_setSupportFeatures",value:function(){var t=this.support;t.transform=c.supportTransform(),t.transform3d=c.supportTransform(!0)}},{key:"_getTranslate",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return this.support.transform3d?"translate3d("+t+", "+e+", "+i+")":!!this.support.translate&&"translate("+t+", "+e+")"}},{key:"destroy",value:function(){window.removeEventListener("resize",this,{capture:!1}),window.removeEventListener("scroll",this,{capture:!1}),this.sidebar.classList.remove(this.options.stickyClass),this.sidebar.style.minHeight="",this.sidebar.removeEventListener("update"+l,this);var t={inner:{},outer:{}};for(var e in t.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""},t.outer={height:"",position:""},t.outer)this.sidebar.style[e]=t.outer[e];for(var i in t.inner)this.sidebarInner.style[i]=t.inner[i];this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(ResizeSensor.detach(this.sidebarInner,this.handleEvent),ResizeSensor.detach(this.container,this.handleEvent))}}],[{key:"supportTransform",value:function(t){var i=!1,e=t?"perspective":"transform",n=e.charAt(0).toUpperCase()+e.slice(1),o=document.createElement("support").style;return(e+" "+["Webkit","Moz","O","ms"].join(n+" ")+n).split(" ").forEach(function(t,e){if(void 0!==o[t])return i=t,!1}),i}},{key:"eventTrigger",value:function(t,e,i){try{var n=new CustomEvent(e,{detail:i})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i)}t.dispatchEvent(n)}},{key:"extend",value:function(t,e){var i={};for(var n in t)void 0!==e[n]?i[n]=e[n]:i[n]=t[n];return i}},{key:"offsetRelative",value:function(t){var e={left:0,top:0};do{var i=t.offsetTop,n=t.offsetLeft;isNaN(i)||(e.top+=i),isNaN(n)||(e.left+=n),t="BODY"===t.tagName?t.parentElement:t.offsetParent}while(t);return e}},{key:"addClass",value:function(t,e){c.hasClass(t,e)||(t.classList?t.classList.add(e):t.className+=" "+e)}},{key:"removeClass",value:function(t,e){c.hasClass(t,e)&&(t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}},{key:"defaults",get:function(){return n}}]),c}());t.default=i,window.StickySidebar=i})(e)});return t(i),t(e(function(t,e){(function(t){var e,s=(e=t)&&e.__esModule?e:{default:e};!function(){if("undefined"!=typeof window){var n=window.$||window.jQuery||window.Zepto,o="stickySidebar";if(n){n.fn.stickySidebar=function(i){return this.each(function(){var t=n(this),e=n(this).data(o);if(e||(e=new s.default(this,"object"==typeof i&&i),t.data(o,e)),"string"==typeof i){if(void 0===e[i]&&-1===["destroy","updateSticky"].indexOf(i))throw new Error('No method named "'+i+'"');e[i]()}})},n.fn.stickySidebar.Constructor=s.default;var t=n.fn.stickySidebar;n.fn.stickySidebar.noConflict=function(){return n.fn.stickySidebar=t,this}}}}()})(i)}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJqcXVlcnkuc3RpY2t5LXNpZGViYXIubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogc3RpY2t5LXNpZGViYXIgLSBBIEphdmFTY3JpcHQgcGx1Z2luIGZvciBtYWtpbmcgc21hcnQgYW5kIGhpZ2ggcGVyZm9ybWFuY2UuXG4gKiBAdmVyc2lvbiB2My4zLjFcbiAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9hYm91b2xpYS9zdGlja3ktc2lkZWJhclxuICogQGF1dGhvciBBaG1lZCBCb3VodW9saWFcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuKiovXG4hZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShlKTp0LlN0aWNreVNpZGViYXI9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGY7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxcImRlZmF1bHRcIik/dC5kZWZhdWx0OnR9ZnVuY3Rpb24gZSh0LGUpe3JldHVybiB0KGU9e2V4cG9ydHM6e319LGUuZXhwb3J0cyksZS5leHBvcnRzfXZhciBpPWUoZnVuY3Rpb24odCxlKXsoZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGwsbixlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0LGUpe2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgbj1lW2ldO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gZSYmbih0LnByb3RvdHlwZSxlKSxpJiZuKHQsaSksdH19KCksaT0obD1cIi5zdGlja3lTaWRlYmFyXCIsbj17dG9wU3BhY2luZzowLGJvdHRvbVNwYWNpbmc6MCxjb250YWluZXJTZWxlY3RvcjohMSxpbm5lcldyYXBwZXJTZWxlY3RvcjpcIi5pbm5lci13cmFwcGVyLXN0aWNreVwiLHN0aWNreUNsYXNzOlwiaXMtYWZmaXhlZFwiLHJlc2l6ZVNlbnNvcjohMCxtaW5XaWR0aDohMX0sZnVuY3Rpb24oKXtmdW5jdGlvbiBjKHQpe3ZhciBlPXRoaXMsaT0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307aWYoZnVuY3Rpb24odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSh0aGlzLGMpLHRoaXMub3B0aW9ucz1jLmV4dGVuZChuLGkpLHRoaXMuc2lkZWJhcj1cInN0cmluZ1wiPT10eXBlb2YgdD9kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHQpOnQsdm9pZCAwPT09dGhpcy5zaWRlYmFyKXRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIHNwZWNpZmljIHNpZGViYXIgZWxlbWVudC5cIik7dGhpcy5zaWRlYmFySW5uZXI9ITEsdGhpcy5jb250YWluZXI9dGhpcy5zaWRlYmFyLnBhcmVudEVsZW1lbnQsdGhpcy5hZmZpeGVkVHlwZT1cIlNUQVRJQ1wiLHRoaXMuZGlyZWN0aW9uPVwiZG93blwiLHRoaXMuc3VwcG9ydD17dHJhbnNmb3JtOiExLHRyYW5zZm9ybTNkOiExfSx0aGlzLl9pbml0aWFsaXplZD0hMSx0aGlzLl9yZVN0eWxlPSExLHRoaXMuX2JyZWFrcG9pbnQ9ITEsdGhpcy5kaW1lbnNpb25zPXt0cmFuc2xhdGVZOjAsbWF4VHJhbnNsYXRlWTowLHRvcFNwYWNpbmc6MCxsYXN0VG9wU3BhY2luZzowLGJvdHRvbVNwYWNpbmc6MCxsYXN0Qm90dG9tU3BhY2luZzowLHNpZGViYXJIZWlnaHQ6MCxzaWRlYmFyV2lkdGg6MCxjb250YWluZXJUb3A6MCxjb250YWluZXJIZWlnaHQ6MCx2aWV3cG9ydEhlaWdodDowLHZpZXdwb3J0VG9wOjAsbGFzdFZpZXdwb3J0VG9wOjB9LFtcImhhbmRsZUV2ZW50XCJdLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1lW3RdLmJpbmQoZSl9KSx0aGlzLmluaXRpYWxpemUoKX1yZXR1cm4gZShjLFt7a2V5OlwiaW5pdGlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGk9dGhpcztpZih0aGlzLl9zZXRTdXBwb3J0RmVhdHVyZXMoKSx0aGlzLm9wdGlvbnMuaW5uZXJXcmFwcGVyU2VsZWN0b3ImJih0aGlzLnNpZGViYXJJbm5lcj10aGlzLnNpZGViYXIucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuaW5uZXJXcmFwcGVyU2VsZWN0b3IpLG51bGw9PT10aGlzLnNpZGViYXJJbm5lciYmKHRoaXMuc2lkZWJhcklubmVyPSExKSksIXRoaXMuc2lkZWJhcklubmVyKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Zvcih0LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsXCJpbm5lci13cmFwcGVyLXN0aWNreVwiKSx0aGlzLnNpZGViYXIuYXBwZW5kQ2hpbGQodCk7dGhpcy5zaWRlYmFyLmZpcnN0Q2hpbGQhPXQ7KXQuYXBwZW5kQ2hpbGQodGhpcy5zaWRlYmFyLmZpcnN0Q2hpbGQpO3RoaXMuc2lkZWJhcklubmVyPXRoaXMuc2lkZWJhci5xdWVyeVNlbGVjdG9yKFwiLmlubmVyLXdyYXBwZXItc3RpY2t5XCIpfWlmKHRoaXMub3B0aW9ucy5jb250YWluZXJTZWxlY3Rvcil7dmFyIGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLm9wdGlvbnMuY29udGFpbmVyU2VsZWN0b3IpO2lmKChlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpKS5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dC5jb250YWlucyhpLnNpZGViYXIpJiYoaS5jb250YWluZXI9dCl9KSwhZS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGNvbnRhaW5lciBkb2VzIG5vdCBjb250YWlucyBvbiB0aGUgc2lkZWJhci5cIil9XCJmdW5jdGlvblwiIT10eXBlb2YgdGhpcy5vcHRpb25zLnRvcFNwYWNpbmcmJih0aGlzLm9wdGlvbnMudG9wU3BhY2luZz1wYXJzZUludCh0aGlzLm9wdGlvbnMudG9wU3BhY2luZyl8fDApLFwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXMub3B0aW9ucy5ib3R0b21TcGFjaW5nJiYodGhpcy5vcHRpb25zLmJvdHRvbVNwYWNpbmc9cGFyc2VJbnQodGhpcy5vcHRpb25zLmJvdHRvbVNwYWNpbmcpfHwwKSx0aGlzLl93aWR0aEJyZWFrcG9pbnQoKSx0aGlzLmNhbGNEaW1lbnNpb25zKCksdGhpcy5zdGlja3lQb3NpdGlvbigpLHRoaXMuYmluZEV2ZW50cygpLHRoaXMuX2luaXRpYWxpemVkPSEwfX0se2tleTpcImJpbmRFdmVudHNcIix2YWx1ZTpmdW5jdGlvbigpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcyx7cGFzc2l2ZTohMCxjYXB0dXJlOiExfSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLHtwYXNzaXZlOiEwLGNhcHR1cmU6ITF9KSx0aGlzLnNpZGViYXIuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZVwiK2wsdGhpcyksdGhpcy5vcHRpb25zLnJlc2l6ZVNlbnNvciYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFJlc2l6ZVNlbnNvciYmKG5ldyBSZXNpemVTZW5zb3IodGhpcy5zaWRlYmFySW5uZXIsdGhpcy5oYW5kbGVFdmVudCksbmV3IFJlc2l6ZVNlbnNvcih0aGlzLmNvbnRhaW5lcix0aGlzLmhhbmRsZUV2ZW50KSl9fSx7a2V5OlwiaGFuZGxlRXZlbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnVwZGF0ZVN0aWNreSh0KX19LHtrZXk6XCJjYWxjRGltZW5zaW9uc1wiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2JyZWFrcG9pbnQpe3ZhciB0PXRoaXMuZGltZW5zaW9uczt0LmNvbnRhaW5lclRvcD1jLm9mZnNldFJlbGF0aXZlKHRoaXMuY29udGFpbmVyKS50b3AsdC5jb250YWluZXJIZWlnaHQ9dGhpcy5jb250YWluZXIuY2xpZW50SGVpZ2h0LHQuY29udGFpbmVyQm90dG9tPXQuY29udGFpbmVyVG9wK3QuY29udGFpbmVySGVpZ2h0LHQuc2lkZWJhckhlaWdodD10aGlzLnNpZGViYXJJbm5lci5vZmZzZXRIZWlnaHQsdC5zaWRlYmFyV2lkdGg9dGhpcy5zaWRlYmFySW5uZXIub2Zmc2V0V2lkdGgsdC52aWV3cG9ydEhlaWdodD13aW5kb3cuaW5uZXJIZWlnaHQsdC5tYXhUcmFuc2xhdGVZPXQuY29udGFpbmVySGVpZ2h0LXQuc2lkZWJhckhlaWdodCx0aGlzLl9jYWxjRGltZW5zaW9uc1dpdGhTY3JvbGwoKX19fSx7a2V5OlwiX2NhbGNEaW1lbnNpb25zV2l0aFNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kaW1lbnNpb25zO3Quc2lkZWJhckxlZnQ9Yy5vZmZzZXRSZWxhdGl2ZSh0aGlzLnNpZGViYXIpLmxlZnQsdC52aWV3cG9ydFRvcD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCx0LnZpZXdwb3J0Qm90dG9tPXQudmlld3BvcnRUb3ArdC52aWV3cG9ydEhlaWdodCx0LnZpZXdwb3J0TGVmdD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0LHQudG9wU3BhY2luZz10aGlzLm9wdGlvbnMudG9wU3BhY2luZyx0LmJvdHRvbVNwYWNpbmc9dGhpcy5vcHRpb25zLmJvdHRvbVNwYWNpbmcsXCJmdW5jdGlvblwiPT10eXBlb2YgdC50b3BTcGFjaW5nJiYodC50b3BTcGFjaW5nPXBhcnNlSW50KHQudG9wU3BhY2luZyh0aGlzLnNpZGViYXIpKXx8MCksXCJmdW5jdGlvblwiPT10eXBlb2YgdC5ib3R0b21TcGFjaW5nJiYodC5ib3R0b21TcGFjaW5nPXBhcnNlSW50KHQuYm90dG9tU3BhY2luZyh0aGlzLnNpZGViYXIpKXx8MCksXCJWSUVXUE9SVC1UT1BcIj09PXRoaXMuYWZmaXhlZFR5cGU/dC50b3BTcGFjaW5nPHQubGFzdFRvcFNwYWNpbmcmJih0LnRyYW5zbGF0ZVkrPXQubGFzdFRvcFNwYWNpbmctdC50b3BTcGFjaW5nLHRoaXMuX3JlU3R5bGU9ITApOlwiVklFV1BPUlQtQk9UVE9NXCI9PT10aGlzLmFmZml4ZWRUeXBlJiZ0LmJvdHRvbVNwYWNpbmc8dC5sYXN0Qm90dG9tU3BhY2luZyYmKHQudHJhbnNsYXRlWSs9dC5sYXN0Qm90dG9tU3BhY2luZy10LmJvdHRvbVNwYWNpbmcsdGhpcy5fcmVTdHlsZT0hMCksdC5sYXN0VG9wU3BhY2luZz10LnRvcFNwYWNpbmcsdC5sYXN0Qm90dG9tU3BhY2luZz10LmJvdHRvbVNwYWNpbmd9fSx7a2V5OlwiaXNTaWRlYmFyRml0c1ZpZXdwb3J0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmRpbWVuc2lvbnMsZT1cImRvd25cIj09PXRoaXMuc2Nyb2xsRGlyZWN0aW9uP3QubGFzdEJvdHRvbVNwYWNpbmc6dC5sYXN0VG9wU3BhY2luZztyZXR1cm4gdGhpcy5kaW1lbnNpb25zLnNpZGViYXJIZWlnaHQrZTx0aGlzLmRpbWVuc2lvbnMudmlld3BvcnRIZWlnaHR9fSx7a2V5Olwib2JzZXJ2ZVNjcm9sbERpclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kaW1lbnNpb25zO2lmKHQubGFzdFZpZXdwb3J0VG9wIT09dC52aWV3cG9ydFRvcCl7dmFyIGU9XCJkb3duXCI9PT10aGlzLmRpcmVjdGlvbj9NYXRoLm1pbjpNYXRoLm1heDt0LnZpZXdwb3J0VG9wPT09ZSh0LnZpZXdwb3J0VG9wLHQubGFzdFZpZXdwb3J0VG9wKSYmKHRoaXMuZGlyZWN0aW9uPVwiZG93blwiPT09dGhpcy5kaXJlY3Rpb24/XCJ1cFwiOlwiZG93blwiKX19fSx7a2V5OlwiZ2V0QWZmaXhUeXBlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jYWxjRGltZW5zaW9uc1dpdGhTY3JvbGwoKTt2YXIgdD10aGlzLmRpbWVuc2lvbnMsZT10LnZpZXdwb3J0VG9wK3QudG9wU3BhY2luZyxpPXRoaXMuYWZmaXhlZFR5cGU7cmV0dXJuIGU8PXQuY29udGFpbmVyVG9wfHx0LmNvbnRhaW5lckhlaWdodDw9dC5zaWRlYmFySGVpZ2h0Pyh0LnRyYW5zbGF0ZVk9MCxpPVwiU1RBVElDXCIpOmk9XCJ1cFwiPT09dGhpcy5kaXJlY3Rpb24/dGhpcy5fZ2V0QWZmaXhUeXBlU2Nyb2xsaW5nVXAoKTp0aGlzLl9nZXRBZmZpeFR5cGVTY3JvbGxpbmdEb3duKCksdC50cmFuc2xhdGVZPU1hdGgubWF4KDAsdC50cmFuc2xhdGVZKSx0LnRyYW5zbGF0ZVk9TWF0aC5taW4odC5jb250YWluZXJIZWlnaHQsdC50cmFuc2xhdGVZKSx0LnRyYW5zbGF0ZVk9TWF0aC5yb3VuZCh0LnRyYW5zbGF0ZVkpLHQubGFzdFZpZXdwb3J0VG9wPXQudmlld3BvcnRUb3AsaX19LHtrZXk6XCJfZ2V0QWZmaXhUeXBlU2Nyb2xsaW5nRG93blwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kaW1lbnNpb25zLGU9dC5zaWRlYmFySGVpZ2h0K3QuY29udGFpbmVyVG9wLGk9dC52aWV3cG9ydFRvcCt0LnRvcFNwYWNpbmcsbj10LnZpZXdwb3J0Qm90dG9tLXQuYm90dG9tU3BhY2luZyxvPXRoaXMuYWZmaXhlZFR5cGU7cmV0dXJuIHRoaXMuaXNTaWRlYmFyRml0c1ZpZXdwb3J0KCk/dC5zaWRlYmFySGVpZ2h0K2k+PXQuY29udGFpbmVyQm90dG9tPyh0LnRyYW5zbGF0ZVk9dC5jb250YWluZXJCb3R0b20tZSxvPVwiQ09OVEFJTkVSLUJPVFRPTVwiKTppPj10LmNvbnRhaW5lclRvcCYmKHQudHJhbnNsYXRlWT1pLXQuY29udGFpbmVyVG9wLG89XCJWSUVXUE9SVC1UT1BcIik6dC5jb250YWluZXJCb3R0b208PW4/KHQudHJhbnNsYXRlWT10LmNvbnRhaW5lckJvdHRvbS1lLG89XCJDT05UQUlORVItQk9UVE9NXCIpOmUrdC50cmFuc2xhdGVZPD1uPyh0LnRyYW5zbGF0ZVk9bi1lLG89XCJWSUVXUE9SVC1CT1RUT01cIik6dC5jb250YWluZXJUb3ArdC50cmFuc2xhdGVZPD1pJiYwIT09dC50cmFuc2xhdGVZJiZ0Lm1heFRyYW5zbGF0ZVkhPT10LnRyYW5zbGF0ZVkmJihvPVwiVklFV1BPUlQtVU5CT1RUT01cIiksb319LHtrZXk6XCJfZ2V0QWZmaXhUeXBlU2Nyb2xsaW5nVXBcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZGltZW5zaW9ucyxlPXQuc2lkZWJhckhlaWdodCt0LmNvbnRhaW5lclRvcCxpPXQudmlld3BvcnRUb3ArdC50b3BTcGFjaW5nLG49dC52aWV3cG9ydEJvdHRvbS10LmJvdHRvbVNwYWNpbmcsbz10aGlzLmFmZml4ZWRUeXBlO3JldHVybiBpPD10LnRyYW5zbGF0ZVkrdC5jb250YWluZXJUb3A/KHQudHJhbnNsYXRlWT1pLXQuY29udGFpbmVyVG9wLG89XCJWSUVXUE9SVC1UT1BcIik6dC5jb250YWluZXJCb3R0b208PW4/KHQudHJhbnNsYXRlWT10LmNvbnRhaW5lckJvdHRvbS1lLG89XCJDT05UQUlORVItQk9UVE9NXCIpOnRoaXMuaXNTaWRlYmFyRml0c1ZpZXdwb3J0KCl8fHQuY29udGFpbmVyVG9wPD1pJiYwIT09dC50cmFuc2xhdGVZJiZ0Lm1heFRyYW5zbGF0ZVkhPT10LnRyYW5zbGF0ZVkmJihvPVwiVklFV1BPUlQtVU5CT1RUT01cIiksb319LHtrZXk6XCJfZ2V0U3R5bGVcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih2b2lkIDAhPT10KXt2YXIgZT17aW5uZXI6e30sb3V0ZXI6e319LGk9dGhpcy5kaW1lbnNpb25zO3N3aXRjaCh0KXtjYXNlXCJWSUVXUE9SVC1UT1BcIjplLmlubmVyPXtwb3NpdGlvbjpcImZpeGVkXCIsdG9wOmkudG9wU3BhY2luZyxsZWZ0Omkuc2lkZWJhckxlZnQtaS52aWV3cG9ydExlZnQsd2lkdGg6aS5zaWRlYmFyV2lkdGh9O2JyZWFrO2Nhc2VcIlZJRVdQT1JULUJPVFRPTVwiOmUuaW5uZXI9e3Bvc2l0aW9uOlwiZml4ZWRcIix0b3A6XCJhdXRvXCIsbGVmdDppLnNpZGViYXJMZWZ0LGJvdHRvbTppLmJvdHRvbVNwYWNpbmcsd2lkdGg6aS5zaWRlYmFyV2lkdGh9O2JyZWFrO2Nhc2VcIkNPTlRBSU5FUi1CT1RUT01cIjpjYXNlXCJWSUVXUE9SVC1VTkJPVFRPTVwiOnZhciBuPXRoaXMuX2dldFRyYW5zbGF0ZSgwLGkudHJhbnNsYXRlWStcInB4XCIpO2UuaW5uZXI9bj97dHJhbnNmb3JtOm59Ontwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOmkudHJhbnNsYXRlWSx3aWR0aDppLnNpZGViYXJXaWR0aH19c3dpdGNoKHQpe2Nhc2VcIlZJRVdQT1JULVRPUFwiOmNhc2VcIlZJRVdQT1JULUJPVFRPTVwiOmNhc2VcIlZJRVdQT1JULVVOQk9UVE9NXCI6Y2FzZVwiQ09OVEFJTkVSLUJPVFRPTVwiOmUub3V0ZXI9e2hlaWdodDppLnNpZGViYXJIZWlnaHQscG9zaXRpb246XCJyZWxhdGl2ZVwifX1yZXR1cm4gZS5vdXRlcj1jLmV4dGVuZCh7aGVpZ2h0OlwiXCIscG9zaXRpb246XCJcIn0sZS5vdXRlciksZS5pbm5lcj1jLmV4dGVuZCh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLHRvcDpcIlwiLGxlZnQ6XCJcIixib3R0b206XCJcIix3aWR0aDpcIlwiLHRyYW5zZm9ybTpcIlwifSxlLmlubmVyKSxlfX19LHtrZXk6XCJzdGlja3lQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9icmVha3BvaW50KXt0PXRoaXMuX3JlU3R5bGV8fHR8fCExLHRoaXMub3B0aW9ucy50b3BTcGFjaW5nLHRoaXMub3B0aW9ucy5ib3R0b21TcGFjaW5nO3ZhciBlPXRoaXMuZ2V0QWZmaXhUeXBlKCksaT10aGlzLl9nZXRTdHlsZShlKTtpZigodGhpcy5hZmZpeGVkVHlwZSE9ZXx8dCkmJmUpe3ZhciBuPVwiYWZmaXguXCIrZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCJ2aWV3cG9ydC1cIixcIlwiKStsO2Zvcih2YXIgbyBpbiBjLmV2ZW50VHJpZ2dlcih0aGlzLnNpZGViYXIsbiksXCJTVEFUSUNcIj09PWU/Yy5yZW1vdmVDbGFzcyh0aGlzLnNpZGViYXIsdGhpcy5vcHRpb25zLnN0aWNreUNsYXNzKTpjLmFkZENsYXNzKHRoaXMuc2lkZWJhcix0aGlzLm9wdGlvbnMuc3RpY2t5Q2xhc3MpLGkub3V0ZXIpe3ZhciBzPVwibnVtYmVyXCI9PXR5cGVvZiBpLm91dGVyW29dP1wicHhcIjpcIlwiO3RoaXMuc2lkZWJhci5zdHlsZVtvXT1pLm91dGVyW29dK3N9Zm9yKHZhciByIGluIGkuaW5uZXIpe3ZhciBhPVwibnVtYmVyXCI9PXR5cGVvZiBpLmlubmVyW3JdP1wicHhcIjpcIlwiO3RoaXMuc2lkZWJhcklubmVyLnN0eWxlW3JdPWkuaW5uZXJbcl0rYX12YXIgcD1cImFmZml4ZWQuXCIrZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCJ2aWV3cG9ydC1cIixcIlwiKStsO2MuZXZlbnRUcmlnZ2VyKHRoaXMuc2lkZWJhcixwKX1lbHNlIHRoaXMuX2luaXRpYWxpemVkJiYodGhpcy5zaWRlYmFySW5uZXIuc3R5bGUubGVmdD1pLmlubmVyLmxlZnQpO3RoaXMuYWZmaXhlZFR5cGU9ZX19fSx7a2V5OlwiX3dpZHRoQnJlYWtwb2ludFwiLHZhbHVlOmZ1bmN0aW9uKCl7d2luZG93LmlubmVyV2lkdGg8PXRoaXMub3B0aW9ucy5taW5XaWR0aD8odGhpcy5fYnJlYWtwb2ludD0hMCx0aGlzLmFmZml4ZWRUeXBlPVwiU1RBVElDXCIsdGhpcy5zaWRlYmFyLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpLGMucmVtb3ZlQ2xhc3ModGhpcy5zaWRlYmFyLHRoaXMub3B0aW9ucy5zdGlja3lDbGFzcyksdGhpcy5zaWRlYmFySW5uZXIucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIikpOnRoaXMuX2JyZWFrcG9pbnQ9ITF9fSx7a2V5OlwidXBkYXRlU3RpY2t5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMsaT0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307dGhpcy5fcnVubmluZ3x8KHRoaXMuX3J1bm5pbmc9ITAsdD1pLnR5cGUscmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7c3dpdGNoKHQpe2Nhc2VcInNjcm9sbFwiOmUuX2NhbGNEaW1lbnNpb25zV2l0aFNjcm9sbCgpLGUub2JzZXJ2ZVNjcm9sbERpcigpLGUuc3RpY2t5UG9zaXRpb24oKTticmVhaztjYXNlXCJyZXNpemVcIjpkZWZhdWx0OmUuX3dpZHRoQnJlYWtwb2ludCgpLGUuY2FsY0RpbWVuc2lvbnMoKSxlLnN0aWNreVBvc2l0aW9uKCEwKX1lLl9ydW5uaW5nPSExfSkpfX0se2tleTpcIl9zZXRTdXBwb3J0RmVhdHVyZXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc3VwcG9ydDt0LnRyYW5zZm9ybT1jLnN1cHBvcnRUcmFuc2Zvcm0oKSx0LnRyYW5zZm9ybTNkPWMuc3VwcG9ydFRyYW5zZm9ybSghMCl9fSx7a2V5OlwiX2dldFRyYW5zbGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjAsZT0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MCxpPTI8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTowO3JldHVybiB0aGlzLnN1cHBvcnQudHJhbnNmb3JtM2Q/XCJ0cmFuc2xhdGUzZChcIit0K1wiLCBcIitlK1wiLCBcIitpK1wiKVwiOiEhdGhpcy5zdXBwb3J0LnRyYW5zbGF0ZSYmXCJ0cmFuc2xhdGUoXCIrdCtcIiwgXCIrZStcIilcIn19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMse2NhcHR1cmU6ITF9KSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMse2NhcHR1cmU6ITF9KSx0aGlzLnNpZGViYXIuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLm9wdGlvbnMuc3RpY2t5Q2xhc3MpLHRoaXMuc2lkZWJhci5zdHlsZS5taW5IZWlnaHQ9XCJcIix0aGlzLnNpZGViYXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInVwZGF0ZVwiK2wsdGhpcyk7dmFyIHQ9e2lubmVyOnt9LG91dGVyOnt9fTtmb3IodmFyIGUgaW4gdC5pbm5lcj17cG9zaXRpb246XCJcIix0b3A6XCJcIixsZWZ0OlwiXCIsYm90dG9tOlwiXCIsd2lkdGg6XCJcIix0cmFuc2Zvcm06XCJcIn0sdC5vdXRlcj17aGVpZ2h0OlwiXCIscG9zaXRpb246XCJcIn0sdC5vdXRlcil0aGlzLnNpZGViYXIuc3R5bGVbZV09dC5vdXRlcltlXTtmb3IodmFyIGkgaW4gdC5pbm5lcil0aGlzLnNpZGViYXJJbm5lci5zdHlsZVtpXT10LmlubmVyW2ldO3RoaXMub3B0aW9ucy5yZXNpemVTZW5zb3ImJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBSZXNpemVTZW5zb3ImJihSZXNpemVTZW5zb3IuZGV0YWNoKHRoaXMuc2lkZWJhcklubmVyLHRoaXMuaGFuZGxlRXZlbnQpLFJlc2l6ZVNlbnNvci5kZXRhY2godGhpcy5jb250YWluZXIsdGhpcy5oYW5kbGVFdmVudCkpfX1dLFt7a2V5Olwic3VwcG9ydFRyYW5zZm9ybVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBpPSExLGU9dD9cInBlcnNwZWN0aXZlXCI6XCJ0cmFuc2Zvcm1cIixuPWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdXBwb3J0XCIpLnN0eWxlO3JldHVybihlK1wiIFwiK1tcIldlYmtpdFwiLFwiTW96XCIsXCJPXCIsXCJtc1wiXS5qb2luKG4rXCIgXCIpK24pLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwIT09b1t0XSlyZXR1cm4gaT10LCExfSksaX19LHtrZXk6XCJldmVudFRyaWdnZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dHJ5e3ZhciBuPW5ldyBDdXN0b21FdmVudChlLHtkZXRhaWw6aX0pfWNhdGNoKHQpeyhuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIikpLmluaXRDdXN0b21FdmVudChlLCEwLCEwLGkpfXQuZGlzcGF0Y2hFdmVudChuKX19LHtrZXk6XCJleHRlbmRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBpPXt9O2Zvcih2YXIgbiBpbiB0KXZvaWQgMCE9PWVbbl0/aVtuXT1lW25dOmlbbl09dFtuXTtyZXR1cm4gaX19LHtrZXk6XCJvZmZzZXRSZWxhdGl2ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXtsZWZ0OjAsdG9wOjB9O2Rve3ZhciBpPXQub2Zmc2V0VG9wLG49dC5vZmZzZXRMZWZ0O2lzTmFOKGkpfHwoZS50b3ArPWkpLGlzTmFOKG4pfHwoZS5sZWZ0Kz1uKSx0PVwiQk9EWVwiPT09dC50YWdOYW1lP3QucGFyZW50RWxlbWVudDp0Lm9mZnNldFBhcmVudH13aGlsZSh0KTtyZXR1cm4gZX19LHtrZXk6XCJhZGRDbGFzc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7Yy5oYXNDbGFzcyh0LGUpfHwodC5jbGFzc0xpc3Q/dC5jbGFzc0xpc3QuYWRkKGUpOnQuY2xhc3NOYW1lKz1cIiBcIitlKX19LHtrZXk6XCJyZW1vdmVDbGFzc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7Yy5oYXNDbGFzcyh0LGUpJiYodC5jbGFzc0xpc3Q/dC5jbGFzc0xpc3QucmVtb3ZlKGUpOnQuY2xhc3NOYW1lPXQuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cChcIihefFxcXFxiKVwiK2Uuc3BsaXQoXCIgXCIpLmpvaW4oXCJ8XCIpK1wiKFxcXFxifCQpXCIsXCJnaVwiKSxcIiBcIikpfX0se2tleTpcImhhc0NsYXNzXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5jbGFzc0xpc3Q/dC5jbGFzc0xpc3QuY29udGFpbnMoZSk6bmV3IFJlZ0V4cChcIihefCApXCIrZStcIiggfCQpXCIsXCJnaVwiKS50ZXN0KHQuY2xhc3NOYW1lKX19LHtrZXk6XCJkZWZhdWx0c1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBufX1dKSxjfSgpKTt0LmRlZmF1bHQ9aSx3aW5kb3cuU3RpY2t5U2lkZWJhcj1pfSkoZSl9KTtyZXR1cm4gdChpKSx0KGUoZnVuY3Rpb24odCxlKXsoZnVuY3Rpb24odCl7dmFyIGUscz0oZT10KSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX07IWZ1bmN0aW9uKCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyl7dmFyIG49d2luZG93LiR8fHdpbmRvdy5qUXVlcnl8fHdpbmRvdy5aZXB0byxvPVwic3RpY2t5U2lkZWJhclwiO2lmKG4pe24uZm4uc3RpY2t5U2lkZWJhcj1mdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9bih0aGlzKSxlPW4odGhpcykuZGF0YShvKTtpZihlfHwoZT1uZXcgcy5kZWZhdWx0KHRoaXMsXCJvYmplY3RcIj09dHlwZW9mIGkmJmkpLHQuZGF0YShvLGUpKSxcInN0cmluZ1wiPT10eXBlb2YgaSl7aWYodm9pZCAwPT09ZVtpXSYmLTE9PT1bXCJkZXN0cm95XCIsXCJ1cGRhdGVTdGlja3lcIl0uaW5kZXhPZihpKSl0aHJvdyBuZXcgRXJyb3IoJ05vIG1ldGhvZCBuYW1lZCBcIicraSsnXCInKTtlW2ldKCl9fSl9LG4uZm4uc3RpY2t5U2lkZWJhci5Db25zdHJ1Y3Rvcj1zLmRlZmF1bHQ7dmFyIHQ9bi5mbi5zdGlja3lTaWRlYmFyO24uZm4uc3RpY2t5U2lkZWJhci5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIG4uZm4uc3RpY2t5U2lkZWJhcj10LHRoaXN9fX19KCl9KShpKX0pKX0pOyJdLCJmaWxlIjoianF1ZXJ5LnN0aWNreS1zaWRlYmFyLm1pbi5qcyJ9
;
/*!
 * Masonry PACKAGED v4.1.1
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */

!function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,r,a){function h(t,e,n){var o,r="$()."+i+'("'+e+'")';return t.each(function(t,h){var u=a.data(h,i);if(!u)return void s(i+" not initialized. Cannot call methods, i.e. "+r);var d=u[e];if(!d||"_"==e.charAt(0))return void s(r+" is not a valid method");var l=d.apply(u,n);o=void 0===o?l:o}),void 0!==o?o:t}function u(t,e){t.each(function(t,n){var o=a.data(n,i);o?(o.option(e),o._init()):(o=new r(n,e),a.data(n,i,o))})}a=a||e||t.jQuery,a&&(r.prototype.option||(r.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"==typeof t){var e=o.call(arguments,1);return h(this,t,e)}return u(this,t),this},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var o=Array.prototype.slice,r=t.console,s="undefined"==typeof r?function(){}:function(t){r.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||{};return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),n+=s?0:1,o=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t),i=-1==t.indexOf("%")&&!isNaN(e);return i&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;u>e;e++){var i=h[e];t[i]=0}return t}function n(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),e}function o(){if(!d){d=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var o=n(e);r.isBoxSizeOuter=s=200==t(o.width),i.removeChild(e)}}function r(e){if(o(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var r=n(e);if("none"==r.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var d=a.isBorderBox="border-box"==r.boxSizing,l=0;u>l;l++){var c=h[l],f=r[c],m=parseFloat(f);a[c]=isNaN(m)?0:m}var p=a.paddingLeft+a.paddingRight,g=a.paddingTop+a.paddingBottom,y=a.marginLeft+a.marginRight,v=a.marginTop+a.marginBottom,_=a.borderLeftWidth+a.borderRightWidth,E=a.borderTopWidth+a.borderBottomWidth,z=d&&s,b=t(r.width);b!==!1&&(a.width=b+(z?0:p+_));var x=t(r.height);return x!==!1&&(a.height=x+(z?0:g+E)),a.innerWidth=a.width-(p+_),a.innerHeight=a.height-(g+E),a.outerWidth=a.width+y,a.outerHeight=a.height+v,a}}var s,a="undefined"==typeof console?e:function(t){console.error(t)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],u=h.length,d=!1;return r}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i],o=n+"MatchesSelector";if(t[o])return o}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e},i.makeArray=function(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!n)return void o.push(t);e(t,n)&&o.push(t);for(var i=t.querySelectorAll(n),r=0;r<i.length;r++)o.push(i[r])}}),o},i.debounceMethod=function(t,e,i){var n=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];t&&clearTimeout(t);var e=arguments,r=this;this[o]=setTimeout(function(){n.apply(r,e),delete r[o]},i||100)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?t():document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var n=t.console;return i.htmlInit=function(e,o){i.docReady(function(){var r=i.toDashed(o),s="data-"+r,a=document.querySelectorAll("["+s+"]"),h=document.querySelectorAll(".js-"+r),u=i.makeArray(a).concat(i.makeArray(h)),d=s+"-options",l=t.jQuery;u.forEach(function(t){var i,r=t.getAttribute(s)||t.getAttribute(d);try{i=r&&JSON.parse(r)}catch(a){return void(n&&n.error("Error parsing "+s+" on "+t.className+": "+a))}var h=new e(t,i);l&&l.data(t,o,h)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";function i(t){for(var e in t)return!1;return e=null,!0}function n(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}function o(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}var r=document.documentElement.style,s="string"==typeof r.transition?"transition":"WebkitTransition",a="string"==typeof r.transform?"transform":"WebkitTransform",h={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[s],u={transform:a,transition:s,transitionDuration:s+"Duration",transitionProperty:s+"Property",transitionDelay:s+"Delay"},d=n.prototype=Object.create(t.prototype);d.constructor=n,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},d.getSize=function(){this.size=e(this.element)},d.css=function(t){var e=this.element.style;for(var i in t){var n=u[i]||i;e[n]=t[i]}},d.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],o=t[i?"top":"bottom"],r=this.layout.size,s=-1!=n.indexOf("%")?parseFloat(n)/100*r.width:parseInt(n,10),a=-1!=o.indexOf("%")?parseFloat(o)/100*r.height:parseInt(o,10);s=isNaN(s)?0:s,a=isNaN(a)?0:a,s-=e?r.paddingLeft:r.paddingRight,a-=i?r.paddingTop:r.paddingBottom,this.position.x=s,this.position.y=a},d.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"paddingLeft":"paddingRight",r=i?"left":"right",s=i?"right":"left",a=this.position.x+t[o];e[r]=this.getXValue(a),e[s]="";var h=n?"paddingTop":"paddingBottom",u=n?"top":"bottom",d=n?"bottom":"top",l=this.position.y+t[h];e[u]=this.getYValue(l),e[d]="",this.css(e),this.emitEvent("layout",[this])},d.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},d.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},d._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(t,10),r=parseInt(e,10),s=o===this.position.x&&r===this.position.y;if(this.setPosition(t,e),s&&!this.isTransitioning)return void this.layoutPosition();var a=t-i,h=e-n,u={};u.transform=this.getTranslate(a,h),this.transition({to:u,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},d.getTranslate=function(t,e){var i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop");return t=i?t:-t,e=n?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},d.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},d._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},d.transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var n=this.element.offsetHeight;n=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var l="opacity,"+o(a);d.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:l,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(h,this,!1)}},d.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},d.onotransitionend=function(t){this.ontransitionend(t)};var c={"-webkit-transform":"transform"};d.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=c[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){var o=e.onEnd[n];o.call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(h,this,!1),this.isTransitioning=!1},d._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var f={transitionProperty:"",transitionDuration:"",transitionDelay:""};return d.removeTransitionStyles=function(){this.css(f)},d.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){return s&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},d.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("visibleStyle");e[i]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},d.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("hiddenStyle");e[i]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,n,o,r){return e(t,i,n,o,r)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,i,n,o){"use strict";function r(t,e){var i=n.getQueryElement(t);if(!i)return void(h&&h.error("Bad element for "+this.constructor.namespace+": "+(i||t)));this.element=i,u&&(this.$element=u(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e);var o=++l;this.element.outlayerGUID=o,c[o]=this,this._create();var r=this._getOption("initLayout");r&&this.layout()}function s(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function a(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],n=e&&e[2];if(!i.length)return 0;i=parseFloat(i);var o=m[n]||1;return i*o}var h=t.console,u=t.jQuery,d=function(){},l=0,c={};r.namespace="outlayer",r.Item=o,r.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var f=r.prototype;n.extend(f,e.prototype),f.option=function(t){n.extend(this.options,t)},f._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},r.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},f._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle);var t=this._getOption("resize");t&&this.bindResize()},f.reloadItems=function(){this.items=this._itemize(this.element.children)},f._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0;o<e.length;o++){var r=e[o],s=new i(r,this);n.push(s)}return n},f._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},f.getItemElements=function(){return this.items.map(function(t){return t.element})},f.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},f._init=f.layout,f._resetLayout=function(){this.getSize()},f.getSize=function(){this.size=i(this.element)},f._getMeasurement=function(t,e){var n,o=this.options[t];o?("string"==typeof o?n=this.element.querySelector(o):o instanceof HTMLElement&&(n=o),this[t]=n?i(n)[e]:o):this[t]=0},f.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},f._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},f._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach(function(t){var n=this._getItemLayoutPosition(t);n.item=t,n.isInstant=e||t.isLayoutInstant,i.push(n)},this),this._processLayoutQueue(i)}},f._getItemLayoutPosition=function(){return{x:0,y:0}},f._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},f.updateStagger=function(){var t=this.options.stagger;return null===t||void 0===t?void(this.stagger=0):(this.stagger=a(t),this.stagger)},f._positionItem=function(t,e,i,n,o){n?t.goTo(e,i):(t.stagger(o*this.stagger),t.moveTo(e,i))},f._postLayout=function(){this.resizeContainer()},f.resizeContainer=function(){var t=this._getOption("resizeContainer");if(t){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},f._getContainerSize=d,f._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},f._emitCompleteOnItems=function(t,e){function i(){o.dispatchEvent(t+"Complete",null,[e])}function n(){s++,s==r&&i()}var o=this,r=e.length;if(!e||!r)return void i();var s=0;e.forEach(function(e){e.once(t,n)})},f.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),u)if(this.$element=this.$element||u(this.element),e){var o=u.Event(e);o.type=t,this.$element.trigger(o,i)}else this.$element.trigger(t,i)},f.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},f.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},f.stamp=function(t){t=this._find(t),t&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},f.unstamp=function(t){t=this._find(t),t&&t.forEach(function(t){n.removeFrom(this.stamps,t),this.unignore(t)},this)},f._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)):void 0},f._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},f._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},f._manageStamp=d,f._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,o=i(t),r={left:e.left-n.left-o.marginLeft,top:e.top-n.top-o.marginTop,right:n.right-e.right-o.marginRight,bottom:n.bottom-e.bottom-o.marginBottom};return r},f.handleEvent=n.handleEvent,f.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},f.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},f.onresize=function(){this.resize()},n.debounceMethod(r,"onresize",100),f.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},f.needsResizeLayout=function(){var t=i(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},f.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},f.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},f.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},f.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.reveal()})}},f.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.hide()})}},f.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},f.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},f.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},f.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getItem(t);i&&e.push(i)},this),e},f.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),n.removeFrom(this.items,t)},this)},f.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete c[e],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},r.data=function(t){t=n.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&c[e]},r.create=function(t,e){var i=s(r);return i.defaults=n.extend({},r.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},r.compatOptions),i.namespace=t,i.data=r.data,i.Item=s(o),n.htmlInit(i,t),u&&u.bridget&&u.bridget(t,i),i};var m={ms:1,s:1e3};return r.Item=o,r}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,e){var i=t.create("masonry");return i.compatOptions.fitWidth="isFitWidth",i.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0},i.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,o=this.containerWidth+this.gutter,r=o/n,s=n-o%n,a=s&&1>s?"round":"floor";r=Math[a](r),this.cols=Math.max(r,1)},i.prototype.getContainerWidth=function(){var t=this._getOption("fitWidth"),i=t?this.element.parentNode:this.element,n=e(i);this.containerWidth=n&&n.innerWidth},i.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=e&&1>e?"round":"ceil",n=Math[i](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var o=this._getColGroup(n),r=Math.min.apply(Math,o),s=o.indexOf(r),a={x:this.columnWidth*s,y:r},h=r+t.size.outerHeight,u=this.cols+1-o.length,d=0;u>d;d++)this.colYs[s+d]=h;return a},i.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++){var o=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,o)}return e},i.prototype._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),o=this._getOption("originLeft"),r=o?n.left:n.right,s=r+i.outerWidth,a=Math.floor(r/this.columnWidth);a=Math.max(0,a);var h=Math.floor(s/this.columnWidth);h-=s%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var u=this._getOption("originTop"),d=(u?n.top:n.bottom)+i.outerHeight,l=a;h>=l;l++)this.colYs[l]=Math.max(d,this.colYs[l])},i.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},i.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},i.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYXNvbnJ5LnBrZ2QubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogTWFzb25yeSBQQUNLQUdFRCB2NC4xLjFcbiAqIENhc2NhZGluZyBncmlkIGxheW91dCBsaWJyYXJ5XG4gKiBodHRwOi8vbWFzb25yeS5kZXNhbmRyby5jb21cbiAqIE1JVCBMaWNlbnNlXG4gKiBieSBEYXZpZCBEZVNhbmRyb1xuICovXG5cbiFmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJqcXVlcnktYnJpZGdldC9qcXVlcnktYnJpZGdldFwiLFtcImpxdWVyeVwiXSxmdW5jdGlvbihpKXtyZXR1cm4gZSh0LGkpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSh0LHJlcXVpcmUoXCJqcXVlcnlcIikpOnQualF1ZXJ5QnJpZGdldD1lKHQsdC5qUXVlcnkpfSh3aW5kb3csZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGkscixhKXtmdW5jdGlvbiBoKHQsZSxuKXt2YXIgbyxyPVwiJCgpLlwiK2krJyhcIicrZSsnXCIpJztyZXR1cm4gdC5lYWNoKGZ1bmN0aW9uKHQsaCl7dmFyIHU9YS5kYXRhKGgsaSk7aWYoIXUpcmV0dXJuIHZvaWQgcyhpK1wiIG5vdCBpbml0aWFsaXplZC4gQ2Fubm90IGNhbGwgbWV0aG9kcywgaS5lLiBcIityKTt2YXIgZD11W2VdO2lmKCFkfHxcIl9cIj09ZS5jaGFyQXQoMCkpcmV0dXJuIHZvaWQgcyhyK1wiIGlzIG5vdCBhIHZhbGlkIG1ldGhvZFwiKTt2YXIgbD1kLmFwcGx5KHUsbik7bz12b2lkIDA9PT1vP2w6b30pLHZvaWQgMCE9PW8/bzp0fWZ1bmN0aW9uIHUodCxlKXt0LmVhY2goZnVuY3Rpb24odCxuKXt2YXIgbz1hLmRhdGEobixpKTtvPyhvLm9wdGlvbihlKSxvLl9pbml0KCkpOihvPW5ldyByKG4sZSksYS5kYXRhKG4saSxvKSl9KX1hPWF8fGV8fHQualF1ZXJ5LGEmJihyLnByb3RvdHlwZS5vcHRpb258fChyLnByb3RvdHlwZS5vcHRpb249ZnVuY3Rpb24odCl7YS5pc1BsYWluT2JqZWN0KHQpJiYodGhpcy5vcHRpb25zPWEuZXh0ZW5kKCEwLHRoaXMub3B0aW9ucyx0KSl9KSxhLmZuW2ldPWZ1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXt2YXIgZT1vLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBoKHRoaXMsdCxlKX1yZXR1cm4gdSh0aGlzLHQpLHRoaXN9LG4oYSkpfWZ1bmN0aW9uIG4odCl7IXR8fHQmJnQuYnJpZGdldHx8KHQuYnJpZGdldD1pKX12YXIgbz1BcnJheS5wcm90b3R5cGUuc2xpY2Uscj10LmNvbnNvbGUscz1cInVuZGVmaW5lZFwiPT10eXBlb2Ygcj9mdW5jdGlvbigpe306ZnVuY3Rpb24odCl7ci5lcnJvcih0KX07cmV0dXJuIG4oZXx8dC5qUXVlcnkpLGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJldi1lbWl0dGVyL2V2LWVtaXR0ZXJcIixlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKCk6dC5FdkVtaXR0ZXI9ZSgpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe312YXIgZT10LnByb3RvdHlwZTtyZXR1cm4gZS5vbj1mdW5jdGlvbih0LGUpe2lmKHQmJmUpe3ZhciBpPXRoaXMuX2V2ZW50cz10aGlzLl9ldmVudHN8fHt9LG49aVt0XT1pW3RdfHxbXTtyZXR1cm4tMT09bi5pbmRleE9mKGUpJiZuLnB1c2goZSksdGhpc319LGUub25jZT1mdW5jdGlvbih0LGUpe2lmKHQmJmUpe3RoaXMub24odCxlKTt2YXIgaT10aGlzLl9vbmNlRXZlbnRzPXRoaXMuX29uY2VFdmVudHN8fHt9LG49aVt0XT1pW3RdfHx7fTtyZXR1cm4gbltlXT0hMCx0aGlzfX0sZS5vZmY9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50c1t0XTtpZihpJiZpLmxlbmd0aCl7dmFyIG49aS5pbmRleE9mKGUpO3JldHVybi0xIT1uJiZpLnNwbGljZShuLDEpLHRoaXN9fSxlLmVtaXRFdmVudD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2V2ZW50cyYmdGhpcy5fZXZlbnRzW3RdO2lmKGkmJmkubGVuZ3RoKXt2YXIgbj0wLG89aVtuXTtlPWV8fFtdO2Zvcih2YXIgcj10aGlzLl9vbmNlRXZlbnRzJiZ0aGlzLl9vbmNlRXZlbnRzW3RdO287KXt2YXIgcz1yJiZyW29dO3MmJih0aGlzLm9mZih0LG8pLGRlbGV0ZSByW29dKSxvLmFwcGx5KHRoaXMsZSksbis9cz8wOjEsbz1pW25dfXJldHVybiB0aGlzfX0sdH0pLGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImdldC1zaXplL2dldC1zaXplXCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gZSgpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSgpOnQuZ2V0U2l6ZT1lKCl9KHdpbmRvdyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7dmFyIGU9cGFyc2VGbG9hdCh0KSxpPS0xPT10LmluZGV4T2YoXCIlXCIpJiYhaXNOYU4oZSk7cmV0dXJuIGkmJmV9ZnVuY3Rpb24gZSgpe31mdW5jdGlvbiBpKCl7Zm9yKHZhciB0PXt3aWR0aDowLGhlaWdodDowLGlubmVyV2lkdGg6MCxpbm5lckhlaWdodDowLG91dGVyV2lkdGg6MCxvdXRlckhlaWdodDowfSxlPTA7dT5lO2UrKyl7dmFyIGk9aFtlXTt0W2ldPTB9cmV0dXJuIHR9ZnVuY3Rpb24gbih0KXt2YXIgZT1nZXRDb21wdXRlZFN0eWxlKHQpO3JldHVybiBlfHxhKFwiU3R5bGUgcmV0dXJuZWQgXCIrZStcIi4gQXJlIHlvdSBydW5uaW5nIHRoaXMgY29kZSBpbiBhIGhpZGRlbiBpZnJhbWUgb24gRmlyZWZveD8gU2VlIGh0dHA6Ly9iaXQubHkvZ2V0c2l6ZWJ1ZzFcIiksZX1mdW5jdGlvbiBvKCl7aWYoIWQpe2Q9ITA7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLnN0eWxlLndpZHRoPVwiMjAwcHhcIixlLnN0eWxlLnBhZGRpbmc9XCIxcHggMnB4IDNweCA0cHhcIixlLnN0eWxlLmJvcmRlclN0eWxlPVwic29saWRcIixlLnN0eWxlLmJvcmRlcldpZHRoPVwiMXB4IDJweCAzcHggNHB4XCIsZS5zdHlsZS5ib3hTaXppbmc9XCJib3JkZXItYm94XCI7dmFyIGk9ZG9jdW1lbnQuYm9keXx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2kuYXBwZW5kQ2hpbGQoZSk7dmFyIG89bihlKTtyLmlzQm94U2l6ZU91dGVyPXM9MjAwPT10KG8ud2lkdGgpLGkucmVtb3ZlQ2hpbGQoZSl9fWZ1bmN0aW9uIHIoZSl7aWYobygpLFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUpKSxlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZS5ub2RlVHlwZSl7dmFyIHI9bihlKTtpZihcIm5vbmVcIj09ci5kaXNwbGF5KXJldHVybiBpKCk7dmFyIGE9e307YS53aWR0aD1lLm9mZnNldFdpZHRoLGEuaGVpZ2h0PWUub2Zmc2V0SGVpZ2h0O2Zvcih2YXIgZD1hLmlzQm9yZGVyQm94PVwiYm9yZGVyLWJveFwiPT1yLmJveFNpemluZyxsPTA7dT5sO2wrKyl7dmFyIGM9aFtsXSxmPXJbY10sbT1wYXJzZUZsb2F0KGYpO2FbY109aXNOYU4obSk/MDptfXZhciBwPWEucGFkZGluZ0xlZnQrYS5wYWRkaW5nUmlnaHQsZz1hLnBhZGRpbmdUb3ArYS5wYWRkaW5nQm90dG9tLHk9YS5tYXJnaW5MZWZ0K2EubWFyZ2luUmlnaHQsdj1hLm1hcmdpblRvcCthLm1hcmdpbkJvdHRvbSxfPWEuYm9yZGVyTGVmdFdpZHRoK2EuYm9yZGVyUmlnaHRXaWR0aCxFPWEuYm9yZGVyVG9wV2lkdGgrYS5ib3JkZXJCb3R0b21XaWR0aCx6PWQmJnMsYj10KHIud2lkdGgpO2IhPT0hMSYmKGEud2lkdGg9Yisoej8wOnArXykpO3ZhciB4PXQoci5oZWlnaHQpO3JldHVybiB4IT09ITEmJihhLmhlaWdodD14Kyh6PzA6ZytFKSksYS5pbm5lcldpZHRoPWEud2lkdGgtKHArXyksYS5pbm5lckhlaWdodD1hLmhlaWdodC0oZytFKSxhLm91dGVyV2lkdGg9YS53aWR0aCt5LGEub3V0ZXJIZWlnaHQ9YS5oZWlnaHQrdixhfX12YXIgcyxhPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlP2U6ZnVuY3Rpb24odCl7Y29uc29sZS5lcnJvcih0KX0saD1bXCJwYWRkaW5nTGVmdFwiLFwicGFkZGluZ1JpZ2h0XCIsXCJwYWRkaW5nVG9wXCIsXCJwYWRkaW5nQm90dG9tXCIsXCJtYXJnaW5MZWZ0XCIsXCJtYXJnaW5SaWdodFwiLFwibWFyZ2luVG9wXCIsXCJtYXJnaW5Cb3R0b21cIixcImJvcmRlckxlZnRXaWR0aFwiLFwiYm9yZGVyUmlnaHRXaWR0aFwiLFwiYm9yZGVyVG9wV2lkdGhcIixcImJvcmRlckJvdHRvbVdpZHRoXCJdLHU9aC5sZW5ndGgsZD0hMTtyZXR1cm4gcn0pLGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImRlc2FuZHJvLW1hdGNoZXMtc2VsZWN0b3IvbWF0Y2hlcy1zZWxlY3RvclwiLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUoKTp0Lm1hdGNoZXNTZWxlY3Rvcj1lKCl9KHdpbmRvdyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB0PWZ1bmN0aW9uKCl7dmFyIHQ9RWxlbWVudC5wcm90b3R5cGU7aWYodC5tYXRjaGVzKXJldHVyblwibWF0Y2hlc1wiO2lmKHQubWF0Y2hlc1NlbGVjdG9yKXJldHVyblwibWF0Y2hlc1NlbGVjdG9yXCI7Zm9yKHZhciBlPVtcIndlYmtpdFwiLFwibW96XCIsXCJtc1wiLFwib1wiXSxpPTA7aTxlLmxlbmd0aDtpKyspe3ZhciBuPWVbaV0sbz1uK1wiTWF0Y2hlc1NlbGVjdG9yXCI7aWYodFtvXSlyZXR1cm4gb319KCk7cmV0dXJuIGZ1bmN0aW9uKGUsaSl7cmV0dXJuIGVbdF0oaSl9fSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZml6enktdWktdXRpbHMvdXRpbHNcIixbXCJkZXNhbmRyby1tYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3JcIl0sZnVuY3Rpb24oaSl7cmV0dXJuIGUodCxpKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUodCxyZXF1aXJlKFwiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3RvclwiKSk6dC5maXp6eVVJVXRpbHM9ZSh0LHQubWF0Y2hlc1NlbGVjdG9yKX0od2luZG93LGZ1bmN0aW9uKHQsZSl7dmFyIGk9e307aS5leHRlbmQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSl0W2ldPWVbaV07cmV0dXJuIHR9LGkubW9kdWxvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQlZStlKSVlfSxpLm1ha2VBcnJheT1mdW5jdGlvbih0KXt2YXIgZT1bXTtpZihBcnJheS5pc0FycmF5KHQpKWU9dDtlbHNlIGlmKHQmJlwibnVtYmVyXCI9PXR5cGVvZiB0Lmxlbmd0aClmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyllLnB1c2godFtpXSk7ZWxzZSBlLnB1c2godCk7cmV0dXJuIGV9LGkucmVtb3ZlRnJvbT1mdW5jdGlvbih0LGUpe3ZhciBpPXQuaW5kZXhPZihlKTstMSE9aSYmdC5zcGxpY2UoaSwxKX0saS5nZXRQYXJlbnQ9ZnVuY3Rpb24odCxpKXtmb3IoO3QhPWRvY3VtZW50LmJvZHk7KWlmKHQ9dC5wYXJlbnROb2RlLGUodCxpKSlyZXR1cm4gdH0saS5nZXRRdWVyeUVsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0KTp0fSxpLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPVwib25cIit0LnR5cGU7dGhpc1tlXSYmdGhpc1tlXSh0KX0saS5maWx0ZXJGaW5kRWxlbWVudHM9ZnVuY3Rpb24odCxuKXt0PWkubWFrZUFycmF5KHQpO3ZhciBvPVtdO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KXtpZighbilyZXR1cm4gdm9pZCBvLnB1c2godCk7ZSh0LG4pJiZvLnB1c2godCk7Zm9yKHZhciBpPXQucXVlcnlTZWxlY3RvckFsbChuKSxyPTA7cjxpLmxlbmd0aDtyKyspby5wdXNoKGlbcl0pfX0pLG99LGkuZGVib3VuY2VNZXRob2Q9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXQucHJvdG90eXBlW2VdLG89ZStcIlRpbWVvdXRcIjt0LnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciB0PXRoaXNbb107dCYmY2xlYXJUaW1lb3V0KHQpO3ZhciBlPWFyZ3VtZW50cyxyPXRoaXM7dGhpc1tvXT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5hcHBseShyLGUpLGRlbGV0ZSByW29dfSxpfHwxMDApfX0saS5kb2NSZWFkeT1mdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5yZWFkeVN0YXRlO1wiY29tcGxldGVcIj09ZXx8XCJpbnRlcmFjdGl2ZVwiPT1lP3QoKTpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLHQpfSxpLnRvRGFzaGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoLyguKShbQS1aXSkvZyxmdW5jdGlvbih0LGUsaSl7cmV0dXJuIGUrXCItXCIraX0pLnRvTG93ZXJDYXNlKCl9O3ZhciBuPXQuY29uc29sZTtyZXR1cm4gaS5odG1sSW5pdD1mdW5jdGlvbihlLG8pe2kuZG9jUmVhZHkoZnVuY3Rpb24oKXt2YXIgcj1pLnRvRGFzaGVkKG8pLHM9XCJkYXRhLVwiK3IsYT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW1wiK3MrXCJdXCIpLGg9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5qcy1cIityKSx1PWkubWFrZUFycmF5KGEpLmNvbmNhdChpLm1ha2VBcnJheShoKSksZD1zK1wiLW9wdGlvbnNcIixsPXQualF1ZXJ5O3UuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgaSxyPXQuZ2V0QXR0cmlidXRlKHMpfHx0LmdldEF0dHJpYnV0ZShkKTt0cnl7aT1yJiZKU09OLnBhcnNlKHIpfWNhdGNoKGEpe3JldHVybiB2b2lkKG4mJm4uZXJyb3IoXCJFcnJvciBwYXJzaW5nIFwiK3MrXCIgb24gXCIrdC5jbGFzc05hbWUrXCI6IFwiK2EpKX12YXIgaD1uZXcgZSh0LGkpO2wmJmwuZGF0YSh0LG8saCl9KX0pfSxpfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwib3V0bGF5ZXIvaXRlbVwiLFtcImV2LWVtaXR0ZXIvZXYtZW1pdHRlclwiLFwiZ2V0LXNpemUvZ2V0LXNpemVcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwiZXYtZW1pdHRlclwiKSxyZXF1aXJlKFwiZ2V0LXNpemVcIikpOih0Lk91dGxheWVyPXt9LHQuT3V0bGF5ZXIuSXRlbT1lKHQuRXZFbWl0dGVyLHQuZ2V0U2l6ZSkpfSh3aW5kb3csZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe2Zvcih2YXIgZSBpbiB0KXJldHVybiExO3JldHVybiBlPW51bGwsITB9ZnVuY3Rpb24gbih0LGUpe3QmJih0aGlzLmVsZW1lbnQ9dCx0aGlzLmxheW91dD1lLHRoaXMucG9zaXRpb249e3g6MCx5OjB9LHRoaXMuX2NyZWF0ZSgpKX1mdW5jdGlvbiBvKHQpe3JldHVybiB0LnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbih0KXtyZXR1cm5cIi1cIit0LnRvTG93ZXJDYXNlKCl9KX12YXIgcj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUscz1cInN0cmluZ1wiPT10eXBlb2Ygci50cmFuc2l0aW9uP1widHJhbnNpdGlvblwiOlwiV2Via2l0VHJhbnNpdGlvblwiLGE9XCJzdHJpbmdcIj09dHlwZW9mIHIudHJhbnNmb3JtP1widHJhbnNmb3JtXCI6XCJXZWJraXRUcmFuc2Zvcm1cIixoPXtXZWJraXRUcmFuc2l0aW9uOlwid2Via2l0VHJhbnNpdGlvbkVuZFwiLHRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCJ9W3NdLHU9e3RyYW5zZm9ybTphLHRyYW5zaXRpb246cyx0cmFuc2l0aW9uRHVyYXRpb246cytcIkR1cmF0aW9uXCIsdHJhbnNpdGlvblByb3BlcnR5OnMrXCJQcm9wZXJ0eVwiLHRyYW5zaXRpb25EZWxheTpzK1wiRGVsYXlcIn0sZD1uLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQucHJvdG90eXBlKTtkLmNvbnN0cnVjdG9yPW4sZC5fY3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5fdHJhbnNuPXtpbmdQcm9wZXJ0aWVzOnt9LGNsZWFuOnt9LG9uRW5kOnt9fSx0aGlzLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwifSl9LGQuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9XCJvblwiK3QudHlwZTt0aGlzW2VdJiZ0aGlzW2VdKHQpfSxkLmdldFNpemU9ZnVuY3Rpb24oKXt0aGlzLnNpemU9ZSh0aGlzLmVsZW1lbnQpfSxkLmNzcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmVsZW1lbnQuc3R5bGU7Zm9yKHZhciBpIGluIHQpe3ZhciBuPXVbaV18fGk7ZVtuXT10W2ldfX0sZC5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciB0PWdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtZW50KSxlPXRoaXMubGF5b3V0Ll9nZXRPcHRpb24oXCJvcmlnaW5MZWZ0XCIpLGk9dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcIm9yaWdpblRvcFwiKSxuPXRbZT9cImxlZnRcIjpcInJpZ2h0XCJdLG89dFtpP1widG9wXCI6XCJib3R0b21cIl0scj10aGlzLmxheW91dC5zaXplLHM9LTEhPW4uaW5kZXhPZihcIiVcIik/cGFyc2VGbG9hdChuKS8xMDAqci53aWR0aDpwYXJzZUludChuLDEwKSxhPS0xIT1vLmluZGV4T2YoXCIlXCIpP3BhcnNlRmxvYXQobykvMTAwKnIuaGVpZ2h0OnBhcnNlSW50KG8sMTApO3M9aXNOYU4ocyk/MDpzLGE9aXNOYU4oYSk/MDphLHMtPWU/ci5wYWRkaW5nTGVmdDpyLnBhZGRpbmdSaWdodCxhLT1pP3IucGFkZGluZ1RvcDpyLnBhZGRpbmdCb3R0b20sdGhpcy5wb3NpdGlvbi54PXMsdGhpcy5wb3NpdGlvbi55PWF9LGQubGF5b3V0UG9zaXRpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxheW91dC5zaXplLGU9e30saT10aGlzLmxheW91dC5fZ2V0T3B0aW9uKFwib3JpZ2luTGVmdFwiKSxuPXRoaXMubGF5b3V0Ll9nZXRPcHRpb24oXCJvcmlnaW5Ub3BcIiksbz1pP1wicGFkZGluZ0xlZnRcIjpcInBhZGRpbmdSaWdodFwiLHI9aT9cImxlZnRcIjpcInJpZ2h0XCIscz1pP1wicmlnaHRcIjpcImxlZnRcIixhPXRoaXMucG9zaXRpb24ueCt0W29dO2Vbcl09dGhpcy5nZXRYVmFsdWUoYSksZVtzXT1cIlwiO3ZhciBoPW4/XCJwYWRkaW5nVG9wXCI6XCJwYWRkaW5nQm90dG9tXCIsdT1uP1widG9wXCI6XCJib3R0b21cIixkPW4/XCJib3R0b21cIjpcInRvcFwiLGw9dGhpcy5wb3NpdGlvbi55K3RbaF07ZVt1XT10aGlzLmdldFlWYWx1ZShsKSxlW2RdPVwiXCIsdGhpcy5jc3MoZSksdGhpcy5lbWl0RXZlbnQoXCJsYXlvdXRcIixbdGhpc10pfSxkLmdldFhWYWx1ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmxheW91dC5fZ2V0T3B0aW9uKFwiaG9yaXpvbnRhbFwiKTtyZXR1cm4gdGhpcy5sYXlvdXQub3B0aW9ucy5wZXJjZW50UG9zaXRpb24mJiFlP3QvdGhpcy5sYXlvdXQuc2l6ZS53aWR0aCoxMDArXCIlXCI6dCtcInB4XCJ9LGQuZ2V0WVZhbHVlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubGF5b3V0Ll9nZXRPcHRpb24oXCJob3Jpem9udGFsXCIpO3JldHVybiB0aGlzLmxheW91dC5vcHRpb25zLnBlcmNlbnRQb3NpdGlvbiYmZT90L3RoaXMubGF5b3V0LnNpemUuaGVpZ2h0KjEwMCtcIiVcIjp0K1wicHhcIn0sZC5fdHJhbnNpdGlvblRvPWZ1bmN0aW9uKHQsZSl7dGhpcy5nZXRQb3NpdGlvbigpO3ZhciBpPXRoaXMucG9zaXRpb24ueCxuPXRoaXMucG9zaXRpb24ueSxvPXBhcnNlSW50KHQsMTApLHI9cGFyc2VJbnQoZSwxMCkscz1vPT09dGhpcy5wb3NpdGlvbi54JiZyPT09dGhpcy5wb3NpdGlvbi55O2lmKHRoaXMuc2V0UG9zaXRpb24odCxlKSxzJiYhdGhpcy5pc1RyYW5zaXRpb25pbmcpcmV0dXJuIHZvaWQgdGhpcy5sYXlvdXRQb3NpdGlvbigpO3ZhciBhPXQtaSxoPWUtbix1PXt9O3UudHJhbnNmb3JtPXRoaXMuZ2V0VHJhbnNsYXRlKGEsaCksdGhpcy50cmFuc2l0aW9uKHt0bzp1LG9uVHJhbnNpdGlvbkVuZDp7dHJhbnNmb3JtOnRoaXMubGF5b3V0UG9zaXRpb259LGlzQ2xlYW5pbmc6ITB9KX0sZC5nZXRUcmFuc2xhdGU9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmxheW91dC5fZ2V0T3B0aW9uKFwib3JpZ2luTGVmdFwiKSxuPXRoaXMubGF5b3V0Ll9nZXRPcHRpb24oXCJvcmlnaW5Ub3BcIik7cmV0dXJuIHQ9aT90Oi10LGU9bj9lOi1lLFwidHJhbnNsYXRlM2QoXCIrdCtcInB4LCBcIitlK1wicHgsIDApXCJ9LGQuZ29Ubz1mdW5jdGlvbih0LGUpe3RoaXMuc2V0UG9zaXRpb24odCxlKSx0aGlzLmxheW91dFBvc2l0aW9uKCl9LGQubW92ZVRvPWQuX3RyYW5zaXRpb25UbyxkLnNldFBvc2l0aW9uPWZ1bmN0aW9uKHQsZSl7dGhpcy5wb3NpdGlvbi54PXBhcnNlSW50KHQsMTApLHRoaXMucG9zaXRpb24ueT1wYXJzZUludChlLDEwKX0sZC5fbm9uVHJhbnNpdGlvbj1mdW5jdGlvbih0KXt0aGlzLmNzcyh0LnRvKSx0LmlzQ2xlYW5pbmcmJnRoaXMuX3JlbW92ZVN0eWxlcyh0LnRvKTtmb3IodmFyIGUgaW4gdC5vblRyYW5zaXRpb25FbmQpdC5vblRyYW5zaXRpb25FbmRbZV0uY2FsbCh0aGlzKX0sZC50cmFuc2l0aW9uPWZ1bmN0aW9uKHQpe2lmKCFwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKSlyZXR1cm4gdm9pZCB0aGlzLl9ub25UcmFuc2l0aW9uKHQpO3ZhciBlPXRoaXMuX3RyYW5zbjtmb3IodmFyIGkgaW4gdC5vblRyYW5zaXRpb25FbmQpZS5vbkVuZFtpXT10Lm9uVHJhbnNpdGlvbkVuZFtpXTtmb3IoaSBpbiB0LnRvKWUuaW5nUHJvcGVydGllc1tpXT0hMCx0LmlzQ2xlYW5pbmcmJihlLmNsZWFuW2ldPSEwKTtpZih0LmZyb20pe3RoaXMuY3NzKHQuZnJvbSk7dmFyIG49dGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodDtuPW51bGx9dGhpcy5lbmFibGVUcmFuc2l0aW9uKHQudG8pLHRoaXMuY3NzKHQudG8pLHRoaXMuaXNUcmFuc2l0aW9uaW5nPSEwfTt2YXIgbD1cIm9wYWNpdHksXCIrbyhhKTtkLmVuYWJsZVRyYW5zaXRpb249ZnVuY3Rpb24oKXtpZighdGhpcy5pc1RyYW5zaXRpb25pbmcpe3ZhciB0PXRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uO3Q9XCJudW1iZXJcIj09dHlwZW9mIHQ/dCtcIm1zXCI6dCx0aGlzLmNzcyh7dHJhbnNpdGlvblByb3BlcnR5OmwsdHJhbnNpdGlvbkR1cmF0aW9uOnQsdHJhbnNpdGlvbkRlbGF5OnRoaXMuc3RhZ2dlckRlbGF5fHwwfSksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoaCx0aGlzLCExKX19LGQub253ZWJraXRUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKHQpe3RoaXMub250cmFuc2l0aW9uZW5kKHQpfSxkLm9ub3RyYW5zaXRpb25lbmQ9ZnVuY3Rpb24odCl7dGhpcy5vbnRyYW5zaXRpb25lbmQodCl9O3ZhciBjPXtcIi13ZWJraXQtdHJhbnNmb3JtXCI6XCJ0cmFuc2Zvcm1cIn07ZC5vbnRyYW5zaXRpb25lbmQ9ZnVuY3Rpb24odCl7aWYodC50YXJnZXQ9PT10aGlzLmVsZW1lbnQpe3ZhciBlPXRoaXMuX3RyYW5zbixuPWNbdC5wcm9wZXJ0eU5hbWVdfHx0LnByb3BlcnR5TmFtZTtpZihkZWxldGUgZS5pbmdQcm9wZXJ0aWVzW25dLGkoZS5pbmdQcm9wZXJ0aWVzKSYmdGhpcy5kaXNhYmxlVHJhbnNpdGlvbigpLG4gaW4gZS5jbGVhbiYmKHRoaXMuZWxlbWVudC5zdHlsZVt0LnByb3BlcnR5TmFtZV09XCJcIixkZWxldGUgZS5jbGVhbltuXSksbiBpbiBlLm9uRW5kKXt2YXIgbz1lLm9uRW5kW25dO28uY2FsbCh0aGlzKSxkZWxldGUgZS5vbkVuZFtuXX10aGlzLmVtaXRFdmVudChcInRyYW5zaXRpb25FbmRcIixbdGhpc10pfX0sZC5kaXNhYmxlVHJhbnNpdGlvbj1mdW5jdGlvbigpe3RoaXMucmVtb3ZlVHJhbnNpdGlvblN0eWxlcygpLHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGgsdGhpcywhMSksdGhpcy5pc1RyYW5zaXRpb25pbmc9ITF9LGQuX3JlbW92ZVN0eWxlcz1mdW5jdGlvbih0KXt2YXIgZT17fTtmb3IodmFyIGkgaW4gdCllW2ldPVwiXCI7dGhpcy5jc3MoZSl9O3ZhciBmPXt0cmFuc2l0aW9uUHJvcGVydHk6XCJcIix0cmFuc2l0aW9uRHVyYXRpb246XCJcIix0cmFuc2l0aW9uRGVsYXk6XCJcIn07cmV0dXJuIGQucmVtb3ZlVHJhbnNpdGlvblN0eWxlcz1mdW5jdGlvbigpe3RoaXMuY3NzKGYpfSxkLnN0YWdnZXI9ZnVuY3Rpb24odCl7dD1pc05hTih0KT8wOnQsdGhpcy5zdGFnZ2VyRGVsYXk9dCtcIm1zXCJ9LGQucmVtb3ZlRWxlbT1mdW5jdGlvbigpe3RoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5jc3Moe2Rpc3BsYXk6XCJcIn0pLHRoaXMuZW1pdEV2ZW50KFwicmVtb3ZlXCIsW3RoaXNdKX0sZC5yZW1vdmU9ZnVuY3Rpb24oKXtyZXR1cm4gcyYmcGFyc2VGbG9hdCh0aGlzLmxheW91dC5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbik/KHRoaXMub25jZShcInRyYW5zaXRpb25FbmRcIixmdW5jdGlvbigpe3RoaXMucmVtb3ZlRWxlbSgpfSksdm9pZCB0aGlzLmhpZGUoKSk6dm9pZCB0aGlzLnJlbW92ZUVsZW0oKX0sZC5yZXZlYWw9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5pc0hpZGRlbix0aGlzLmNzcyh7ZGlzcGxheTpcIlwifSk7dmFyIHQ9dGhpcy5sYXlvdXQub3B0aW9ucyxlPXt9LGk9dGhpcy5nZXRIaWRlUmV2ZWFsVHJhbnNpdGlvbkVuZFByb3BlcnR5KFwidmlzaWJsZVN0eWxlXCIpO2VbaV09dGhpcy5vblJldmVhbFRyYW5zaXRpb25FbmQsdGhpcy50cmFuc2l0aW9uKHtmcm9tOnQuaGlkZGVuU3R5bGUsdG86dC52aXNpYmxlU3R5bGUsaXNDbGVhbmluZzohMCxvblRyYW5zaXRpb25FbmQ6ZX0pfSxkLm9uUmV2ZWFsVHJhbnNpdGlvbkVuZD1mdW5jdGlvbigpe3RoaXMuaXNIaWRkZW58fHRoaXMuZW1pdEV2ZW50KFwicmV2ZWFsXCIpfSxkLmdldEhpZGVSZXZlYWxUcmFuc2l0aW9uRW5kUHJvcGVydHk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5sYXlvdXQub3B0aW9uc1t0XTtpZihlLm9wYWNpdHkpcmV0dXJuXCJvcGFjaXR5XCI7Zm9yKHZhciBpIGluIGUpcmV0dXJuIGl9LGQuaGlkZT1mdW5jdGlvbigpe3RoaXMuaXNIaWRkZW49ITAsdGhpcy5jc3Moe2Rpc3BsYXk6XCJcIn0pO3ZhciB0PXRoaXMubGF5b3V0Lm9wdGlvbnMsZT17fSxpPXRoaXMuZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eShcImhpZGRlblN0eWxlXCIpO2VbaV09dGhpcy5vbkhpZGVUcmFuc2l0aW9uRW5kLHRoaXMudHJhbnNpdGlvbih7ZnJvbTp0LnZpc2libGVTdHlsZSx0bzp0LmhpZGRlblN0eWxlLGlzQ2xlYW5pbmc6ITAsb25UcmFuc2l0aW9uRW5kOmV9KX0sZC5vbkhpZGVUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbiYmKHRoaXMuY3NzKHtkaXNwbGF5Olwibm9uZVwifSksdGhpcy5lbWl0RXZlbnQoXCJoaWRlXCIpKX0sZC5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5jc3Moe3Bvc2l0aW9uOlwiXCIsbGVmdDpcIlwiLHJpZ2h0OlwiXCIsdG9wOlwiXCIsYm90dG9tOlwiXCIsdHJhbnNpdGlvbjpcIlwiLHRyYW5zZm9ybTpcIlwifSl9LG59KSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJvdXRsYXllci9vdXRsYXllclwiLFtcImV2LWVtaXR0ZXIvZXYtZW1pdHRlclwiLFwiZ2V0LXNpemUvZ2V0LXNpemVcIixcImZpenp5LXVpLXV0aWxzL3V0aWxzXCIsXCIuL2l0ZW1cIl0sZnVuY3Rpb24oaSxuLG8scil7cmV0dXJuIGUodCxpLG4sbyxyKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUodCxyZXF1aXJlKFwiZXYtZW1pdHRlclwiKSxyZXF1aXJlKFwiZ2V0LXNpemVcIikscmVxdWlyZShcImZpenp5LXVpLXV0aWxzXCIpLHJlcXVpcmUoXCIuL2l0ZW1cIikpOnQuT3V0bGF5ZXI9ZSh0LHQuRXZFbWl0dGVyLHQuZ2V0U2l6ZSx0LmZpenp5VUlVdGlscyx0Lk91dGxheWVyLkl0ZW0pfSh3aW5kb3csZnVuY3Rpb24odCxlLGksbixvKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSl7dmFyIGk9bi5nZXRRdWVyeUVsZW1lbnQodCk7aWYoIWkpcmV0dXJuIHZvaWQoaCYmaC5lcnJvcihcIkJhZCBlbGVtZW50IGZvciBcIit0aGlzLmNvbnN0cnVjdG9yLm5hbWVzcGFjZStcIjogXCIrKGl8fHQpKSk7dGhpcy5lbGVtZW50PWksdSYmKHRoaXMuJGVsZW1lbnQ9dSh0aGlzLmVsZW1lbnQpKSx0aGlzLm9wdGlvbnM9bi5leHRlbmQoe30sdGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0cyksdGhpcy5vcHRpb24oZSk7dmFyIG89KytsO3RoaXMuZWxlbWVudC5vdXRsYXllckdVSUQ9byxjW29dPXRoaXMsdGhpcy5fY3JlYXRlKCk7dmFyIHI9dGhpcy5fZ2V0T3B0aW9uKFwiaW5pdExheW91dFwiKTtyJiZ0aGlzLmxheW91dCgpfWZ1bmN0aW9uIHModCl7ZnVuY3Rpb24gZSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGV9ZnVuY3Rpb24gYSh0KXtpZihcIm51bWJlclwiPT10eXBlb2YgdClyZXR1cm4gdDt2YXIgZT10Lm1hdGNoKC8oXlxcZCpcXC4/XFxkKikoXFx3KikvKSxpPWUmJmVbMV0sbj1lJiZlWzJdO2lmKCFpLmxlbmd0aClyZXR1cm4gMDtpPXBhcnNlRmxvYXQoaSk7dmFyIG89bVtuXXx8MTtyZXR1cm4gaSpvfXZhciBoPXQuY29uc29sZSx1PXQualF1ZXJ5LGQ9ZnVuY3Rpb24oKXt9LGw9MCxjPXt9O3IubmFtZXNwYWNlPVwib3V0bGF5ZXJcIixyLkl0ZW09byxyLmRlZmF1bHRzPXtjb250YWluZXJTdHlsZTp7cG9zaXRpb246XCJyZWxhdGl2ZVwifSxpbml0TGF5b3V0OiEwLG9yaWdpbkxlZnQ6ITAsb3JpZ2luVG9wOiEwLHJlc2l6ZTohMCxyZXNpemVDb250YWluZXI6ITAsdHJhbnNpdGlvbkR1cmF0aW9uOlwiMC40c1wiLGhpZGRlblN0eWxlOntvcGFjaXR5OjAsdHJhbnNmb3JtOlwic2NhbGUoMC4wMDEpXCJ9LHZpc2libGVTdHlsZTp7b3BhY2l0eToxLHRyYW5zZm9ybTpcInNjYWxlKDEpXCJ9fTt2YXIgZj1yLnByb3RvdHlwZTtuLmV4dGVuZChmLGUucHJvdG90eXBlKSxmLm9wdGlvbj1mdW5jdGlvbih0KXtuLmV4dGVuZCh0aGlzLm9wdGlvbnMsdCl9LGYuX2dldE9wdGlvbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnN0cnVjdG9yLmNvbXBhdE9wdGlvbnNbdF07cmV0dXJuIGUmJnZvaWQgMCE9PXRoaXMub3B0aW9uc1tlXT90aGlzLm9wdGlvbnNbZV06dGhpcy5vcHRpb25zW3RdfSxyLmNvbXBhdE9wdGlvbnM9e2luaXRMYXlvdXQ6XCJpc0luaXRMYXlvdXRcIixob3Jpem9udGFsOlwiaXNIb3Jpem9udGFsXCIsbGF5b3V0SW5zdGFudDpcImlzTGF5b3V0SW5zdGFudFwiLG9yaWdpbkxlZnQ6XCJpc09yaWdpbkxlZnRcIixvcmlnaW5Ub3A6XCJpc09yaWdpblRvcFwiLHJlc2l6ZTpcImlzUmVzaXplQm91bmRcIixyZXNpemVDb250YWluZXI6XCJpc1Jlc2l6aW5nQ29udGFpbmVyXCJ9LGYuX2NyZWF0ZT1mdW5jdGlvbigpe3RoaXMucmVsb2FkSXRlbXMoKSx0aGlzLnN0YW1wcz1bXSx0aGlzLnN0YW1wKHRoaXMub3B0aW9ucy5zdGFtcCksbi5leHRlbmQodGhpcy5lbGVtZW50LnN0eWxlLHRoaXMub3B0aW9ucy5jb250YWluZXJTdHlsZSk7dmFyIHQ9dGhpcy5fZ2V0T3B0aW9uKFwicmVzaXplXCIpO3QmJnRoaXMuYmluZFJlc2l6ZSgpfSxmLnJlbG9hZEl0ZW1zPWZ1bmN0aW9uKCl7dGhpcy5pdGVtcz10aGlzLl9pdGVtaXplKHRoaXMuZWxlbWVudC5jaGlsZHJlbil9LGYuX2l0ZW1pemU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuX2ZpbHRlckZpbmRJdGVtRWxlbWVudHModCksaT10aGlzLmNvbnN0cnVjdG9yLkl0ZW0sbj1bXSxvPTA7bzxlLmxlbmd0aDtvKyspe3ZhciByPWVbb10scz1uZXcgaShyLHRoaXMpO24ucHVzaChzKX1yZXR1cm4gbn0sZi5fZmlsdGVyRmluZEl0ZW1FbGVtZW50cz1mdW5jdGlvbih0KXtyZXR1cm4gbi5maWx0ZXJGaW5kRWxlbWVudHModCx0aGlzLm9wdGlvbnMuaXRlbVNlbGVjdG9yKX0sZi5nZXRJdGVtRWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtcy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuZWxlbWVudH0pfSxmLmxheW91dD1mdW5jdGlvbigpe3RoaXMuX3Jlc2V0TGF5b3V0KCksdGhpcy5fbWFuYWdlU3RhbXBzKCk7dmFyIHQ9dGhpcy5fZ2V0T3B0aW9uKFwibGF5b3V0SW5zdGFudFwiKSxlPXZvaWQgMCE9PXQ/dDohdGhpcy5faXNMYXlvdXRJbml0ZWQ7dGhpcy5sYXlvdXRJdGVtcyh0aGlzLml0ZW1zLGUpLHRoaXMuX2lzTGF5b3V0SW5pdGVkPSEwfSxmLl9pbml0PWYubGF5b3V0LGYuX3Jlc2V0TGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5nZXRTaXplKCl9LGYuZ2V0U2l6ZT1mdW5jdGlvbigpe3RoaXMuc2l6ZT1pKHRoaXMuZWxlbWVudCl9LGYuX2dldE1lYXN1cmVtZW50PWZ1bmN0aW9uKHQsZSl7dmFyIG4sbz10aGlzLm9wdGlvbnNbdF07bz8oXCJzdHJpbmdcIj09dHlwZW9mIG8/bj10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihvKTpvIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJihuPW8pLHRoaXNbdF09bj9pKG4pW2VdOm8pOnRoaXNbdF09MH0sZi5sYXlvdXRJdGVtcz1mdW5jdGlvbih0LGUpe3Q9dGhpcy5fZ2V0SXRlbXNGb3JMYXlvdXQodCksdGhpcy5fbGF5b3V0SXRlbXModCxlKSx0aGlzLl9wb3N0TGF5b3V0KCl9LGYuX2dldEl0ZW1zRm9yTGF5b3V0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4hdC5pc0lnbm9yZWR9KX0sZi5fbGF5b3V0SXRlbXM9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9lbWl0Q29tcGxldGVPbkl0ZW1zKFwibGF5b3V0XCIsdCksdCYmdC5sZW5ndGgpe3ZhciBpPVtdO3QuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9nZXRJdGVtTGF5b3V0UG9zaXRpb24odCk7bi5pdGVtPXQsbi5pc0luc3RhbnQ9ZXx8dC5pc0xheW91dEluc3RhbnQsaS5wdXNoKG4pfSx0aGlzKSx0aGlzLl9wcm9jZXNzTGF5b3V0UXVldWUoaSl9fSxmLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm57eDowLHk6MH19LGYuX3Byb2Nlc3NMYXlvdXRRdWV1ZT1mdW5jdGlvbih0KXt0aGlzLnVwZGF0ZVN0YWdnZXIoKSx0LmZvckVhY2goZnVuY3Rpb24odCxlKXt0aGlzLl9wb3NpdGlvbkl0ZW0odC5pdGVtLHQueCx0LnksdC5pc0luc3RhbnQsZSl9LHRoaXMpfSxmLnVwZGF0ZVN0YWdnZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuc3RhZ2dlcjtyZXR1cm4gbnVsbD09PXR8fHZvaWQgMD09PXQ/dm9pZCh0aGlzLnN0YWdnZXI9MCk6KHRoaXMuc3RhZ2dlcj1hKHQpLHRoaXMuc3RhZ2dlcil9LGYuX3Bvc2l0aW9uSXRlbT1mdW5jdGlvbih0LGUsaSxuLG8pe24/dC5nb1RvKGUsaSk6KHQuc3RhZ2dlcihvKnRoaXMuc3RhZ2dlciksdC5tb3ZlVG8oZSxpKSl9LGYuX3Bvc3RMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLnJlc2l6ZUNvbnRhaW5lcigpfSxmLnJlc2l6ZUNvbnRhaW5lcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2dldE9wdGlvbihcInJlc2l6ZUNvbnRhaW5lclwiKTtpZih0KXt2YXIgZT10aGlzLl9nZXRDb250YWluZXJTaXplKCk7ZSYmKHRoaXMuX3NldENvbnRhaW5lck1lYXN1cmUoZS53aWR0aCwhMCksdGhpcy5fc2V0Q29udGFpbmVyTWVhc3VyZShlLmhlaWdodCwhMSkpfX0sZi5fZ2V0Q29udGFpbmVyU2l6ZT1kLGYuX3NldENvbnRhaW5lck1lYXN1cmU9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDAhPT10KXt2YXIgaT10aGlzLnNpemU7aS5pc0JvcmRlckJveCYmKHQrPWU/aS5wYWRkaW5nTGVmdCtpLnBhZGRpbmdSaWdodCtpLmJvcmRlckxlZnRXaWR0aCtpLmJvcmRlclJpZ2h0V2lkdGg6aS5wYWRkaW5nQm90dG9tK2kucGFkZGluZ1RvcCtpLmJvcmRlclRvcFdpZHRoK2kuYm9yZGVyQm90dG9tV2lkdGgpLHQ9TWF0aC5tYXgodCwwKSx0aGlzLmVsZW1lbnQuc3R5bGVbZT9cIndpZHRoXCI6XCJoZWlnaHRcIl09dCtcInB4XCJ9fSxmLl9lbWl0Q29tcGxldGVPbkl0ZW1zPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gaSgpe28uZGlzcGF0Y2hFdmVudCh0K1wiQ29tcGxldGVcIixudWxsLFtlXSl9ZnVuY3Rpb24gbigpe3MrKyxzPT1yJiZpKCl9dmFyIG89dGhpcyxyPWUubGVuZ3RoO2lmKCFlfHwhcilyZXR1cm4gdm9pZCBpKCk7dmFyIHM9MDtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5vbmNlKHQsbil9KX0sZi5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lP1tlXS5jb25jYXQoaSk6aTtpZih0aGlzLmVtaXRFdmVudCh0LG4pLHUpaWYodGhpcy4kZWxlbWVudD10aGlzLiRlbGVtZW50fHx1KHRoaXMuZWxlbWVudCksZSl7dmFyIG89dS5FdmVudChlKTtvLnR5cGU9dCx0aGlzLiRlbGVtZW50LnRyaWdnZXIobyxpKX1lbHNlIHRoaXMuJGVsZW1lbnQudHJpZ2dlcih0LGkpfSxmLmlnbm9yZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEl0ZW0odCk7ZSYmKGUuaXNJZ25vcmVkPSEwKX0sZi51bmlnbm9yZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEl0ZW0odCk7ZSYmZGVsZXRlIGUuaXNJZ25vcmVkfSxmLnN0YW1wPWZ1bmN0aW9uKHQpe3Q9dGhpcy5fZmluZCh0KSx0JiYodGhpcy5zdGFtcHM9dGhpcy5zdGFtcHMuY29uY2F0KHQpLHQuZm9yRWFjaCh0aGlzLmlnbm9yZSx0aGlzKSl9LGYudW5zdGFtcD1mdW5jdGlvbih0KXt0PXRoaXMuX2ZpbmQodCksdCYmdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe24ucmVtb3ZlRnJvbSh0aGlzLnN0YW1wcyx0KSx0aGlzLnVuaWdub3JlKHQpfSx0aGlzKX0sZi5fZmluZD1mdW5jdGlvbih0KXtyZXR1cm4gdD8oXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHQpKSx0PW4ubWFrZUFycmF5KHQpKTp2b2lkIDB9LGYuX21hbmFnZVN0YW1wcz1mdW5jdGlvbigpe3RoaXMuc3RhbXBzJiZ0aGlzLnN0YW1wcy5sZW5ndGgmJih0aGlzLl9nZXRCb3VuZGluZ1JlY3QoKSx0aGlzLnN0YW1wcy5mb3JFYWNoKHRoaXMuX21hbmFnZVN0YW1wLHRoaXMpKX0sZi5fZ2V0Qm91bmRpbmdSZWN0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGU9dGhpcy5zaXplO3RoaXMuX2JvdW5kaW5nUmVjdD17bGVmdDp0LmxlZnQrZS5wYWRkaW5nTGVmdCtlLmJvcmRlckxlZnRXaWR0aCx0b3A6dC50b3ArZS5wYWRkaW5nVG9wK2UuYm9yZGVyVG9wV2lkdGgscmlnaHQ6dC5yaWdodC0oZS5wYWRkaW5nUmlnaHQrZS5ib3JkZXJSaWdodFdpZHRoKSxib3R0b206dC5ib3R0b20tKGUucGFkZGluZ0JvdHRvbStlLmJvcmRlckJvdHRvbVdpZHRoKX19LGYuX21hbmFnZVN0YW1wPWQsZi5fZ2V0RWxlbWVudE9mZnNldD1mdW5jdGlvbih0KXt2YXIgZT10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49dGhpcy5fYm91bmRpbmdSZWN0LG89aSh0KSxyPXtsZWZ0OmUubGVmdC1uLmxlZnQtby5tYXJnaW5MZWZ0LHRvcDplLnRvcC1uLnRvcC1vLm1hcmdpblRvcCxyaWdodDpuLnJpZ2h0LWUucmlnaHQtby5tYXJnaW5SaWdodCxib3R0b206bi5ib3R0b20tZS5ib3R0b20tby5tYXJnaW5Cb3R0b219O3JldHVybiByfSxmLmhhbmRsZUV2ZW50PW4uaGFuZGxlRXZlbnQsZi5iaW5kUmVzaXplPWZ1bmN0aW9uKCl7dC5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcyksdGhpcy5pc1Jlc2l6ZUJvdW5kPSEwfSxmLnVuYmluZFJlc2l6ZT1mdW5jdGlvbigpe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMpLHRoaXMuaXNSZXNpemVCb3VuZD0hMX0sZi5vbnJlc2l6ZT1mdW5jdGlvbigpe3RoaXMucmVzaXplKCl9LG4uZGVib3VuY2VNZXRob2QocixcIm9ucmVzaXplXCIsMTAwKSxmLnJlc2l6ZT1mdW5jdGlvbigpe3RoaXMuaXNSZXNpemVCb3VuZCYmdGhpcy5uZWVkc1Jlc2l6ZUxheW91dCgpJiZ0aGlzLmxheW91dCgpfSxmLm5lZWRzUmVzaXplTGF5b3V0PWZ1bmN0aW9uKCl7dmFyIHQ9aSh0aGlzLmVsZW1lbnQpLGU9dGhpcy5zaXplJiZ0O3JldHVybiBlJiZ0LmlubmVyV2lkdGghPT10aGlzLnNpemUuaW5uZXJXaWR0aH0sZi5hZGRJdGVtcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9pdGVtaXplKHQpO3JldHVybiBlLmxlbmd0aCYmKHRoaXMuaXRlbXM9dGhpcy5pdGVtcy5jb25jYXQoZSkpLGV9LGYuYXBwZW5kZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hZGRJdGVtcyh0KTtlLmxlbmd0aCYmKHRoaXMubGF5b3V0SXRlbXMoZSwhMCksdGhpcy5yZXZlYWwoZSkpfSxmLnByZXBlbmRlZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9pdGVtaXplKHQpO2lmKGUubGVuZ3RoKXt2YXIgaT10aGlzLml0ZW1zLnNsaWNlKDApO3RoaXMuaXRlbXM9ZS5jb25jYXQoaSksdGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKSx0aGlzLmxheW91dEl0ZW1zKGUsITApLHRoaXMucmV2ZWFsKGUpLHRoaXMubGF5b3V0SXRlbXMoaSl9fSxmLnJldmVhbD1mdW5jdGlvbih0KXtpZih0aGlzLl9lbWl0Q29tcGxldGVPbkl0ZW1zKFwicmV2ZWFsXCIsdCksdCYmdC5sZW5ndGgpe3ZhciBlPXRoaXMudXBkYXRlU3RhZ2dlcigpO3QuZm9yRWFjaChmdW5jdGlvbih0LGkpe3Quc3RhZ2dlcihpKmUpLHQucmV2ZWFsKCl9KX19LGYuaGlkZT1mdW5jdGlvbih0KXtpZih0aGlzLl9lbWl0Q29tcGxldGVPbkl0ZW1zKFwiaGlkZVwiLHQpLHQmJnQubGVuZ3RoKXt2YXIgZT10aGlzLnVwZGF0ZVN0YWdnZXIoKTt0LmZvckVhY2goZnVuY3Rpb24odCxpKXt0LnN0YWdnZXIoaSplKSx0LmhpZGUoKX0pfX0sZi5yZXZlYWxJdGVtRWxlbWVudHM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRJdGVtcyh0KTt0aGlzLnJldmVhbChlKX0sZi5oaWRlSXRlbUVsZW1lbnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SXRlbXModCk7dGhpcy5oaWRlKGUpfSxmLmdldEl0ZW09ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLml0ZW1zLmxlbmd0aDtlKyspe3ZhciBpPXRoaXMuaXRlbXNbZV07aWYoaS5lbGVtZW50PT10KXJldHVybiBpfX0sZi5nZXRJdGVtcz1mdW5jdGlvbih0KXt0PW4ubWFrZUFycmF5KHQpO3ZhciBlPVtdO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5nZXRJdGVtKHQpO2kmJmUucHVzaChpKX0sdGhpcyksZX0sZi5yZW1vdmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRJdGVtcyh0KTt0aGlzLl9lbWl0Q29tcGxldGVPbkl0ZW1zKFwicmVtb3ZlXCIsZSksZSYmZS5sZW5ndGgmJmUuZm9yRWFjaChmdW5jdGlvbih0KXt0LnJlbW92ZSgpLG4ucmVtb3ZlRnJvbSh0aGlzLml0ZW1zLHQpfSx0aGlzKX0sZi5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LnN0eWxlO3QuaGVpZ2h0PVwiXCIsdC5wb3NpdGlvbj1cIlwiLHQud2lkdGg9XCJcIix0aGlzLml0ZW1zLmZvckVhY2goZnVuY3Rpb24odCl7dC5kZXN0cm95KCl9KSx0aGlzLnVuYmluZFJlc2l6ZSgpO3ZhciBlPXRoaXMuZWxlbWVudC5vdXRsYXllckdVSUQ7ZGVsZXRlIGNbZV0sZGVsZXRlIHRoaXMuZWxlbWVudC5vdXRsYXllckdVSUQsdSYmdS5yZW1vdmVEYXRhKHRoaXMuZWxlbWVudCx0aGlzLmNvbnN0cnVjdG9yLm5hbWVzcGFjZSl9LHIuZGF0YT1mdW5jdGlvbih0KXt0PW4uZ2V0UXVlcnlFbGVtZW50KHQpO3ZhciBlPXQmJnQub3V0bGF5ZXJHVUlEO3JldHVybiBlJiZjW2VdfSxyLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3ZhciBpPXMocik7cmV0dXJuIGkuZGVmYXVsdHM9bi5leHRlbmQoe30sci5kZWZhdWx0cyksbi5leHRlbmQoaS5kZWZhdWx0cyxlKSxpLmNvbXBhdE9wdGlvbnM9bi5leHRlbmQoe30sci5jb21wYXRPcHRpb25zKSxpLm5hbWVzcGFjZT10LGkuZGF0YT1yLmRhdGEsaS5JdGVtPXMobyksbi5odG1sSW5pdChpLHQpLHUmJnUuYnJpZGdldCYmdS5icmlkZ2V0KHQsaSksaX07dmFyIG09e21zOjEsczoxZTN9O3JldHVybiByLkl0ZW09byxyfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcIm91dGxheWVyL291dGxheWVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJvdXRsYXllclwiKSxyZXF1aXJlKFwiZ2V0LXNpemVcIikpOnQuTWFzb25yeT1lKHQuT3V0bGF5ZXIsdC5nZXRTaXplKX0od2luZG93LGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5jcmVhdGUoXCJtYXNvbnJ5XCIpO3JldHVybiBpLmNvbXBhdE9wdGlvbnMuZml0V2lkdGg9XCJpc0ZpdFdpZHRoXCIsaS5wcm90b3R5cGUuX3Jlc2V0TGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5nZXRTaXplKCksdGhpcy5fZ2V0TWVhc3VyZW1lbnQoXCJjb2x1bW5XaWR0aFwiLFwib3V0ZXJXaWR0aFwiKSx0aGlzLl9nZXRNZWFzdXJlbWVudChcImd1dHRlclwiLFwib3V0ZXJXaWR0aFwiKSx0aGlzLm1lYXN1cmVDb2x1bW5zKCksdGhpcy5jb2xZcz1bXTtmb3IodmFyIHQ9MDt0PHRoaXMuY29sczt0KyspdGhpcy5jb2xZcy5wdXNoKDApO3RoaXMubWF4WT0wfSxpLnByb3RvdHlwZS5tZWFzdXJlQ29sdW1ucz1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0Q29udGFpbmVyV2lkdGgoKSwhdGhpcy5jb2x1bW5XaWR0aCl7dmFyIHQ9dGhpcy5pdGVtc1swXSxpPXQmJnQuZWxlbWVudDt0aGlzLmNvbHVtbldpZHRoPWkmJmUoaSkub3V0ZXJXaWR0aHx8dGhpcy5jb250YWluZXJXaWR0aH12YXIgbj10aGlzLmNvbHVtbldpZHRoKz10aGlzLmd1dHRlcixvPXRoaXMuY29udGFpbmVyV2lkdGgrdGhpcy5ndXR0ZXIscj1vL24scz1uLW8lbixhPXMmJjE+cz9cInJvdW5kXCI6XCJmbG9vclwiO3I9TWF0aFthXShyKSx0aGlzLmNvbHM9TWF0aC5tYXgociwxKX0saS5wcm90b3R5cGUuZ2V0Q29udGFpbmVyV2lkdGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9nZXRPcHRpb24oXCJmaXRXaWR0aFwiKSxpPXQ/dGhpcy5lbGVtZW50LnBhcmVudE5vZGU6dGhpcy5lbGVtZW50LG49ZShpKTt0aGlzLmNvbnRhaW5lcldpZHRoPW4mJm4uaW5uZXJXaWR0aH0saS5wcm90b3R5cGUuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbj1mdW5jdGlvbih0KXt0LmdldFNpemUoKTt2YXIgZT10LnNpemUub3V0ZXJXaWR0aCV0aGlzLmNvbHVtbldpZHRoLGk9ZSYmMT5lP1wicm91bmRcIjpcImNlaWxcIixuPU1hdGhbaV0odC5zaXplLm91dGVyV2lkdGgvdGhpcy5jb2x1bW5XaWR0aCk7bj1NYXRoLm1pbihuLHRoaXMuY29scyk7Zm9yKHZhciBvPXRoaXMuX2dldENvbEdyb3VwKG4pLHI9TWF0aC5taW4uYXBwbHkoTWF0aCxvKSxzPW8uaW5kZXhPZihyKSxhPXt4OnRoaXMuY29sdW1uV2lkdGgqcyx5OnJ9LGg9cit0LnNpemUub3V0ZXJIZWlnaHQsdT10aGlzLmNvbHMrMS1vLmxlbmd0aCxkPTA7dT5kO2QrKyl0aGlzLmNvbFlzW3MrZF09aDtyZXR1cm4gYX0saS5wcm90b3R5cGUuX2dldENvbEdyb3VwPWZ1bmN0aW9uKHQpe2lmKDI+dClyZXR1cm4gdGhpcy5jb2xZcztmb3IodmFyIGU9W10saT10aGlzLmNvbHMrMS10LG49MDtpPm47bisrKXt2YXIgbz10aGlzLmNvbFlzLnNsaWNlKG4sbit0KTtlW25dPU1hdGgubWF4LmFwcGx5KE1hdGgsbyl9cmV0dXJuIGV9LGkucHJvdG90eXBlLl9tYW5hZ2VTdGFtcD1mdW5jdGlvbih0KXt2YXIgaT1lKHQpLG49dGhpcy5fZ2V0RWxlbWVudE9mZnNldCh0KSxvPXRoaXMuX2dldE9wdGlvbihcIm9yaWdpbkxlZnRcIikscj1vP24ubGVmdDpuLnJpZ2h0LHM9citpLm91dGVyV2lkdGgsYT1NYXRoLmZsb29yKHIvdGhpcy5jb2x1bW5XaWR0aCk7YT1NYXRoLm1heCgwLGEpO3ZhciBoPU1hdGguZmxvb3Iocy90aGlzLmNvbHVtbldpZHRoKTtoLT1zJXRoaXMuY29sdW1uV2lkdGg/MDoxLGg9TWF0aC5taW4odGhpcy5jb2xzLTEsaCk7Zm9yKHZhciB1PXRoaXMuX2dldE9wdGlvbihcIm9yaWdpblRvcFwiKSxkPSh1P24udG9wOm4uYm90dG9tKStpLm91dGVySGVpZ2h0LGw9YTtoPj1sO2wrKyl0aGlzLmNvbFlzW2xdPU1hdGgubWF4KGQsdGhpcy5jb2xZc1tsXSl9LGkucHJvdG90eXBlLl9nZXRDb250YWluZXJTaXplPWZ1bmN0aW9uKCl7dGhpcy5tYXhZPU1hdGgubWF4LmFwcGx5KE1hdGgsdGhpcy5jb2xZcyk7dmFyIHQ9e2hlaWdodDp0aGlzLm1heFl9O3JldHVybiB0aGlzLl9nZXRPcHRpb24oXCJmaXRXaWR0aFwiKSYmKHQud2lkdGg9dGhpcy5fZ2V0Q29udGFpbmVyRml0V2lkdGgoKSksdH0saS5wcm90b3R5cGUuX2dldENvbnRhaW5lckZpdFdpZHRoPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmNvbHM7LS1lJiYwPT09dGhpcy5jb2xZc1tlXTspdCsrO3JldHVybih0aGlzLmNvbHMtdCkqdGhpcy5jb2x1bW5XaWR0aC10aGlzLmd1dHRlcn0saS5wcm90b3R5cGUubmVlZHNSZXNpemVMYXlvdXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvbnRhaW5lcldpZHRoO3JldHVybiB0aGlzLmdldENvbnRhaW5lcldpZHRoKCksdCE9dGhpcy5jb250YWluZXJXaWR0aH0saX0pOyJdLCJmaWxlIjoibWFzb25yeS5wa2dkLm1pbi5qcyJ9
;
/*!
 * Isotope PACKAGED v3.0.1
 *
 * Licensed GPLv3 for open source use
 * or Isotope Commercial License for commercial use
 *
 * http://isotope.metafizzy.co
 * Copyright 2016 Metafizzy
 */

!function(t,e){"use strict";"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,s,a){function u(t,e,n){var o,s="$()."+i+'("'+e+'")';return t.each(function(t,u){var h=a.data(u,i);if(!h)return void r(i+" not initialized. Cannot call methods, i.e. "+s);var d=h[e];if(!d||"_"==e.charAt(0))return void r(s+" is not a valid method");var l=d.apply(h,n);o=void 0===o?l:o}),void 0!==o?o:t}function h(t,e){t.each(function(t,n){var o=a.data(n,i);o?(o.option(e),o._init()):(o=new s(n,e),a.data(n,i,o))})}a=a||e||t.jQuery,a&&(s.prototype.option||(s.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"==typeof t){var e=o.call(arguments,1);return u(this,t,e)}return h(this,t),this},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var o=Array.prototype.slice,s=t.console,r="undefined"==typeof s?function(){}:function(t){s.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||{};return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var s=this._onceEvents&&this._onceEvents[t];o;){var r=s&&s[o];r&&(this.off(t,o),delete s[o]),o.apply(this,e),n+=r?0:1,o=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t),i=-1==t.indexOf("%")&&!isNaN(e);return i&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;h>e;e++){var i=u[e];t[i]=0}return t}function n(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),e}function o(){if(!d){d=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var o=n(e);s.isBoxSizeOuter=r=200==t(o.width),i.removeChild(e)}}function s(e){if(o(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var s=n(e);if("none"==s.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var d=a.isBorderBox="border-box"==s.boxSizing,l=0;h>l;l++){var f=u[l],c=s[f],m=parseFloat(c);a[f]=isNaN(m)?0:m}var p=a.paddingLeft+a.paddingRight,y=a.paddingTop+a.paddingBottom,g=a.marginLeft+a.marginRight,v=a.marginTop+a.marginBottom,_=a.borderLeftWidth+a.borderRightWidth,I=a.borderTopWidth+a.borderBottomWidth,z=d&&r,x=t(s.width);x!==!1&&(a.width=x+(z?0:p+_));var S=t(s.height);return S!==!1&&(a.height=S+(z?0:y+I)),a.innerWidth=a.width-(p+_),a.innerHeight=a.height-(y+I),a.outerWidth=a.width+g,a.outerHeight=a.height+v,a}}var r,a="undefined"==typeof console?e:function(t){console.error(t)},u=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],h=u.length,d=!1;return s}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i],o=n+"MatchesSelector";if(t[o])return o}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e},i.makeArray=function(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!n)return void o.push(t);e(t,n)&&o.push(t);for(var i=t.querySelectorAll(n),s=0;s<i.length;s++)o.push(i[s])}}),o},i.debounceMethod=function(t,e,i){var n=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];t&&clearTimeout(t);var e=arguments,s=this;this[o]=setTimeout(function(){n.apply(s,e),delete s[o]},i||100)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?t():document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var n=t.console;return i.htmlInit=function(e,o){i.docReady(function(){var s=i.toDashed(o),r="data-"+s,a=document.querySelectorAll("["+r+"]"),u=document.querySelectorAll(".js-"+s),h=i.makeArray(a).concat(i.makeArray(u)),d=r+"-options",l=t.jQuery;h.forEach(function(t){var i,s=t.getAttribute(r)||t.getAttribute(d);try{i=s&&JSON.parse(s)}catch(a){return void(n&&n.error("Error parsing "+r+" on "+t.className+": "+a))}var u=new e(t,i);l&&l.data(t,o,u)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";function i(t){for(var e in t)return!1;return e=null,!0}function n(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}function o(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}var s=document.documentElement.style,r="string"==typeof s.transition?"transition":"WebkitTransition",a="string"==typeof s.transform?"transform":"WebkitTransform",u={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],h={transform:a,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"},d=n.prototype=Object.create(t.prototype);d.constructor=n,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},d.getSize=function(){this.size=e(this.element)},d.css=function(t){var e=this.element.style;for(var i in t){var n=h[i]||i;e[n]=t[i]}},d.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],o=t[i?"top":"bottom"],s=this.layout.size,r=-1!=n.indexOf("%")?parseFloat(n)/100*s.width:parseInt(n,10),a=-1!=o.indexOf("%")?parseFloat(o)/100*s.height:parseInt(o,10);r=isNaN(r)?0:r,a=isNaN(a)?0:a,r-=e?s.paddingLeft:s.paddingRight,a-=i?s.paddingTop:s.paddingBottom,this.position.x=r,this.position.y=a},d.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"paddingLeft":"paddingRight",s=i?"left":"right",r=i?"right":"left",a=this.position.x+t[o];e[s]=this.getXValue(a),e[r]="";var u=n?"paddingTop":"paddingBottom",h=n?"top":"bottom",d=n?"bottom":"top",l=this.position.y+t[u];e[h]=this.getYValue(l),e[d]="",this.css(e),this.emitEvent("layout",[this])},d.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},d.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},d._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(t,10),s=parseInt(e,10),r=o===this.position.x&&s===this.position.y;if(this.setPosition(t,e),r&&!this.isTransitioning)return void this.layoutPosition();var a=t-i,u=e-n,h={};h.transform=this.getTranslate(a,u),this.transition({to:h,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},d.getTranslate=function(t,e){var i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop");return t=i?t:-t,e=n?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},d.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},d._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},d.transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var n=this.element.offsetHeight;n=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var l="opacity,"+o(a);d.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:l,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(u,this,!1)}},d.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},d.onotransitionend=function(t){this.ontransitionend(t)};var f={"-webkit-transform":"transform"};d.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=f[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){var o=e.onEnd[n];o.call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(u,this,!1),this.isTransitioning=!1},d._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var c={transitionProperty:"",transitionDuration:"",transitionDelay:""};return d.removeTransitionStyles=function(){this.css(c)},d.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){return r&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},d.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("visibleStyle");e[i]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},d.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("hiddenStyle");e[i]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,n,o,s){return e(t,i,n,o,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,i,n,o){"use strict";function s(t,e){var i=n.getQueryElement(t);if(!i)return void(u&&u.error("Bad element for "+this.constructor.namespace+": "+(i||t)));this.element=i,h&&(this.$element=h(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e);var o=++l;this.element.outlayerGUID=o,f[o]=this,this._create();var s=this._getOption("initLayout");s&&this.layout()}function r(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function a(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],n=e&&e[2];if(!i.length)return 0;i=parseFloat(i);var o=m[n]||1;return i*o}var u=t.console,h=t.jQuery,d=function(){},l=0,f={};s.namespace="outlayer",s.Item=o,s.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var c=s.prototype;n.extend(c,e.prototype),c.option=function(t){n.extend(this.options,t)},c._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},s.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},c._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle);var t=this._getOption("resize");t&&this.bindResize()},c.reloadItems=function(){this.items=this._itemize(this.element.children)},c._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0;o<e.length;o++){var s=e[o],r=new i(s,this);n.push(r)}return n},c._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},c.getItemElements=function(){return this.items.map(function(t){return t.element})},c.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},c._init=c.layout,c._resetLayout=function(){this.getSize()},c.getSize=function(){this.size=i(this.element)},c._getMeasurement=function(t,e){var n,o=this.options[t];o?("string"==typeof o?n=this.element.querySelector(o):o instanceof HTMLElement&&(n=o),this[t]=n?i(n)[e]:o):this[t]=0},c.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},c._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},c._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach(function(t){var n=this._getItemLayoutPosition(t);n.item=t,n.isInstant=e||t.isLayoutInstant,i.push(n)},this),this._processLayoutQueue(i)}},c._getItemLayoutPosition=function(){return{x:0,y:0}},c._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},c.updateStagger=function(){var t=this.options.stagger;return null===t||void 0===t?void(this.stagger=0):(this.stagger=a(t),this.stagger)},c._positionItem=function(t,e,i,n,o){n?t.goTo(e,i):(t.stagger(o*this.stagger),t.moveTo(e,i))},c._postLayout=function(){this.resizeContainer()},c.resizeContainer=function(){var t=this._getOption("resizeContainer");if(t){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},c._getContainerSize=d,c._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},c._emitCompleteOnItems=function(t,e){function i(){o.dispatchEvent(t+"Complete",null,[e])}function n(){r++,r==s&&i()}var o=this,s=e.length;if(!e||!s)return void i();var r=0;e.forEach(function(e){e.once(t,n)})},c.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),h)if(this.$element=this.$element||h(this.element),e){var o=h.Event(e);o.type=t,this.$element.trigger(o,i)}else this.$element.trigger(t,i)},c.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},c.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},c.stamp=function(t){t=this._find(t),t&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},c.unstamp=function(t){t=this._find(t),t&&t.forEach(function(t){n.removeFrom(this.stamps,t),this.unignore(t)},this)},c._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)):void 0},c._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},c._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},c._manageStamp=d,c._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,o=i(t),s={left:e.left-n.left-o.marginLeft,top:e.top-n.top-o.marginTop,right:n.right-e.right-o.marginRight,bottom:n.bottom-e.bottom-o.marginBottom};return s},c.handleEvent=n.handleEvent,c.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},c.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},c.onresize=function(){this.resize()},n.debounceMethod(s,"onresize",100),c.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},c.needsResizeLayout=function(){var t=i(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},c.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},c.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},c.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},c.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.reveal()})}},c.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.hide()})}},c.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},c.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},c.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},c.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getItem(t);i&&e.push(i)},this),e},c.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),n.removeFrom(this.items,t)},this)},c.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete f[e],delete this.element.outlayerGUID,h&&h.removeData(this.element,this.constructor.namespace)},s.data=function(t){t=n.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&f[e]},s.create=function(t,e){var i=r(s);return i.defaults=n.extend({},s.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},s.compatOptions),i.namespace=t,i.data=s.data,i.Item=r(o),n.htmlInit(i,t),h&&h.bridget&&h.bridget(t,i),i};var m={ms:1,s:1e3};return s.Item=o,s}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window,function(t){"use strict";function e(){t.Item.apply(this,arguments)}var i=e.prototype=Object.create(t.Item.prototype),n=i._create;i._create=function(){this.id=this.layout.itemGUID++,n.call(this),this.sortData={}},i.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t=this.layout.options.getSortData,e=this.layout._sorters;for(var i in t){var n=e[i];this.sortData[i]=n(this.element,this)}}};var o=i.destroy;return i.destroy=function(){o.apply(this,arguments),this.css({display:""})},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("get-size"),require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window,function(t,e){"use strict";function i(t){this.isotope=t,t&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}var n=i.prototype,o=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"];return o.forEach(function(t){n[t]=function(){return e.prototype[t].apply(this.isotope,arguments)}}),n.needsVerticalResizeLayout=function(){var e=t(this.isotope.element),i=this.isotope.size&&e;return i&&e.innerHeight!=this.isotope.size.innerHeight},n._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},n.getColumnWidth=function(){this.getSegmentSize("column","Width")},n.getRowHeight=function(){this.getSegmentSize("row","Height")},n.getSegmentSize=function(t,e){var i=t+e,n="outer"+e;if(this._getMeasurement(i,n),!this[i]){var o=this.getFirstItemSize();this[i]=o&&o[n]||this.isotope.size["inner"+e]}},n.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},n.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},n.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},i.modes={},i.create=function(t,e){function o(){i.apply(this,arguments)}return o.prototype=Object.create(n),o.prototype.constructor=o,e&&(o.options=e),o.prototype.namespace=t,i.modes[t]=o,o},i}),function(t,e){"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,e){var i=t.create("masonry");return i.compatOptions.fitWidth="isFitWidth",i.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0},i.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,o=this.containerWidth+this.gutter,s=o/n,r=n-o%n,a=r&&1>r?"round":"floor";s=Math[a](s),this.cols=Math.max(s,1)},i.prototype.getContainerWidth=function(){var t=this._getOption("fitWidth"),i=t?this.element.parentNode:this.element,n=e(i);this.containerWidth=n&&n.innerWidth},i.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=e&&1>e?"round":"ceil",n=Math[i](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var o=this._getColGroup(n),s=Math.min.apply(Math,o),r=o.indexOf(s),a={x:this.columnWidth*r,y:s},u=s+t.size.outerHeight,h=this.cols+1-o.length,d=0;h>d;d++)this.colYs[r+d]=u;return a},i.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++){var o=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,o)}return e},i.prototype._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),o=this._getOption("originLeft"),s=o?n.left:n.right,r=s+i.outerWidth,a=Math.floor(s/this.columnWidth);a=Math.max(0,a);var u=Math.floor(r/this.columnWidth);u-=r%this.columnWidth?0:1,u=Math.min(this.cols-1,u);for(var h=this._getOption("originTop"),d=(h?n.top:n.bottom)+i.outerHeight,l=a;u>=l;l++)this.colYs[l]=Math.max(d,this.colYs[l])},i.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},i.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},i.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode"),require("masonry-layout")):e(t.Isotope.LayoutMode,t.Masonry)}(window,function(t,e){"use strict";var i=t.create("masonry"),n=i.prototype,o={_getElementOffset:!0,layout:!0,_getMeasurement:!0};for(var s in e.prototype)o[s]||(n[s]=e.prototype[s]);var r=n.measureColumns;n.measureColumns=function(){this.items=this.isotope.filteredItems,r.call(this)};var a=n._getOption;return n._getOption=function(t){return"fitWidth"==t?void 0!==this.options.isFitWidth?this.options.isFitWidth:this.options.fitWidth:a.apply(this.isotope,arguments)},i}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){"use strict";var e=t.create("fitRows"),i=e.prototype;return i._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},i._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth+this.gutter,i=this.isotope.size.innerWidth+this.gutter;0!==this.x&&e+this.x>i&&(this.x=0,this.y=this.maxY);var n={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=e,n},i._getContainerSize=function(){return{height:this.maxY}},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){"use strict";var e=t.create("vertical",{horizontalAlignment:0}),i=e.prototype;return i._resetLayout=function(){this.y=0},i._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},i._getContainerSize=function(){return{height:this.y}},e}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","desandro-matches-selector/matches-selector","fizzy-ui-utils/utils","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],function(i,n,o,s,r,a){return e(t,i,n,o,s,r,a)}):"object"==typeof module&&module.exports?module.exports=e(t,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("isotope/js/item"),require("isotope/js/layout-mode"),require("isotope/js/layout-modes/masonry"),require("isotope/js/layout-modes/fit-rows"),require("isotope/js/layout-modes/vertical")):t.Isotope=e(t,t.Outlayer,t.getSize,t.matchesSelector,t.fizzyUIUtils,t.Isotope.Item,t.Isotope.LayoutMode)}(window,function(t,e,i,n,o,s,r){function a(t,e){return function(i,n){for(var o=0;o<t.length;o++){var s=t[o],r=i.sortData[s],a=n.sortData[s];if(r>a||a>r){var u=void 0!==e[s]?e[s]:e,h=u?1:-1;return(r>a?1:-1)*h}}return 0}}var u=t.jQuery,h=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},d=e.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});d.Item=s,d.LayoutMode=r;var l=d.prototype;l._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),e.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var t in r.modes)this._initLayoutMode(t)},l.reloadItems=function(){this.itemGUID=0,e.prototype.reloadItems.call(this)},l._itemize=function(){for(var t=e.prototype._itemize.apply(this,arguments),i=0;i<t.length;i++){var n=t[i];n.id=this.itemGUID++}return this._updateItemsSortData(t),t},l._initLayoutMode=function(t){var e=r.modes[t],i=this.options[t]||{};this.options[t]=e.options?o.extend(e.options,i):i,this.modes[t]=new e(this)},l.layout=function(){return!this._isLayoutInited&&this._getOption("initLayout")?void this.arrange():void this._layout()},l._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},l.arrange=function(t){this.option(t),this._getIsInstant();var e=this._filter(this.items);this.filteredItems=e.matches,this._bindArrangeComplete(),this._isInstant?this._noTransition(this._hideReveal,[e]):this._hideReveal(e),this._sort(),this._layout()},l._init=l.arrange,l._hideReveal=function(t){this.reveal(t.needReveal),this.hide(t.needHide)},l._getIsInstant=function(){var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;return this._isInstant=e,e},l._bindArrangeComplete=function(){function t(){e&&i&&n&&o.dispatchEvent("arrangeComplete",null,[o.filteredItems])}var e,i,n,o=this;this.once("layoutComplete",function(){e=!0,t()}),this.once("hideComplete",function(){i=!0,t()}),this.once("revealComplete",function(){n=!0,t()})},l._filter=function(t){var e=this.options.filter;e=e||"*";for(var i=[],n=[],o=[],s=this._getFilterTest(e),r=0;r<t.length;r++){var a=t[r];if(!a.isIgnored){var u=s(a);u&&i.push(a),u&&a.isHidden?n.push(a):u||a.isHidden||o.push(a)}}return{matches:i,needReveal:n,needHide:o}},l._getFilterTest=function(t){return u&&this.options.isJQueryFiltering?function(e){return u(e.element).is(t)}:"function"==typeof t?function(e){return t(e.element)}:function(e){return n(e.element,t)}},l.updateSortData=function(t){var e;t?(t=o.makeArray(t),e=this.getItems(t)):e=this.items,this._getSorters(),this._updateItemsSortData(e)},l._getSorters=function(){var t=this.options.getSortData;for(var e in t){var i=t[e];this._sorters[e]=f(i)}},l._updateItemsSortData=function(t){for(var e=t&&t.length,i=0;e&&e>i;i++){var n=t[i];n.updateSortData()}};var f=function(){function t(t){if("string"!=typeof t)return t;var i=h(t).split(" "),n=i[0],o=n.match(/^\[(.+)\]$/),s=o&&o[1],r=e(s,n),a=d.sortDataParsers[i[1]];
return t=a?function(t){return t&&a(r(t))}:function(t){return t&&r(t)}}function e(t,e){return t?function(e){return e.getAttribute(t)}:function(t){var i=t.querySelector(e);return i&&i.textContent}}return t}();d.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},l._sort=function(){var t=this.options.sortBy;if(t){var e=[].concat.apply(t,this.sortHistory),i=a(e,this.options.sortAscending);this.filteredItems.sort(i),t!=this.sortHistory[0]&&this.sortHistory.unshift(t)}},l._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw new Error("No layout mode: "+t);return e.options=this.options[t],e},l._resetLayout=function(){e.prototype._resetLayout.call(this),this._mode()._resetLayout()},l._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},l._manageStamp=function(t){this._mode()._manageStamp(t)},l._getContainerSize=function(){return this._mode()._getContainerSize()},l.needsResizeLayout=function(){return this._mode().needsResizeLayout()},l.appended=function(t){var e=this.addItems(t);if(e.length){var i=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(i)}},l.prepended=function(t){var e=this._itemize(t);if(e.length){this._resetLayout(),this._manageStamps();var i=this._filterRevealAdded(e);this.layoutItems(this.filteredItems),this.filteredItems=i.concat(this.filteredItems),this.items=e.concat(this.items)}},l._filterRevealAdded=function(t){var e=this._filter(t);return this.hide(e.needHide),this.reveal(e.matches),this.layoutItems(e.matches,!0),e.matches},l.insert=function(t){var e=this.addItems(t);if(e.length){var i,n,o=e.length;for(i=0;o>i;i++)n=e[i],this.element.appendChild(n.element);var s=this._filter(e).matches;for(i=0;o>i;i++)e[i].isLayoutInstant=!0;for(this.arrange(),i=0;o>i;i++)delete e[i].isLayoutInstant;this.reveal(s)}};var c=l.remove;return l.remove=function(t){t=o.makeArray(t);var e=this.getItems(t);c.call(this,t);for(var i=e&&e.length,n=0;i&&i>n;n++){var s=e[n];o.removeFrom(this.filteredItems,s)}},l.shuffle=function(){for(var t=0;t<this.items.length;t++){var e=this.items[t];e.sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},l._noTransition=function(t,e){var i=this.options.transitionDuration;this.options.transitionDuration=0;var n=t.apply(this,e);return this.options.transitionDuration=i,n},l.getFilteredItemElements=function(){return this.filteredItems.map(function(t){return t.element})},d});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJpc290b3BlLnBrZ2QubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogSXNvdG9wZSBQQUNLQUdFRCB2My4wLjFcbiAqXG4gKiBMaWNlbnNlZCBHUEx2MyBmb3Igb3BlbiBzb3VyY2UgdXNlXG4gKiBvciBJc290b3BlIENvbW1lcmNpYWwgTGljZW5zZSBmb3IgY29tbWVyY2lhbCB1c2VcbiAqXG4gKiBodHRwOi8vaXNvdG9wZS5tZXRhZml6enkuY29cbiAqIENvcHlyaWdodCAyMDE2IE1ldGFmaXp6eVxuICovXG5cbiFmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJqcXVlcnktYnJpZGdldC9qcXVlcnktYnJpZGdldFwiLFtcImpxdWVyeVwiXSxmdW5jdGlvbihpKXtlKHQsaSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcImpxdWVyeVwiKSk6dC5qUXVlcnlCcmlkZ2V0PWUodCx0LmpRdWVyeSl9KHdpbmRvdyxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoaSxzLGEpe2Z1bmN0aW9uIHUodCxlLG4pe3ZhciBvLHM9XCIkKCkuXCIraSsnKFwiJytlKydcIiknO3JldHVybiB0LmVhY2goZnVuY3Rpb24odCx1KXt2YXIgaD1hLmRhdGEodSxpKTtpZighaClyZXR1cm4gdm9pZCByKGkrXCIgbm90IGluaXRpYWxpemVkLiBDYW5ub3QgY2FsbCBtZXRob2RzLCBpLmUuIFwiK3MpO3ZhciBkPWhbZV07aWYoIWR8fFwiX1wiPT1lLmNoYXJBdCgwKSlyZXR1cm4gdm9pZCByKHMrXCIgaXMgbm90IGEgdmFsaWQgbWV0aG9kXCIpO3ZhciBsPWQuYXBwbHkoaCxuKTtvPXZvaWQgMD09PW8/bDpvfSksdm9pZCAwIT09bz9vOnR9ZnVuY3Rpb24gaCh0LGUpe3QuZWFjaChmdW5jdGlvbih0LG4pe3ZhciBvPWEuZGF0YShuLGkpO28/KG8ub3B0aW9uKGUpLG8uX2luaXQoKSk6KG89bmV3IHMobixlKSxhLmRhdGEobixpLG8pKX0pfWE9YXx8ZXx8dC5qUXVlcnksYSYmKHMucHJvdG90eXBlLm9wdGlvbnx8KHMucHJvdG90eXBlLm9wdGlvbj1mdW5jdGlvbih0KXthLmlzUGxhaW5PYmplY3QodCkmJih0aGlzLm9wdGlvbnM9YS5leHRlbmQoITAsdGhpcy5vcHRpb25zLHQpKX0pLGEuZm5baV09ZnVuY3Rpb24odCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe3ZhciBlPW8uY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHUodGhpcyx0LGUpfXJldHVybiBoKHRoaXMsdCksdGhpc30sbihhKSl9ZnVuY3Rpb24gbih0KXshdHx8dCYmdC5icmlkZ2V0fHwodC5icmlkZ2V0PWkpfXZhciBvPUFycmF5LnByb3RvdHlwZS5zbGljZSxzPXQuY29uc29sZSxyPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBzP2Z1bmN0aW9uKCl7fTpmdW5jdGlvbih0KXtzLmVycm9yKHQpfTtyZXR1cm4gbihlfHx0LmpRdWVyeSksaX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImV2LWVtaXR0ZXIvZXYtZW1pdHRlclwiLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWUoKTp0LkV2RW1pdHRlcj1lKCl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXZhciBlPXQucHJvdG90eXBlO3JldHVybiBlLm9uPWZ1bmN0aW9uKHQsZSl7aWYodCYmZSl7dmFyIGk9dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sbj1pW3RdPWlbdF18fFtdO3JldHVybi0xPT1uLmluZGV4T2YoZSkmJm4ucHVzaChlKSx0aGlzfX0sZS5vbmNlPWZ1bmN0aW9uKHQsZSl7aWYodCYmZSl7dGhpcy5vbih0LGUpO3ZhciBpPXRoaXMuX29uY2VFdmVudHM9dGhpcy5fb25jZUV2ZW50c3x8e30sbj1pW3RdPWlbdF18fHt9O3JldHVybiBuW2VdPSEwLHRoaXN9fSxlLm9mZj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2V2ZW50cyYmdGhpcy5fZXZlbnRzW3RdO2lmKGkmJmkubGVuZ3RoKXt2YXIgbj1pLmluZGV4T2YoZSk7cmV0dXJuLTEhPW4mJmkuc3BsaWNlKG4sMSksdGhpc319LGUuZW1pdEV2ZW50PWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbdF07aWYoaSYmaS5sZW5ndGgpe3ZhciBuPTAsbz1pW25dO2U9ZXx8W107Zm9yKHZhciBzPXRoaXMuX29uY2VFdmVudHMmJnRoaXMuX29uY2VFdmVudHNbdF07bzspe3ZhciByPXMmJnNbb107ciYmKHRoaXMub2ZmKHQsbyksZGVsZXRlIHNbb10pLG8uYXBwbHkodGhpcyxlKSxuKz1yPzA6MSxvPWlbbl19cmV0dXJuIHRoaXN9fSx0fSksZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZ2V0LXNpemUvZ2V0LXNpemVcIixbXSxmdW5jdGlvbigpe3JldHVybiBlKCl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKCk6dC5nZXRTaXplPWUoKX0od2luZG93LGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0KXt2YXIgZT1wYXJzZUZsb2F0KHQpLGk9LTE9PXQuaW5kZXhPZihcIiVcIikmJiFpc05hTihlKTtyZXR1cm4gaSYmZX1mdW5jdGlvbiBlKCl7fWZ1bmN0aW9uIGkoKXtmb3IodmFyIHQ9e3dpZHRoOjAsaGVpZ2h0OjAsaW5uZXJXaWR0aDowLGlubmVySGVpZ2h0OjAsb3V0ZXJXaWR0aDowLG91dGVySGVpZ2h0OjB9LGU9MDtoPmU7ZSsrKXt2YXIgaT11W2VdO3RbaV09MH1yZXR1cm4gdH1mdW5jdGlvbiBuKHQpe3ZhciBlPWdldENvbXB1dGVkU3R5bGUodCk7cmV0dXJuIGV8fGEoXCJTdHlsZSByZXR1cm5lZCBcIitlK1wiLiBBcmUgeW91IHJ1bm5pbmcgdGhpcyBjb2RlIGluIGEgaGlkZGVuIGlmcmFtZSBvbiBGaXJlZm94PyBTZWUgaHR0cDovL2JpdC5seS9nZXRzaXplYnVnMVwiKSxlfWZ1bmN0aW9uIG8oKXtpZighZCl7ZD0hMDt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Uuc3R5bGUud2lkdGg9XCIyMDBweFwiLGUuc3R5bGUucGFkZGluZz1cIjFweCAycHggM3B4IDRweFwiLGUuc3R5bGUuYm9yZGVyU3R5bGU9XCJzb2xpZFwiLGUuc3R5bGUuYm9yZGVyV2lkdGg9XCIxcHggMnB4IDNweCA0cHhcIixlLnN0eWxlLmJveFNpemluZz1cImJvcmRlci1ib3hcIjt2YXIgaT1kb2N1bWVudC5ib2R5fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7aS5hcHBlbmRDaGlsZChlKTt2YXIgbz1uKGUpO3MuaXNCb3hTaXplT3V0ZXI9cj0yMDA9PXQoby53aWR0aCksaS5yZW1vdmVDaGlsZChlKX19ZnVuY3Rpb24gcyhlKXtpZihvKCksXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZSkpLGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLm5vZGVUeXBlKXt2YXIgcz1uKGUpO2lmKFwibm9uZVwiPT1zLmRpc3BsYXkpcmV0dXJuIGkoKTt2YXIgYT17fTthLndpZHRoPWUub2Zmc2V0V2lkdGgsYS5oZWlnaHQ9ZS5vZmZzZXRIZWlnaHQ7Zm9yKHZhciBkPWEuaXNCb3JkZXJCb3g9XCJib3JkZXItYm94XCI9PXMuYm94U2l6aW5nLGw9MDtoPmw7bCsrKXt2YXIgZj11W2xdLGM9c1tmXSxtPXBhcnNlRmxvYXQoYyk7YVtmXT1pc05hTihtKT8wOm19dmFyIHA9YS5wYWRkaW5nTGVmdCthLnBhZGRpbmdSaWdodCx5PWEucGFkZGluZ1RvcCthLnBhZGRpbmdCb3R0b20sZz1hLm1hcmdpbkxlZnQrYS5tYXJnaW5SaWdodCx2PWEubWFyZ2luVG9wK2EubWFyZ2luQm90dG9tLF89YS5ib3JkZXJMZWZ0V2lkdGgrYS5ib3JkZXJSaWdodFdpZHRoLEk9YS5ib3JkZXJUb3BXaWR0aCthLmJvcmRlckJvdHRvbVdpZHRoLHo9ZCYmcix4PXQocy53aWR0aCk7eCE9PSExJiYoYS53aWR0aD14Kyh6PzA6cCtfKSk7dmFyIFM9dChzLmhlaWdodCk7cmV0dXJuIFMhPT0hMSYmKGEuaGVpZ2h0PVMrKHo/MDp5K0kpKSxhLmlubmVyV2lkdGg9YS53aWR0aC0ocCtfKSxhLmlubmVySGVpZ2h0PWEuaGVpZ2h0LSh5K0kpLGEub3V0ZXJXaWR0aD1hLndpZHRoK2csYS5vdXRlckhlaWdodD1hLmhlaWdodCt2LGF9fXZhciByLGE9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGNvbnNvbGU/ZTpmdW5jdGlvbih0KXtjb25zb2xlLmVycm9yKHQpfSx1PVtcInBhZGRpbmdMZWZ0XCIsXCJwYWRkaW5nUmlnaHRcIixcInBhZGRpbmdUb3BcIixcInBhZGRpbmdCb3R0b21cIixcIm1hcmdpbkxlZnRcIixcIm1hcmdpblJpZ2h0XCIsXCJtYXJnaW5Ub3BcIixcIm1hcmdpbkJvdHRvbVwiLFwiYm9yZGVyTGVmdFdpZHRoXCIsXCJib3JkZXJSaWdodFdpZHRoXCIsXCJib3JkZXJUb3BXaWR0aFwiLFwiYm9yZGVyQm90dG9tV2lkdGhcIl0saD11Lmxlbmd0aCxkPSExO3JldHVybiBzfSksZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3Rvci9tYXRjaGVzLXNlbGVjdG9yXCIsZSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSgpOnQubWF0Y2hlc1NlbGVjdG9yPWUoKX0od2luZG93LGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQ9ZnVuY3Rpb24oKXt2YXIgdD1FbGVtZW50LnByb3RvdHlwZTtpZih0Lm1hdGNoZXMpcmV0dXJuXCJtYXRjaGVzXCI7aWYodC5tYXRjaGVzU2VsZWN0b3IpcmV0dXJuXCJtYXRjaGVzU2VsZWN0b3JcIjtmb3IodmFyIGU9W1wid2Via2l0XCIsXCJtb3pcIixcIm1zXCIsXCJvXCJdLGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG49ZVtpXSxvPW4rXCJNYXRjaGVzU2VsZWN0b3JcIjtpZih0W29dKXJldHVybiBvfX0oKTtyZXR1cm4gZnVuY3Rpb24oZSxpKXtyZXR1cm4gZVt0XShpKX19KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJmaXp6eS11aS11dGlscy91dGlsc1wiLFtcImRlc2FuZHJvLW1hdGNoZXMtc2VsZWN0b3IvbWF0Y2hlcy1zZWxlY3RvclwiXSxmdW5jdGlvbihpKXtyZXR1cm4gZSh0LGkpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSh0LHJlcXVpcmUoXCJkZXNhbmRyby1tYXRjaGVzLXNlbGVjdG9yXCIpKTp0LmZpenp5VUlVdGlscz1lKHQsdC5tYXRjaGVzU2VsZWN0b3IpfSh3aW5kb3csZnVuY3Rpb24odCxlKXt2YXIgaT17fTtpLmV4dGVuZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKXRbaV09ZVtpXTtyZXR1cm4gdH0saS5tb2R1bG89ZnVuY3Rpb24odCxlKXtyZXR1cm4odCVlK2UpJWV9LGkubWFrZUFycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2lmKEFycmF5LmlzQXJyYXkodCkpZT10O2Vsc2UgaWYodCYmXCJudW1iZXJcIj09dHlwZW9mIHQubGVuZ3RoKWZvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKWUucHVzaCh0W2ldKTtlbHNlIGUucHVzaCh0KTtyZXR1cm4gZX0saS5yZW1vdmVGcm9tPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5pbmRleE9mKGUpOy0xIT1pJiZ0LnNwbGljZShpLDEpfSxpLmdldFBhcmVudD1mdW5jdGlvbih0LGkpe2Zvcig7dCE9ZG9jdW1lbnQuYm9keTspaWYodD10LnBhcmVudE5vZGUsZSh0LGkpKXJldHVybiB0fSxpLmdldFF1ZXJ5RWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD9kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHQpOnR9LGkuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9XCJvblwiK3QudHlwZTt0aGlzW2VdJiZ0aGlzW2VdKHQpfSxpLmZpbHRlckZpbmRFbGVtZW50cz1mdW5jdGlvbih0LG4pe3Q9aS5tYWtlQXJyYXkodCk7dmFyIG89W107cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpe2lmKCFuKXJldHVybiB2b2lkIG8ucHVzaCh0KTtlKHQsbikmJm8ucHVzaCh0KTtmb3IodmFyIGk9dC5xdWVyeVNlbGVjdG9yQWxsKG4pLHM9MDtzPGkubGVuZ3RoO3MrKylvLnB1c2goaVtzXSl9fSksb30saS5kZWJvdW5jZU1ldGhvZD1mdW5jdGlvbih0LGUsaSl7dmFyIG49dC5wcm90b3R5cGVbZV0sbz1lK1wiVGltZW91dFwiO3QucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpc1tvXTt0JiZjbGVhclRpbWVvdXQodCk7dmFyIGU9YXJndW1lbnRzLHM9dGhpczt0aGlzW29dPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLmFwcGx5KHMsZSksZGVsZXRlIHNbb119LGl8fDEwMCl9fSxpLmRvY1JlYWR5PWZ1bmN0aW9uKHQpe3ZhciBlPWRvY3VtZW50LnJlYWR5U3RhdGU7XCJjb21wbGV0ZVwiPT1lfHxcImludGVyYWN0aXZlXCI9PWU/dCgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsdCl9LGkudG9EYXNoZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvKC4pKFtBLVpdKS9nLGZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gZStcIi1cIitpfSkudG9Mb3dlckNhc2UoKX07dmFyIG49dC5jb25zb2xlO3JldHVybiBpLmh0bWxJbml0PWZ1bmN0aW9uKGUsbyl7aS5kb2NSZWFkeShmdW5jdGlvbigpe3ZhciBzPWkudG9EYXNoZWQobykscj1cImRhdGEtXCIrcyxhPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIrcitcIl1cIiksdT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmpzLVwiK3MpLGg9aS5tYWtlQXJyYXkoYSkuY29uY2F0KGkubWFrZUFycmF5KHUpKSxkPXIrXCItb3B0aW9uc1wiLGw9dC5qUXVlcnk7aC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBpLHM9dC5nZXRBdHRyaWJ1dGUocil8fHQuZ2V0QXR0cmlidXRlKGQpO3RyeXtpPXMmJkpTT04ucGFyc2Uocyl9Y2F0Y2goYSl7cmV0dXJuIHZvaWQobiYmbi5lcnJvcihcIkVycm9yIHBhcnNpbmcgXCIrcitcIiBvbiBcIit0LmNsYXNzTmFtZStcIjogXCIrYSkpfXZhciB1PW5ldyBlKHQsaSk7bCYmbC5kYXRhKHQsbyx1KX0pfSl9LGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJvdXRsYXllci9pdGVtXCIsW1wiZXYtZW1pdHRlci9ldi1lbWl0dGVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJldi1lbWl0dGVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSk6KHQuT3V0bGF5ZXI9e30sdC5PdXRsYXllci5JdGVtPWUodC5FdkVtaXR0ZXIsdC5nZXRTaXplKSl9KHdpbmRvdyxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7Zm9yKHZhciBlIGluIHQpcmV0dXJuITE7cmV0dXJuIGU9bnVsbCwhMH1mdW5jdGlvbiBuKHQsZSl7dCYmKHRoaXMuZWxlbWVudD10LHRoaXMubGF5b3V0PWUsdGhpcy5wb3NpdGlvbj17eDowLHk6MH0sdGhpcy5fY3JlYXRlKCkpfWZ1bmN0aW9uIG8odCl7cmV0dXJuIHQucmVwbGFjZSgvKFtBLVpdKS9nLGZ1bmN0aW9uKHQpe3JldHVyblwiLVwiK3QudG9Mb3dlckNhc2UoKX0pfXZhciBzPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxyPVwic3RyaW5nXCI9PXR5cGVvZiBzLnRyYW5zaXRpb24/XCJ0cmFuc2l0aW9uXCI6XCJXZWJraXRUcmFuc2l0aW9uXCIsYT1cInN0cmluZ1wiPT10eXBlb2Ygcy50cmFuc2Zvcm0/XCJ0cmFuc2Zvcm1cIjpcIldlYmtpdFRyYW5zZm9ybVwiLHU9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn1bcl0saD17dHJhbnNmb3JtOmEsdHJhbnNpdGlvbjpyLHRyYW5zaXRpb25EdXJhdGlvbjpyK1wiRHVyYXRpb25cIix0cmFuc2l0aW9uUHJvcGVydHk6citcIlByb3BlcnR5XCIsdHJhbnNpdGlvbkRlbGF5OnIrXCJEZWxheVwifSxkPW4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpO2QuY29uc3RydWN0b3I9bixkLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLl90cmFuc249e2luZ1Byb3BlcnRpZXM6e30sY2xlYW46e30sb25FbmQ6e319LHRoaXMuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCJ9KX0sZC5oYW5kbGVFdmVudD1mdW5jdGlvbih0KXt2YXIgZT1cIm9uXCIrdC50eXBlO3RoaXNbZV0mJnRoaXNbZV0odCl9LGQuZ2V0U2l6ZT1mdW5jdGlvbigpe3RoaXMuc2l6ZT1lKHRoaXMuZWxlbWVudCl9LGQuY3NzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWxlbWVudC5zdHlsZTtmb3IodmFyIGkgaW4gdCl7dmFyIG49aFtpXXx8aTtlW25dPXRbaV19fSxkLmdldFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9Z2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpLGU9dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcIm9yaWdpbkxlZnRcIiksaT10aGlzLmxheW91dC5fZ2V0T3B0aW9uKFwib3JpZ2luVG9wXCIpLG49dFtlP1wibGVmdFwiOlwicmlnaHRcIl0sbz10W2k/XCJ0b3BcIjpcImJvdHRvbVwiXSxzPXRoaXMubGF5b3V0LnNpemUscj0tMSE9bi5pbmRleE9mKFwiJVwiKT9wYXJzZUZsb2F0KG4pLzEwMCpzLndpZHRoOnBhcnNlSW50KG4sMTApLGE9LTEhPW8uaW5kZXhPZihcIiVcIik/cGFyc2VGbG9hdChvKS8xMDAqcy5oZWlnaHQ6cGFyc2VJbnQobywxMCk7cj1pc05hTihyKT8wOnIsYT1pc05hTihhKT8wOmEsci09ZT9zLnBhZGRpbmdMZWZ0OnMucGFkZGluZ1JpZ2h0LGEtPWk/cy5wYWRkaW5nVG9wOnMucGFkZGluZ0JvdHRvbSx0aGlzLnBvc2l0aW9uLng9cix0aGlzLnBvc2l0aW9uLnk9YX0sZC5sYXlvdXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMubGF5b3V0LnNpemUsZT17fSxpPXRoaXMubGF5b3V0Ll9nZXRPcHRpb24oXCJvcmlnaW5MZWZ0XCIpLG49dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcIm9yaWdpblRvcFwiKSxvPWk/XCJwYWRkaW5nTGVmdFwiOlwicGFkZGluZ1JpZ2h0XCIscz1pP1wibGVmdFwiOlwicmlnaHRcIixyPWk/XCJyaWdodFwiOlwibGVmdFwiLGE9dGhpcy5wb3NpdGlvbi54K3Rbb107ZVtzXT10aGlzLmdldFhWYWx1ZShhKSxlW3JdPVwiXCI7dmFyIHU9bj9cInBhZGRpbmdUb3BcIjpcInBhZGRpbmdCb3R0b21cIixoPW4/XCJ0b3BcIjpcImJvdHRvbVwiLGQ9bj9cImJvdHRvbVwiOlwidG9wXCIsbD10aGlzLnBvc2l0aW9uLnkrdFt1XTtlW2hdPXRoaXMuZ2V0WVZhbHVlKGwpLGVbZF09XCJcIix0aGlzLmNzcyhlKSx0aGlzLmVtaXRFdmVudChcImxheW91dFwiLFt0aGlzXSl9LGQuZ2V0WFZhbHVlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubGF5b3V0Ll9nZXRPcHRpb24oXCJob3Jpem9udGFsXCIpO3JldHVybiB0aGlzLmxheW91dC5vcHRpb25zLnBlcmNlbnRQb3NpdGlvbiYmIWU/dC90aGlzLmxheW91dC5zaXplLndpZHRoKjEwMCtcIiVcIjp0K1wicHhcIn0sZC5nZXRZVmFsdWU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcImhvcml6b250YWxcIik7cmV0dXJuIHRoaXMubGF5b3V0Lm9wdGlvbnMucGVyY2VudFBvc2l0aW9uJiZlP3QvdGhpcy5sYXlvdXQuc2l6ZS5oZWlnaHQqMTAwK1wiJVwiOnQrXCJweFwifSxkLl90cmFuc2l0aW9uVG89ZnVuY3Rpb24odCxlKXt0aGlzLmdldFBvc2l0aW9uKCk7dmFyIGk9dGhpcy5wb3NpdGlvbi54LG49dGhpcy5wb3NpdGlvbi55LG89cGFyc2VJbnQodCwxMCkscz1wYXJzZUludChlLDEwKSxyPW89PT10aGlzLnBvc2l0aW9uLngmJnM9PT10aGlzLnBvc2l0aW9uLnk7aWYodGhpcy5zZXRQb3NpdGlvbih0LGUpLHImJiF0aGlzLmlzVHJhbnNpdGlvbmluZylyZXR1cm4gdm9pZCB0aGlzLmxheW91dFBvc2l0aW9uKCk7dmFyIGE9dC1pLHU9ZS1uLGg9e307aC50cmFuc2Zvcm09dGhpcy5nZXRUcmFuc2xhdGUoYSx1KSx0aGlzLnRyYW5zaXRpb24oe3RvOmgsb25UcmFuc2l0aW9uRW5kOnt0cmFuc2Zvcm06dGhpcy5sYXlvdXRQb3NpdGlvbn0saXNDbGVhbmluZzohMH0pfSxkLmdldFRyYW5zbGF0ZT1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMubGF5b3V0Ll9nZXRPcHRpb24oXCJvcmlnaW5MZWZ0XCIpLG49dGhpcy5sYXlvdXQuX2dldE9wdGlvbihcIm9yaWdpblRvcFwiKTtyZXR1cm4gdD1pP3Q6LXQsZT1uP2U6LWUsXCJ0cmFuc2xhdGUzZChcIit0K1wicHgsIFwiK2UrXCJweCwgMClcIn0sZC5nb1RvPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZXRQb3NpdGlvbih0LGUpLHRoaXMubGF5b3V0UG9zaXRpb24oKX0sZC5tb3ZlVG89ZC5fdHJhbnNpdGlvblRvLGQuc2V0UG9zaXRpb249ZnVuY3Rpb24odCxlKXt0aGlzLnBvc2l0aW9uLng9cGFyc2VJbnQodCwxMCksdGhpcy5wb3NpdGlvbi55PXBhcnNlSW50KGUsMTApfSxkLl9ub25UcmFuc2l0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuY3NzKHQudG8pLHQuaXNDbGVhbmluZyYmdGhpcy5fcmVtb3ZlU3R5bGVzKHQudG8pO2Zvcih2YXIgZSBpbiB0Lm9uVHJhbnNpdGlvbkVuZCl0Lm9uVHJhbnNpdGlvbkVuZFtlXS5jYWxsKHRoaXMpfSxkLnRyYW5zaXRpb249ZnVuY3Rpb24odCl7aWYoIXBhcnNlRmxvYXQodGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb24pKXJldHVybiB2b2lkIHRoaXMuX25vblRyYW5zaXRpb24odCk7dmFyIGU9dGhpcy5fdHJhbnNuO2Zvcih2YXIgaSBpbiB0Lm9uVHJhbnNpdGlvbkVuZCllLm9uRW5kW2ldPXQub25UcmFuc2l0aW9uRW5kW2ldO2ZvcihpIGluIHQudG8pZS5pbmdQcm9wZXJ0aWVzW2ldPSEwLHQuaXNDbGVhbmluZyYmKGUuY2xlYW5baV09ITApO2lmKHQuZnJvbSl7dGhpcy5jc3ModC5mcm9tKTt2YXIgbj10aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0O249bnVsbH10aGlzLmVuYWJsZVRyYW5zaXRpb24odC50byksdGhpcy5jc3ModC50byksdGhpcy5pc1RyYW5zaXRpb25pbmc9ITB9O3ZhciBsPVwib3BhY2l0eSxcIitvKGEpO2QuZW5hYmxlVHJhbnNpdGlvbj1mdW5jdGlvbigpe2lmKCF0aGlzLmlzVHJhbnNpdGlvbmluZyl7dmFyIHQ9dGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb247dD1cIm51bWJlclwiPT10eXBlb2YgdD90K1wibXNcIjp0LHRoaXMuY3NzKHt0cmFuc2l0aW9uUHJvcGVydHk6bCx0cmFuc2l0aW9uRHVyYXRpb246dCx0cmFuc2l0aW9uRGVsYXk6dGhpcy5zdGFnZ2VyRGVsYXl8fDB9KSx0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih1LHRoaXMsITEpfX0sZC5vbndlYmtpdFRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24odCl7dGhpcy5vbnRyYW5zaXRpb25lbmQodCl9LGQub25vdHJhbnNpdGlvbmVuZD1mdW5jdGlvbih0KXt0aGlzLm9udHJhbnNpdGlvbmVuZCh0KX07dmFyIGY9e1wiLXdlYmtpdC10cmFuc2Zvcm1cIjpcInRyYW5zZm9ybVwifTtkLm9udHJhbnNpdGlvbmVuZD1mdW5jdGlvbih0KXtpZih0LnRhcmdldD09PXRoaXMuZWxlbWVudCl7dmFyIGU9dGhpcy5fdHJhbnNuLG49Zlt0LnByb3BlcnR5TmFtZV18fHQucHJvcGVydHlOYW1lO2lmKGRlbGV0ZSBlLmluZ1Byb3BlcnRpZXNbbl0saShlLmluZ1Byb3BlcnRpZXMpJiZ0aGlzLmRpc2FibGVUcmFuc2l0aW9uKCksbiBpbiBlLmNsZWFuJiYodGhpcy5lbGVtZW50LnN0eWxlW3QucHJvcGVydHlOYW1lXT1cIlwiLGRlbGV0ZSBlLmNsZWFuW25dKSxuIGluIGUub25FbmQpe3ZhciBvPWUub25FbmRbbl07by5jYWxsKHRoaXMpLGRlbGV0ZSBlLm9uRW5kW25dfXRoaXMuZW1pdEV2ZW50KFwidHJhbnNpdGlvbkVuZFwiLFt0aGlzXSl9fSxkLmRpc2FibGVUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzKCksdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodSx0aGlzLCExKSx0aGlzLmlzVHJhbnNpdGlvbmluZz0hMX0sZC5fcmVtb3ZlU3R5bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Zvcih2YXIgaSBpbiB0KWVbaV09XCJcIjt0aGlzLmNzcyhlKX07dmFyIGM9e3RyYW5zaXRpb25Qcm9wZXJ0eTpcIlwiLHRyYW5zaXRpb25EdXJhdGlvbjpcIlwiLHRyYW5zaXRpb25EZWxheTpcIlwifTtyZXR1cm4gZC5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzPWZ1bmN0aW9uKCl7dGhpcy5jc3MoYyl9LGQuc3RhZ2dlcj1mdW5jdGlvbih0KXt0PWlzTmFOKHQpPzA6dCx0aGlzLnN0YWdnZXJEZWxheT10K1wibXNcIn0sZC5yZW1vdmVFbGVtPWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KSx0aGlzLmNzcyh7ZGlzcGxheTpcIlwifSksdGhpcy5lbWl0RXZlbnQoXCJyZW1vdmVcIixbdGhpc10pfSxkLnJlbW92ZT1mdW5jdGlvbigpe3JldHVybiByJiZwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKT8odGhpcy5vbmNlKFwidHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFbGVtKCl9KSx2b2lkIHRoaXMuaGlkZSgpKTp2b2lkIHRoaXMucmVtb3ZlRWxlbSgpfSxkLnJldmVhbD1mdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmlzSGlkZGVuLHRoaXMuY3NzKHtkaXNwbGF5OlwiXCJ9KTt2YXIgdD10aGlzLmxheW91dC5vcHRpb25zLGU9e30saT10aGlzLmdldEhpZGVSZXZlYWxUcmFuc2l0aW9uRW5kUHJvcGVydHkoXCJ2aXNpYmxlU3R5bGVcIik7ZVtpXT10aGlzLm9uUmV2ZWFsVHJhbnNpdGlvbkVuZCx0aGlzLnRyYW5zaXRpb24oe2Zyb206dC5oaWRkZW5TdHlsZSx0bzp0LnZpc2libGVTdHlsZSxpc0NsZWFuaW5nOiEwLG9uVHJhbnNpdGlvbkVuZDplfSl9LGQub25SZXZlYWxUcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbnx8dGhpcy5lbWl0RXZlbnQoXCJyZXZlYWxcIil9LGQuZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmxheW91dC5vcHRpb25zW3RdO2lmKGUub3BhY2l0eSlyZXR1cm5cIm9wYWNpdHlcIjtmb3IodmFyIGkgaW4gZSlyZXR1cm4gaX0sZC5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbj0hMCx0aGlzLmNzcyh7ZGlzcGxheTpcIlwifSk7dmFyIHQ9dGhpcy5sYXlvdXQub3B0aW9ucyxlPXt9LGk9dGhpcy5nZXRIaWRlUmV2ZWFsVHJhbnNpdGlvbkVuZFByb3BlcnR5KFwiaGlkZGVuU3R5bGVcIik7ZVtpXT10aGlzLm9uSGlkZVRyYW5zaXRpb25FbmQsdGhpcy50cmFuc2l0aW9uKHtmcm9tOnQudmlzaWJsZVN0eWxlLHRvOnQuaGlkZGVuU3R5bGUsaXNDbGVhbmluZzohMCxvblRyYW5zaXRpb25FbmQ6ZX0pfSxkLm9uSGlkZVRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oKXt0aGlzLmlzSGlkZGVuJiYodGhpcy5jc3Moe2Rpc3BsYXk6XCJub25lXCJ9KSx0aGlzLmVtaXRFdmVudChcImhpZGVcIikpfSxkLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmNzcyh7cG9zaXRpb246XCJcIixsZWZ0OlwiXCIscmlnaHQ6XCJcIix0b3A6XCJcIixib3R0b206XCJcIix0cmFuc2l0aW9uOlwiXCIsdHJhbnNmb3JtOlwiXCJ9KX0sbn0pLGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcIm91dGxheWVyL291dGxheWVyXCIsW1wiZXYtZW1pdHRlci9ldi1lbWl0dGVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiLFwiZml6enktdWktdXRpbHMvdXRpbHNcIixcIi4vaXRlbVwiXSxmdW5jdGlvbihpLG4sbyxzKXtyZXR1cm4gZSh0LGksbixvLHMpfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZSh0LHJlcXVpcmUoXCJldi1lbWl0dGVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSxyZXF1aXJlKFwiZml6enktdWktdXRpbHNcIikscmVxdWlyZShcIi4vaXRlbVwiKSk6dC5PdXRsYXllcj1lKHQsdC5FdkVtaXR0ZXIsdC5nZXRTaXplLHQuZml6enlVSVV0aWxzLHQuT3V0bGF5ZXIuSXRlbSl9KHdpbmRvdyxmdW5jdGlvbih0LGUsaSxuLG8pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHModCxlKXt2YXIgaT1uLmdldFF1ZXJ5RWxlbWVudCh0KTtpZighaSlyZXR1cm4gdm9pZCh1JiZ1LmVycm9yKFwiQmFkIGVsZW1lbnQgZm9yIFwiK3RoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlK1wiOiBcIisoaXx8dCkpKTt0aGlzLmVsZW1lbnQ9aSxoJiYodGhpcy4kZWxlbWVudD1oKHRoaXMuZWxlbWVudCkpLHRoaXMub3B0aW9ucz1uLmV4dGVuZCh7fSx0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzKSx0aGlzLm9wdGlvbihlKTt2YXIgbz0rK2w7dGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRD1vLGZbb109dGhpcyx0aGlzLl9jcmVhdGUoKTt2YXIgcz10aGlzLl9nZXRPcHRpb24oXCJpbml0TGF5b3V0XCIpO3MmJnRoaXMubGF5b3V0KCl9ZnVuY3Rpb24gcih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZX1mdW5jdGlvbiBhKHQpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXJldHVybiB0O3ZhciBlPXQubWF0Y2goLyheXFxkKlxcLj9cXGQqKShcXHcqKS8pLGk9ZSYmZVsxXSxuPWUmJmVbMl07aWYoIWkubGVuZ3RoKXJldHVybiAwO2k9cGFyc2VGbG9hdChpKTt2YXIgbz1tW25dfHwxO3JldHVybiBpKm99dmFyIHU9dC5jb25zb2xlLGg9dC5qUXVlcnksZD1mdW5jdGlvbigpe30sbD0wLGY9e307cy5uYW1lc3BhY2U9XCJvdXRsYXllclwiLHMuSXRlbT1vLHMuZGVmYXVsdHM9e2NvbnRhaW5lclN0eWxlOntwb3NpdGlvbjpcInJlbGF0aXZlXCJ9LGluaXRMYXlvdXQ6ITAsb3JpZ2luTGVmdDohMCxvcmlnaW5Ub3A6ITAscmVzaXplOiEwLHJlc2l6ZUNvbnRhaW5lcjohMCx0cmFuc2l0aW9uRHVyYXRpb246XCIwLjRzXCIsaGlkZGVuU3R5bGU6e29wYWNpdHk6MCx0cmFuc2Zvcm06XCJzY2FsZSgwLjAwMSlcIn0sdmlzaWJsZVN0eWxlOntvcGFjaXR5OjEsdHJhbnNmb3JtOlwic2NhbGUoMSlcIn19O3ZhciBjPXMucHJvdG90eXBlO24uZXh0ZW5kKGMsZS5wcm90b3R5cGUpLGMub3B0aW9uPWZ1bmN0aW9uKHQpe24uZXh0ZW5kKHRoaXMub3B0aW9ucyx0KX0sYy5fZ2V0T3B0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29uc3RydWN0b3IuY29tcGF0T3B0aW9uc1t0XTtyZXR1cm4gZSYmdm9pZCAwIT09dGhpcy5vcHRpb25zW2VdP3RoaXMub3B0aW9uc1tlXTp0aGlzLm9wdGlvbnNbdF19LHMuY29tcGF0T3B0aW9ucz17aW5pdExheW91dDpcImlzSW5pdExheW91dFwiLGhvcml6b250YWw6XCJpc0hvcml6b250YWxcIixsYXlvdXRJbnN0YW50OlwiaXNMYXlvdXRJbnN0YW50XCIsb3JpZ2luTGVmdDpcImlzT3JpZ2luTGVmdFwiLG9yaWdpblRvcDpcImlzT3JpZ2luVG9wXCIscmVzaXplOlwiaXNSZXNpemVCb3VuZFwiLHJlc2l6ZUNvbnRhaW5lcjpcImlzUmVzaXppbmdDb250YWluZXJcIn0sYy5fY3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5yZWxvYWRJdGVtcygpLHRoaXMuc3RhbXBzPVtdLHRoaXMuc3RhbXAodGhpcy5vcHRpb25zLnN0YW1wKSxuLmV4dGVuZCh0aGlzLmVsZW1lbnQuc3R5bGUsdGhpcy5vcHRpb25zLmNvbnRhaW5lclN0eWxlKTt2YXIgdD10aGlzLl9nZXRPcHRpb24oXCJyZXNpemVcIik7dCYmdGhpcy5iaW5kUmVzaXplKCl9LGMucmVsb2FkSXRlbXM9ZnVuY3Rpb24oKXt0aGlzLml0ZW1zPXRoaXMuX2l0ZW1pemUodGhpcy5lbGVtZW50LmNoaWxkcmVuKX0sYy5faXRlbWl6ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5fZmlsdGVyRmluZEl0ZW1FbGVtZW50cyh0KSxpPXRoaXMuY29uc3RydWN0b3IuSXRlbSxuPVtdLG89MDtvPGUubGVuZ3RoO28rKyl7dmFyIHM9ZVtvXSxyPW5ldyBpKHMsdGhpcyk7bi5wdXNoKHIpfXJldHVybiBufSxjLl9maWx0ZXJGaW5kSXRlbUVsZW1lbnRzPWZ1bmN0aW9uKHQpe3JldHVybiBuLmZpbHRlckZpbmRFbGVtZW50cyh0LHRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IpfSxjLmdldEl0ZW1FbGVtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5lbGVtZW50fSl9LGMubGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKTt2YXIgdD10aGlzLl9nZXRPcHRpb24oXCJsYXlvdXRJbnN0YW50XCIpLGU9dm9pZCAwIT09dD90OiF0aGlzLl9pc0xheW91dEluaXRlZDt0aGlzLmxheW91dEl0ZW1zKHRoaXMuaXRlbXMsZSksdGhpcy5faXNMYXlvdXRJbml0ZWQ9ITB9LGMuX2luaXQ9Yy5sYXlvdXQsYy5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNpemUoKX0sYy5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5zaXplPWkodGhpcy5lbGVtZW50KX0sYy5fZ2V0TWVhc3VyZW1lbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbixvPXRoaXMub3B0aW9uc1t0XTtvPyhcInN0cmluZ1wiPT10eXBlb2Ygbz9uPXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKG8pOm8gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCYmKG49byksdGhpc1t0XT1uP2kobilbZV06byk6dGhpc1t0XT0wfSxjLmxheW91dEl0ZW1zPWZ1bmN0aW9uKHQsZSl7dD10aGlzLl9nZXRJdGVtc0ZvckxheW91dCh0KSx0aGlzLl9sYXlvdXRJdGVtcyh0LGUpLHRoaXMuX3Bvc3RMYXlvdXQoKX0sYy5fZ2V0SXRlbXNGb3JMYXlvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiF0LmlzSWdub3JlZH0pfSxjLl9sYXlvdXRJdGVtcz1mdW5jdGlvbih0LGUpe2lmKHRoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoXCJsYXlvdXRcIix0KSx0JiZ0Lmxlbmd0aCl7dmFyIGk9W107dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbih0KTtuLml0ZW09dCxuLmlzSW5zdGFudD1lfHx0LmlzTGF5b3V0SW5zdGFudCxpLnB1c2gobil9LHRoaXMpLHRoaXMuX3Byb2Nlc3NMYXlvdXRRdWV1ZShpKX19LGMuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybnt4OjAseTowfX0sYy5fcHJvY2Vzc0xheW91dFF1ZXVlPWZ1bmN0aW9uKHQpe3RoaXMudXBkYXRlU3RhZ2dlcigpLHQuZm9yRWFjaChmdW5jdGlvbih0LGUpe3RoaXMuX3Bvc2l0aW9uSXRlbSh0Lml0ZW0sdC54LHQueSx0LmlzSW5zdGFudCxlKX0sdGhpcyl9LGMudXBkYXRlU3RhZ2dlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5zdGFnZ2VyO3JldHVybiBudWxsPT09dHx8dm9pZCAwPT09dD92b2lkKHRoaXMuc3RhZ2dlcj0wKToodGhpcy5zdGFnZ2VyPWEodCksdGhpcy5zdGFnZ2VyKX0sYy5fcG9zaXRpb25JdGVtPWZ1bmN0aW9uKHQsZSxpLG4sbyl7bj90LmdvVG8oZSxpKToodC5zdGFnZ2VyKG8qdGhpcy5zdGFnZ2VyKSx0Lm1vdmVUbyhlLGkpKX0sYy5fcG9zdExheW91dD1mdW5jdGlvbigpe3RoaXMucmVzaXplQ29udGFpbmVyKCl9LGMucmVzaXplQ29udGFpbmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0T3B0aW9uKFwicmVzaXplQ29udGFpbmVyXCIpO2lmKHQpe3ZhciBlPXRoaXMuX2dldENvbnRhaW5lclNpemUoKTtlJiYodGhpcy5fc2V0Q29udGFpbmVyTWVhc3VyZShlLndpZHRoLCEwKSx0aGlzLl9zZXRDb250YWluZXJNZWFzdXJlKGUuaGVpZ2h0LCExKSl9fSxjLl9nZXRDb250YWluZXJTaXplPWQsYy5fc2V0Q29udGFpbmVyTWVhc3VyZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMCE9PXQpe3ZhciBpPXRoaXMuc2l6ZTtpLmlzQm9yZGVyQm94JiYodCs9ZT9pLnBhZGRpbmdMZWZ0K2kucGFkZGluZ1JpZ2h0K2kuYm9yZGVyTGVmdFdpZHRoK2kuYm9yZGVyUmlnaHRXaWR0aDppLnBhZGRpbmdCb3R0b20raS5wYWRkaW5nVG9wK2kuYm9yZGVyVG9wV2lkdGgraS5ib3JkZXJCb3R0b21XaWR0aCksdD1NYXRoLm1heCh0LDApLHRoaXMuZWxlbWVudC5zdHlsZVtlP1wid2lkdGhcIjpcImhlaWdodFwiXT10K1wicHhcIn19LGMuX2VtaXRDb21wbGV0ZU9uSXRlbXM9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKCl7by5kaXNwYXRjaEV2ZW50KHQrXCJDb21wbGV0ZVwiLG51bGwsW2VdKX1mdW5jdGlvbiBuKCl7cisrLHI9PXMmJmkoKX12YXIgbz10aGlzLHM9ZS5sZW5ndGg7aWYoIWV8fCFzKXJldHVybiB2b2lkIGkoKTt2YXIgcj0wO2UuZm9yRWFjaChmdW5jdGlvbihlKXtlLm9uY2UodCxuKX0pfSxjLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPWU/W2VdLmNvbmNhdChpKTppO2lmKHRoaXMuZW1pdEV2ZW50KHQsbiksaClpZih0aGlzLiRlbGVtZW50PXRoaXMuJGVsZW1lbnR8fGgodGhpcy5lbGVtZW50KSxlKXt2YXIgbz1oLkV2ZW50KGUpO28udHlwZT10LHRoaXMuJGVsZW1lbnQudHJpZ2dlcihvLGkpfWVsc2UgdGhpcy4kZWxlbWVudC50cmlnZ2VyKHQsaSl9LGMuaWdub3JlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SXRlbSh0KTtlJiYoZS5pc0lnbm9yZWQ9ITApfSxjLnVuaWdub3JlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0SXRlbSh0KTtlJiZkZWxldGUgZS5pc0lnbm9yZWR9LGMuc3RhbXA9ZnVuY3Rpb24odCl7dD10aGlzLl9maW5kKHQpLHQmJih0aGlzLnN0YW1wcz10aGlzLnN0YW1wcy5jb25jYXQodCksdC5mb3JFYWNoKHRoaXMuaWdub3JlLHRoaXMpKX0sYy51bnN0YW1wPWZ1bmN0aW9uKHQpe3Q9dGhpcy5fZmluZCh0KSx0JiZ0LmZvckVhY2goZnVuY3Rpb24odCl7bi5yZW1vdmVGcm9tKHRoaXMuc3RhbXBzLHQpLHRoaXMudW5pZ25vcmUodCl9LHRoaXMpfSxjLl9maW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0PyhcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodCkpLHQ9bi5tYWtlQXJyYXkodCkpOnZvaWQgMH0sYy5fbWFuYWdlU3RhbXBzPWZ1bmN0aW9uKCl7dGhpcy5zdGFtcHMmJnRoaXMuc3RhbXBzLmxlbmd0aCYmKHRoaXMuX2dldEJvdW5kaW5nUmVjdCgpLHRoaXMuc3RhbXBzLmZvckVhY2godGhpcy5fbWFuYWdlU3RhbXAsdGhpcykpfSxjLl9nZXRCb3VuZGluZ1JlY3Q9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZT10aGlzLnNpemU7dGhpcy5fYm91bmRpbmdSZWN0PXtsZWZ0OnQubGVmdCtlLnBhZGRpbmdMZWZ0K2UuYm9yZGVyTGVmdFdpZHRoLHRvcDp0LnRvcCtlLnBhZGRpbmdUb3ArZS5ib3JkZXJUb3BXaWR0aCxyaWdodDp0LnJpZ2h0LShlLnBhZGRpbmdSaWdodCtlLmJvcmRlclJpZ2h0V2lkdGgpLGJvdHRvbTp0LmJvdHRvbS0oZS5wYWRkaW5nQm90dG9tK2UuYm9yZGVyQm90dG9tV2lkdGgpfX0sYy5fbWFuYWdlU3RhbXA9ZCxjLl9nZXRFbGVtZW50T2Zmc2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbj10aGlzLl9ib3VuZGluZ1JlY3Qsbz1pKHQpLHM9e2xlZnQ6ZS5sZWZ0LW4ubGVmdC1vLm1hcmdpbkxlZnQsdG9wOmUudG9wLW4udG9wLW8ubWFyZ2luVG9wLHJpZ2h0Om4ucmlnaHQtZS5yaWdodC1vLm1hcmdpblJpZ2h0LGJvdHRvbTpuLmJvdHRvbS1lLmJvdHRvbS1vLm1hcmdpbkJvdHRvbX07cmV0dXJuIHN9LGMuaGFuZGxlRXZlbnQ9bi5oYW5kbGVFdmVudCxjLmJpbmRSZXNpemU9ZnVuY3Rpb24oKXt0LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzKSx0aGlzLmlzUmVzaXplQm91bmQ9ITB9LGMudW5iaW5kUmVzaXplPWZ1bmN0aW9uKCl7dC5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcyksdGhpcy5pc1Jlc2l6ZUJvdW5kPSExfSxjLm9ucmVzaXplPWZ1bmN0aW9uKCl7dGhpcy5yZXNpemUoKX0sbi5kZWJvdW5jZU1ldGhvZChzLFwib25yZXNpemVcIiwxMDApLGMucmVzaXplPWZ1bmN0aW9uKCl7dGhpcy5pc1Jlc2l6ZUJvdW5kJiZ0aGlzLm5lZWRzUmVzaXplTGF5b3V0KCkmJnRoaXMubGF5b3V0KCl9LGMubmVlZHNSZXNpemVMYXlvdXQ9ZnVuY3Rpb24oKXt2YXIgdD1pKHRoaXMuZWxlbWVudCksZT10aGlzLnNpemUmJnQ7cmV0dXJuIGUmJnQuaW5uZXJXaWR0aCE9PXRoaXMuc2l6ZS5pbm5lcldpZHRofSxjLmFkZEl0ZW1zPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2l0ZW1pemUodCk7cmV0dXJuIGUubGVuZ3RoJiYodGhpcy5pdGVtcz10aGlzLml0ZW1zLmNvbmNhdChlKSksZX0sYy5hcHBlbmRlZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmFkZEl0ZW1zKHQpO2UubGVuZ3RoJiYodGhpcy5sYXlvdXRJdGVtcyhlLCEwKSx0aGlzLnJldmVhbChlKSl9LGMucHJlcGVuZGVkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2l0ZW1pemUodCk7aWYoZS5sZW5ndGgpe3ZhciBpPXRoaXMuaXRlbXMuc2xpY2UoMCk7dGhpcy5pdGVtcz1lLmNvbmNhdChpKSx0aGlzLl9yZXNldExheW91dCgpLHRoaXMuX21hbmFnZVN0YW1wcygpLHRoaXMubGF5b3V0SXRlbXMoZSwhMCksdGhpcy5yZXZlYWwoZSksdGhpcy5sYXlvdXRJdGVtcyhpKX19LGMucmV2ZWFsPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoXCJyZXZlYWxcIix0KSx0JiZ0Lmxlbmd0aCl7dmFyIGU9dGhpcy51cGRhdGVTdGFnZ2VyKCk7dC5mb3JFYWNoKGZ1bmN0aW9uKHQsaSl7dC5zdGFnZ2VyKGkqZSksdC5yZXZlYWwoKX0pfX0sYy5oaWRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoXCJoaWRlXCIsdCksdCYmdC5sZW5ndGgpe3ZhciBlPXRoaXMudXBkYXRlU3RhZ2dlcigpO3QuZm9yRWFjaChmdW5jdGlvbih0LGkpe3Quc3RhZ2dlcihpKmUpLHQuaGlkZSgpfSl9fSxjLnJldmVhbEl0ZW1FbGVtZW50cz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEl0ZW1zKHQpO3RoaXMucmV2ZWFsKGUpfSxjLmhpZGVJdGVtRWxlbWVudHM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRJdGVtcyh0KTt0aGlzLmhpZGUoZSl9LGMuZ2V0SXRlbT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuaXRlbXMubGVuZ3RoO2UrKyl7dmFyIGk9dGhpcy5pdGVtc1tlXTtpZihpLmVsZW1lbnQ9PXQpcmV0dXJuIGl9fSxjLmdldEl0ZW1zPWZ1bmN0aW9uKHQpe3Q9bi5tYWtlQXJyYXkodCk7dmFyIGU9W107cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgaT10aGlzLmdldEl0ZW0odCk7aSYmZS5wdXNoKGkpfSx0aGlzKSxlfSxjLnJlbW92ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEl0ZW1zKHQpO3RoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoXCJyZW1vdmVcIixlKSxlJiZlLmxlbmd0aCYmZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QucmVtb3ZlKCksbi5yZW1vdmVGcm9tKHRoaXMuaXRlbXMsdCl9LHRoaXMpfSxjLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsZW1lbnQuc3R5bGU7dC5oZWlnaHQ9XCJcIix0LnBvc2l0aW9uPVwiXCIsdC53aWR0aD1cIlwiLHRoaXMuaXRlbXMuZm9yRWFjaChmdW5jdGlvbih0KXt0LmRlc3Ryb3koKX0pLHRoaXMudW5iaW5kUmVzaXplKCk7dmFyIGU9dGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRDtkZWxldGUgZltlXSxkZWxldGUgdGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRCxoJiZoLnJlbW92ZURhdGEodGhpcy5lbGVtZW50LHRoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlKX0scy5kYXRhPWZ1bmN0aW9uKHQpe3Q9bi5nZXRRdWVyeUVsZW1lbnQodCk7dmFyIGU9dCYmdC5vdXRsYXllckdVSUQ7cmV0dXJuIGUmJmZbZV19LHMuY3JlYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9cihzKTtyZXR1cm4gaS5kZWZhdWx0cz1uLmV4dGVuZCh7fSxzLmRlZmF1bHRzKSxuLmV4dGVuZChpLmRlZmF1bHRzLGUpLGkuY29tcGF0T3B0aW9ucz1uLmV4dGVuZCh7fSxzLmNvbXBhdE9wdGlvbnMpLGkubmFtZXNwYWNlPXQsaS5kYXRhPXMuZGF0YSxpLkl0ZW09cihvKSxuLmh0bWxJbml0KGksdCksaCYmaC5icmlkZ2V0JiZoLmJyaWRnZXQodCxpKSxpfTt2YXIgbT17bXM6MSxzOjFlM307cmV0dXJuIHMuSXRlbT1vLHN9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJpc290b3BlL2pzL2l0ZW1cIixbXCJvdXRsYXllci9vdXRsYXllclwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJvdXRsYXllclwiKSk6KHQuSXNvdG9wZT10Lklzb3RvcGV8fHt9LHQuSXNvdG9wZS5JdGVtPWUodC5PdXRsYXllcikpfSh3aW5kb3csZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSgpe3QuSXRlbS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIGk9ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0Lkl0ZW0ucHJvdG90eXBlKSxuPWkuX2NyZWF0ZTtpLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLmlkPXRoaXMubGF5b3V0Lml0ZW1HVUlEKyssbi5jYWxsKHRoaXMpLHRoaXMuc29ydERhdGE9e319LGkudXBkYXRlU29ydERhdGE9ZnVuY3Rpb24oKXtpZighdGhpcy5pc0lnbm9yZWQpe3RoaXMuc29ydERhdGEuaWQ9dGhpcy5pZCx0aGlzLnNvcnREYXRhW1wib3JpZ2luYWwtb3JkZXJcIl09dGhpcy5pZCx0aGlzLnNvcnREYXRhLnJhbmRvbT1NYXRoLnJhbmRvbSgpO3ZhciB0PXRoaXMubGF5b3V0Lm9wdGlvbnMuZ2V0U29ydERhdGEsZT10aGlzLmxheW91dC5fc29ydGVycztmb3IodmFyIGkgaW4gdCl7dmFyIG49ZVtpXTt0aGlzLnNvcnREYXRhW2ldPW4odGhpcy5lbGVtZW50LHRoaXMpfX19O3ZhciBvPWkuZGVzdHJveTtyZXR1cm4gaS5kZXN0cm95PWZ1bmN0aW9uKCl7by5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5jc3Moe2Rpc3BsYXk6XCJcIn0pfSxlfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiaXNvdG9wZS9qcy9sYXlvdXQtbW9kZVwiLFtcImdldC1zaXplL2dldC1zaXplXCIsXCJvdXRsYXllci9vdXRsYXllclwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSxyZXF1aXJlKFwib3V0bGF5ZXJcIikpOih0Lklzb3RvcGU9dC5Jc290b3BlfHx7fSx0Lklzb3RvcGUuTGF5b3V0TW9kZT1lKHQuZ2V0U2l6ZSx0Lk91dGxheWVyKSl9KHdpbmRvdyxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7dGhpcy5pc290b3BlPXQsdCYmKHRoaXMub3B0aW9ucz10Lm9wdGlvbnNbdGhpcy5uYW1lc3BhY2VdLHRoaXMuZWxlbWVudD10LmVsZW1lbnQsdGhpcy5pdGVtcz10LmZpbHRlcmVkSXRlbXMsdGhpcy5zaXplPXQuc2l6ZSl9dmFyIG49aS5wcm90b3R5cGUsbz1bXCJfcmVzZXRMYXlvdXRcIixcIl9nZXRJdGVtTGF5b3V0UG9zaXRpb25cIixcIl9tYW5hZ2VTdGFtcFwiLFwiX2dldENvbnRhaW5lclNpemVcIixcIl9nZXRFbGVtZW50T2Zmc2V0XCIsXCJuZWVkc1Jlc2l6ZUxheW91dFwiLFwiX2dldE9wdGlvblwiXTtyZXR1cm4gby5mb3JFYWNoKGZ1bmN0aW9uKHQpe25bdF09ZnVuY3Rpb24oKXtyZXR1cm4gZS5wcm90b3R5cGVbdF0uYXBwbHkodGhpcy5pc290b3BlLGFyZ3VtZW50cyl9fSksbi5uZWVkc1ZlcnRpY2FsUmVzaXplTGF5b3V0PWZ1bmN0aW9uKCl7dmFyIGU9dCh0aGlzLmlzb3RvcGUuZWxlbWVudCksaT10aGlzLmlzb3RvcGUuc2l6ZSYmZTtyZXR1cm4gaSYmZS5pbm5lckhlaWdodCE9dGhpcy5pc290b3BlLnNpemUuaW5uZXJIZWlnaHR9LG4uX2dldE1lYXN1cmVtZW50PWZ1bmN0aW9uKCl7dGhpcy5pc290b3BlLl9nZXRNZWFzdXJlbWVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG4uZ2V0Q29sdW1uV2lkdGg9ZnVuY3Rpb24oKXt0aGlzLmdldFNlZ21lbnRTaXplKFwiY29sdW1uXCIsXCJXaWR0aFwiKX0sbi5nZXRSb3dIZWlnaHQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNlZ21lbnRTaXplKFwicm93XCIsXCJIZWlnaHRcIil9LG4uZ2V0U2VnbWVudFNpemU9ZnVuY3Rpb24odCxlKXt2YXIgaT10K2Usbj1cIm91dGVyXCIrZTtpZih0aGlzLl9nZXRNZWFzdXJlbWVudChpLG4pLCF0aGlzW2ldKXt2YXIgbz10aGlzLmdldEZpcnN0SXRlbVNpemUoKTt0aGlzW2ldPW8mJm9bbl18fHRoaXMuaXNvdG9wZS5zaXplW1wiaW5uZXJcIitlXX19LG4uZ2V0Rmlyc3RJdGVtU2l6ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaXNvdG9wZS5maWx0ZXJlZEl0ZW1zWzBdO3JldHVybiBlJiZlLmVsZW1lbnQmJnQoZS5lbGVtZW50KX0sbi5sYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmlzb3RvcGUubGF5b3V0LmFwcGx5KHRoaXMuaXNvdG9wZSxhcmd1bWVudHMpfSxuLmdldFNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzb3RvcGUuZ2V0U2l6ZSgpLHRoaXMuc2l6ZT10aGlzLmlzb3RvcGUuc2l6ZX0saS5tb2Rlcz17fSxpLmNyZWF0ZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG8oKXtpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuKSxvLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1vLGUmJihvLm9wdGlvbnM9ZSksby5wcm90b3R5cGUubmFtZXNwYWNlPXQsaS5tb2Rlc1t0XT1vLG99LGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJtYXNvbnJ5L21hc29ucnlcIixbXCJvdXRsYXllci9vdXRsYXllclwiLFwiZ2V0LXNpemUvZ2V0LXNpemVcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwib3V0bGF5ZXJcIikscmVxdWlyZShcImdldC1zaXplXCIpKTp0Lk1hc29ucnk9ZSh0Lk91dGxheWVyLHQuZ2V0U2l6ZSl9KHdpbmRvdyxmdW5jdGlvbih0LGUpe3ZhciBpPXQuY3JlYXRlKFwibWFzb25yeVwiKTtyZXR1cm4gaS5jb21wYXRPcHRpb25zLmZpdFdpZHRoPVwiaXNGaXRXaWR0aFwiLGkucHJvdG90eXBlLl9yZXNldExheW91dD1mdW5jdGlvbigpe3RoaXMuZ2V0U2l6ZSgpLHRoaXMuX2dldE1lYXN1cmVtZW50KFwiY29sdW1uV2lkdGhcIixcIm91dGVyV2lkdGhcIiksdGhpcy5fZ2V0TWVhc3VyZW1lbnQoXCJndXR0ZXJcIixcIm91dGVyV2lkdGhcIiksdGhpcy5tZWFzdXJlQ29sdW1ucygpLHRoaXMuY29sWXM9W107Zm9yKHZhciB0PTA7dDx0aGlzLmNvbHM7dCsrKXRoaXMuY29sWXMucHVzaCgwKTt0aGlzLm1heFk9MH0saS5wcm90b3R5cGUubWVhc3VyZUNvbHVtbnM9ZnVuY3Rpb24oKXtpZih0aGlzLmdldENvbnRhaW5lcldpZHRoKCksIXRoaXMuY29sdW1uV2lkdGgpe3ZhciB0PXRoaXMuaXRlbXNbMF0saT10JiZ0LmVsZW1lbnQ7dGhpcy5jb2x1bW5XaWR0aD1pJiZlKGkpLm91dGVyV2lkdGh8fHRoaXMuY29udGFpbmVyV2lkdGh9dmFyIG49dGhpcy5jb2x1bW5XaWR0aCs9dGhpcy5ndXR0ZXIsbz10aGlzLmNvbnRhaW5lcldpZHRoK3RoaXMuZ3V0dGVyLHM9by9uLHI9bi1vJW4sYT1yJiYxPnI/XCJyb3VuZFwiOlwiZmxvb3JcIjtzPU1hdGhbYV0ocyksdGhpcy5jb2xzPU1hdGgubWF4KHMsMSl9LGkucHJvdG90eXBlLmdldENvbnRhaW5lcldpZHRoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0T3B0aW9uKFwiZml0V2lkdGhcIiksaT10P3RoaXMuZWxlbWVudC5wYXJlbnROb2RlOnRoaXMuZWxlbWVudCxuPWUoaSk7dGhpcy5jb250YWluZXJXaWR0aD1uJiZuLmlubmVyV2lkdGh9LGkucHJvdG90eXBlLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24odCl7dC5nZXRTaXplKCk7dmFyIGU9dC5zaXplLm91dGVyV2lkdGgldGhpcy5jb2x1bW5XaWR0aCxpPWUmJjE+ZT9cInJvdW5kXCI6XCJjZWlsXCIsbj1NYXRoW2ldKHQuc2l6ZS5vdXRlcldpZHRoL3RoaXMuY29sdW1uV2lkdGgpO249TWF0aC5taW4obix0aGlzLmNvbHMpO2Zvcih2YXIgbz10aGlzLl9nZXRDb2xHcm91cChuKSxzPU1hdGgubWluLmFwcGx5KE1hdGgsbykscj1vLmluZGV4T2YocyksYT17eDp0aGlzLmNvbHVtbldpZHRoKnIseTpzfSx1PXMrdC5zaXplLm91dGVySGVpZ2h0LGg9dGhpcy5jb2xzKzEtby5sZW5ndGgsZD0wO2g+ZDtkKyspdGhpcy5jb2xZc1tyK2RdPXU7cmV0dXJuIGF9LGkucHJvdG90eXBlLl9nZXRDb2xHcm91cD1mdW5jdGlvbih0KXtpZigyPnQpcmV0dXJuIHRoaXMuY29sWXM7Zm9yKHZhciBlPVtdLGk9dGhpcy5jb2xzKzEtdCxuPTA7aT5uO24rKyl7dmFyIG89dGhpcy5jb2xZcy5zbGljZShuLG4rdCk7ZVtuXT1NYXRoLm1heC5hcHBseShNYXRoLG8pfXJldHVybiBlfSxpLnByb3RvdHlwZS5fbWFuYWdlU3RhbXA9ZnVuY3Rpb24odCl7dmFyIGk9ZSh0KSxuPXRoaXMuX2dldEVsZW1lbnRPZmZzZXQodCksbz10aGlzLl9nZXRPcHRpb24oXCJvcmlnaW5MZWZ0XCIpLHM9bz9uLmxlZnQ6bi5yaWdodCxyPXMraS5vdXRlcldpZHRoLGE9TWF0aC5mbG9vcihzL3RoaXMuY29sdW1uV2lkdGgpO2E9TWF0aC5tYXgoMCxhKTt2YXIgdT1NYXRoLmZsb29yKHIvdGhpcy5jb2x1bW5XaWR0aCk7dS09ciV0aGlzLmNvbHVtbldpZHRoPzA6MSx1PU1hdGgubWluKHRoaXMuY29scy0xLHUpO2Zvcih2YXIgaD10aGlzLl9nZXRPcHRpb24oXCJvcmlnaW5Ub3BcIiksZD0oaD9uLnRvcDpuLmJvdHRvbSkraS5vdXRlckhlaWdodCxsPWE7dT49bDtsKyspdGhpcy5jb2xZc1tsXT1NYXRoLm1heChkLHRoaXMuY29sWXNbbF0pfSxpLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyU2l6ZT1mdW5jdGlvbigpe3RoaXMubWF4WT1NYXRoLm1heC5hcHBseShNYXRoLHRoaXMuY29sWXMpO3ZhciB0PXtoZWlnaHQ6dGhpcy5tYXhZfTtyZXR1cm4gdGhpcy5fZ2V0T3B0aW9uKFwiZml0V2lkdGhcIikmJih0LndpZHRoPXRoaXMuX2dldENvbnRhaW5lckZpdFdpZHRoKCkpLHR9LGkucHJvdG90eXBlLl9nZXRDb250YWluZXJGaXRXaWR0aD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5jb2xzOy0tZSYmMD09PXRoaXMuY29sWXNbZV07KXQrKztyZXR1cm4odGhpcy5jb2xzLXQpKnRoaXMuY29sdW1uV2lkdGgtdGhpcy5ndXR0ZXJ9LGkucHJvdG90eXBlLm5lZWRzUmVzaXplTGF5b3V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb250YWluZXJXaWR0aDtyZXR1cm4gdGhpcy5nZXRDb250YWluZXJXaWR0aCgpLHQhPXRoaXMuY29udGFpbmVyV2lkdGh9LGl9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJpc290b3BlL2pzL2xheW91dC1tb2Rlcy9tYXNvbnJ5XCIsW1wiLi4vbGF5b3V0LW1vZGVcIixcIm1hc29ucnkvbWFzb25yeVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCIuLi9sYXlvdXQtbW9kZVwiKSxyZXF1aXJlKFwibWFzb25yeS1sYXlvdXRcIikpOmUodC5Jc290b3BlLkxheW91dE1vZGUsdC5NYXNvbnJ5KX0od2luZG93LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dC5jcmVhdGUoXCJtYXNvbnJ5XCIpLG49aS5wcm90b3R5cGUsbz17X2dldEVsZW1lbnRPZmZzZXQ6ITAsbGF5b3V0OiEwLF9nZXRNZWFzdXJlbWVudDohMH07Zm9yKHZhciBzIGluIGUucHJvdG90eXBlKW9bc118fChuW3NdPWUucHJvdG90eXBlW3NdKTt2YXIgcj1uLm1lYXN1cmVDb2x1bW5zO24ubWVhc3VyZUNvbHVtbnM9ZnVuY3Rpb24oKXt0aGlzLml0ZW1zPXRoaXMuaXNvdG9wZS5maWx0ZXJlZEl0ZW1zLHIuY2FsbCh0aGlzKX07dmFyIGE9bi5fZ2V0T3B0aW9uO3JldHVybiBuLl9nZXRPcHRpb249ZnVuY3Rpb24odCl7cmV0dXJuXCJmaXRXaWR0aFwiPT10P3ZvaWQgMCE9PXRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoP3RoaXMub3B0aW9ucy5pc0ZpdFdpZHRoOnRoaXMub3B0aW9ucy5maXRXaWR0aDphLmFwcGx5KHRoaXMuaXNvdG9wZSxhcmd1bWVudHMpfSxpfSksZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiaXNvdG9wZS9qcy9sYXlvdXQtbW9kZXMvZml0LXJvd3NcIixbXCIuLi9sYXlvdXQtbW9kZVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCIuLi9sYXlvdXQtbW9kZVwiKSk6ZSh0Lklzb3RvcGUuTGF5b3V0TW9kZSl9KHdpbmRvdyxmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgZT10LmNyZWF0ZShcImZpdFJvd3NcIiksaT1lLnByb3RvdHlwZTtyZXR1cm4gaS5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLng9MCx0aGlzLnk9MCx0aGlzLm1heFk9MCx0aGlzLl9nZXRNZWFzdXJlbWVudChcImd1dHRlclwiLFwib3V0ZXJXaWR0aFwiKX0saS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3QuZ2V0U2l6ZSgpO3ZhciBlPXQuc2l6ZS5vdXRlcldpZHRoK3RoaXMuZ3V0dGVyLGk9dGhpcy5pc290b3BlLnNpemUuaW5uZXJXaWR0aCt0aGlzLmd1dHRlcjswIT09dGhpcy54JiZlK3RoaXMueD5pJiYodGhpcy54PTAsdGhpcy55PXRoaXMubWF4WSk7dmFyIG49e3g6dGhpcy54LHk6dGhpcy55fTtyZXR1cm4gdGhpcy5tYXhZPU1hdGgubWF4KHRoaXMubWF4WSx0aGlzLnkrdC5zaXplLm91dGVySGVpZ2h0KSx0aGlzLngrPWUsbn0saS5fZ2V0Q29udGFpbmVyU2l6ZT1mdW5jdGlvbigpe3JldHVybntoZWlnaHQ6dGhpcy5tYXhZfX0sZX0pLGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImlzb3RvcGUvanMvbGF5b3V0LW1vZGVzL3ZlcnRpY2FsXCIsW1wiLi4vbGF5b3V0LW1vZGVcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwiLi4vbGF5b3V0LW1vZGVcIikpOmUodC5Jc290b3BlLkxheW91dE1vZGUpfSh3aW5kb3csZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dC5jcmVhdGUoXCJ2ZXJ0aWNhbFwiLHtob3Jpem9udGFsQWxpZ25tZW50OjB9KSxpPWUucHJvdG90eXBlO3JldHVybiBpLl9yZXNldExheW91dD1mdW5jdGlvbigpe3RoaXMueT0wfSxpLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24odCl7dC5nZXRTaXplKCk7dmFyIGU9KHRoaXMuaXNvdG9wZS5zaXplLmlubmVyV2lkdGgtdC5zaXplLm91dGVyV2lkdGgpKnRoaXMub3B0aW9ucy5ob3Jpem9udGFsQWxpZ25tZW50LGk9dGhpcy55O3JldHVybiB0aGlzLnkrPXQuc2l6ZS5vdXRlckhlaWdodCx7eDplLHk6aX19LGkuX2dldENvbnRhaW5lclNpemU9ZnVuY3Rpb24oKXtyZXR1cm57aGVpZ2h0OnRoaXMueX19LGV9KSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wib3V0bGF5ZXIvb3V0bGF5ZXJcIixcImdldC1zaXplL2dldC1zaXplXCIsXCJkZXNhbmRyby1tYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3JcIixcImZpenp5LXVpLXV0aWxzL3V0aWxzXCIsXCJpc290b3BlL2pzL2l0ZW1cIixcImlzb3RvcGUvanMvbGF5b3V0LW1vZGVcIixcImlzb3RvcGUvanMvbGF5b3V0LW1vZGVzL21hc29ucnlcIixcImlzb3RvcGUvanMvbGF5b3V0LW1vZGVzL2ZpdC1yb3dzXCIsXCJpc290b3BlL2pzL2xheW91dC1tb2Rlcy92ZXJ0aWNhbFwiXSxmdW5jdGlvbihpLG4sbyxzLHIsYSl7cmV0dXJuIGUodCxpLG4sbyxzLHIsYSl9KTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHQscmVxdWlyZShcIm91dGxheWVyXCIpLHJlcXVpcmUoXCJnZXQtc2l6ZVwiKSxyZXF1aXJlKFwiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3RvclwiKSxyZXF1aXJlKFwiZml6enktdWktdXRpbHNcIikscmVxdWlyZShcImlzb3RvcGUvanMvaXRlbVwiKSxyZXF1aXJlKFwiaXNvdG9wZS9qcy9sYXlvdXQtbW9kZVwiKSxyZXF1aXJlKFwiaXNvdG9wZS9qcy9sYXlvdXQtbW9kZXMvbWFzb25yeVwiKSxyZXF1aXJlKFwiaXNvdG9wZS9qcy9sYXlvdXQtbW9kZXMvZml0LXJvd3NcIikscmVxdWlyZShcImlzb3RvcGUvanMvbGF5b3V0LW1vZGVzL3ZlcnRpY2FsXCIpKTp0Lklzb3RvcGU9ZSh0LHQuT3V0bGF5ZXIsdC5nZXRTaXplLHQubWF0Y2hlc1NlbGVjdG9yLHQuZml6enlVSVV0aWxzLHQuSXNvdG9wZS5JdGVtLHQuSXNvdG9wZS5MYXlvdXRNb2RlKX0od2luZG93LGZ1bmN0aW9uKHQsZSxpLG4sbyxzLHIpe2Z1bmN0aW9uIGEodCxlKXtyZXR1cm4gZnVuY3Rpb24oaSxuKXtmb3IodmFyIG89MDtvPHQubGVuZ3RoO28rKyl7dmFyIHM9dFtvXSxyPWkuc29ydERhdGFbc10sYT1uLnNvcnREYXRhW3NdO2lmKHI+YXx8YT5yKXt2YXIgdT12b2lkIDAhPT1lW3NdP2Vbc106ZSxoPXU/MTotMTtyZXR1cm4ocj5hPzE6LTEpKmh9fXJldHVybiAwfX12YXIgdT10LmpRdWVyeSxoPVN0cmluZy5wcm90b3R5cGUudHJpbT9mdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCl9OmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIil9LGQ9ZS5jcmVhdGUoXCJpc290b3BlXCIse2xheW91dE1vZGU6XCJtYXNvbnJ5XCIsaXNKUXVlcnlGaWx0ZXJpbmc6ITAsc29ydEFzY2VuZGluZzohMH0pO2QuSXRlbT1zLGQuTGF5b3V0TW9kZT1yO3ZhciBsPWQucHJvdG90eXBlO2wuX2NyZWF0ZT1mdW5jdGlvbigpe3RoaXMuaXRlbUdVSUQ9MCx0aGlzLl9zb3J0ZXJzPXt9LHRoaXMuX2dldFNvcnRlcnMoKSxlLnByb3RvdHlwZS5fY3JlYXRlLmNhbGwodGhpcyksdGhpcy5tb2Rlcz17fSx0aGlzLmZpbHRlcmVkSXRlbXM9dGhpcy5pdGVtcyx0aGlzLnNvcnRIaXN0b3J5PVtcIm9yaWdpbmFsLW9yZGVyXCJdO2Zvcih2YXIgdCBpbiByLm1vZGVzKXRoaXMuX2luaXRMYXlvdXRNb2RlKHQpfSxsLnJlbG9hZEl0ZW1zPWZ1bmN0aW9uKCl7dGhpcy5pdGVtR1VJRD0wLGUucHJvdG90eXBlLnJlbG9hZEl0ZW1zLmNhbGwodGhpcyl9LGwuX2l0ZW1pemU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9ZS5wcm90b3R5cGUuX2l0ZW1pemUuYXBwbHkodGhpcyxhcmd1bWVudHMpLGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIG49dFtpXTtuLmlkPXRoaXMuaXRlbUdVSUQrK31yZXR1cm4gdGhpcy5fdXBkYXRlSXRlbXNTb3J0RGF0YSh0KSx0fSxsLl9pbml0TGF5b3V0TW9kZT1mdW5jdGlvbih0KXt2YXIgZT1yLm1vZGVzW3RdLGk9dGhpcy5vcHRpb25zW3RdfHx7fTt0aGlzLm9wdGlvbnNbdF09ZS5vcHRpb25zP28uZXh0ZW5kKGUub3B0aW9ucyxpKTppLHRoaXMubW9kZXNbdF09bmV3IGUodGhpcyl9LGwubGF5b3V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2lzTGF5b3V0SW5pdGVkJiZ0aGlzLl9nZXRPcHRpb24oXCJpbml0TGF5b3V0XCIpP3ZvaWQgdGhpcy5hcnJhbmdlKCk6dm9pZCB0aGlzLl9sYXlvdXQoKX0sbC5fbGF5b3V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0SXNJbnN0YW50KCk7dGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKSx0aGlzLmxheW91dEl0ZW1zKHRoaXMuZmlsdGVyZWRJdGVtcyx0KSx0aGlzLl9pc0xheW91dEluaXRlZD0hMH0sbC5hcnJhbmdlPWZ1bmN0aW9uKHQpe3RoaXMub3B0aW9uKHQpLHRoaXMuX2dldElzSW5zdGFudCgpO3ZhciBlPXRoaXMuX2ZpbHRlcih0aGlzLml0ZW1zKTt0aGlzLmZpbHRlcmVkSXRlbXM9ZS5tYXRjaGVzLHRoaXMuX2JpbmRBcnJhbmdlQ29tcGxldGUoKSx0aGlzLl9pc0luc3RhbnQ/dGhpcy5fbm9UcmFuc2l0aW9uKHRoaXMuX2hpZGVSZXZlYWwsW2VdKTp0aGlzLl9oaWRlUmV2ZWFsKGUpLHRoaXMuX3NvcnQoKSx0aGlzLl9sYXlvdXQoKX0sbC5faW5pdD1sLmFycmFuZ2UsbC5faGlkZVJldmVhbD1mdW5jdGlvbih0KXt0aGlzLnJldmVhbCh0Lm5lZWRSZXZlYWwpLHRoaXMuaGlkZSh0Lm5lZWRIaWRlKX0sbC5fZ2V0SXNJbnN0YW50PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0T3B0aW9uKFwibGF5b3V0SW5zdGFudFwiKSxlPXZvaWQgMCE9PXQ/dDohdGhpcy5faXNMYXlvdXRJbml0ZWQ7cmV0dXJuIHRoaXMuX2lzSW5zdGFudD1lLGV9LGwuX2JpbmRBcnJhbmdlQ29tcGxldGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7ZSYmaSYmbiYmby5kaXNwYXRjaEV2ZW50KFwiYXJyYW5nZUNvbXBsZXRlXCIsbnVsbCxbby5maWx0ZXJlZEl0ZW1zXSl9dmFyIGUsaSxuLG89dGhpczt0aGlzLm9uY2UoXCJsYXlvdXRDb21wbGV0ZVwiLGZ1bmN0aW9uKCl7ZT0hMCx0KCl9KSx0aGlzLm9uY2UoXCJoaWRlQ29tcGxldGVcIixmdW5jdGlvbigpe2k9ITAsdCgpfSksdGhpcy5vbmNlKFwicmV2ZWFsQ29tcGxldGVcIixmdW5jdGlvbigpe249ITAsdCgpfSl9LGwuX2ZpbHRlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbnMuZmlsdGVyO2U9ZXx8XCIqXCI7Zm9yKHZhciBpPVtdLG49W10sbz1bXSxzPXRoaXMuX2dldEZpbHRlclRlc3QoZSkscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgYT10W3JdO2lmKCFhLmlzSWdub3JlZCl7dmFyIHU9cyhhKTt1JiZpLnB1c2goYSksdSYmYS5pc0hpZGRlbj9uLnB1c2goYSk6dXx8YS5pc0hpZGRlbnx8by5wdXNoKGEpfX1yZXR1cm57bWF0Y2hlczppLG5lZWRSZXZlYWw6bixuZWVkSGlkZTpvfX0sbC5fZ2V0RmlsdGVyVGVzdD1mdW5jdGlvbih0KXtyZXR1cm4gdSYmdGhpcy5vcHRpb25zLmlzSlF1ZXJ5RmlsdGVyaW5nP2Z1bmN0aW9uKGUpe3JldHVybiB1KGUuZWxlbWVudCkuaXModCl9OlwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZS5lbGVtZW50KX06ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZS5lbGVtZW50LHQpfX0sbC51cGRhdGVTb3J0RGF0YT1mdW5jdGlvbih0KXt2YXIgZTt0Pyh0PW8ubWFrZUFycmF5KHQpLGU9dGhpcy5nZXRJdGVtcyh0KSk6ZT10aGlzLml0ZW1zLHRoaXMuX2dldFNvcnRlcnMoKSx0aGlzLl91cGRhdGVJdGVtc1NvcnREYXRhKGUpfSxsLl9nZXRTb3J0ZXJzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmdldFNvcnREYXRhO2Zvcih2YXIgZSBpbiB0KXt2YXIgaT10W2VdO3RoaXMuX3NvcnRlcnNbZV09ZihpKX19LGwuX3VwZGF0ZUl0ZW1zU29ydERhdGE9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQmJnQubGVuZ3RoLGk9MDtlJiZlPmk7aSsrKXt2YXIgbj10W2ldO24udXBkYXRlU29ydERhdGEoKX19O3ZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgdClyZXR1cm4gdDt2YXIgaT1oKHQpLnNwbGl0KFwiIFwiKSxuPWlbMF0sbz1uLm1hdGNoKC9eXFxbKC4rKVxcXSQvKSxzPW8mJm9bMV0scj1lKHMsbiksYT1kLnNvcnREYXRhUGFyc2Vyc1tpWzFdXTtcbnJldHVybiB0PWE/ZnVuY3Rpb24odCl7cmV0dXJuIHQmJmEocih0KSl9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZyKHQpfX1mdW5jdGlvbiBlKHQsZSl7cmV0dXJuIHQ/ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQpfTpmdW5jdGlvbih0KXt2YXIgaT10LnF1ZXJ5U2VsZWN0b3IoZSk7cmV0dXJuIGkmJmkudGV4dENvbnRlbnR9fXJldHVybiB0fSgpO2Quc29ydERhdGFQYXJzZXJzPXtwYXJzZUludDpmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VJbnQodCwxMCl9LHBhcnNlRmxvYXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHBhcnNlRmxvYXQodCl9fSxsLl9zb3J0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnNvcnRCeTtpZih0KXt2YXIgZT1bXS5jb25jYXQuYXBwbHkodCx0aGlzLnNvcnRIaXN0b3J5KSxpPWEoZSx0aGlzLm9wdGlvbnMuc29ydEFzY2VuZGluZyk7dGhpcy5maWx0ZXJlZEl0ZW1zLnNvcnQoaSksdCE9dGhpcy5zb3J0SGlzdG9yeVswXSYmdGhpcy5zb3J0SGlzdG9yeS51bnNoaWZ0KHQpfX0sbC5fbW9kZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5sYXlvdXRNb2RlLGU9dGhpcy5tb2Rlc1t0XTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJObyBsYXlvdXQgbW9kZTogXCIrdCk7cmV0dXJuIGUub3B0aW9ucz10aGlzLm9wdGlvbnNbdF0sZX0sbC5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5fcmVzZXRMYXlvdXQuY2FsbCh0aGlzKSx0aGlzLl9tb2RlKCkuX3Jlc2V0TGF5b3V0KCl9LGwuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbW9kZSgpLl9nZXRJdGVtTGF5b3V0UG9zaXRpb24odCl9LGwuX21hbmFnZVN0YW1wPWZ1bmN0aW9uKHQpe3RoaXMuX21vZGUoKS5fbWFuYWdlU3RhbXAodCl9LGwuX2dldENvbnRhaW5lclNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kZSgpLl9nZXRDb250YWluZXJTaXplKCl9LGwubmVlZHNSZXNpemVMYXlvdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kZSgpLm5lZWRzUmVzaXplTGF5b3V0KCl9LGwuYXBwZW5kZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hZGRJdGVtcyh0KTtpZihlLmxlbmd0aCl7dmFyIGk9dGhpcy5fZmlsdGVyUmV2ZWFsQWRkZWQoZSk7dGhpcy5maWx0ZXJlZEl0ZW1zPXRoaXMuZmlsdGVyZWRJdGVtcy5jb25jYXQoaSl9fSxsLnByZXBlbmRlZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9pdGVtaXplKHQpO2lmKGUubGVuZ3RoKXt0aGlzLl9yZXNldExheW91dCgpLHRoaXMuX21hbmFnZVN0YW1wcygpO3ZhciBpPXRoaXMuX2ZpbHRlclJldmVhbEFkZGVkKGUpO3RoaXMubGF5b3V0SXRlbXModGhpcy5maWx0ZXJlZEl0ZW1zKSx0aGlzLmZpbHRlcmVkSXRlbXM9aS5jb25jYXQodGhpcy5maWx0ZXJlZEl0ZW1zKSx0aGlzLml0ZW1zPWUuY29uY2F0KHRoaXMuaXRlbXMpfX0sbC5fZmlsdGVyUmV2ZWFsQWRkZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZmlsdGVyKHQpO3JldHVybiB0aGlzLmhpZGUoZS5uZWVkSGlkZSksdGhpcy5yZXZlYWwoZS5tYXRjaGVzKSx0aGlzLmxheW91dEl0ZW1zKGUubWF0Y2hlcywhMCksZS5tYXRjaGVzfSxsLmluc2VydD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmFkZEl0ZW1zKHQpO2lmKGUubGVuZ3RoKXt2YXIgaSxuLG89ZS5sZW5ndGg7Zm9yKGk9MDtvPmk7aSsrKW49ZVtpXSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQobi5lbGVtZW50KTt2YXIgcz10aGlzLl9maWx0ZXIoZSkubWF0Y2hlcztmb3IoaT0wO28+aTtpKyspZVtpXS5pc0xheW91dEluc3RhbnQ9ITA7Zm9yKHRoaXMuYXJyYW5nZSgpLGk9MDtvPmk7aSsrKWRlbGV0ZSBlW2ldLmlzTGF5b3V0SW5zdGFudDt0aGlzLnJldmVhbChzKX19O3ZhciBjPWwucmVtb3ZlO3JldHVybiBsLnJlbW92ZT1mdW5jdGlvbih0KXt0PW8ubWFrZUFycmF5KHQpO3ZhciBlPXRoaXMuZ2V0SXRlbXModCk7Yy5jYWxsKHRoaXMsdCk7Zm9yKHZhciBpPWUmJmUubGVuZ3RoLG49MDtpJiZpPm47bisrKXt2YXIgcz1lW25dO28ucmVtb3ZlRnJvbSh0aGlzLmZpbHRlcmVkSXRlbXMscyl9fSxsLnNodWZmbGU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuaXRlbXMubGVuZ3RoO3QrKyl7dmFyIGU9dGhpcy5pdGVtc1t0XTtlLnNvcnREYXRhLnJhbmRvbT1NYXRoLnJhbmRvbSgpfXRoaXMub3B0aW9ucy5zb3J0Qnk9XCJyYW5kb21cIix0aGlzLl9zb3J0KCksdGhpcy5fbGF5b3V0KCl9LGwuX25vVHJhbnNpdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb247dGhpcy5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbj0wO3ZhciBuPXQuYXBwbHkodGhpcyxlKTtyZXR1cm4gdGhpcy5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbj1pLG59LGwuZ2V0RmlsdGVyZWRJdGVtRWxlbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXJlZEl0ZW1zLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5lbGVtZW50fSl9LGR9KTsiXSwiZmlsZSI6Imlzb3RvcGUucGtnZC5taW4uanMifQ==
;
(function () {
    "use strict"

    var $window = $(window),
        $document = $(document);

    var defaultTheme = {
        isElementInViewport: function (el) {
            if (typeof jQuery === "function" && el instanceof jQuery) {
                el = el[0];
            }
            var rect = el.getBoundingClientRect();
            return (
                rect.top >= 0 &&
                rect.top <= (window.innerHeight || document.documentElement.clientHeight)
            );
        },
        stickyNav: function () {
            $('body.sticky-nav .navigation')
                [$window.scrollTop() ? 'addClass' : 'removeClass']
            ('sticky');
            $('body.sticky-nav')
                [$window.scrollTop() ? 'addClass' : 'removeClass']
            ('sticky-padding');
        }
    }

    window.defaultTheme = defaultTheme;

    $window.on('load', function () {
        defaultTheme.stickyNav();

        $window.on('scroll resize', function () {
            defaultTheme.stickyNav();
        });
    });

    $document.ready(function () {
        $(document).ready(function () {
            if ($('.main-content > div:first').find('section').hasClass('js-header-transparent')) {

            } else {
                $('.navigation-holder').addClass('not-transparent');
            }
        })

        if ($(document.body).hasClass('sticky-nav')) {
            var navHeight = $('.navigation').outerHeight();
            defaultTheme.stickyNav();
        }
    });


    /* ###################### Counter ###################### */
    var numbCount = function (el) {
        var html = el.innerHTML.trim();
        var to = parseInt(html, 10);
        var inc = 120;
        if (to > 20) inc = 60;
        if (to > 60) inc = 40;
        if (to > 120) inc = 10;
        if (to > 320) inc = 5;
        if (to > 1220) inc = 3;
        if (to > 5000) inc = 1;
        if (!isNaN(to)) {
            var time = 10;
            for (var i = 1; i <= to; i++) {
                time += inc;
                (function (time, i, el) {
                    setTimeout(function () {
                        el.innerHTML = i;
                    }, time)
                })(time, i, el)
            }
        }
    }

    $.fn.isOnScreen = function () {
        var win = $window;

        var viewport = {
            top: win.scrollTop(),
            left: win.scrollLeft()
        };
        viewport.right = viewport.left + win.width();
        viewport.bottom = viewport.top + win.height();

        var bounds = this.offset();
        bounds.right = bounds.left + this.outerWidth();
        bounds.bottom = bounds.top + this.outerHeight();

        return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));
    };


    $window.on('load resize scroll', function () {
        setTimeout(function () {
            $('[data-counter]').each(function () {
                if ($(this).isOnScreen()) {
                    $(this).css({'visibility': 'visible'});
                    $(this).removeClass('js-start-from-zero');
                    if (!this.__activated) {

                        this.__activated = true;
                        numbCount(this);
                    }
                }
            });
        }, 10);

        $(".menu").css('maxHeight', ($window.height() - $(".navigation").outerHeight()))
    });


    /* ###################### Tabs ###################### */
    $document.ready(function () {
        var numTabs = $('.tabs .nav-tabs:not(.as-buttons)').find('li').length;
        var tabWidth = 100 / numTabs;
        var tabPercent = tabWidth + "%";
        $('.nav-tabs li').width(tabPercent);
    });
    /* ###################### Tabs ###################### */

    /* ###################### Section 4 and 5 padding ###################### */

    /* ###################### Top Top ###################### */
    $document.ready(function () {
        var ttopButton = $("#to-top");
        ttopButton.hide().on("click", function () {
            $("html, body").animate({
                scrollTop: 0
            }, "slow");
        });
        $window.scroll(function () {
            if ($window.scrollTop() === 0) {
                ttopButton.hide();
            } else {
                ttopButton.show();
            }
        });
    });
    /* ###################### To Top ###################### */

    /* ###################### Google Maps ###################### */
    $document.ready(function () {
        if ($('#map').length > 0) {
            var latitude = 42.662104;
            var longtitude = 23.3163666;
            var isDraggable = $document.width() > 991 ? true : false; // If document (your website) is wider than 480px, isDraggable = true, else isDraggable = false

            var locations = [
                ['', latitude, longtitude, 2]
            ];
            var styles = [
                {
                    "featureType": "all",
                    "elementType": "labels.text.fill",
                    "stylers": [
                        {
                            "saturation": 36
                        },
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 40
                        }
                    ]
                },
                {
                    "featureType": "all",
                    "elementType": "labels.text.stroke",
                    "stylers": [
                        {
                            "visibility": "on"
                        },
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 16
                        }
                    ]
                },
                {
                    "featureType": "all",
                    "elementType": "labels.icon",
                    "stylers": [
                        {
                            "visibility": "off"
                        }
                    ]
                },
                {
                    "featureType": "administrative",
                    "elementType": "geometry.fill",
                    "stylers": [
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 20
                        }
                    ]
                },
                {
                    "featureType": "administrative",
                    "elementType": "geometry.stroke",
                    "stylers": [
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 17
                        },
                        {
                            "weight": 1.2
                        }
                    ]
                },
                {
                    "featureType": "landscape",
                    "elementType": "geometry",
                    "stylers": [
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 20
                        }
                    ]
                },
                {
                    "featureType": "poi",
                    "elementType": "geometry",
                    "stylers": [
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 21
                        }
                    ]
                },
                {
                    "featureType": "road.highway",
                    "elementType": "geometry.fill",
                    "stylers": [
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 17
                        }
                    ]
                },
                {
                    "featureType": "road.highway",
                    "elementType": "geometry.stroke",
                    "stylers": [
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 29
                        },
                        {
                            "weight": 0.2
                        }
                    ]
                },
                {
                    "featureType": "road.arterial",
                    "elementType": "geometry",
                    "stylers": [
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 18
                        }
                    ]
                },
                {
                    "featureType": "road.local",
                    "elementType": "geometry",
                    "stylers": [
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 16
                        }
                    ]
                },
                {
                    "featureType": "transit",
                    "elementType": "geometry",
                    "stylers": [
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 19
                        }
                    ]
                },
                {
                    "featureType": "water",
                    "elementType": "geometry",
                    "stylers": [
                        {
                            "color": "#000000"
                        },
                        {
                            "lightness": 17
                        }
                    ]
                }
            ];

            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 17,
                scrollwheel: false,
                navigationControl: true,
                mapTypeControl: false,
                scaleControl: false,
                draggable: isDraggable,
                styles: styles,
                center: new google.maps.LatLng(latitude, longtitude),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            var infowindow = new google.maps.InfoWindow();
            var marker, i;
            for (i = 0; i < locations.length; i++) {
                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                    map: map,
                    icon: 'assets/img/section-16/marker.png'
                });
                google.maps.event.addListener(marker, 'click', (function (marker, i) {
                    return function () {
                        infowindow.setContent(locations[i][0]);
                    }
                })(marker, i));
            }
        }
    });
    /* ###################### Google Maps ###################### */


    /* ###################### Tooltip ###################### */
    $document.ready(function () {
        $('[data-toggle="tooltip"]').tooltip()
    });
    /* ###################### Tooltip ###################### */

    /* ###################### Project Gallery ###################### */
    function loadPortfolioGallerySettings() {

        return false;

        if ($window.width() > 991) {
            var projectGalleryHeight = $('.portfolio-inner-page .project-gallery').height();
            var projectGalleryWidth = $('.portfolio-inner-page .project-gallery').width();
            var projectInfoHeight = $('.portfolio-inner-page .project-info').height();
            $('.portfolio-inner-page .project-info').css({'max-width': projectGalleryWidth + 'px'});
            $('.portfolio-inner-page .js-in-viewport').css({'margin-top': projectInfoHeight + 'px'});
        } else {
            if ($('.portfolio-inner-page .project-gallery').length > 0) {
                $('.portfolio-inner-page .project-gallery').each(function () {
                    var el = $(this);
                    el.slick({
                        centerMode: true,
                        centerPadding: '0px',
                        slidesToShow: 1,
                        arrows: true,
                        dots: false,
                        adaptiveHeight: true
                    });
                });
            }
        }
    }

    $document.ready(function () {
        loadPortfolioGallerySettings();
    });

    $document.on('resize', function () {
        loadPortfolioGallerySettings();
    });


    $window.on('load', function () {
        /* ###################### Project Gallery ###################### */

        var pInfo = $('.project-info');

        pInfo.stickySidebar({
            containerSelector: '.project-holder',
            innerWrapperSelector: '.project-info-content',
            topSpacing: 115,
            bottomSpacing: 115
        });
    })

    $document.ready(function () {
        /* ###################### Magnific Popup with Video ###################### */
        $('.popup-youtube, .popup-vimeo, .popup-gmaps').magnificPopup({
            disableOn: 700,
            type: 'iframe',
            mainClass: 'mfp-fade',
            removalDelay: 160,
            preloader: false,

            fixedContentPos: false
        });
    });
    /* ###################### Magnific Popup with Video ###################### */

    /* ###################### Zoom Container Open Image ###################### */
    // $document.ready(function () {
    //     $('.zoomWindow').on('click', function () {
    //         var img = $(this).css('background-image');
    //         console.log(img);
    //     });
    // });
    /* ###################### Zoom Container Open Image ###################### */

    /* ###################### Video Section ###################### */
    function setHeightOnVideos() {
        var headerheight = $('.navigation-holder').height();
        var windowheight = $(window).height();
        $('.video-section').css('height', windowheight - headerheight + "px");
        $('.video-section .video').css('height', windowheight - headerheight + "px");
        $('.video-section .container-fluid').css('height', windowheight - headerheight + "px");
        $('#main').css('margin-top', headerheight + "px");
    }

    $document.ready(function () {
        setHeightOnVideos();
    });

    $window.on('resize', function () {
        setHeightOnVideos();
    });
    /* ###################### Video Section ###################### */

    /* ###################### Quantity ###################### */

    $document.ready(function () {
        $(".arrow.minus").on("click", function (m) {
            var i = $(this).parent().parent().find('input[name="quantity"], input[name="qty"], .js-qty');
            if (i.val() <= 1) {
                i.val("1").change();
            } else {
                var l = i.val() - 1;
                i.val(l).change();
            }
        });
        $(".arrow.plus").on("click", function (m) {
            var i = $(this).parent().parent().find('input[name="quantity"], input[name="qty"], .js-qty');
            if (i.val() <= 19) {
                var l = +i.val() + +1;
                i.val(l).change();
            }
        });
    });
    /* ###################### Quantity ###################### */
})();

$(document).ready(function () {
    $('#mw-template-new-world').removeClass('module');
})

/*$(document).ready(function () {
 $('.navigation .menu .list.menu-root').collapseNav({
 responsive: 1,
 mobile_break: 992,
 li_class: 'has-sub-menu dropdown'
 });

 if ($(window).width() <= 991) {
 $('.navigation .menu .list.menu-root .has-sub-menu a.dropdown-toggle').attr('href', 'javascript:;');
 $('.navigation .menu .list.menu-root .has-sub-menu').on('click', function (e) {
 // e.preventDefault();
 })
 }
 })*/

/* Ajax Loading */
$(window).on('load', function () {
    setTimeout(function () {
        $('body').addClass('page-loaded');
    }, 900);
})


$(document).ready(function () {
    $('.js-show-posts').on('click', function () {
        if ($(window).width() >= 992) {
            if ($('.js-posts-menu').hasClass('opened')) {
                $('.js-posts-menu').slideUp('slow');
                $('.js-posts-menu').removeClass('opened');
            } else {
                $('.js-posts-menu').slideDown('slow');
                $('.js-posts-menu').addClass('opened');
            }
        } else {
            if ($('.js-posts-menu').hasClass('opened')) {
                $('.js-posts-menu').hide("slide", {direction: "right"}, 500);
                $('.js-posts-menu').removeClass('opened');
            } else {
                $('.js-posts-menu').show("slide", {direction: "right"}, 500);
                $('.js-posts-menu').addClass('opened');
            }
        }
    });
})


function percent(num_amount, num_total) {
    if (num_amount == 0 || num_total == 0) {
        return 0;
    }
    var count1 = num_amount / num_total;
    var count2 = count1 * 100;

    count = count2;

    return count;
}


function setPaddingToSections() {
    if ($(window).width() > 991) {
        var headerWidth = $('.navigation-holder').width();
        var headerContainerWidth = $('.navigation-holder .navigation .container').width();
        var headerContainerFluidWidth = $('.container-fluid').width();

        var oneFluidColumn = headerContainerFluidWidth / 12;
        if ($(window).width() > 1199) {
            // oneFluidColumn = headerContainerFluidWidth / 12;
        }

        var oneColumn = 0;
        if ($(window).width() > 1199) {
            oneColumn = headerContainerWidth / 12;
        }

        $('.home-slider .container.info-holder').css({'padding-left': oneColumn + 'px', 'padding-right': oneColumn + 'px'});
        $('.home-slider .bx-controls-direction').css({'width': headerContainerWidth + 'px'});
    } else {

        $('.home-slider .container.info-holder').css({'padding-left': '40px', 'padding-right': '40px'});
        $('.home-slider .bx-controls-direction').css({'width': headerContainerWidth + 'px'});
    }

    if ($('html').attr('dir') == 'rtl') {
        if ($(window).width() > 991) {
            $('.section-16').each(function () {
                var leftSide = $(this).find('.left-side');
                leftSide.css({'padding-right': ((headerWidth - headerContainerWidth ) / 2) + 10 + oneColumn + 'px'});
                leftSide.find('.info-holder').css({'margin-left': '-' + oneFluidColumn + 'px'});
            })

            $('.section-17').each(function () {
                var rightSide = $(this).find('.right-side');
                rightSide.css({'padding-left': ((headerWidth - headerContainerWidth ) / 2) + 10 + oneColumn + 'px'});
                rightSide.find('.info-holder').css({'margin-right': '-' + oneFluidColumn + 'px'});
            })
        } else {
            $('.section-16').each(function () {
                var leftSide = $(this).find('.left-side');
                leftSide.css({'padding-right': ''});
                leftSide.find('.info-holder').css({'margin-left': ''});
            })

            $('.section-17').each(function () {
                var rightSide = $(this).find('.right-side');
                rightSide.css({'padding-left': ''});
                rightSide.find('.info-holder').css({'margin-right': ''});
            })
        }
    } else {
        if ($(window).width() > 991) {
            $('.section-16').each(function () {
                var leftSide = $(this).find('.left-side');
                leftSide.css({'padding-left': ((headerWidth - headerContainerWidth ) / 2) + 10 + oneColumn + 'px'});
                leftSide.find('.info-holder').css({'margin-right': '-' + oneFluidColumn + 'px'});
            })

            $('.section-17').each(function () {
                var rightSide = $(this).find('.right-side');
                rightSide.css({'padding-right': ((headerWidth - headerContainerWidth ) / 2) + 10 + oneColumn + 'px'});
                rightSide.find('.info-holder').css({'margin-left': '-' + oneFluidColumn + 'px'});
            })
        } else {
            $('.section-16').each(function () {
                var leftSide = $(this).find('.left-side');
                leftSide.css({'padding-left': ''});
                leftSide.find('.info-holder').css({'margin-right': ''});
            })
            $('.section-17').each(function () {
                var rightSide = $(this).find('.right-side');
                rightSide.css({'padding-right': ''});
                rightSide.find('.info-holder').css({'margin-left': ''});
            });
        }
    }
}

$(document).ready(function () {
    setPaddingToSections();
});

$(window).on('resize', function () {
    setPaddingToSections();
});


/* ###################### Masonry Gallery with Magnific Popup ###################### */
function istotopeFilter() {
    var filterValue = '.masonry-holder';

    $('.masonry-team .js-masonry-grid-works-filter .list-masonry-grid-works-filter__item a.list-masonry-grid-works-filter__link_active').each(function (index) {
        filterValue = filterValue + ', ' + $(this).attr('data-filter');
    });

    if (filterValue == '.masonry-holder') {
        $('.js-masonry-grid-works-filter li:first-of-type a').addClass('btn-primary list-masonry-grid-works-filter__link_active');
        $('.js-masonry-grid-works-filter li:first-of-type a').removeClass('btn-outline-primary shadow-md');
        filterValue = '*';
    }

    masonryGrid.isotope({
        filter: filterValue
    });

    // console.log(filterValue);
}


var masonryGrid = $('.masonry-team .js-masonry-grid-works');


$(window).on('load', function () {
    // masonry grid
    setTimeout(function () {
        masonryGrid.masonry({
            itemSelector: '.js-masonry-grid-works__item',
            columnWidth: '.js-masonry-grid-works__sizer',
            percentPosition: true
        }).isotope();
    }, 10);
});


$(document).ready(function () {
    // isotope filtering panel
    $('.masonry-team .js-masonry-grid-works-filter').on('click', 'a:not(.all)', function (e) {
        e.preventDefault();

        $('body').find('a.all').removeClass('btn-primary list-masonry-grid-works-filter__link_active');
        $('body').find('a.all').addClass('btn-outline-primary shadow-md');

        $(this).addClass('btn-primary list-masonry-grid-works-filter__link_active');
        $(this).removeClass('btn-outline-primary shadow-md');

        istotopeFilter();
    });

    $('.masonry-team .js-masonry-grid-works-filter').on('click', 'a.list-masonry-grid-works-filter__link_active', function (e) {
        e.preventDefault();

        $(this).removeClass('btn-primary list-masonry-grid-works-filter__link_active');
        $(this).addClass('btn-outline-primary shadow-md');

        istotopeFilter();
    });


    $('.masonry-team .js-masonry-grid-works-filter').on('click', 'a.all', function (e) {
        e.preventDefault();

        $('.masonry-team .js-masonry-grid-works-filter .list-masonry-grid-works-filter__item a.list-masonry-grid-works-filter__link_active').each(function (index) {
            $(this).removeClass('btn-primary list-masonry-grid-works-filter__link_active');
            $(this).addClass('btn-outline-primary shadow-md');
        });

        $(this).removeClass('btn-outline-primary shadow-md');
        $(this).addClass('btn-primary list-masonry-grid-works-filter__link_active');

        istotopeFilter();
    });
});
/* ###################### Masonry Gallery with Magnific Popup ###################### */


$(document).ready(function () {
    if (!$('body').hasClass('mw-live-edit')) {
        // AOS.init();
    }
})


/* ###################### Elevate Zoom ###################### */
$(document).ready(function () {

    var elevateZoomTurnOn = $(document).width() > 991 ? true : false;

    if (elevateZoomTurnOn) {
        $("#elevatezoom").elevateZoom({
            gallery: 'elevatezoom-gallery',
            cursor: "crosshair",
            galleryActiveClass: 'active',
            imageCrossfade: true,
            zoomType: "inner"
        });


        //pass the images to Fancybox
        $("#elevatezoom").bind("click", function (e) {
            var ez = $('#elevatezoom').data('elevateZoom');

            var res = [];
            $.each(ez.getGalleryList(), function () {
                res.push({src: this.href})
            });

            $.magnificPopup.open({
                items: res,
                gallery: {
                    enabled: true
                },
                type: 'image'
            });

            return false;
        });
    }

    var eGallery = $('#elevatezoom-gallery');
    if (eGallery.length > 0) {
        eGallery.each(function () {
            var el = $(this);
            el.slick({
                centerMode: true,
                centerPadding: '0',
                slidesToShow: 5,
                slidesToScroll: 1,
                arrows: true,
                autoplay: false,
                autoplaySpeed: 2000,
                dots: false,
                infinite: true,
                responsive: [
                    {
                        breakpoint: 767,
                        settings: {
                            slidesToShow: 2
                        }
                    }
                ]
            });
        });
    }
});
/* ###################### Elevate Zoom ###################### */



/* ###################### Navigation ###################### */

// Sidebar navigation menu
function sidbarNav() {
    if ($('.navigation').hasClass('js-sidebar-nav')) {

        $('html').addClass('sidebar-nav-website');
        var sidebarNavElemOfset = $('html.sidebar-nav-website body.sticky-nav .navigation .menu-overlay');
        var navHeight = $('.navigation').outerHeight();

        if ($(window).width() > 768) {
            $(sidebarNavElemOfset).css({'margin-top': navHeight + 'px'});
        } else {
            $(sidebarNavElemOfset).css({'margin-top': ''});
        }

        if ($(window).width() > 1366) {
            $('.sidebar-nav-website .toggle a').addClass('blocked-toggle');
            $('.sidebar-nav-website .toggle a').on('click', function () {
                $('.sidebar-nav-website .slick-slider').slick('refresh').slick('setPosition');
            });

        } else {
            $('.sidebar-nav-website .toggle a').removeClass('blocked-toggle');

            $(document.body).on('click', function (ev) {
                var curr = $(ev.target);
                if (curr.parents('.menu-overlay,.toggle').length === 0) {
                    $('html.sidebar-nav-website').removeClass('mobile-menu-active');
                    $('html.sidebar-nav-website .toggle a').removeClass('active');
                    $('html.sidebar-nav-website .navigation .menu').removeClass('main-menu-open');
                }
            });
        }

    }
}

/*
 if (!Cookies.get('sidebar-nav-state')) {
 Cookies.set('sidebar-nav-state', 'open');
 }
 */

function sidbarNavEvent() {
    if (window.matchMedia("(min-width: 1366px)").matches) {
        if ($('html').hasClass('sidebar-nav-website')) {
            //$('html').addClass('mobile-menu-active');
            $('.sidebar-nav-website .js-menu-toggle').on('click', function () {
                if ($('html').hasClass('mobile-menu-active')) {
                    Cookies.set('sidebar-nav-state', 'open');
                } else {
                    Cookies.set('sidebar-nav-state', 'close');
                }
            });

            if (Cookies.get('sidebar-nav-state') == 'open') {
                $('html').addClass('mobile-menu-active');
            } else {
                $('html').removeClass('mobile-menu-active');
            }
        }
    } else {
        if ($('html').hasClass('sidebar-nav-website')) {
            $('html').removeClass('mobile-menu-active');
        }
        if ($('.sidebar-nav-website .toggle a').hasClass('active')) {
            $('.sidebar-nav-website .toggle a').removeClass('active');
        }

    }
}


// Shopping cart
$(document).on('click', '.dropdown-menu.shopping-cart', function (event) {
    if ($(event.target.nodeName !== 'A')) {
        event.stopPropagation();
    }
});


//General for all header menu
if ($('.dropdown-menu li').hasClass('active')) {
    var $this = $('.dropdown-menu li.active');
    $($this).closest('.dropdown').addClass('active');
}

$(".navigation .menu li, .navigation .secondary-menu li").each(function () {
    if ($(this.children).filter('ul').length > 0) {
        $(this).addClass('has-sub-menu');
    }
});

// Main menu

$(document.body).on('click', function (e) {
    var curr = $(e.target);
    if (curr.parents('.menu-overlay,.toggle').length === 0) {
        $('html:not(.sidebar-nav-website)').removeClass('mobile-menu-active');
        $('html:not(.sidebar-nav-website) .js-menu-toggle').removeClass('active');
        $('html:not(.sidebar-nav-website) body').removeClass('lock-scroll');
        $('html:not(.sidebar-nav-website) .navigation .menu').removeClass('main-menu-open');
    }
});

$('.js-menu-toggle').on('click', function () {
    if ($('html').hasClass('mobile-menu-active')) {
        $('html').removeClass('mobile-menu-active');
        $('html:not(.sidebar-nav-website) body').removeClass('lock-scroll');

    } else {
        $('html').addClass('mobile-menu-active');
        $('html:not(.sidebar-nav-website) body').addClass('lock-scroll');
    }

    if ($('.js-menu-toggle').hasClass('active')) {
        $('.js-menu-toggle').removeClass('active');
    } else {
        $('.js-menu-toggle').addClass('active');
    }

    $('.navigation .secondary-menu').removeClass('secondary-menu-open');
    $('.js-extra-menu-toggle').removeClass('active');
    $('body').removeClass('lock-scroll-extra-menu');
});

$(document).on("click", ".menu .module-menu .has-sub-menu > a", function (e) {
    var parent = $(this).parent();
    var ul = parent.children('ul');
    //console.log($('.mobile-menu-active').length > 0);
    if (ul.length === 1 && $('.mobile-menu-active').length > 0) {
        e.preventDefault();
        this.classList.toggle('submenu-expanded');
        var content = this.nextElementSibling;
        content.classList.toggle('active-icon');
        ul.slideToggle(function () {
            if (this.style.display == 'none') {
                this.style.display = '';
            }
        });
    }
});

// Only for Main menu mobile member nav
$(".menu .mobile-profile.has-sub-menu > a").on("click", function (e) {
    var parent = $(this).parent();
    var ul = parent.children('ul');
    console.log($('.mobile-menu-active').length > 0);
    if (ul.length === 1 && $('.mobile-menu-active').length > 0) {
        e.preventDefault();
        ul.slideToggle(function () {
            if (this.style.display == 'none') {
                this.style.display = '';
            }
        });
    }
});


// Sidebar navigation menu
sidbarNav();
sidbarNavEvent();
$(window).on('resize', function () {
    sidbarNav();
});


// Second menu
$(document.body).on('click', function (e) {
    var curr = $(e.target);
    if (curr.parents('.secondary-menu,.extra-toggle').length === 0) {
        $('html').removeClass('mobile-extra-menu-active');
        $('.navigation .secondary-menu').removeClass('secondary-menu-open');
        $('.js-extra-menu-toggle').removeClass('active');
        $('body').removeClass('lock-scroll-extra-menu');
    }
});

$('.js-extra-menu-toggle').on('click', function () {
    $('html').toggleClass('mobile-extra-menu-active');
    $('body').toggleClass('lock-scroll-extra-menu');

    if ($('html').hasClass('mobile-extra-menu-active')) {
        $('.js-extra-menu-toggle').addClass('active');
        $('.navigation .secondary-menu').addClass('secondary-menu-open');
        $('.navigation .menu').removeClass('main-menu-open');
    } else {
        $('.navigation .secondary-menu').removeClass('secondary-menu-open');
        $('.js-extra-menu-toggle').removeClass('active');
    }
    $('.js-menu-toggle').removeClass('active');
    $('.dropdown').removeClass('show');
    $('.dropdown-menu').removeClass('show');
    $('body').removeClass('lock-scroll');
});

$(document).on("click", ".secondary-menu .module-menu .has-sub-menu > a", function (e) {
    var parent = $(this).parent();
    var ul = parent.children('ul');
    //console.log($('.mobile-extra-menu-active').length > 0);
    if (ul.length === 1 && $('.mobile-extra-menu-active').length > 0) {
        e.preventDefault();
        ul.slideToggle(function () {
            if (this.style.display == 'none') {
                this.style.display = '';
            }
        });
    }
});
// Only for Secondary menu mobile member nav
$(".secondary-menu .mobile-profile.has-sub-menu > a").on("click", function (e) {
    var parent = $(this).parent();
    var ul = parent.children('ul');
    console.log($('.mobile-extra-menu-active').length > 0);
    if (ul.length === 1 && $('.mobile-extra-menu-active').length > 0) {
        e.preventDefault();
        ul.slideToggle(function () {
            if (this.style.display == 'none') {
                this.style.display = '';
            }
        });
    }
});

$(document).ready(function () {
    $('.navigation .menu .list.menu-root').collapseNav({
        responsive: 1,
        mobile_break: 992,
        li_class: 'has-sub-menu dropdown'
    });

    if ($(window).width() <= 991) {
        $('.navigation .menu .list.menu-root .has-sub-menu a.dropdown-toggle').attr('href', 'javascript:;');
        $('.navigation .menu .list.menu-root .has-sub-menu').on('click', function (e) {
            // e.preventDefault();
        })
    }
});

$(".dropdown.has-sub-menu").on("click", function (e) {
    $(this).toggleClass('show');
});

/*
$(document).on('click', '.dropdown.has-sub-menu > a', function (event) {
    event.preventDefault();
});
*/

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCJcblxuICAgIHZhciAkd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcblxuICAgIHZhciBkZWZhdWx0VGhlbWUgPSB7XG4gICAgICAgIGlzRWxlbWVudEluVmlld3BvcnQ6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBqUXVlcnkgPT09IFwiZnVuY3Rpb25cIiAmJiBlbCBpbnN0YW5jZW9mIGpRdWVyeSkge1xuICAgICAgICAgICAgICAgIGVsID0gZWxbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICByZWN0LnRvcCA+PSAwICYmXG4gICAgICAgICAgICAgICAgcmVjdC50b3AgPD0gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RpY2t5TmF2OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCdib2R5LnN0aWNreS1uYXYgLm5hdmlnYXRpb24nKVxuICAgICAgICAgICAgICAgIFskd2luZG93LnNjcm9sbFRvcCgpID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcyddXG4gICAgICAgICAgICAoJ3N0aWNreScpO1xuICAgICAgICAgICAgJCgnYm9keS5zdGlja3ktbmF2JylcbiAgICAgICAgICAgICAgICBbJHdpbmRvdy5zY3JvbGxUb3AoKSA/ICdhZGRDbGFzcycgOiAncmVtb3ZlQ2xhc3MnXVxuICAgICAgICAgICAgKCdzdGlja3ktcGFkZGluZycpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgd2luZG93LmRlZmF1bHRUaGVtZSA9IGRlZmF1bHRUaGVtZTtcblxuICAgICR3aW5kb3cub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlZmF1bHRUaGVtZS5zdGlja3lOYXYoKTtcblxuICAgICAgICAkd2luZG93Lm9uKCdzY3JvbGwgcmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVmYXVsdFRoZW1lLnN0aWNreU5hdigpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgICRkb2N1bWVudC5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKCcubWFpbi1jb250ZW50ID4gZGl2OmZpcnN0JykuZmluZCgnc2VjdGlvbicpLmhhc0NsYXNzKCdqcy1oZWFkZXItdHJhbnNwYXJlbnQnKSkge1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5uYXZpZ2F0aW9uLWhvbGRlcicpLmFkZENsYXNzKCdub3QtdHJhbnNwYXJlbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBpZiAoJChkb2N1bWVudC5ib2R5KS5oYXNDbGFzcygnc3RpY2t5LW5hdicpKSB7XG4gICAgICAgICAgICB2YXIgbmF2SGVpZ2h0ID0gJCgnLm5hdmlnYXRpb24nKS5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgZGVmYXVsdFRoZW1lLnN0aWNreU5hdigpO1xuICAgICAgICB9XG4gICAgfSk7XG5cblxuICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgQ291bnRlciAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG4gICAgdmFyIG51bWJDb3VudCA9IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICB2YXIgaHRtbCA9IGVsLmlubmVySFRNTC50cmltKCk7XG4gICAgICAgIHZhciB0byA9IHBhcnNlSW50KGh0bWwsIDEwKTtcbiAgICAgICAgdmFyIGluYyA9IDEyMDtcbiAgICAgICAgaWYgKHRvID4gMjApIGluYyA9IDYwO1xuICAgICAgICBpZiAodG8gPiA2MCkgaW5jID0gNDA7XG4gICAgICAgIGlmICh0byA+IDEyMCkgaW5jID0gMTA7XG4gICAgICAgIGlmICh0byA+IDMyMCkgaW5jID0gNTtcbiAgICAgICAgaWYgKHRvID4gMTIyMCkgaW5jID0gMztcbiAgICAgICAgaWYgKHRvID4gNTAwMCkgaW5jID0gMTtcbiAgICAgICAgaWYgKCFpc05hTih0bykpIHtcbiAgICAgICAgICAgIHZhciB0aW1lID0gMTA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSB0bzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGltZSArPSBpbmM7XG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uICh0aW1lLCBpLCBlbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHRpbWUpXG4gICAgICAgICAgICAgICAgfSkodGltZSwgaSwgZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkLmZuLmlzT25TY3JlZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3aW4gPSAkd2luZG93O1xuXG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHtcbiAgICAgICAgICAgIHRvcDogd2luLnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgbGVmdDogd2luLnNjcm9sbExlZnQoKVxuICAgICAgICB9O1xuICAgICAgICB2aWV3cG9ydC5yaWdodCA9IHZpZXdwb3J0LmxlZnQgKyB3aW4ud2lkdGgoKTtcbiAgICAgICAgdmlld3BvcnQuYm90dG9tID0gdmlld3BvcnQudG9wICsgd2luLmhlaWdodCgpO1xuXG4gICAgICAgIHZhciBib3VuZHMgPSB0aGlzLm9mZnNldCgpO1xuICAgICAgICBib3VuZHMucmlnaHQgPSBib3VuZHMubGVmdCArIHRoaXMub3V0ZXJXaWR0aCgpO1xuICAgICAgICBib3VuZHMuYm90dG9tID0gYm91bmRzLnRvcCArIHRoaXMub3V0ZXJIZWlnaHQoKTtcblxuICAgICAgICByZXR1cm4gKCEodmlld3BvcnQucmlnaHQgPCBib3VuZHMubGVmdCB8fCB2aWV3cG9ydC5sZWZ0ID4gYm91bmRzLnJpZ2h0IHx8IHZpZXdwb3J0LmJvdHRvbSA8IGJvdW5kcy50b3AgfHwgdmlld3BvcnQudG9wID4gYm91bmRzLmJvdHRvbSkpO1xuICAgIH07XG5cblxuICAgICR3aW5kb3cub24oJ2xvYWQgcmVzaXplIHNjcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCdbZGF0YS1jb3VudGVyXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzT25TY3JlZW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7J3Zpc2liaWxpdHknOiAndmlzaWJsZSd9KTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnanMtc3RhcnQtZnJvbS16ZXJvJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fX2FjdGl2YXRlZCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9fYWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bWJDb3VudCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCAxMCk7XG5cbiAgICAgICAgJChcIi5tZW51XCIpLmNzcygnbWF4SGVpZ2h0JywgKCR3aW5kb3cuaGVpZ2h0KCkgLSAkKFwiLm5hdmlnYXRpb25cIikub3V0ZXJIZWlnaHQoKSkpXG4gICAgfSk7XG5cblxuICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgVGFicyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG4gICAgJGRvY3VtZW50LnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG51bVRhYnMgPSAkKCcudGFicyAubmF2LXRhYnM6bm90KC5hcy1idXR0b25zKScpLmZpbmQoJ2xpJykubGVuZ3RoO1xuICAgICAgICB2YXIgdGFiV2lkdGggPSAxMDAgLyBudW1UYWJzO1xuICAgICAgICB2YXIgdGFiUGVyY2VudCA9IHRhYldpZHRoICsgXCIlXCI7XG4gICAgICAgICQoJy5uYXYtdGFicyBsaScpLndpZHRoKHRhYlBlcmNlbnQpO1xuICAgIH0pO1xuICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgVGFicyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG5cbiAgICAvKiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFNlY3Rpb24gNCBhbmQgNSBwYWRkaW5nICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgKi9cblxuICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgVG9wIFRvcCAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG4gICAgJGRvY3VtZW50LnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHR0b3BCdXR0b24gPSAkKFwiI3RvLXRvcFwiKTtcbiAgICAgICAgdHRvcEJ1dHRvbi5oaWRlKCkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IDBcbiAgICAgICAgICAgIH0sIFwic2xvd1wiKTtcbiAgICAgICAgfSk7XG4gICAgICAgICR3aW5kb3cuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkd2luZG93LnNjcm9sbFRvcCgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdHRvcEJ1dHRvbi5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHR0b3BCdXR0b24uc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAvKiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFRvIFRvcCAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG5cbiAgICAvKiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIEdvb2dsZSBNYXBzICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgKi9cbiAgICAkZG9jdW1lbnQucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCgnI21hcCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBsYXRpdHVkZSA9IDQyLjY2MjEwNDtcbiAgICAgICAgICAgIHZhciBsb25ndGl0dWRlID0gMjMuMzE2MzY2NjtcbiAgICAgICAgICAgIHZhciBpc0RyYWdnYWJsZSA9ICRkb2N1bWVudC53aWR0aCgpID4gOTkxID8gdHJ1ZSA6IGZhbHNlOyAvLyBJZiBkb2N1bWVudCAoeW91ciB3ZWJzaXRlKSBpcyB3aWRlciB0aGFuIDQ4MHB4LCBpc0RyYWdnYWJsZSA9IHRydWUsIGVsc2UgaXNEcmFnZ2FibGUgPSBmYWxzZVxuXG4gICAgICAgICAgICB2YXIgbG9jYXRpb25zID0gW1xuICAgICAgICAgICAgICAgIFsnJywgbGF0aXR1ZGUsIGxvbmd0aXR1ZGUsIDJdXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdmFyIHN0eWxlcyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNhdHVyYXRpb25cIjogMzZcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMwMDAwMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiA0MFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LnN0cm9rZVwiLFxuICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidmlzaWJpbGl0eVwiOiBcIm9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMwMDAwMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiAxNlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy5pY29uXCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwiYWRtaW5pc3RyYXRpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5LmZpbGxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzAwMDAwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGlnaHRuZXNzXCI6IDIwXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcImFkbWluaXN0cmF0aXZlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeS5zdHJva2VcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzAwMDAwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGlnaHRuZXNzXCI6IDE3XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2VpZ2h0XCI6IDEuMlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJsYW5kc2NhcGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMwMDAwMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiAyMFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2lcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMwMDAwMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiAyMVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmhpZ2h3YXlcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5LmZpbGxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzAwMDAwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGlnaHRuZXNzXCI6IDE3XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQuaGlnaHdheVwiLFxuICAgICAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnkuc3Ryb2tlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMwMDAwMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiAyOVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndlaWdodFwiOiAwLjJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5hcnRlcmlhbFwiLFxuICAgICAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcbiAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiIzAwMDAwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGlnaHRuZXNzXCI6IDE4XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQubG9jYWxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMwMDAwMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiAxNlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ0cmFuc2l0XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxuICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjMDAwMDAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsaWdodG5lc3NcIjogMTlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwid2F0ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiMwMDAwMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiAxN1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgICAgICAgICAgICAgem9vbTogMTcsXG4gICAgICAgICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb25Db250cm9sOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1hcFR5cGVDb250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzY2FsZUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogaXNEcmFnZ2FibGUsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBzdHlsZXMsXG4gICAgICAgICAgICAgICAgY2VudGVyOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxhdGl0dWRlLCBsb25ndGl0dWRlKSxcbiAgICAgICAgICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBpbmZvd2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coKTtcbiAgICAgICAgICAgIHZhciBtYXJrZXIsIGk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uc1tpXVsxXSwgbG9jYXRpb25zW2ldWzJdKSxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdhc3NldHMvaW1nL3NlY3Rpb24tMTYvbWFya2VyLnBuZydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsIChmdW5jdGlvbiAobWFya2VyLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvd2luZG93LnNldENvbnRlbnQobG9jYXRpb25zW2ldWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKG1hcmtlciwgaSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgLyogIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBHb29nbGUgTWFwcyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG5cblxuICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgVG9vbHRpcCAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG4gICAgJGRvY3VtZW50LnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXScpLnRvb2x0aXAoKVxuICAgIH0pO1xuICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgVG9vbHRpcCAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG5cbiAgICAvKiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFByb2plY3QgR2FsbGVyeSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG4gICAgZnVuY3Rpb24gbG9hZFBvcnRmb2xpb0dhbGxlcnlTZXR0aW5ncygpIHtcblxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgaWYgKCR3aW5kb3cud2lkdGgoKSA+IDk5MSkge1xuICAgICAgICAgICAgdmFyIHByb2plY3RHYWxsZXJ5SGVpZ2h0ID0gJCgnLnBvcnRmb2xpby1pbm5lci1wYWdlIC5wcm9qZWN0LWdhbGxlcnknKS5oZWlnaHQoKTtcbiAgICAgICAgICAgIHZhciBwcm9qZWN0R2FsbGVyeVdpZHRoID0gJCgnLnBvcnRmb2xpby1pbm5lci1wYWdlIC5wcm9qZWN0LWdhbGxlcnknKS53aWR0aCgpO1xuICAgICAgICAgICAgdmFyIHByb2plY3RJbmZvSGVpZ2h0ID0gJCgnLnBvcnRmb2xpby1pbm5lci1wYWdlIC5wcm9qZWN0LWluZm8nKS5oZWlnaHQoKTtcbiAgICAgICAgICAgICQoJy5wb3J0Zm9saW8taW5uZXItcGFnZSAucHJvamVjdC1pbmZvJykuY3NzKHsnbWF4LXdpZHRoJzogcHJvamVjdEdhbGxlcnlXaWR0aCArICdweCd9KTtcbiAgICAgICAgICAgICQoJy5wb3J0Zm9saW8taW5uZXItcGFnZSAuanMtaW4tdmlld3BvcnQnKS5jc3MoeydtYXJnaW4tdG9wJzogcHJvamVjdEluZm9IZWlnaHQgKyAncHgnfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoJCgnLnBvcnRmb2xpby1pbm5lci1wYWdlIC5wcm9qZWN0LWdhbGxlcnknKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJCgnLnBvcnRmb2xpby1pbm5lci1wYWdlIC5wcm9qZWN0LWdhbGxlcnknKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgZWwuc2xpY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyTW9kZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlclBhZGRpbmc6ICcwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyb3dzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG90czogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGl2ZUhlaWdodDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgICRkb2N1bWVudC5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxvYWRQb3J0Zm9saW9HYWxsZXJ5U2V0dGluZ3MoKTtcbiAgICB9KTtcblxuICAgICRkb2N1bWVudC5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2FkUG9ydGZvbGlvR2FsbGVyeVNldHRpbmdzKCk7XG4gICAgfSk7XG5cblxuICAgICR3aW5kb3cub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgUHJvamVjdCBHYWxsZXJ5ICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgKi9cblxuICAgICAgICB2YXIgcEluZm8gPSAkKCcucHJvamVjdC1pbmZvJyk7XG5cbiAgICAgICAgcEluZm8uc3RpY2t5U2lkZWJhcih7XG4gICAgICAgICAgICBjb250YWluZXJTZWxlY3RvcjogJy5wcm9qZWN0LWhvbGRlcicsXG4gICAgICAgICAgICBpbm5lcldyYXBwZXJTZWxlY3RvcjogJy5wcm9qZWN0LWluZm8tY29udGVudCcsXG4gICAgICAgICAgICB0b3BTcGFjaW5nOiAxMTUsXG4gICAgICAgICAgICBib3R0b21TcGFjaW5nOiAxMTVcbiAgICAgICAgfSk7XG4gICAgfSlcblxuICAgICRkb2N1bWVudC5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgTWFnbmlmaWMgUG9wdXAgd2l0aCBWaWRlbyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG4gICAgICAgICQoJy5wb3B1cC15b3V0dWJlLCAucG9wdXAtdmltZW8sIC5wb3B1cC1nbWFwcycpLm1hZ25pZmljUG9wdXAoe1xuICAgICAgICAgICAgZGlzYWJsZU9uOiA3MDAsXG4gICAgICAgICAgICB0eXBlOiAnaWZyYW1lJyxcbiAgICAgICAgICAgIG1haW5DbGFzczogJ21mcC1mYWRlJyxcbiAgICAgICAgICAgIHJlbW92YWxEZWxheTogMTYwLFxuICAgICAgICAgICAgcHJlbG9hZGVyOiBmYWxzZSxcblxuICAgICAgICAgICAgZml4ZWRDb250ZW50UG9zOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAvKiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIE1hZ25pZmljIFBvcHVwIHdpdGggVmlkZW8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAqL1xuXG4gICAgLyogIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBab29tIENvbnRhaW5lciBPcGVuIEltYWdlICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgKi9cbiAgICAvLyAkZG9jdW1lbnQucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICAkKCcuem9vbVdpbmRvdycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgICAgICAgIHZhciBpbWcgPSAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScpO1xuICAgIC8vICAgICAgICAgY29uc29sZS5sb2coaW1nKTtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfSk7XG4gICAgLyogIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBab29tIENvbnRhaW5lciBPcGVuIEltYWdlICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgKi9cblxuICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgVmlkZW8gU2VjdGlvbiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG4gICAgZnVuY3Rpb24gc2V0SGVpZ2h0T25WaWRlb3MoKSB7XG4gICAgICAgIHZhciBoZWFkZXJoZWlnaHQgPSAkKCcubmF2aWdhdGlvbi1ob2xkZXInKS5oZWlnaHQoKTtcbiAgICAgICAgdmFyIHdpbmRvd2hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcbiAgICAgICAgJCgnLnZpZGVvLXNlY3Rpb24nKS5jc3MoJ2hlaWdodCcsIHdpbmRvd2hlaWdodCAtIGhlYWRlcmhlaWdodCArIFwicHhcIik7XG4gICAgICAgICQoJy52aWRlby1zZWN0aW9uIC52aWRlbycpLmNzcygnaGVpZ2h0Jywgd2luZG93aGVpZ2h0IC0gaGVhZGVyaGVpZ2h0ICsgXCJweFwiKTtcbiAgICAgICAgJCgnLnZpZGVvLXNlY3Rpb24gLmNvbnRhaW5lci1mbHVpZCcpLmNzcygnaGVpZ2h0Jywgd2luZG93aGVpZ2h0IC0gaGVhZGVyaGVpZ2h0ICsgXCJweFwiKTtcbiAgICAgICAgJCgnI21haW4nKS5jc3MoJ21hcmdpbi10b3AnLCBoZWFkZXJoZWlnaHQgKyBcInB4XCIpO1xuICAgIH1cblxuICAgICRkb2N1bWVudC5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldEhlaWdodE9uVmlkZW9zKCk7XG4gICAgfSk7XG5cbiAgICAkd2luZG93Lm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldEhlaWdodE9uVmlkZW9zKCk7XG4gICAgfSk7XG4gICAgLyogIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBWaWRlbyBTZWN0aW9uICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgKi9cblxuICAgIC8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgUXVhbnRpdHkgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAqL1xuXG4gICAgJGRvY3VtZW50LnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIi5hcnJvdy5taW51c1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICB2YXIgaSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZCgnaW5wdXRbbmFtZT1cInF1YW50aXR5XCJdLCBpbnB1dFtuYW1lPVwicXR5XCJdLCAuanMtcXR5Jyk7XG4gICAgICAgICAgICBpZiAoaS52YWwoKSA8PSAxKSB7XG4gICAgICAgICAgICAgICAgaS52YWwoXCIxXCIpLmNoYW5nZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbCA9IGkudmFsKCkgLSAxO1xuICAgICAgICAgICAgICAgIGkudmFsKGwpLmNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5hcnJvdy5wbHVzXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIHZhciBpID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCdpbnB1dFtuYW1lPVwicXVhbnRpdHlcIl0sIGlucHV0W25hbWU9XCJxdHlcIl0sIC5qcy1xdHknKTtcbiAgICAgICAgICAgIGlmIChpLnZhbCgpIDw9IDE5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSAraS52YWwoKSArICsxO1xuICAgICAgICAgICAgICAgIGkudmFsKGwpLmNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAvKiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFF1YW50aXR5ICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgKi9cbn0pKCk7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAkKCcjbXctdGVtcGxhdGUtbmV3LXdvcmxkJykucmVtb3ZlQ2xhc3MoJ21vZHVsZScpO1xufSlcblxuLyokKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gJCgnLm5hdmlnYXRpb24gLm1lbnUgLmxpc3QubWVudS1yb290JykuY29sbGFwc2VOYXYoe1xuIHJlc3BvbnNpdmU6IDEsXG4gbW9iaWxlX2JyZWFrOiA5OTIsXG4gbGlfY2xhc3M6ICdoYXMtc3ViLW1lbnUgZHJvcGRvd24nXG4gfSk7XG5cbiBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gOTkxKSB7XG4gJCgnLm5hdmlnYXRpb24gLm1lbnUgLmxpc3QubWVudS1yb290IC5oYXMtc3ViLW1lbnUgYS5kcm9wZG93bi10b2dnbGUnKS5hdHRyKCdocmVmJywgJ2phdmFzY3JpcHQ6OycpO1xuICQoJy5uYXZpZ2F0aW9uIC5tZW51IC5saXN0Lm1lbnUtcm9vdCAuaGFzLXN1Yi1tZW51Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAvLyBlLnByZXZlbnREZWZhdWx0KCk7XG4gfSlcbiB9XG4gfSkqL1xuXG4vKiBBamF4IExvYWRpbmcgKi9cbiQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdwYWdlLWxvYWRlZCcpO1xuICAgIH0sIDkwMCk7XG59KVxuXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAkKCcuanMtc2hvdy1wb3N0cycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID49IDk5Mikge1xuICAgICAgICAgICAgaWYgKCQoJy5qcy1wb3N0cy1tZW51JykuaGFzQ2xhc3MoJ29wZW5lZCcpKSB7XG4gICAgICAgICAgICAgICAgJCgnLmpzLXBvc3RzLW1lbnUnKS5zbGlkZVVwKCdzbG93Jyk7XG4gICAgICAgICAgICAgICAgJCgnLmpzLXBvc3RzLW1lbnUnKS5yZW1vdmVDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5qcy1wb3N0cy1tZW51Jykuc2xpZGVEb3duKCdzbG93Jyk7XG4gICAgICAgICAgICAgICAgJCgnLmpzLXBvc3RzLW1lbnUnKS5hZGRDbGFzcygnb3BlbmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoJCgnLmpzLXBvc3RzLW1lbnUnKS5oYXNDbGFzcygnb3BlbmVkJykpIHtcbiAgICAgICAgICAgICAgICAkKCcuanMtcG9zdHMtbWVudScpLmhpZGUoXCJzbGlkZVwiLCB7ZGlyZWN0aW9uOiBcInJpZ2h0XCJ9LCA1MDApO1xuICAgICAgICAgICAgICAgICQoJy5qcy1wb3N0cy1tZW51JykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuanMtcG9zdHMtbWVudScpLnNob3coXCJzbGlkZVwiLCB7ZGlyZWN0aW9uOiBcInJpZ2h0XCJ9LCA1MDApO1xuICAgICAgICAgICAgICAgICQoJy5qcy1wb3N0cy1tZW51JykuYWRkQ2xhc3MoJ29wZW5lZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59KVxuXG5cbmZ1bmN0aW9uIHBlcmNlbnQobnVtX2Ftb3VudCwgbnVtX3RvdGFsKSB7XG4gICAgaWYgKG51bV9hbW91bnQgPT0gMCB8fCBudW1fdG90YWwgPT0gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgdmFyIGNvdW50MSA9IG51bV9hbW91bnQgLyBudW1fdG90YWw7XG4gICAgdmFyIGNvdW50MiA9IGNvdW50MSAqIDEwMDtcblxuICAgIGNvdW50ID0gY291bnQyO1xuXG4gICAgcmV0dXJuIGNvdW50O1xufVxuXG5cbmZ1bmN0aW9uIHNldFBhZGRpbmdUb1NlY3Rpb25zKCkge1xuICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk5MSkge1xuICAgICAgICB2YXIgaGVhZGVyV2lkdGggPSAkKCcubmF2aWdhdGlvbi1ob2xkZXInKS53aWR0aCgpO1xuICAgICAgICB2YXIgaGVhZGVyQ29udGFpbmVyV2lkdGggPSAkKCcubmF2aWdhdGlvbi1ob2xkZXIgLm5hdmlnYXRpb24gLmNvbnRhaW5lcicpLndpZHRoKCk7XG4gICAgICAgIHZhciBoZWFkZXJDb250YWluZXJGbHVpZFdpZHRoID0gJCgnLmNvbnRhaW5lci1mbHVpZCcpLndpZHRoKCk7XG5cbiAgICAgICAgdmFyIG9uZUZsdWlkQ29sdW1uID0gaGVhZGVyQ29udGFpbmVyRmx1aWRXaWR0aCAvIDEyO1xuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiAxMTk5KSB7XG4gICAgICAgICAgICAvLyBvbmVGbHVpZENvbHVtbiA9IGhlYWRlckNvbnRhaW5lckZsdWlkV2lkdGggLyAxMjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvbmVDb2x1bW4gPSAwO1xuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiAxMTk5KSB7XG4gICAgICAgICAgICBvbmVDb2x1bW4gPSBoZWFkZXJDb250YWluZXJXaWR0aCAvIDEyO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnLmhvbWUtc2xpZGVyIC5jb250YWluZXIuaW5mby1ob2xkZXInKS5jc3MoeydwYWRkaW5nLWxlZnQnOiBvbmVDb2x1bW4gKyAncHgnLCAncGFkZGluZy1yaWdodCc6IG9uZUNvbHVtbiArICdweCd9KTtcbiAgICAgICAgJCgnLmhvbWUtc2xpZGVyIC5ieC1jb250cm9scy1kaXJlY3Rpb24nKS5jc3Moeyd3aWR0aCc6IGhlYWRlckNvbnRhaW5lcldpZHRoICsgJ3B4J30pO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgICAgJCgnLmhvbWUtc2xpZGVyIC5jb250YWluZXIuaW5mby1ob2xkZXInKS5jc3MoeydwYWRkaW5nLWxlZnQnOiAnNDBweCcsICdwYWRkaW5nLXJpZ2h0JzogJzQwcHgnfSk7XG4gICAgICAgICQoJy5ob21lLXNsaWRlciAuYngtY29udHJvbHMtZGlyZWN0aW9uJykuY3NzKHsnd2lkdGgnOiBoZWFkZXJDb250YWluZXJXaWR0aCArICdweCd9KTtcbiAgICB9XG5cbiAgICBpZiAoJCgnaHRtbCcpLmF0dHIoJ2RpcicpID09ICdydGwnKSB7XG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA+IDk5MSkge1xuICAgICAgICAgICAgJCgnLnNlY3Rpb24tMTYnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVmdFNpZGUgPSAkKHRoaXMpLmZpbmQoJy5sZWZ0LXNpZGUnKTtcbiAgICAgICAgICAgICAgICBsZWZ0U2lkZS5jc3MoeydwYWRkaW5nLXJpZ2h0JzogKChoZWFkZXJXaWR0aCAtIGhlYWRlckNvbnRhaW5lcldpZHRoICkgLyAyKSArIDEwICsgb25lQ29sdW1uICsgJ3B4J30pO1xuICAgICAgICAgICAgICAgIGxlZnRTaWRlLmZpbmQoJy5pbmZvLWhvbGRlcicpLmNzcyh7J21hcmdpbi1sZWZ0JzogJy0nICsgb25lRmx1aWRDb2x1bW4gKyAncHgnfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAkKCcuc2VjdGlvbi0xNycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciByaWdodFNpZGUgPSAkKHRoaXMpLmZpbmQoJy5yaWdodC1zaWRlJyk7XG4gICAgICAgICAgICAgICAgcmlnaHRTaWRlLmNzcyh7J3BhZGRpbmctbGVmdCc6ICgoaGVhZGVyV2lkdGggLSBoZWFkZXJDb250YWluZXJXaWR0aCApIC8gMikgKyAxMCArIG9uZUNvbHVtbiArICdweCd9KTtcbiAgICAgICAgICAgICAgICByaWdodFNpZGUuZmluZCgnLmluZm8taG9sZGVyJykuY3NzKHsnbWFyZ2luLXJpZ2h0JzogJy0nICsgb25lRmx1aWRDb2x1bW4gKyAncHgnfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLnNlY3Rpb24tMTYnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVmdFNpZGUgPSAkKHRoaXMpLmZpbmQoJy5sZWZ0LXNpZGUnKTtcbiAgICAgICAgICAgICAgICBsZWZ0U2lkZS5jc3MoeydwYWRkaW5nLXJpZ2h0JzogJyd9KTtcbiAgICAgICAgICAgICAgICBsZWZ0U2lkZS5maW5kKCcuaW5mby1ob2xkZXInKS5jc3MoeydtYXJnaW4tbGVmdCc6ICcnfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAkKCcuc2VjdGlvbi0xNycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciByaWdodFNpZGUgPSAkKHRoaXMpLmZpbmQoJy5yaWdodC1zaWRlJyk7XG4gICAgICAgICAgICAgICAgcmlnaHRTaWRlLmNzcyh7J3BhZGRpbmctbGVmdCc6ICcnfSk7XG4gICAgICAgICAgICAgICAgcmlnaHRTaWRlLmZpbmQoJy5pbmZvLWhvbGRlcicpLmNzcyh7J21hcmdpbi1yaWdodCc6ICcnfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gOTkxKSB7XG4gICAgICAgICAgICAkKCcuc2VjdGlvbi0xNicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBsZWZ0U2lkZSA9ICQodGhpcykuZmluZCgnLmxlZnQtc2lkZScpO1xuICAgICAgICAgICAgICAgIGxlZnRTaWRlLmNzcyh7J3BhZGRpbmctbGVmdCc6ICgoaGVhZGVyV2lkdGggLSBoZWFkZXJDb250YWluZXJXaWR0aCApIC8gMikgKyAxMCArIG9uZUNvbHVtbiArICdweCd9KTtcbiAgICAgICAgICAgICAgICBsZWZ0U2lkZS5maW5kKCcuaW5mby1ob2xkZXInKS5jc3MoeydtYXJnaW4tcmlnaHQnOiAnLScgKyBvbmVGbHVpZENvbHVtbiArICdweCd9KTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICQoJy5zZWN0aW9uLTE3JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJpZ2h0U2lkZSA9ICQodGhpcykuZmluZCgnLnJpZ2h0LXNpZGUnKTtcbiAgICAgICAgICAgICAgICByaWdodFNpZGUuY3NzKHsncGFkZGluZy1yaWdodCc6ICgoaGVhZGVyV2lkdGggLSBoZWFkZXJDb250YWluZXJXaWR0aCApIC8gMikgKyAxMCArIG9uZUNvbHVtbiArICdweCd9KTtcbiAgICAgICAgICAgICAgICByaWdodFNpZGUuZmluZCgnLmluZm8taG9sZGVyJykuY3NzKHsnbWFyZ2luLWxlZnQnOiAnLScgKyBvbmVGbHVpZENvbHVtbiArICdweCd9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcuc2VjdGlvbi0xNicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBsZWZ0U2lkZSA9ICQodGhpcykuZmluZCgnLmxlZnQtc2lkZScpO1xuICAgICAgICAgICAgICAgIGxlZnRTaWRlLmNzcyh7J3BhZGRpbmctbGVmdCc6ICcnfSk7XG4gICAgICAgICAgICAgICAgbGVmdFNpZGUuZmluZCgnLmluZm8taG9sZGVyJykuY3NzKHsnbWFyZ2luLXJpZ2h0JzogJyd9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAkKCcuc2VjdGlvbi0xNycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciByaWdodFNpZGUgPSAkKHRoaXMpLmZpbmQoJy5yaWdodC1zaWRlJyk7XG4gICAgICAgICAgICAgICAgcmlnaHRTaWRlLmNzcyh7J3BhZGRpbmctcmlnaHQnOiAnJ30pO1xuICAgICAgICAgICAgICAgIHJpZ2h0U2lkZS5maW5kKCcuaW5mby1ob2xkZXInKS5jc3MoeydtYXJnaW4tbGVmdCc6ICcnfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIHNldFBhZGRpbmdUb1NlY3Rpb25zKCk7XG59KTtcblxuJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgc2V0UGFkZGluZ1RvU2VjdGlvbnMoKTtcbn0pO1xuXG5cbi8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgTWFzb25yeSBHYWxsZXJ5IHdpdGggTWFnbmlmaWMgUG9wdXAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAqL1xuZnVuY3Rpb24gaXN0b3RvcGVGaWx0ZXIoKSB7XG4gICAgdmFyIGZpbHRlclZhbHVlID0gJy5tYXNvbnJ5LWhvbGRlcic7XG5cbiAgICAkKCcubWFzb25yeS10ZWFtIC5qcy1tYXNvbnJ5LWdyaWQtd29ya3MtZmlsdGVyIC5saXN0LW1hc29ucnktZ3JpZC13b3Jrcy1maWx0ZXJfX2l0ZW0gYS5saXN0LW1hc29ucnktZ3JpZC13b3Jrcy1maWx0ZXJfX2xpbmtfYWN0aXZlJykuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgZmlsdGVyVmFsdWUgPSBmaWx0ZXJWYWx1ZSArICcsICcgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtZmlsdGVyJyk7XG4gICAgfSk7XG5cbiAgICBpZiAoZmlsdGVyVmFsdWUgPT0gJy5tYXNvbnJ5LWhvbGRlcicpIHtcbiAgICAgICAgJCgnLmpzLW1hc29ucnktZ3JpZC13b3Jrcy1maWx0ZXIgbGk6Zmlyc3Qtb2YtdHlwZSBhJykuYWRkQ2xhc3MoJ2J0bi1wcmltYXJ5IGxpc3QtbWFzb25yeS1ncmlkLXdvcmtzLWZpbHRlcl9fbGlua19hY3RpdmUnKTtcbiAgICAgICAgJCgnLmpzLW1hc29ucnktZ3JpZC13b3Jrcy1maWx0ZXIgbGk6Zmlyc3Qtb2YtdHlwZSBhJykucmVtb3ZlQ2xhc3MoJ2J0bi1vdXRsaW5lLXByaW1hcnkgc2hhZG93LW1kJyk7XG4gICAgICAgIGZpbHRlclZhbHVlID0gJyonO1xuICAgIH1cblxuICAgIG1hc29ucnlHcmlkLmlzb3RvcGUoe1xuICAgICAgICBmaWx0ZXI6IGZpbHRlclZhbHVlXG4gICAgfSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhmaWx0ZXJWYWx1ZSk7XG59XG5cblxudmFyIG1hc29ucnlHcmlkID0gJCgnLm1hc29ucnktdGVhbSAuanMtbWFzb25yeS1ncmlkLXdvcmtzJyk7XG5cblxuJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgIC8vIG1hc29ucnkgZ3JpZFxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBtYXNvbnJ5R3JpZC5tYXNvbnJ5KHtcbiAgICAgICAgICAgIGl0ZW1TZWxlY3RvcjogJy5qcy1tYXNvbnJ5LWdyaWQtd29ya3NfX2l0ZW0nLFxuICAgICAgICAgICAgY29sdW1uV2lkdGg6ICcuanMtbWFzb25yeS1ncmlkLXdvcmtzX19zaXplcicsXG4gICAgICAgICAgICBwZXJjZW50UG9zaXRpb246IHRydWVcbiAgICAgICAgfSkuaXNvdG9wZSgpO1xuICAgIH0sIDEwKTtcbn0pO1xuXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBpc290b3BlIGZpbHRlcmluZyBwYW5lbFxuICAgICQoJy5tYXNvbnJ5LXRlYW0gLmpzLW1hc29ucnktZ3JpZC13b3Jrcy1maWx0ZXInKS5vbignY2xpY2snLCAnYTpub3QoLmFsbCknLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgJCgnYm9keScpLmZpbmQoJ2EuYWxsJykucmVtb3ZlQ2xhc3MoJ2J0bi1wcmltYXJ5IGxpc3QtbWFzb25yeS1ncmlkLXdvcmtzLWZpbHRlcl9fbGlua19hY3RpdmUnKTtcbiAgICAgICAgJCgnYm9keScpLmZpbmQoJ2EuYWxsJykuYWRkQ2xhc3MoJ2J0bi1vdXRsaW5lLXByaW1hcnkgc2hhZG93LW1kJyk7XG5cbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYnRuLXByaW1hcnkgbGlzdC1tYXNvbnJ5LWdyaWQtd29ya3MtZmlsdGVyX19saW5rX2FjdGl2ZScpO1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdidG4tb3V0bGluZS1wcmltYXJ5IHNoYWRvdy1tZCcpO1xuXG4gICAgICAgIGlzdG90b3BlRmlsdGVyKCk7XG4gICAgfSk7XG5cbiAgICAkKCcubWFzb25yeS10ZWFtIC5qcy1tYXNvbnJ5LWdyaWQtd29ya3MtZmlsdGVyJykub24oJ2NsaWNrJywgJ2EubGlzdC1tYXNvbnJ5LWdyaWQtd29ya3MtZmlsdGVyX19saW5rX2FjdGl2ZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdidG4tcHJpbWFyeSBsaXN0LW1hc29ucnktZ3JpZC13b3Jrcy1maWx0ZXJfX2xpbmtfYWN0aXZlJyk7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2J0bi1vdXRsaW5lLXByaW1hcnkgc2hhZG93LW1kJyk7XG5cbiAgICAgICAgaXN0b3RvcGVGaWx0ZXIoKTtcbiAgICB9KTtcblxuXG4gICAgJCgnLm1hc29ucnktdGVhbSAuanMtbWFzb25yeS1ncmlkLXdvcmtzLWZpbHRlcicpLm9uKCdjbGljaycsICdhLmFsbCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAkKCcubWFzb25yeS10ZWFtIC5qcy1tYXNvbnJ5LWdyaWQtd29ya3MtZmlsdGVyIC5saXN0LW1hc29ucnktZ3JpZC13b3Jrcy1maWx0ZXJfX2l0ZW0gYS5saXN0LW1hc29ucnktZ3JpZC13b3Jrcy1maWx0ZXJfX2xpbmtfYWN0aXZlJykuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2J0bi1wcmltYXJ5IGxpc3QtbWFzb25yeS1ncmlkLXdvcmtzLWZpbHRlcl9fbGlua19hY3RpdmUnKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2J0bi1vdXRsaW5lLXByaW1hcnkgc2hhZG93LW1kJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2J0bi1vdXRsaW5lLXByaW1hcnkgc2hhZG93LW1kJyk7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2J0bi1wcmltYXJ5IGxpc3QtbWFzb25yeS1ncmlkLXdvcmtzLWZpbHRlcl9fbGlua19hY3RpdmUnKTtcblxuICAgICAgICBpc3RvdG9wZUZpbHRlcigpO1xuICAgIH0pO1xufSk7XG4vKiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIE1hc29ucnkgR2FsbGVyeSB3aXRoIE1hZ25pZmljIFBvcHVwICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgKi9cblxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCEkKCdib2R5JykuaGFzQ2xhc3MoJ213LWxpdmUtZWRpdCcpKSB7XG4gICAgICAgIC8vIEFPUy5pbml0KCk7XG4gICAgfVxufSlcblxuXG4vKiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIEVsZXZhdGUgWm9vbSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgZWxldmF0ZVpvb21UdXJuT24gPSAkKGRvY3VtZW50KS53aWR0aCgpID4gOTkxID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgaWYgKGVsZXZhdGVab29tVHVybk9uKSB7XG4gICAgICAgICQoXCIjZWxldmF0ZXpvb21cIikuZWxldmF0ZVpvb20oe1xuICAgICAgICAgICAgZ2FsbGVyeTogJ2VsZXZhdGV6b29tLWdhbGxlcnknLFxuICAgICAgICAgICAgY3Vyc29yOiBcImNyb3NzaGFpclwiLFxuICAgICAgICAgICAgZ2FsbGVyeUFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcbiAgICAgICAgICAgIGltYWdlQ3Jvc3NmYWRlOiB0cnVlLFxuICAgICAgICAgICAgem9vbVR5cGU6IFwiaW5uZXJcIlxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vcGFzcyB0aGUgaW1hZ2VzIHRvIEZhbmN5Ym94XG4gICAgICAgICQoXCIjZWxldmF0ZXpvb21cIikuYmluZChcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZXogPSAkKCcjZWxldmF0ZXpvb20nKS5kYXRhKCdlbGV2YXRlWm9vbScpO1xuXG4gICAgICAgICAgICB2YXIgcmVzID0gW107XG4gICAgICAgICAgICAkLmVhY2goZXouZ2V0R2FsbGVyeUxpc3QoKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKHtzcmM6IHRoaXMuaHJlZn0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJC5tYWduaWZpY1BvcHVwLm9wZW4oe1xuICAgICAgICAgICAgICAgIGl0ZW1zOiByZXMsXG4gICAgICAgICAgICAgICAgZ2FsbGVyeToge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgZUdhbGxlcnkgPSAkKCcjZWxldmF0ZXpvb20tZ2FsbGVyeScpO1xuICAgIGlmIChlR2FsbGVyeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGVHYWxsZXJ5LmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gJCh0aGlzKTtcbiAgICAgICAgICAgIGVsLnNsaWNrKHtcbiAgICAgICAgICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNlbnRlclBhZGRpbmc6ICcwJyxcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDUsXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgYXJyb3dzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhdXRvcGxheVNwZWVkOiAyMDAwLFxuICAgICAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGluZmluaXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY3LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59KTtcbi8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgRWxldmF0ZSBab29tICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgKi9cblxuXG5cbi8qICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgTmF2aWdhdGlvbiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICovXG5cbi8vIFNpZGViYXIgbmF2aWdhdGlvbiBtZW51XG5mdW5jdGlvbiBzaWRiYXJOYXYoKSB7XG4gICAgaWYgKCQoJy5uYXZpZ2F0aW9uJykuaGFzQ2xhc3MoJ2pzLXNpZGViYXItbmF2JykpIHtcblxuICAgICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ3NpZGViYXItbmF2LXdlYnNpdGUnKTtcbiAgICAgICAgdmFyIHNpZGViYXJOYXZFbGVtT2ZzZXQgPSAkKCdodG1sLnNpZGViYXItbmF2LXdlYnNpdGUgYm9keS5zdGlja3ktbmF2IC5uYXZpZ2F0aW9uIC5tZW51LW92ZXJsYXknKTtcbiAgICAgICAgdmFyIG5hdkhlaWdodCA9ICQoJy5uYXZpZ2F0aW9uJykub3V0ZXJIZWlnaHQoKTtcblxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA3NjgpIHtcbiAgICAgICAgICAgICQoc2lkZWJhck5hdkVsZW1PZnNldCkuY3NzKHsnbWFyZ2luLXRvcCc6IG5hdkhlaWdodCArICdweCd9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoc2lkZWJhck5hdkVsZW1PZnNldCkuY3NzKHsnbWFyZ2luLXRvcCc6ICcnfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiAxMzY2KSB7XG4gICAgICAgICAgICAkKCcuc2lkZWJhci1uYXYtd2Vic2l0ZSAudG9nZ2xlIGEnKS5hZGRDbGFzcygnYmxvY2tlZC10b2dnbGUnKTtcbiAgICAgICAgICAgICQoJy5zaWRlYmFyLW5hdi13ZWJzaXRlIC50b2dnbGUgYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKCcuc2lkZWJhci1uYXYtd2Vic2l0ZSAuc2xpY2stc2xpZGVyJykuc2xpY2soJ3JlZnJlc2gnKS5zbGljaygnc2V0UG9zaXRpb24nKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcuc2lkZWJhci1uYXYtd2Vic2l0ZSAudG9nZ2xlIGEnKS5yZW1vdmVDbGFzcygnYmxvY2tlZC10b2dnbGUnKTtcblxuICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VyciA9ICQoZXYudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBpZiAoY3Vyci5wYXJlbnRzKCcubWVudS1vdmVybGF5LC50b2dnbGUnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnaHRtbC5zaWRlYmFyLW5hdi13ZWJzaXRlJykucmVtb3ZlQ2xhc3MoJ21vYmlsZS1tZW51LWFjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCdodG1sLnNpZGViYXItbmF2LXdlYnNpdGUgLnRvZ2dsZSBhJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAkKCdodG1sLnNpZGViYXItbmF2LXdlYnNpdGUgLm5hdmlnYXRpb24gLm1lbnUnKS5yZW1vdmVDbGFzcygnbWFpbi1tZW51LW9wZW4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfVxufVxuXG4vKlxuIGlmICghQ29va2llcy5nZXQoJ3NpZGViYXItbmF2LXN0YXRlJykpIHtcbiBDb29raWVzLnNldCgnc2lkZWJhci1uYXYtc3RhdGUnLCAnb3BlbicpO1xuIH1cbiAqL1xuXG5mdW5jdGlvbiBzaWRiYXJOYXZFdmVudCgpIHtcbiAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiAxMzY2cHgpXCIpLm1hdGNoZXMpIHtcbiAgICAgICAgaWYgKCQoJ2h0bWwnKS5oYXNDbGFzcygnc2lkZWJhci1uYXYtd2Vic2l0ZScpKSB7XG4gICAgICAgICAgICAvLyQoJ2h0bWwnKS5hZGRDbGFzcygnbW9iaWxlLW1lbnUtYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuc2lkZWJhci1uYXYtd2Vic2l0ZSAuanMtbWVudS10b2dnbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoJ2h0bWwnKS5oYXNDbGFzcygnbW9iaWxlLW1lbnUtYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgQ29va2llcy5zZXQoJ3NpZGViYXItbmF2LXN0YXRlJywgJ29wZW4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBDb29raWVzLnNldCgnc2lkZWJhci1uYXYtc3RhdGUnLCAnY2xvc2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKENvb2tpZXMuZ2V0KCdzaWRlYmFyLW5hdi1zdGF0ZScpID09ICdvcGVuJykge1xuICAgICAgICAgICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnbW9iaWxlLW1lbnUtYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnbW9iaWxlLW1lbnUtYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoJCgnaHRtbCcpLmhhc0NsYXNzKCdzaWRlYmFyLW5hdi13ZWJzaXRlJykpIHtcbiAgICAgICAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnbW9iaWxlLW1lbnUtYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQoJy5zaWRlYmFyLW5hdi13ZWJzaXRlIC50b2dnbGUgYScpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgJCgnLnNpZGViYXItbmF2LXdlYnNpdGUgLnRvZ2dsZSBhJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG5cbiAgICB9XG59XG5cblxuLy8gU2hvcHBpbmcgY2FydFxuJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5kcm9wZG93bi1tZW51LnNob3BwaW5nLWNhcnQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoJChldmVudC50YXJnZXQubm9kZU5hbWUgIT09ICdBJykpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxufSk7XG5cblxuLy9HZW5lcmFsIGZvciBhbGwgaGVhZGVyIG1lbnVcbmlmICgkKCcuZHJvcGRvd24tbWVudSBsaScpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgIHZhciAkdGhpcyA9ICQoJy5kcm9wZG93bi1tZW51IGxpLmFjdGl2ZScpO1xuICAgICQoJHRoaXMpLmNsb3Nlc3QoJy5kcm9wZG93bicpLmFkZENsYXNzKCdhY3RpdmUnKTtcbn1cblxuJChcIi5uYXZpZ2F0aW9uIC5tZW51IGxpLCAubmF2aWdhdGlvbiAuc2Vjb25kYXJ5LW1lbnUgbGlcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQodGhpcy5jaGlsZHJlbikuZmlsdGVyKCd1bCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaGFzLXN1Yi1tZW51Jyk7XG4gICAgfVxufSk7XG5cbi8vIE1haW4gbWVudVxuXG4kKGRvY3VtZW50LmJvZHkpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGN1cnIgPSAkKGUudGFyZ2V0KTtcbiAgICBpZiAoY3Vyci5wYXJlbnRzKCcubWVudS1vdmVybGF5LC50b2dnbGUnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgJCgnaHRtbDpub3QoLnNpZGViYXItbmF2LXdlYnNpdGUpJykucmVtb3ZlQ2xhc3MoJ21vYmlsZS1tZW51LWFjdGl2ZScpO1xuICAgICAgICAkKCdodG1sOm5vdCguc2lkZWJhci1uYXYtd2Vic2l0ZSkgLmpzLW1lbnUtdG9nZ2xlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCdodG1sOm5vdCguc2lkZWJhci1uYXYtd2Vic2l0ZSkgYm9keScpLnJlbW92ZUNsYXNzKCdsb2NrLXNjcm9sbCcpO1xuICAgICAgICAkKCdodG1sOm5vdCguc2lkZWJhci1uYXYtd2Vic2l0ZSkgLm5hdmlnYXRpb24gLm1lbnUnKS5yZW1vdmVDbGFzcygnbWFpbi1tZW51LW9wZW4nKTtcbiAgICB9XG59KTtcblxuJCgnLmpzLW1lbnUtdG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGlmICgkKCdodG1sJykuaGFzQ2xhc3MoJ21vYmlsZS1tZW51LWFjdGl2ZScpKSB7XG4gICAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnbW9iaWxlLW1lbnUtYWN0aXZlJyk7XG4gICAgICAgICQoJ2h0bWw6bm90KC5zaWRlYmFyLW5hdi13ZWJzaXRlKSBib2R5JykucmVtb3ZlQ2xhc3MoJ2xvY2stc2Nyb2xsJyk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ21vYmlsZS1tZW51LWFjdGl2ZScpO1xuICAgICAgICAkKCdodG1sOm5vdCguc2lkZWJhci1uYXYtd2Vic2l0ZSkgYm9keScpLmFkZENsYXNzKCdsb2NrLXNjcm9sbCcpO1xuICAgIH1cblxuICAgIGlmICgkKCcuanMtbWVudS10b2dnbGUnKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgJCgnLmpzLW1lbnUtdG9nZ2xlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICQoJy5qcy1tZW51LXRvZ2dsZScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9XG5cbiAgICAkKCcubmF2aWdhdGlvbiAuc2Vjb25kYXJ5LW1lbnUnKS5yZW1vdmVDbGFzcygnc2Vjb25kYXJ5LW1lbnUtb3BlbicpO1xuICAgICQoJy5qcy1leHRyYS1tZW51LXRvZ2dsZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2xvY2stc2Nyb2xsLWV4dHJhLW1lbnUnKTtcbn0pO1xuXG4kKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIFwiLm1lbnUgLm1vZHVsZS1tZW51IC5oYXMtc3ViLW1lbnUgPiBhXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHBhcmVudCA9ICQodGhpcykucGFyZW50KCk7XG4gICAgdmFyIHVsID0gcGFyZW50LmNoaWxkcmVuKCd1bCcpO1xuICAgIC8vY29uc29sZS5sb2coJCgnLm1vYmlsZS1tZW51LWFjdGl2ZScpLmxlbmd0aCA+IDApO1xuICAgIGlmICh1bC5sZW5ndGggPT09IDEgJiYgJCgnLm1vYmlsZS1tZW51LWFjdGl2ZScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoJ3N1Ym1lbnUtZXhwYW5kZWQnKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUtaWNvbicpO1xuICAgICAgICB1bC5zbGlkZVRvZ2dsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdHlsZS5kaXNwbGF5ID09ICdub25lJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLy8gT25seSBmb3IgTWFpbiBtZW51IG1vYmlsZSBtZW1iZXIgbmF2XG4kKFwiLm1lbnUgLm1vYmlsZS1wcm9maWxlLmhhcy1zdWItbWVudSA+IGFcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBwYXJlbnQgPSAkKHRoaXMpLnBhcmVudCgpO1xuICAgIHZhciB1bCA9IHBhcmVudC5jaGlsZHJlbigndWwnKTtcbiAgICBjb25zb2xlLmxvZygkKCcubW9iaWxlLW1lbnUtYWN0aXZlJykubGVuZ3RoID4gMCk7XG4gICAgaWYgKHVsLmxlbmd0aCA9PT0gMSAmJiAkKCcubW9iaWxlLW1lbnUtYWN0aXZlJykubGVuZ3RoID4gMCkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHVsLnNsaWRlVG9nZ2xlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5cbi8vIFNpZGViYXIgbmF2aWdhdGlvbiBtZW51XG5zaWRiYXJOYXYoKTtcbnNpZGJhck5hdkV2ZW50KCk7XG4kKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICBzaWRiYXJOYXYoKTtcbn0pO1xuXG5cbi8vIFNlY29uZCBtZW51XG4kKGRvY3VtZW50LmJvZHkpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGN1cnIgPSAkKGUudGFyZ2V0KTtcbiAgICBpZiAoY3Vyci5wYXJlbnRzKCcuc2Vjb25kYXJ5LW1lbnUsLmV4dHJhLXRvZ2dsZScpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAkKCdodG1sJykucmVtb3ZlQ2xhc3MoJ21vYmlsZS1leHRyYS1tZW51LWFjdGl2ZScpO1xuICAgICAgICAkKCcubmF2aWdhdGlvbiAuc2Vjb25kYXJ5LW1lbnUnKS5yZW1vdmVDbGFzcygnc2Vjb25kYXJ5LW1lbnUtb3BlbicpO1xuICAgICAgICAkKCcuanMtZXh0cmEtbWVudS10b2dnbGUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbG9jay1zY3JvbGwtZXh0cmEtbWVudScpO1xuICAgIH1cbn0pO1xuXG4kKCcuanMtZXh0cmEtbWVudS10b2dnbGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJCgnaHRtbCcpLnRvZ2dsZUNsYXNzKCdtb2JpbGUtZXh0cmEtbWVudS1hY3RpdmUnKTtcbiAgICAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ2xvY2stc2Nyb2xsLWV4dHJhLW1lbnUnKTtcblxuICAgIGlmICgkKCdodG1sJykuaGFzQ2xhc3MoJ21vYmlsZS1leHRyYS1tZW51LWFjdGl2ZScpKSB7XG4gICAgICAgICQoJy5qcy1leHRyYS1tZW51LXRvZ2dsZScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCgnLm5hdmlnYXRpb24gLnNlY29uZGFyeS1tZW51JykuYWRkQ2xhc3MoJ3NlY29uZGFyeS1tZW51LW9wZW4nKTtcbiAgICAgICAgJCgnLm5hdmlnYXRpb24gLm1lbnUnKS5yZW1vdmVDbGFzcygnbWFpbi1tZW51LW9wZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKCcubmF2aWdhdGlvbiAuc2Vjb25kYXJ5LW1lbnUnKS5yZW1vdmVDbGFzcygnc2Vjb25kYXJ5LW1lbnUtb3BlbicpO1xuICAgICAgICAkKCcuanMtZXh0cmEtbWVudS10b2dnbGUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgfVxuICAgICQoJy5qcy1tZW51LXRvZ2dsZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAkKCcuZHJvcGRvd24nKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgICQoJy5kcm9wZG93bi1tZW51JykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2xvY2stc2Nyb2xsJyk7XG59KTtcblxuJChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcIi5zZWNvbmRhcnktbWVudSAubW9kdWxlLW1lbnUgLmhhcy1zdWItbWVudSA+IGFcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgcGFyZW50ID0gJCh0aGlzKS5wYXJlbnQoKTtcbiAgICB2YXIgdWwgPSBwYXJlbnQuY2hpbGRyZW4oJ3VsJyk7XG4gICAgLy9jb25zb2xlLmxvZygkKCcubW9iaWxlLWV4dHJhLW1lbnUtYWN0aXZlJykubGVuZ3RoID4gMCk7XG4gICAgaWYgKHVsLmxlbmd0aCA9PT0gMSAmJiAkKCcubW9iaWxlLWV4dHJhLW1lbnUtYWN0aXZlJykubGVuZ3RoID4gMCkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHVsLnNsaWRlVG9nZ2xlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuLy8gT25seSBmb3IgU2Vjb25kYXJ5IG1lbnUgbW9iaWxlIG1lbWJlciBuYXZcbiQoXCIuc2Vjb25kYXJ5LW1lbnUgLm1vYmlsZS1wcm9maWxlLmhhcy1zdWItbWVudSA+IGFcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBwYXJlbnQgPSAkKHRoaXMpLnBhcmVudCgpO1xuICAgIHZhciB1bCA9IHBhcmVudC5jaGlsZHJlbigndWwnKTtcbiAgICBjb25zb2xlLmxvZygkKCcubW9iaWxlLWV4dHJhLW1lbnUtYWN0aXZlJykubGVuZ3RoID4gMCk7XG4gICAgaWYgKHVsLmxlbmd0aCA9PT0gMSAmJiAkKCcubW9iaWxlLWV4dHJhLW1lbnUtYWN0aXZlJykubGVuZ3RoID4gMCkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHVsLnNsaWRlVG9nZ2xlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgJCgnLm5hdmlnYXRpb24gLm1lbnUgLmxpc3QubWVudS1yb290JykuY29sbGFwc2VOYXYoe1xuICAgICAgICByZXNwb25zaXZlOiAxLFxuICAgICAgICBtb2JpbGVfYnJlYWs6IDk5MixcbiAgICAgICAgbGlfY2xhc3M6ICdoYXMtc3ViLW1lbnUgZHJvcGRvd24nXG4gICAgfSk7XG5cbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gOTkxKSB7XG4gICAgICAgICQoJy5uYXZpZ2F0aW9uIC5tZW51IC5saXN0Lm1lbnUtcm9vdCAuaGFzLXN1Yi1tZW51IGEuZHJvcGRvd24tdG9nZ2xlJykuYXR0cignaHJlZicsICdqYXZhc2NyaXB0OjsnKTtcbiAgICAgICAgJCgnLm5hdmlnYXRpb24gLm1lbnUgLmxpc3QubWVudS1yb290IC5oYXMtc3ViLW1lbnUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KVxuICAgIH1cbn0pO1xuXG4kKFwiLmRyb3Bkb3duLmhhcy1zdWItbWVudVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnc2hvdycpO1xufSk7XG5cbi8qXG4kKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmRyb3Bkb3duLmhhcy1zdWItbWVudSA+IGEnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG4qL1xuIl0sImZpbGUiOiJtYWluLmpzIn0=
